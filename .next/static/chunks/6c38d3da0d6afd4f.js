(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67423,(e,t,r)=>{"use strict";function n({widthInt:e,heightInt:t,blurWidth:r,blurHeight:n,blurDataURL:i,objectFit:s}){let a=r?40*r:e,o=n?40*n:t,l=a&&o?`viewBox='0 0 ${a} ${o}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${l}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${l?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${i}'/%3E%3C/svg%3E`}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getImageBlurSvg",{enumerable:!0,get:function(){return n}})},87690,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={VALID_LOADERS:function(){return s},imageConfigDefault:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=["default","imgix","cloudinary","akamai","custom"],a={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},8927,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getImgProps",{enumerable:!0,get:function(){return u}}),e.r(33525);let n=e.r(43369),i=e.r(67423),s=e.r(87690),a=["-moz-initial","fill","none","scale-down",void 0];function o(e){return void 0!==e.default}function l(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function u({src:e,sizes:t,unoptimized:r=!1,priority:u=!1,preload:c=!1,loading:h,className:d,quality:p,width:f,height:m,fill:g=!1,style:y,overrideSrc:v,onLoad:b,onLoadingComplete:x,placeholder:w="empty",blurDataURL:_,fetchPriority:k,decoding:j="async",layout:S,objectFit:E,objectPosition:P,lazyBoundary:T,lazyRoot:C,...A},O){var N;let R,F,D,{imgConf:M,showAltText:I,blurComplete:B,defaultLoader:$}=O,L=M||s.imageConfigDefault;if("allSizes"in L)R=L;else{let e=[...L.deviceSizes,...L.imageSizes].sort((e,t)=>e-t),t=L.deviceSizes.sort((e,t)=>e-t),r=L.qualities?.sort((e,t)=>e-t);R={...L,allSizes:e,deviceSizes:t,qualities:r}}if(void 0===$)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let U=A.loader||$;delete A.loader,delete A.srcSet;let z="__next_img_default"in U;if(z){if("custom"===R.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=U;U=t=>{let{config:r,...n}=t;return e(n)}}if(S){"fill"===S&&(g=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[S];e&&(y={...y,...e});let r={responsive:"100vw",fill:"100vw"}[S];r&&!t&&(t=r)}let V="",K=l(f),q=l(m);if((N=e)&&"object"==typeof N&&(o(N)||void 0!==N.src)){let t=o(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(F=t.blurWidth,D=t.blurHeight,_=_||t.blurDataURL,V=t.src,!g)if(K||q){if(K&&!q){let e=K/t.width;q=Math.round(t.height*e)}else if(!K&&q){let e=q/t.height;K=Math.round(t.width*e)}}else K=t.width,q=t.height}let W=!u&&!c&&("lazy"===h||void 0===h);(!(e="string"==typeof e?e:V)||e.startsWith("data:")||e.startsWith("blob:"))&&(r=!0,W=!1),R.unoptimized&&(r=!0),z&&!R.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(r=!0);let H=l(p),G=Object.assign(g?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:E,objectPosition:P}:{},I?{}:{color:"transparent"},y),Q=B||"empty"===w?null:"blur"===w?`url("data:image/svg+xml;charset=utf-8,${(0,i.getImageBlurSvg)({widthInt:K,heightInt:q,blurWidth:F,blurHeight:D,blurDataURL:_||"",objectFit:G.objectFit})}")`:`url("${w}")`,Y=a.includes(G.objectFit)?"fill"===G.objectFit?"100% 100%":"cover":G.objectFit,J=Q?{backgroundSize:Y,backgroundPosition:G.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:Q}:{},X=function({config:e,src:t,unoptimized:r,width:i,quality:s,sizes:a,loader:o}){if(r){let e=(0,n.getDeploymentId)();if(t.startsWith("/")&&!t.startsWith("//")&&e){let r=t.includes("?")?"&":"?";t=`${t}${r}dpl=${e}`}return{src:t,srcSet:void 0,sizes:void 0}}let{widths:l,kind:u}=function({deviceSizes:e,allSizes:t},r,n){if(n){let r=/(^|\s)(1?\d?\d)vw/g,i=[];for(let e;e=r.exec(n);)i.push(parseInt(e[2]));if(i.length){let r=.01*Math.min(...i);return{widths:t.filter(t=>t>=e[0]*r),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof r?{widths:e,kind:"w"}:{widths:[...new Set([r,2*r].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,i,a),c=l.length-1;return{sizes:a||"w"!==u?a:"100vw",srcSet:l.map((r,n)=>`${o({config:e,src:t,quality:s,width:r})} ${"w"===u?r:n+1}${u}`).join(", "),src:o({config:e,src:t,quality:s,width:l[c]})}}({config:R,src:e,unoptimized:r,width:K,quality:H,sizes:t,loader:U}),Z=W?"lazy":h;return{props:{...A,loading:Z,fetchPriority:k,width:K,height:q,decoding:j,className:d,style:{...G,...J},sizes:X.sizes,srcSet:X.srcSet,src:v||X.src},meta:{unoptimized:r,preload:c||u,placeholder:w,fill:g}}}},98879,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return o}});let n=e.r(71645),i="u"<typeof window,s=i?()=>{}:n.useLayoutEffect,a=i?()=>{}:n.useEffect;function o(e){let{headManager:t,reduceComponentsToState:r}=e;function o(){if(t&&t.mountedInstances){let e=n.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(r(e))}}return i&&(t?.mountedInstances?.add(e.children),o()),s(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),s(()=>(t&&(t._pendingUpdate=o),()=>{t&&(t._pendingUpdate=o)})),a(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},25633,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return m},defaultHead:function(){return h}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(55682),a=e.r(90809),o=e.r(43476),l=a._(e.r(71645)),u=s._(e.r(98879)),c=e.r(42732);function h(){return[(0,o.jsx)("meta",{charSet:"utf-8"},"charset"),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function d(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(33525);let p=["name","httpEquiv","charSet","itemProp"];function f(e){let t,r,n,i;return e.reduce(d,[]).reverse().concat(h().reverse()).filter((t=new Set,r=new Set,n=new Set,i={},e=>{let s=!0,a=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){a=!0;let r=e.key.slice(e.key.indexOf("$")+1);t.has(r)?s=!1:t.add(r)}switch(e.type){case"title":case"base":r.has(e.type)?s=!1:r.add(e.type);break;case"meta":for(let t=0,r=p.length;t<r;t++){let r=p[t];if(e.props.hasOwnProperty(r))if("charSet"===r)n.has(r)?s=!1:n.add(r);else{let t=e.props[r],n=i[r]||new Set;("name"!==r||!a)&&n.has(t)?s=!1:(n.add(t),i[r]=n)}}}return s})).reverse().map((e,t)=>{let r=e.key||t;return l.default.cloneElement(e,{key:r})})}let m=function({children:e}){let t=(0,l.useContext)(c.HeadManagerContext);return(0,o.jsx)(u.default,{reduceComponentsToState:f,headManager:t,children:e})};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18556,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ImageConfigContext",{enumerable:!0,get:function(){return s}});let n=e.r(55682)._(e.r(71645)),i=e.r(87690),s=n.default.createContext(i.imageConfigDefault)},65856,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RouterContext",{enumerable:!0,get:function(){return n}});let n=e.r(55682)._(e.r(71645)).default.createContext(null)},70965,(e,t,r)=>{"use strict";function n(e,t){let r=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e,0):r}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"findClosestQuality",{enumerable:!0,get:function(){return n}})},1948,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let n=e.r(70965),i=e.r(43369);function s({config:e,src:t,width:r,quality:s}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let a=(0,n.findClosestQuality)(s,e),o=(0,i.getDeploymentId)();return`${e.path}?url=${encodeURIComponent(t)}&w=${r}&q=${a}${t.startsWith("/")&&o?`&dpl=${o}`:""}`}s.__next_img_default=!0;let a=s},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return i}});let n=e.r(71645);function i(e,t){let r=(0,n.useRef)(null),i=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=i.current;t&&(i.current=null,t())}else e&&(r.current=s(e,n)),t&&(i.current=s(t,n))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},85437,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return x}});let n=e.r(55682),i=e.r(90809),s=e.r(43476),a=i._(e.r(71645)),o=n._(e.r(74080)),l=n._(e.r(25633)),u=e.r(8927),c=e.r(87690),h=e.r(18556);e.r(33525);let d=e.r(65856),p=n._(e.r(1948)),f=e.r(18581),m={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function g(e,t,r,n,i,s,a){let o=e?.src;e&&e["data-loaded-src"]!==o&&(e["data-loaded-src"]=o,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&i(!0),r?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,i=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>i,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{i=!0,t.stopPropagation()}})}n?.current&&n.current(e)}}))}function y(e){return a.use?{fetchPriority:e}:{fetchpriority:e}}"u"<typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let v=(0,a.forwardRef)(({src:e,srcSet:t,sizes:r,height:n,width:i,decoding:o,className:l,style:u,fetchPriority:c,placeholder:h,loading:d,unoptimized:p,fill:m,onLoadRef:v,onLoadingCompleteRef:b,setBlurComplete:x,setShowAltText:w,sizesInput:_,onLoad:k,onError:j,...S},E)=>{let P=(0,a.useCallback)(e=>{e&&(j&&(e.src=e.src),e.complete&&g(e,h,v,b,x,p,_))},[e,h,v,b,x,j,p,_]),T=(0,f.useMergedRef)(E,P);return(0,s.jsx)("img",{...S,...y(c),loading:d,width:i,height:n,decoding:o,"data-nimg":m?"fill":"1",className:l,style:u,sizes:r,srcSet:t,src:e,ref:T,onLoad:e=>{g(e.currentTarget,h,v,b,x,p,_)},onError:e=>{w(!0),"empty"!==h&&x(!0),j&&j(e)}})});function b({isAppRouter:e,imgAttributes:t}){let r={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...y(t.fetchPriority)};return e&&o.default.preload?(o.default.preload(t.src,r),null):(0,s.jsx)(l.default,{children:(0,s.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...r},"__nimg-"+t.src+t.srcSet+t.sizes)})}let x=(0,a.forwardRef)((e,t)=>{let r=(0,a.useContext)(d.RouterContext),n=(0,a.useContext)(h.ImageConfigContext),i=(0,a.useMemo)(()=>{let e=m||n||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),r=e.deviceSizes.sort((e,t)=>e-t),i=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:r,qualities:i,localPatterns:"u"<typeof window?n?.localPatterns:e.localPatterns}},[n]),{onLoad:o,onLoadingComplete:l}=e,f=(0,a.useRef)(o);(0,a.useEffect)(()=>{f.current=o},[o]);let g=(0,a.useRef)(l);(0,a.useEffect)(()=>{g.current=l},[l]);let[y,x]=(0,a.useState)(!1),[w,_]=(0,a.useState)(!1),{props:k,meta:j}=(0,u.getImgProps)(e,{defaultLoader:p.default,imgConf:i,blurComplete:y,showAltText:w});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{...k,unoptimized:j.unoptimized,placeholder:j.placeholder,fill:j.fill,onLoadRef:f,onLoadingCompleteRef:g,setBlurComplete:x,setShowAltText:_,sizesInput:e.sizes,ref:t}),j.preload?(0,s.jsx)(b,{isAppRouter:!r,imgAttributes:k}):null]})});("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},94909,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return c},getImageProps:function(){return u}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(55682),a=e.r(8927),o=e.r(85437),l=s._(e.r(1948));function u(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let c=o.Image},57688,(e,t,r)=>{t.exports=e.r(94909)},93560,(e,t,r)=>{e.e,t.exports=function(){"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)},r=function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function n(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}var i="u">typeof globalThis?globalThis:"u">typeof self?self:"u">typeof window?window:e.g,s=Object.keys,a=Array.isArray;function o(e,t){return"object"!=typeof t||s(t).forEach(function(r){e[r]=t[r]}),e}"u"<typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,u={}.hasOwnProperty;function c(e,t){return u.call(e,t)}function h(e,t){"function"==typeof t&&(t=t(l(e))),("u"<typeof Reflect?s:Reflect.ownKeys)(t).forEach(function(r){p(e,r,t[r])})}var d=Object.defineProperty;function p(e,t,r,n){d(e,t,o(r&&c(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),p(e.prototype,"constructor",e),{extend:h.bind(null,e.prototype)}}}}var m=Object.getOwnPropertyDescriptor,g=[].slice;function y(e,t,r){return g.call(e,t,r)}function v(e,t){return t(e)}function b(e){if(!e)throw Error("Assertion Failed")}function x(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function w(e,t){if("string"==typeof t&&c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,i=t.length;n<i;++n){var s=w(e,t[n]);r.push(s)}return r}var a=t.indexOf(".");if(-1!==a){var o=e[t.substr(0,a)];return null==o?void 0:w(o,t.substr(a+1))}}function _(e,t,r){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof r&&"length"in r);for(var n=0,i=t.length;n<i;++n)_(e,t[n],r[n])}else{var s,o,l=t.indexOf(".");-1!==l?(s=t.substr(0,l),""===(o=t.substr(l+1))?void 0===r?a(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=r:_(l=(l=e[s])&&c(e,s)?l:e[s]={},o,r)):void 0===r?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function k(e){var t,r={};for(t in e)c(e,t)&&(r[t]=e[t]);return r}var j=[].concat;function S(e){return j.apply([],e)}var E="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(S([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return i[e]}),P=new Set(E.map(function(e){return i[e]})),T=null;function C(e){return T=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var r=T.get(t);if(r)return r;if(a(t)){r=[],T.set(t,r);for(var n=0,i=t.length;n<i;++n)r.push(e(t[n]))}else if(P.has(t.constructor))r=t;else{var s,o=l(t);for(s in r=o===Object.prototype?{}:Object.create(o),T.set(t,r),t)c(t,s)&&(r[s]=e(t[s]))}return r}(e),T=null,e}var A={}.toString;function O(e){return A.call(e).slice(8,-1)}var N="u">typeof Symbol?Symbol.iterator:"@@iterator",R="symbol"==typeof N?function(e){var t;return null!=e&&(t=e[N])&&t.apply(e)}:function(){return null};function F(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var D={};function M(e){var t,r,n,i;if(1==arguments.length){if(a(e))return e.slice();if(this===D&&"string"==typeof e)return[e];if(i=R(e)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(null==e||"number"!=typeof(t=e.length))return[e];for(r=Array(t);t--;)r[t]=e[t];return r}for(t=arguments.length,r=Array(t);t--;)r[t]=arguments[t];return r}var I="u">typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},B=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(B),L={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function U(e,t){this.name=e,this.message=t}function z(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}function V(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=z(e,t)}function K(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=z(e,this.failures)}f(U).from(Error).extend({toString:function(){return this.name+": "+this.message}}),f(V).from(U),f(K).from(U);var q=$.reduce(function(e,t){return e[t]=t+"Error",e},{}),W=$.reduce(function(e,t){var r=t+"Error";function n(e,n){this.name=r,e?"string"==typeof e?(this.message="".concat(e).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=L[t]||r,this.inner=null)}return f(n).from(U),e[t]=n,e},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var H=B.reduce(function(e,t){return e[t+"Error"]=W[t],e},{}),G=$.reduce(function(e,t){return -1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=W[t]),e},{});function Q(){}function Y(e){return e}function J(e,t){return null==e||e===Y?t:function(r){return t(e(r))}}function X(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Z(e,t){return e===Q?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?X(n,this.onsuccess):n),i&&(this.onerror=this.onerror?X(i,this.onerror):i),void 0!==s?s:r}}function ee(e,t){return e===Q?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?X(r,this.onsuccess):r),n&&(this.onerror=this.onerror?X(n,this.onerror):n)}}function et(e,t){return e===Q?t:function(r){var n=e.apply(this,arguments);o(r,n);var i=this.onsuccess,s=this.onerror;return this.onsuccess=null,this.onerror=null,r=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?X(i,this.onsuccess):i),s&&(this.onerror=this.onerror?X(s,this.onerror):s),void 0===n?void 0===r?void 0:r:o(n,r)}}function er(e,t){return e===Q?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function en(e,t){return e===Q?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,i=arguments.length,s=Array(i);i--;)s[i]=arguments[i];return r.then(function(){return t.apply(n,s)})}return t.apply(this,arguments)}}G.ModifyError=V,G.DexieError=U,G.BulkError=K;var ei="u">typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),es={},E="u"<typeof Promise?[]:function(){var e=Promise.resolve();if("u"<typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]}(),B=E[0],$=E[1],E=E[2],$=$&&$.then,ea=B&&B.constructor,eo=!!E,el=function(e,t){eg.push([e,t]),ec&&(queueMicrotask(eE),ec=!1)},eu=!0,ec=!0,eh=[],ed=[],ep=Y,ef={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Q,pgp:!1,env:{},finalize:Q},em=ef,eg=[],ey=0,ev=[];function eb(e){if("object"!=typeof this)throw TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=em;if("function"!=typeof e){if(e!==es)throw TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&e_(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,r){try{r(function(r){if(null===t._state){if(r===t)throw TypeError("A promise cannot be resolved with itself.");var n=t._lib&&eP();r&&"function"==typeof r.then?e(t,function(e,t){r instanceof eb?r._then(e,t):r.then(e,t)}):(t._state=!0,t._value=r,ek(t)),n&&eT()}},e_.bind(null,t))}catch(e){e_(t,e)}}(this,e)}var ex={get:function(){var e=em,t=eM;function r(r,n){var i=this,s=!e.global&&(e!==em||t!==eM),a=s&&!eL(),o=new eb(function(t,o){ej(i,new ew(eW(r,e,s,a),eW(n,e,s,a),t,o,e))});return this._consoleTask&&(o._consoleTask=this._consoleTask),o}return r.prototype=es,r},set:function(e){p(this,"then",e&&e.prototype===es?ex:{get:function(){return e},set:ex.set})}};function ew(e,t,r,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=i}function e_(e,t){var r;ed.push(t),null===e._state&&(r=e._lib&&eP(),t=ep(t),e._state=!1,e._value=t,eh.some(function(t){return t._value===e._value})||eh.push(e),ek(e),r&&eT())}function ek(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)ej(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),0===ey&&(++ey,el(function(){0==--ey&&eC()},[]))}function ej(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ey,el(eS,[r,e,t])}else e._listeners.push(t)}function eS(e,t,r){try{var n,i=t._value;!t._state&&ed.length&&(ed=[]),n=ei&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||-1!==ed.indexOf(i)||function(e){for(var t=eh.length;t;)if(eh[--t]._value===e._value)return eh.splice(t,1)}(t),r.resolve(n)}catch(e){r.reject(e)}finally{0==--ey&&eC(),--r.psd.ref||r.psd.finalize()}}function eE(){eq(ef,function(){eP()&&eT()})}function eP(){var e=eu;return ec=eu=!1,e}function eT(){var e,t,r;do for(;0<eg.length;)for(e=eg,eg=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}while(0<eg.length)ec=eu=!0}function eC(){var e=eh;eh=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=ev.slice(0),r=t.length;r;)t[--r]()}function eA(e){return new eb(es,!1,e)}function eO(e,t){var r=em;return function(){var n=eP(),i=em;try{return eV(r,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{eV(i,!1),n&&eT()}}}h(eb.prototype,{then:ex,_then:function(e,t){ej(this,new ew(null,null,e,t,em))},catch:function(e){if(1==arguments.length)return this.then(null,e);var t=arguments[1];return"function"==typeof e?this.then(null,function(r){return(r instanceof e?t:eA)(r)}):this.then(null,function(r){return(r&&r.name===e?t:eA)(r)})},finally:function(e){return this.then(function(t){return eb.resolve(e()).then(function(){return t})},function(t){return eb.resolve(e()).then(function(){return eA(t)})})},timeout:function(e,t){var r=this;return e<1/0?new eb(function(n,i){var s=setTimeout(function(){return i(new W.Timeout(t))},e);r.then(n,i).finally(clearTimeout.bind(null,s))}):this}}),"u">typeof Symbol&&Symbol.toStringTag&&p(eb.prototype,Symbol.toStringTag,"Dexie.Promise"),ef.env=eK(),h(eb,{all:function(){var e=M.apply(null,arguments).map(eU);return new eb(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach(function(i,s){return eb.resolve(i).then(function(r){e[s]=r,--n||t(e)},r)})})},resolve:function(e){return e instanceof eb?e:e&&"function"==typeof e.then?new eb(function(t,r){e.then(t,r)}):new eb(es,!0,e)},reject:eA,race:function(){var e=M.apply(null,arguments).map(eU);return new eb(function(t,r){e.map(function(e){return eb.resolve(e).then(t,r)})})},PSD:{get:function(){return em},set:function(e){return em=e}},totalEchoes:{get:function(){return eM}},newPSD:eB,usePSD:eq,scheduler:{get:function(){return el},set:function(e){el=e}},rejectionMapper:{get:function(){return ep},set:function(e){ep=e}},follow:function(e,t){return new eb(function(r,n){return eB(function(t,r){var n=em;n.unhandleds=[],n.onunhandled=r,n.finalize=X(function(){var e,n=this;e=function(){0===n.unhandleds.length?t():r(n.unhandleds[0])},ev.push(function t(){e(),ev.splice(ev.indexOf(t),1)}),++ey,el(function(){0==--ey&&eC()},[])},n.finalize),e()},t,r,n)})}}),ea&&(ea.allSettled&&p(eb,"allSettled",function(){var e=M.apply(null,arguments).map(eU);return new eb(function(t){0===e.length&&t([]);var r=e.length,n=Array(r);e.forEach(function(e,i){return eb.resolve(e).then(function(e){return n[i]={status:"fulfilled",value:e}},function(e){return n[i]={status:"rejected",reason:e}}).then(function(){return--r||t(n)})})})}),ea.any&&"u">typeof AggregateError&&p(eb,"any",function(){var e=M.apply(null,arguments).map(eU);return new eb(function(t,r){0===e.length&&r(AggregateError([]));var n=e.length,i=Array(n);e.forEach(function(e,s){return eb.resolve(e).then(function(e){return t(e)},function(e){i[s]=e,--n||r(AggregateError(i))})})})}),ea.withResolvers&&(eb.withResolvers=ea.withResolvers));var eN={awaits:0,echoes:0,id:0},eR=0,eF=[],eD=0,eM=0,eI=0;function eB(e,t,r,n){var i=em,s=Object.create(i);return s.parent=i,s.ref=0,s.global=!1,s.id=++eI,ef.env,s.env=eo?{Promise:eb,PromiseProp:{value:eb,configurable:!0,writable:!0},all:eb.all,race:eb.race,allSettled:eb.allSettled,any:eb.any,resolve:eb.resolve,reject:eb.reject}:{},t&&o(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()},n=eq(s,e,r,n),0===s.ref&&s.finalize(),n}function e$(){return eN.id||(eN.id=++eR),++eN.awaits,eN.echoes+=100,eN.id}function eL(){return!!eN.awaits&&(0==--eN.awaits&&(eN.id=0),eN.echoes=100*eN.awaits,!0)}function eU(e){return eN.echoes&&e&&e.constructor===ea?(e$(),e.then(function(e){return eL(),e},function(e){return eL(),eG(e)})):e}function ez(){var e=eF[eF.length-1];eF.pop(),eV(e,!1)}function eV(e,t){var r,n=em;(t?!eN.echoes||eD++&&e===em:!eD||--eD&&e===em)||queueMicrotask(t?(function(e){++eM,eN.echoes&&0!=--eN.echoes||(eN.echoes=eN.awaits=eN.id=0),eF.push(em),eV(e,!0)}).bind(null,e):ez),e!==em&&(em=e,n===ef&&(ef.env=eK()),eo&&(r=ef.env.Promise,t=e.env,(n.global||e.global)&&(Object.defineProperty(i,"Promise",t.PromiseProp),r.all=t.all,r.race=t.race,r.resolve=t.resolve,r.reject=t.reject,t.allSettled&&(r.allSettled=t.allSettled),t.any&&(r.any=t.any))))}function eK(){var e=i.Promise;return eo?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function eq(e,t,r,n,i){var s=em;try{return eV(e,!0),t(r,n,i)}finally{eV(s,!1)}}function eW(e,t,r,n){return"function"!=typeof e?e:function(){var i=em;r&&e$(),eV(t,!0);try{return e.apply(this,arguments)}finally{eV(i,!1),n&&queueMicrotask(eL)}}}function eH(e){Promise===ea&&0===eN.echoes?0===eD?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+$).indexOf("[native code]")&&(e$=eL=Q);var eG=eb.reject,eQ=String.fromCharCode(65535),eY="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",eJ="String expected.",eX=[],eZ="__dbnames",e0="readonly",e1="readwrite";function e2(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var e3={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function e5(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=C(t))[e],t}}function e4(){throw W.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function e6(e,t){try{var r=e7(e),n=e7(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var r=e.length,n=t.length,i=r<n?r:n,s=0;s<i;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return r===n?0:r<n?-1:1}(e8(e),e8(t));case"Array":return function(e,t){for(var r=e.length,n=t.length,i=r<n?r:n,s=0;s<i;++s){var a=e6(e[s],t[s]);if(0!==a)return a}return r===n?0:r<n?-1:1}(e,t)}}catch(e){}return NaN}function e7(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=O(e))?"binary":e}function e8(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function e9(e,t,r){var n=e.schema.yProps;return n?(t&&0<r.numFailures&&(t=t.filter(function(e,t){return!r.failures[t]})),Promise.all(n.map(function(r){return r=r.updatesTable,t?e.db.table(r).where("k").anyOf(t).delete():e.db.table(r).clear()})).then(function(){return r})):r}var te=(tt.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var r=t.add;if(a(r))return n(n([],a(e)?e:[],!0),r,!0).sort();if("number"==typeof r)return(Number(e)||0)+r;if("bigint"==typeof r)try{return BigInt(e)+r}catch(e){return BigInt(0)+r}throw TypeError("Invalid term ".concat(r))}if(void 0!==t.remove){var i=t.remove;if(a(i))return a(e)?e.filter(function(e){return!i.includes(e)}).sort():[];if("number"==typeof i)return Number(e)-i;if("bigint"==typeof i)try{return BigInt(e)-i}catch(e){return BigInt(0)-i}throw TypeError("Invalid subtrahend ".concat(i))}return(r=null==(r=t.replacePrefix)?void 0:r[0])&&"string"==typeof e&&e.startsWith(r)?t.replacePrefix[1]+e.substring(r.length):e},tt);function tt(e){this["@@propmod"]=e}function tr(e,t){for(var r=s(t),n=r.length,i=!1,a=0;a<n;++a){var o=r[a],l=t[o],u=w(e,o);l instanceof te?(_(e,o,l.execute(u)),i=!0):u!==l&&(_(e,o,l),i=!0)}return i}var tn=(ti.prototype._trans=function(e,t,r){var n=this._tx||em.trans,i=this.name,s=ei&&"u">typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function a(e,r,n){if(!n.schema[i])throw new W.NotFound("Table "+i+" not part of transaction");return t(n.idbtrans,n)}var o=eP();try{var l=n&&n.db._novip===this.db._novip?n===em.trans?n._promise(e,a,r):eB(function(){return n._promise(e,a,r)},{trans:n,transless:em.transless||em}):function e(t,r,n,i){if(t.idbdb&&(t._state.openComplete||em.letThrough||t._vip)){var s=t._createTransaction(r,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===q.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,i)})):eG(s)}return s._promise(r,function(e,t){return eB(function(){return em.trans=s,i(e,t,s)})}).then(function(e){if("readwrite"===r)try{s.idbtrans.commit()}catch(e){}return"readonly"===r?e:s._completion.then(function(){return e})})}if(t._state.openComplete)return eG(new W.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return eG(new W.DatabaseClosed);t.open().catch(Q)}return t._state.dbReadyPromise.then(function(){return e(t,r,n,i)})}(this.db,e,[this.name],a);return s&&(l._consoleTask=s,l=l.catch(function(e){return console.trace(e),eG(e)})),l}finally{o&&eT()}},ti.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?eG(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return r.core.get({trans:t,key:e}).then(function(e){return r.hook.reading.fire(e)})}).then(t)},ti.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=s(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var r=0;r<t.length;++r)if(-1===t.indexOf(e.keyPath[r]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(r&&this.db._maxKey!==eQ){var n=r.keyPath.slice(0,t.length);return this.where(n).equals(n.map(function(t){return e[t]}))}!r&&ei&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName,o=t.reduce(function(t,r){var n=t[0],s=t[1],t=i[r],o=e[r];return[n||t,n||!t?e2(s,t&&t.multi?function(e){return a(e=w(e,r))&&e.some(function(e){return 0===e6(o,e)})}:function(e){return 0===e6(o,w(e,r))}):s]},[null,null]),n=o[0],o=o[1];return n?this.where(n.name).equals(e[n.keyPath]).filter(o):r?this.filter(o):this.where(t).equals("")},ti.prototype.filter=function(e){return this.toCollection().and(e)},ti.prototype.count=function(e){return this.toCollection().count(e)},ti.prototype.offset=function(e){return this.toCollection().offset(e)},ti.prototype.limit=function(e){return this.toCollection().limit(e)},ti.prototype.each=function(e){return this.toCollection().each(e)},ti.prototype.toArray=function(e){return this.toCollection().toArray(e)},ti.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ti.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?"[".concat(e.join("+"),"]"):e))},ti.prototype.reverse=function(){return this.toCollection().reverse()},ti.prototype.mapToClass=function(e){var r,n=this.db,i=this.name;function s(){return null!==r&&r.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof e4&&(function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(s,r=e),Object.defineProperty(s.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),s.prototype.table=function(){return i},e=s);for(var a=new Set,o=e.prototype;o;o=l(o))Object.getOwnPropertyNames(o).forEach(function(e){return a.add(e)});function u(t){if(!t)return t;var r,n=Object.create(e.prototype);for(r in t)if(!a.has(r))try{n[r]=t[r]}catch(e){}return n}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),e},ti.prototype.defineClass=function(){return this.mapToClass(function(e){o(this,e)})},ti.prototype.add=function(e,t){var r=this,n=this.schema.primKey,i=n.auto,s=n.keyPath,a=e;return s&&i&&(a=e5(s)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})}).then(function(e){return e.numFailures?eb.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{_(e,s,t)}catch(e){}return t})},ti.prototype.upsert=function(e,t){var r=this,n=this.schema.primKey.keyPath;return this._trans("readwrite",function(i){return r.core.get({trans:i,key:e}).then(function(s){var a=null!=s?s:{};return tr(a,t),n&&_(a,n,e),r.core.mutate({trans:i,type:"put",values:[a],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(e){return e.numFailures?eb.reject(e.failures[0]):!!s})})})},ti.prototype.update=function(e,t){return"object"!=typeof e||a(e)?this.where(":id").equals(e).modify(t):void 0===(e=w(e,this.schema.primKey.keyPath))?eG(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},ti.prototype.put=function(e,t){var r=this,n=this.schema.primKey,i=n.auto,s=n.keyPath,a=e;return s&&i&&(a=e5(s)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?eb.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{_(e,s,t)}catch(e){}return t})},ti.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]}).then(function(r){return e9(t,[e],r)}).then(function(e){return e.numFailures?eb.reject(e.failures[0]):void 0})})},ti.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:e3}).then(function(t){return e9(e,null,t)})}).then(function(e){return e.numFailures?eb.reject(e.failures[0]):void 0})},ti.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},ti.prototype.bulkAdd=function(e,t,r){var n=this,i=Array.isArray(t)?t:void 0,s=(r=r||(i?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=n.schema.primKey,a=r.auto,r=r.keyPath;if(r&&i)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var o=e.length,r=r&&a?e.map(e5(r)):e;return n.core.mutate({trans:t,type:"add",keys:i,values:r,wantResults:s}).then(function(e){var t=e.numFailures,r=e.results,i=e.lastResult,e=e.failures;if(0===t)return s?r:i;throw new K("".concat(n.name,".bulkAdd(): ").concat(t," of ").concat(o," operations failed"),e)})})},ti.prototype.bulkPut=function(e,t,r){var n=this,i=Array.isArray(t)?t:void 0,s=(r=r||(i?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=n.schema.primKey,a=r.auto,r=r.keyPath;if(r&&i)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var o=e.length,r=r&&a?e.map(e5(r)):e;return n.core.mutate({trans:t,type:"put",keys:i,values:r,wantResults:s}).then(function(e){var t=e.numFailures,r=e.results,i=e.lastResult,e=e.failures;if(0===t)return s?r:i;throw new K("".concat(n.name,".bulkPut(): ").concat(t," of ").concat(o," operations failed"),e)})})},ti.prototype.bulkUpdate=function(e){var t=this,r=this.core,n=e.map(function(e){return e.key}),i=e.map(function(e){return e.changes}),s=[];return this._trans("readwrite",function(a){return r.getMany({trans:a,keys:n,cache:"clone"}).then(function(o){var l=[],u=[];e.forEach(function(e,r){var n=e.key,i=e.changes,a=o[r];if(a){for(var c=0,h=Object.keys(i);c<h.length;c++){var d=h[c],p=i[d];if(d===t.schema.primKey.keyPath){if(0!==e6(p,n))throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else _(a,d,p)}s.push(r),l.push(n),u.push(a)}});var c=l.length;return r.mutate({trans:a,type:"put",keys:l,values:u,updates:{keys:n,changeSpecs:i}}).then(function(e){var r=e.numFailures,n=e.failures;if(0===r)return c;for(var i=0,a=Object.keys(n);i<a.length;i++){var o,l=a[i],u=s[Number(l)];null!=u&&(o=n[l],delete n[l],n[u]=o)}throw new K("".concat(t.name,".bulkUpdate(): ").concat(r," of ").concat(c," operations failed"),n)})})})},ti.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e}).then(function(r){return e9(t,e,r)})}).then(function(e){var n=e.numFailures,i=e.lastResult,e=e.failures;if(0===n)return i;throw new K("".concat(t.name,".bulkDelete(): ").concat(n," of ").concat(r," operations failed"),e)})},ti);function ti(){}function ts(e){function t(t,n){if(n){for(var i=arguments.length,s=Array(i-1);--i;)s[i-1]=arguments[i];return r[t].subscribe.apply(null,s),e}if("string"==typeof t)return r[t]}var r={};t.addEventType=o;for(var n=1,i=arguments.length;n<i;++n)o(arguments[n]);return t;function o(e,n,i){if("object"!=typeof e){n=n||er;var l={subscribers:[],fire:i=i||Q,subscribe:function(e){-1===l.subscribers.indexOf(e)&&(l.subscribers.push(e),l.fire=n(l.fire,e))},unsubscribe:function(e){l.subscribers=l.subscribers.filter(function(t){return t!==e}),l.fire=l.subscribers.reduce(n,i)}};return r[e]=t[e]=l}s(e).forEach(function(t){var r=e[t];if(a(r))o(t,e[t][0],e[t][1]);else{if("asap"!==r)throw new W.InvalidArgument("Invalid event config");var n=o(t,Y,function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){x(function(){e.apply(null,t)})})})}})}}function ta(e,t){return f(t).from({prototype:e}),t}function to(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function tl(e,t){e.filter=e2(e.filter,t)}function tu(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return e2(n(),t())}:t,e.justLimit=r&&!n}function tc(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new W.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function th(e,t,r){var n=tc(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function td(e,t,r,n){var i=e.replayFilter?e2(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},a=function(e,r,n){var a,o;i&&!i(r,n,function(e){return r.stop(e)},function(e){return r.fail(e)})||("[object ArrayBuffer]"==(o=""+(a=r.primaryKey))&&(o=""+new Uint8Array(a)),c(s,o)||(s[o]=!0,t(e,r,n)))};return Promise.all([e.or._iterate(a,r),tp(th(e,n,r),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return tp(th(e,n,r),e2(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function tp(e,t,r,n){var i=eO(n?function(e,t,i){return r(n(e),t,i)}:r);return e.then(function(e){if(e)return e.start(function(){var r=function(){return e.continue()};t&&!t(e,function(e){return r=e},function(t){e.stop(t),r=Q},function(t){e.fail(t),r=Q})||i(e.value,e,function(e){return r=e}),r()})})}var tf=(tm.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,eG.bind(null,r.error)):r.table._trans("readonly",e).then(t)},tm.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,eG.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},tm.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=e2(t.algorithm,e)},tm.prototype._iterate=function(e,t){return td(this._ctx,e,t,this._ctx.table.core)},tm.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&o(r,e),t._ctx=r,t},tm.prototype.raw=function(){return this._ctx.valueMapper=null,this},tm.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return td(t,e,r,t.table.core)})},tm.prototype.count=function(e){var t=this;return this._read(function(e){var r=t._ctx,n=r.table.core;if(to(r,!0))return n.count({trans:e,query:{index:tc(r,n.schema),range:r.range}}).then(function(e){return Math.min(e,r.limit)});var i=0;return td(r,function(){return++i,!1},e,n).then(function(){return i})}).then(e)},tm.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],i=r.length-1;function s(e,t){return t?s(e[r[t]],t-1):e[n]}var a="next"===this._ctx.dir?1:-1;function o(e,t){return e6(s(e,i),s(t,i))*a}return this.toArray(function(e){return e.sort(o)}).then(t)},tm.prototype.toArray=function(e){var t=this;return this._read(function(e){var r=t._ctx;if("next"===r.dir&&to(r,!0)&&0<r.limit){var n=r.valueMapper,i=tc(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(function(e){return e=e.result,n?e.map(n):e})}var s=[];return td(r,function(e){return s.push(e)},e,r.table.core).then(function(){return s})},e)},tm.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,to(t)?tu(t,function(){var t=e;return function(e,r){return 0===t||(1===t?--t:r(function(){e.advance(t),t=0}),!1)}}):tu(t,function(){var t=e;return function(){return--t<0}})),this},tm.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),tu(this._ctx,function(){var t=e;return function(e,r,n){return--t<=0&&r(n),0<=t}},!0),this},tm.prototype.until=function(e,t){return tl(this._ctx,function(r,n,i){return!e(r.value)||(n(i),t)}),this},tm.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},tm.prototype.last=function(e){return this.reverse().first(e)},tm.prototype.filter=function(e){var t;return tl(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=e2(t.isMatch,e),this},tm.prototype.and=function(e){return this.filter(e)},tm.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},tm.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},tm.prototype.desc=function(){return this.reverse()},tm.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})},tm.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},tm.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},tm.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},tm.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&to(t,!0)&&0<t.limit)return this._read(function(e){var r=tc(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},tm.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},tm.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},tm.prototype.lastKey=function(e){return this.reverse().firstKey(e)},tm.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return tl(this._ctx,function(e){var r=e.primaryKey.toString(),e=c(t,r);return t[r]=!0,!e}),this},tm.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(n){var i="function"==typeof e?e:function(t){return tr(t,e)},a=r.table.core,o=a.schema.primaryKey,l=o.outbound,u=o.extractKey,c=200,o=t.db._options.modifyChunkSize;function h(e,t){var r=t.failures,t=t.numFailures;p+=e-t;for(var n=0,i=s(r);n<i.length;n++){var a=i[n];d.push(r[a])}}o&&(c="object"==typeof o?o[a.name]||o["*"]||200:o);var d=[],p=0,f=[],m=e===tg;return t.clone().primaryKeys().then(function(t){var s=to(r)&&r.limit===1/0&&("function"!=typeof e||m)&&{index:r.index,range:r.range};return(function o(d){var p=Math.min(c,t.length-d),f=t.slice(d,d+p);return(m?Promise.resolve([]):a.getMany({trans:n,keys:f,cache:"immutable"})).then(function(g){var y=[],v=[],b=l?[]:null,x=m?f:[];if(!m)for(var w=0;w<p;++w){var _=g[w],k={value:C(_),primKey:t[d+w]};!1!==i.call(k,k.value,k)&&(null==k.value?x.push(t[d+w]):l||0===e6(u(_),u(k.value))?(v.push(k.value),l&&b.push(t[d+w])):(x.push(t[d+w]),y.push(k.value)))}return Promise.resolve(0<y.length&&a.mutate({trans:n,type:"add",values:y}).then(function(e){for(var t in e.failures)x.splice(parseInt(t),1);h(y.length,e)})).then(function(){return(0<v.length||s&&"object"==typeof e)&&a.mutate({trans:n,type:"put",keys:b,values:v,criteria:s,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<d}).then(function(e){return h(v.length,e)})}).then(function(){return(0<x.length||s&&m)&&a.mutate({trans:n,type:"delete",keys:x,criteria:s,isAdditionalChunk:0<d}).then(function(e){return e9(r.table,x,e)}).then(function(e){return h(x.length,e)})}).then(function(){return t.length>d+p&&o(d+c)})})})(0).then(function(){if(0<d.length)throw new V("Error modifying one or more objects",d,p,f);return t.length})})})},tm.prototype.delete=function(){var e=this._ctx,t=e.range;return to(e)&&!e.table.schema.yProps&&(e.isPrimKey||3===t.type)?this._write(function(r){var n=e.table.core.schema.primaryKey;return e.table.core.count({trans:r,query:{index:n,range:t}}).then(function(n){return e.table.core.mutate({trans:r,type:"deleteRange",range:t}).then(function(e){var t=e.failures,e=e.numFailures;if(e)throw new V("Could not delete some values",Object.keys(t).map(function(e){return t[e]}),n-e);return n-e})})}):this.modify(tg)},tm);function tm(){}var tg=function(e,t){return t.value=null};function ty(e,t){return e<t?-1:+(e!==t)}function tv(e,t){return t<e?-1:+(e!==t)}function tb(e,t,r){return(e=e instanceof tj?new e.Collection(e):e)._ctx.error=new(r||TypeError)(t),e}function tx(e){return new e.Collection(e,function(){return tk("")}).limit(0)}function tw(e,t,r,n){var i,s,a,o,l,u,c,h=r.length;if(!r.every(function(e){return"string"==typeof e}))return tb(e,eJ);function d(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},s="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},a="next"===e?ty:tv;var t=r.map(function(e){return{lower:s(e),upper:i(e)}}).sort(function(e,t){return a(e.lower,t.lower)});o=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),c="next"===(u=e)?"":n}d("next"),(e=new e.Collection(e,function(){return t_(o[0],l[h-1]+n)}))._ondirectionchange=function(e){d(e)};var p=0;return e._addAlgorithm(function(e,r,n){var i=e.key;if("string"!=typeof i)return!1;var d=s(i);if(t(d,l,p))return!0;for(var f=null,m=p;m<h;++m){var g=function(e,t,r,n,i,s){for(var a=Math.min(e.length,n.length),o=-1,l=0;l<a;++l){var u=t[l];if(u!==n[l])return 0>i(e[l],r[l])?e.substr(0,l)+r[l]+r.substr(l+1):0>i(e[l],n[l])?e.substr(0,l)+n[l]+r.substr(l+1):0<=o?e.substr(0,o)+t[o]+r.substr(o+1):null;0>i(e[l],u)&&(o=l)}return a<n.length&&"next"===s?e+r.substr(e.length):a<e.length&&"prev"===s?e.substr(0,r.length):o<0?null:e.substr(0,o)+n[o]+r.substr(o+1)}(i,d,o[m],l[m],a,u);null===g&&null===f?p=m+1:(null===f||0<a(f,g))&&(f=g)}return r(null!==f?function(){e.continue(f+c)}:n),!1}),e}function t_(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function tk(e){return{type:1,lower:e,upper:e}}var tj=(Object.defineProperty(tS.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),tS.prototype.between=function(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?tx(this):new this.Collection(this,function(){return t_(e,t,!r,!n)})}catch(e){return tb(this,eY)}},tS.prototype.equals=function(e){return null==e?tb(this,eY):new this.Collection(this,function(){return tk(e)})},tS.prototype.above=function(e){return null==e?tb(this,eY):new this.Collection(this,function(){return t_(e,void 0,!0)})},tS.prototype.aboveOrEqual=function(e){return null==e?tb(this,eY):new this.Collection(this,function(){return t_(e,void 0,!1)})},tS.prototype.below=function(e){return null==e?tb(this,eY):new this.Collection(this,function(){return t_(void 0,e,!1,!0)})},tS.prototype.belowOrEqual=function(e){return null==e?tb(this,eY):new this.Collection(this,function(){return t_(void 0,e)})},tS.prototype.startsWith=function(e){return"string"!=typeof e?tb(this,eJ):this.between(e,e+eQ,!0,!0)},tS.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):tw(this,function(e,t){return 0===e.indexOf(t[0])},[e],eQ)},tS.prototype.equalsIgnoreCase=function(e){return tw(this,function(e,t){return e===t[0]},[e],"")},tS.prototype.anyOfIgnoreCase=function(){var e=M.apply(D,arguments);return 0===e.length?tx(this):tw(this,function(e,t){return -1!==t.indexOf(e)},e,"")},tS.prototype.startsWithAnyOfIgnoreCase=function(){var e=M.apply(D,arguments);return 0===e.length?tx(this):tw(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,eQ)},tS.prototype.anyOf=function(){var e=this,t=M.apply(D,arguments),r=this._cmp;try{t.sort(r)}catch(e){return tb(this,eY)}if(0===t.length)return tx(this);var n=new this.Collection(this,function(){return t_(t[0],t[t.length-1])});n._ondirectionchange=function(n){r="next"===n?e._ascending:e._descending,t.sort(r)};var i=0;return n._addAlgorithm(function(e,n,s){for(var a=e.key;0<r(a,t[i]);)if(++i===t.length)return n(s),!1;return 0===r(a,t[i])||(n(function(){e.continue(t[i])}),!1)}),n},tS.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},tS.prototype.noneOf=function(){var e=M.apply(D,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return tb(this,eY)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},tS.prototype.inAnyRange=function(e,t){var r=this,n=this._cmp,i=this._ascending,s=this._descending,a=this._min,o=this._max;if(0===e.length)return tx(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&0>=i(e[0],e[1])}))return tb(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var l,u=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers,h=i;function d(e,t){return h(e[0],t[0])}try{(l=e.reduce(function(e,t){for(var r=0,i=e.length;r<i;++r){var s=e[r];if(0>n(t[0],s[1])&&0<n(t[1],s[0])){s[0]=a(s[0],t[0]),s[1]=o(s[1],t[1]);break}}return r===i&&e.push(t),e},[])).sort(d)}catch(e){return tb(this,eY)}var p=0,f=c?function(e){return 0<i(e,l[p][1])}:function(e){return 0<=i(e,l[p][1])},m=u?function(e){return 0<s(e,l[p][0])}:function(e){return 0<=s(e,l[p][0])},g=f,e=new this.Collection(this,function(){return t_(l[0][0],l[l.length-1][1],!u,!c)});return e._ondirectionchange=function(e){h="next"===e?(g=f,i):(g=m,s),l.sort(d)},e._addAlgorithm(function(e,t,n){for(var s=e.key;g(s);)if(++p===l.length)return t(n),!1;return!f(s)&&!m(s)||(0===r._cmp(s,l[p][1])||0===r._cmp(s,l[p][0])||t(function(){h===i?e.continue(l[p][0]):e.continue(l[p][1])}),!1)}),e},tS.prototype.startsWithAnyOf=function(){var e=M.apply(D,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?tx(this):this.inAnyRange(e.map(function(e){return[e,e+eQ]})):tb(this,"startsWithAnyOf() only works with strings")},tS);function tS(){}function tE(e){return eO(function(t){return tP(t),e(t.target.error),!1})}function tP(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var tT="storagemutated",tC="x-storagemutated-1",tA=ts(null,tT),tO=(tN.prototype._lock=function(){return b(!em.global),++this._reculock,1!==this._reculock||em.global||(em.lockOwnerFor=this),this},tN.prototype._unlock=function(){if(b(!em.global),0==--this._reculock)for(em.global||(em.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{eq(e[1],e[0])}catch(e){}}return this},tN.prototype._locked=function(){return this._reculock&&em.lockOwnerFor!==this},tN.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new W.DatabaseClosed(n);case"MissingAPIError":throw new W.MissingAPI(n.message,n);default:throw new W.OpenFailed(n)}if(!this.active)throw new W.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=eO(function(r){tP(r),t._reject(e.error)}),e.onabort=eO(function(r){tP(r),t.active&&t._reject(new W.Abort(e.error)),t.active=!1,t.on("abort").fire(r)}),e.oncomplete=eO(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&tA.storagemutated.fire(e.mutatedParts)}),this},tN.prototype._promise=function(e,t,r){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return eG(new W.ReadOnly("Transaction is readonly"));if(!this.active)return eG(new W.TransactionInactive);if(this._locked())return new eb(function(i,s){n._blockedFuncs.push([function(){n._promise(e,t,r).then(i,s)},em])});if(r)return eB(function(){var e=new eb(function(e,r){n._lock();var i=t(e,r,n);i&&i.then&&i.then(e,r)});return e.finally(function(){return n._unlock()}),e._lib=!0,e});var i=new eb(function(e,r){var i=t(e,r,n);i&&i.then&&i.then(e,r)});return i._lib=!0,i},tN.prototype._root=function(){return this.parent?this.parent._root():this},tN.prototype.waitFor=function(e){var t,r=this._root(),n=eb.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return n}):(r._waitingFor=n,r._waitingQueue=[],t=r.idbtrans.objectStore(r.storeNames[0]),function e(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(t.get(-1/0).onsuccess=e)}());var i=r._waitingFor;return new eb(function(e,t){n.then(function(t){return r._waitingQueue.push(eO(e.bind(null,t)))},function(e){return r._waitingQueue.push(eO(t.bind(null,e)))}).finally(function(){r._waitingFor===i&&(r._waitingFor=null)})})},tN.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))},tN.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];var r=this.schema[e];if(!r)throw new W.NotFound("Table "+e+" not part of transaction");return(r=new this.db.Table(e,r,this)).core=this.db.core.table(e),t[e]=r},tN);function tN(){}function tR(e,t,r,n,i,s,a,o){return{name:e,keyPath:t,unique:r,multi:n,auto:i,compound:s,src:(r&&!a?"&":"")+(n?"*":"")+(i?"++":"")+tF(t),type:o}}function tF(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function tD(e,t,r){var n;return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:(n=function(e){return[e.name,e]},r.reduce(function(e,t,r){return(r=n(t,r))&&(e[r[0]]=r[1]),e},{}))}}var tM=function(e){try{return e.only([[]]),tM=function(){return[[]]},[[]]}catch(e){return tM=function(){return eQ},eQ}};function tI(e){return null==e?function(){}:"string"==typeof e?1===e.split(".").length?function(t){return t[e]}:function(t){return w(t,e)}:function(t){return w(t,e)}}function tB(e){return[].slice.call(e)}var t$=0;function tL(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function tU(e,t){var n,i,s,o,l=t.db,t=(n=e._middlewares,i=e._deps,s=t,o=i.IDBKeyRange,i.indexedDB,{dbcore:(s=function(e,t,r){function n(e){if(3===e.type)return null;if(4===e.type)throw Error("Cannot convert never type to IDBKeyRange");var r=e.lower,n=e.upper,i=e.lowerOpen,e=e.upperOpen;return void 0===r?void 0===n?null:t.upperBound(n,!!e):void 0===n?t.lowerBound(r,!!i):t.bound(r,n,!!i,!!e)}var i,s,o=(i=r,s=tB(e.objectStoreNames),{schema:{name:e.name,tables:s.map(function(e){return i.objectStore(e)}).map(function(e){var t=e.keyPath,r=e.autoIncrement,n=a(t),i={},r={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:n,keyPath:t,autoIncrement:r,unique:!0,extractKey:tI(t)},indexes:tB(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,r=e.unique,n=e.multiEntry,e=e.keyPath,n={name:t,compound:a(e),keyPath:e,unique:r,multiEntry:n,extractKey:tI(e)};return i[tL(e)]=n}),getIndexByKeyPath:function(e){return i[tL(e)]}};return i[":id"]=r.primaryKey,null!=t&&(i[tL(t)]=r.primaryKey),r})},hasGetAll:0<s.length&&"getAll"in i.objectStore(s[0])&&!("u">typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),r=o.schema,l=o.hasGetAll,o=r.tables.map(function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var r=e.trans,i=e.type,s=e.keys,a=e.values,o=e.range;return new Promise(function(e,l){e=eO(e);var u=r.objectStore(t),c=null==u.keyPath,h="put"===i||"add"===i;if(!h&&"delete"!==i&&"deleteRange"!==i)throw Error("Invalid operation type: "+i);var d,p=(s||a||{length:1}).length;if(s&&a&&s.length!==a.length)throw Error("Given keys array must have same length as given values array.");if(0===p)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function f(e){++y,tP(e)}var m=[],g=[],y=0;if("deleteRange"===i){if(4===o.type)return e({numFailures:y,failures:g,results:[],lastResult:void 0});3===o.type?m.push(d=u.clear()):m.push(d=u.delete(n(o)))}else{var c=h?c?[a,s]:[a,null]:[s,null],v=c[0],b=c[1];if(h)for(var x=0;x<p;++x)m.push(d=b&&void 0!==b[x]?u[i](v[x],b[x]):u[i](v[x])),d.onerror=f;else for(x=0;x<p;++x)m.push(d=u[i](v[x])),d.onerror=f}function w(t){t=t.target.result,m.forEach(function(e,t){return null!=e.error&&(g[t]=e.error)}),e({numFailures:y,failures:g,results:"delete"===i?s:m.map(function(e){return e.result}),lastResult:t})}d.onerror=function(e){f(e),w(e)},d.onsuccess=w})},getMany:function(e){var r=e.trans,n=e.keys;return new Promise(function(e,i){e=eO(e);for(var s,a=r.objectStore(t),o=n.length,l=Array(o),u=0,c=0,h=function(t){l[(t=t.target)._pos]=t.result,++c===u&&e(l)},d=tE(i),p=0;p<o;++p)null!=n[p]&&((s=a.get(n[p]))._pos=p,s.onsuccess=h,s.onerror=d,++u);0===u&&e(l)})},get:function(e){var r=e.trans,n=e.key;return new Promise(function(e,i){e=eO(e);var s=r.objectStore(t).get(n);s.onsuccess=function(t){return e(t.target.result)},s.onerror=tE(i)})},query:function(e){return new Promise(function(r,i){r=eO(r);var s,a,o,u=e.trans,c=e.values,h=e.limit,d=e.query,p=h===1/0?void 0:h,f=d.index,d=d.range,u=u.objectStore(t),f=f.isPrimaryKey?u:u.index(f.name),d=n(d);if(0===h)return r({result:[]});l?((p=c?f.getAll(d,p):f.getAllKeys(d,p)).onsuccess=function(e){return r({result:e.target.result})},p.onerror=tE(i)):(s=0,a=!c&&"openKeyCursor"in f?f.openKeyCursor(d):f.openCursor(d),o=[],a.onsuccess=function(e){var t=a.result;return t?(o.push(c?t.value:t.primaryKey),++s===h?r({result:o}):void t.continue()):r({result:o})},a.onerror=tE(i))})},openCursor:function(e){var r=e.trans,i=e.values,s=e.query,a=e.reverse,o=e.unique;return new Promise(function(e,l){e=eO(e);var u=s.index,c=s.range,h=r.objectStore(t),h=u.isPrimaryKey?h:h.index(u.name),u=a?o?"prevunique":"prev":o?"nextunique":"next",d=!i&&"openKeyCursor"in h?h.openKeyCursor(n(c),u):h.openCursor(n(c),u);d.onerror=tE(l),d.onsuccess=eO(function(t){var n,i,s,a,o=d.result;o?(o.___id=++t$,o.done=!1,n=o.continue.bind(o),i=(i=o.continuePrimaryKey)&&i.bind(o),s=o.advance.bind(o),a=function(){throw Error("Cursor not stopped")},o.trans=r,o.stop=o.continue=o.continuePrimaryKey=o.advance=function(){throw Error("Cursor not started")},o.fail=eO(l),o.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},o.start=function(e){function t(){if(d.result)try{e()}catch(e){o.fail(e)}else o.done=!0,o.start=function(){throw Error("Cursor behind last entry")},o.stop()}var r=new Promise(function(e,t){e=eO(e),d.onerror=tE(t),o.fail=t,o.stop=function(t){o.stop=o.continue=o.continuePrimaryKey=o.advance=a,e(t)}});return d.onsuccess=eO(function(e){d.onsuccess=t,t()}),o.continue=n,o.continuePrimaryKey=i,o.advance=s,t(),r},e(o)):e(null)},l)})},count:function(e){var r=e.query,i=e.trans,s=r.index,a=r.range;return new Promise(function(e,r){var o=i.objectStore(t),l=s.isPrimaryKey?o:o.index(s.name),o=n(a),l=o?l.count(o):l.count();l.onsuccess=eO(function(t){return e(t.target.result)}),l.onerror=tE(r)})}}}),u={};return o.forEach(function(e){return u[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw Error("Table '".concat(e,"' not found"));return u[e]},MIN_KEY:-1/0,MAX_KEY:tM(t),schema:r}}(l,o,s),n.dbcore.reduce(function(e,t){return t=t.create,r(r({},e),t(e))},s))});e.core=t.dbcore,e.tables.forEach(function(t){var r=t.name;e.core.schema.tables.some(function(e){return e.name===r})&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function tz(e,t,r,n){r.forEach(function(r){var i=n[r];t.forEach(function(t){var n=function e(t,r){return m(t,r)||(t=l(t))&&e(t,r)}(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?p(t,r,{get:function(){return this.table(r)},set:function(e){d(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,i))})})}function tV(e,t){t.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function tK(e,t){return e._cfg.version-t._cfg.version}function tq(e,t){var r,n={del:[],add:[],change:[]};for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],s=t[r];if(i){var a={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto)a.recreate=!0,n.change.push(a);else{var o=i.idxByName,l=s.idxByName,u=void 0;for(u in o)l[u]||a.del.push(u);for(u in l){var c=o[u],h=l[u];c?c.src!==h.src&&a.change.push(h):a.add.push(h)}(0<a.del.length||0<a.add.length||0<a.change.length)&&n.change.push(a)}}else n.add.push([r,s])}return n}function tW(e,t,r,n){var i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(e){return tG(i,e)}),i}function tH(e,t){s(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(ei&&console.debug("Dexie: Creating missing table",r),tW(t,r,e[r].primKey,e[r].indexes))})}function tG(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function tQ(e,t,r){var n={};return y(t.objectStoreNames,0).forEach(function(e){for(var t=r.objectStore(e),i=tR(tF(l=t.keyPath),l||"",!0,!1,!!t.autoIncrement,l&&"string"!=typeof l,!0),s=[],a=0;a<t.indexNames.length;++a){var o=t.index(t.indexNames[a]),l=o.keyPath,o=tR(o.name,l,!!o.unique,!!o.multiEntry,!1,l&&"string"!=typeof l,!1);s.push(o)}n[e]=tD(e,i,s)}),n}function tY(e,t,r){for(var n=r.db.objectStoreNames,s=0;s<n.length;++s){var a=n[s],o=r.objectStore(a);e._hasGetAll="getAll"in o;for(var l=0;l<o.indexNames.length;++l){var u=o.indexNames[l],c=o.index(u).keyPath,h="string"==typeof c?c:"["+y(c).join("+")+"]";!t[a]||(c=t[a].idxByName[h])&&(c.name=u,delete t[a].idxByName[h],t[a].idxByName[u]=c)}}"u">typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function tJ(e){return e.split(",").map(function(e,t){var r=e.split(":"),n=null==(i=r[1])?void 0:i.trim(),i=(e=r[0].trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return tR(i,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(r),0===t,n)})}var tX=(tZ.prototype._createTableSchema=tD,tZ.prototype._parseIndexSyntax=tJ,tZ.prototype._parseStoresSpec=function(e,t){var r=this;s(e).forEach(function(n){if(null!==e[n]){var i=r._parseIndexSyntax(e[n]),s=i.shift();if(!s)throw new W.Schema("Invalid schema for table "+n+": "+e[n]);if(s.unique=!0,s.multi)throw new W.Schema("Primary key cannot be multiEntry*");i.forEach(function(e){if(e.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")}),i=r._createTableSchema(n,s,i),t[n]=i}})},tZ.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e;var e=t._versions,r={},n={};return e.forEach(function(e){o(r,e._cfg.storesSource),n=e._cfg.dbschema={},e._parseStoresSpec(r,n)}),t._dbSchema=n,tV(t,[t._allTables,t,t.Transaction.prototype]),tz(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],s(n),n),t._storeNames=s(n),this},tZ.prototype.upgrade=function(e){return this._cfg.contentUpgrade=en(this._cfg.contentUpgrade||Q,e),this},tZ);function tZ(){}function t0(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new rE(eZ,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function t1(e){return e&&"function"==typeof e.databases}function t2(e){return eB(function(){return em.letThrough=!0,e()})}function t3(e){return!("from"in e)}var t5=function(e,t){if(!this){var r=new t5;return e&&"d"in e&&o(r,e),r}o(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function t4(e,t,r){var n=e6(t,r);if(!isNaN(n)){if(0<n)throw RangeError();if(t3(e))return o(e,{from:t,to:r,d:1});var i=e.l,n=e.r;if(0>e6(r,e.from))return i?t4(i,t,r):e.l={from:t,to:r,d:1,l:null,r:null},t9(e);if(0<e6(t,e.to))return n?t4(n,t,r):e.r={from:t,to:r,d:1,l:null,r:null},t9(e);0>e6(t,e.from)&&(e.from=t,e.l=null,e.d=n?n.d+1:1),0<e6(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,i&&!e.l&&t6(e,i),n&&r&&t6(e,n)}}function t6(e,t){t3(t)||function e(t,r){var n=r.from,i=r.to,s=r.l,r=r.r;t4(t,n,i),s&&e(t,s),r&&e(t,r)}(e,t)}function t7(e,t){var r=t8(t),n=r.next();if(n.done)return!1;for(var i=n.value,s=t8(e),a=s.next(i.from),o=a.value;!n.done&&!a.done;){if(0>=e6(o.from,i.to)&&0<=e6(o.to,i.from))return!0;0>e6(i.from,o.from)?i=(n=r.next(o.from)).value:o=(a=s.next(i.from)).value}return!1}function t8(e){var t=t3(e)?null:{s:0,n:e};return{next:function(e){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&0>e6(e,t.n.from);)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||0>=e6(e,t.n.to))return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function t9(e){var t,n,i=((null==(t=e.r)?void 0:t.d)||0)-((null==(n=e.l)?void 0:n.d)||0),s=1<i?"r":i<-1?"l":"";s&&(t="r"==s?"l":"r",n=r({},e),i=e[s],e.from=i.from,e.to=i.to,e[s]=i[s],n[s]=i[t],(e[t]=n).d=re(n)),e.d=re(e)}function re(e){var t=e.r,e=e.l;return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function rt(e,t){return s(t).forEach(function(r){e[r]?t6(e[r],t[r]):e[r]=function e(t){var r,n,i={};for(r in t)c(t,r)&&(n=t[r],i[r]=!n||"object"!=typeof n||P.has(n.constructor)?n:e(n));return i}(t[r])}),e}function rr(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&t7(t[r],e[r])})}h(t5.prototype,(($={add:function(e){return t6(this,e),this},addKey:function(e){return t4(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return t4(t,e,e)}),this},hasKey:function(e){var t=t8(this).next(e).value;return t&&0>=e6(t.from,e)&&0<=e6(t.to,e)}})[N]=function(){return t8(this)},$));var rn={},ri={},rs=!1;function ra(e){rt(ri,e),rs||(rs=!0,setTimeout(function(){rs=!1,ro(ri,(ri={},!1))},0))}function ro(e,t){void 0===t&&(t=!1);var r=new Set;if(e.all)for(var n=0,i=Object.values(rn);n<i.length;n++)rl(a=i[n],e,r,t);else for(var s in e){var a,o=/^idb\:\/\/(.*)\/(.*)\//.exec(s);o&&(s=o[1],o=o[2],(a=rn["idb://".concat(s,"/").concat(o)])&&rl(a,e,r,t))}r.forEach(function(e){return e()})}function rl(e,t,r,n){for(var i=[],s=0,a=Object.entries(e.queries.query);s<a.length;s++){for(var o=a[s],l=o[0],u=[],c=0,h=o[1];c<h.length;c++){var d=h[c];rr(t,d.obsSet)?d.subscribers.forEach(function(e){return r.add(e)}):n&&u.push(d)}n&&i.push([l,u])}if(n)for(var p=0;p<i.length;p++){var f=i[p],l=f[0],u=f[1];e.queries.query[l]=u}}function ru(e){function t(t){return e.next(t)}var r=i(t),n=i(function(t){return e.throw(t)});function i(e){return function(t){var i=e(t),t=i.value;return i.done?t:t&&"function"==typeof t.then?t.then(r,n):a(t)?Promise.all(t).then(r,n):r(t)}}return i(t)()}function rc(e,t,r){for(var n=a(e)?e.slice():[e],i=0;i<r;++i)n.push(t);return n}var rh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),i=n.schema,s={},a=[];function o(e,t,n){var i=tL(e),l=s[i]=s[i]||[],u=null==e?0:"string"==typeof e?1:e.length,c=0<t,c=r(r({},n),{name:c?"".concat(i,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:c,keyTail:t,keyLength:u,extractKey:tI(e),unique:!c&&n.unique});return l.push(c),c.isPrimaryKey||a.push(c),1<u&&o(2===u?e[0]:e.slice(0,u-1),t+1,n),l.sort(function(e,t){return e.keyTail-t.keyTail}),c}t=o(i.primaryKey.keyPath,0,i.primaryKey),s[":id"]=[t];for(var l=0,u=i.indexes;l<u.length;l++){var c=u[l];o(c.keyPath,0,c)}function h(t){var n,i=t.query.index;return i.isVirtual?r(r({},t),{query:{index:i.lowLevelIndex,range:(n=t.query.range,i=i.keyTail,{type:1===n.type?2:n.type,lower:rc(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:rc(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):t}return r(r({},n),{schema:r(r({},i),{primaryKey:t,indexes:a,getIndexByKeyPath:function(e){return(e=s[tL(e)])&&e[0]}}),count:function(e){return n.count(h(e))},query:function(e){return n.query(h(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,s=r.isVirtual,a=r.keyLength;return s?n.openCursor(h(t)).then(function(r){var n;return r&&Object.create(n=r,{continue:{value:function(r){null!=r?n.continue(rc(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(rc(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}})}):n.openCursor(t)}})}})}};function rd(e,t,r,n){return r=r||{},n=n||"",s(e).forEach(function(i){var s,a,o;c(t,i)?(s=e[i],a=t[i],"object"==typeof s&&"object"==typeof a&&s&&a?(o=O(s))!==O(a)?r[n+i]=t[i]:"Object"===o?rd(s,a,r,n+i+"."):s!==a&&(r[n+i]=t[i]):s!==a&&(r[n+i]=t[i])):r[n+i]=void 0}),s(t).forEach(function(i){c(e,i)||(r[n+i]=t[i])}),r}function rp(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var rf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return r(r({},e),{table:function(t){var i=e.table(t),s=i.schema.primaryKey;return r(r({},i),{mutate:function(e){var a=em.trans,o=a.table(t).hook,l=o.deleting,u=o.creating,h=o.updating;switch(e.type){case"add":if(u.fire===Q)break;return a._promise("readwrite",function(){return d(e)},!0);case"put":if(u.fire===Q&&h.fire===Q)break;return a._promise("readwrite",function(){return d(e)},!0);case"delete":if(l.fire===Q)break;return a._promise("readwrite",function(){return d(e)},!0);case"deleteRange":if(l.fire===Q)break;return a._promise("readwrite",function(){return function e(t,n,a){return i.query({trans:t,values:!1,query:{index:s,range:n},limit:a}).then(function(i){var s=i.result;return d({type:"delete",keys:s,trans:t}).then(function(i){return 0<i.numFailures?Promise.reject(i.failures[0]):s.length<a?{failures:[],numFailures:0,lastResult:void 0}:e(t,r(r({},n),{lower:s[s.length-1],lowerOpen:!0}),a)})})}(e.trans,e.range,1e4)},!0)}return i.mutate(e);function d(e){var t,a=em.trans,o=e.keys||rp(s,e);if(!o)throw Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?r(r({},e),{keys:o}):r({},e)).type&&(e.values=n([],e.values,!0)),e.keys&&(e.keys=n([],e.keys,!0)),("add"===(t=e).type?Promise.resolve([]):i.getMany({trans:t.trans,keys:o,cache:"immutable"})).then(function(t){var r=o.map(function(r,n){var i,o,d,p=t[n],f={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(f,r,p,a):"add"===e.type||void 0===p?(i=u.fire.call(f,r,e.values[n],a),null==r&&null!=i&&(e.keys[n]=r=i,s.outbound||_(e.values[n],s.keyPath,r))):(i=rd(p,e.values[n]),(o=h.fire.call(f,i,r,p,a))&&(d=e.values[n],Object.keys(o).forEach(function(e){c(d,e)?d[e]=o[e]:_(d,e,o[e])}))),f});return i.mutate(e).then(function(n){for(var i=n.failures,s=n.results,a=n.numFailures,n=n.lastResult,l=0;l<o.length;++l){var u=(s||o)[l],c=r[l];null==u?c.onerror&&c.onerror(i[l]):c.onsuccess&&c.onsuccess("put"===e.type&&t[l]?e.values[l]:u)}return{failures:i,results:s,numFailures:a,lastResult:n}}).catch(function(e){return r.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function rm(e,t,r){try{if(!t||t.keys.length<e.length)return null;for(var n=[],i=0,s=0;i<t.keys.length&&s<e.length;++i)0===e6(t.keys[i],e[s])&&(n.push(r?C(t.values[i]):t.values[i]),++s);return n.length===e.length?n:null}catch(e){return null}}var rg={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return r(r({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=rm(e.keys,e.trans._cache,"clone"===e.cache);return t?eb.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?C(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function ry(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function rv(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var rb={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new t5(e.MIN_KEY,e.MAX_KEY);return r(r({},e),{transaction:function(t,r,n){if(em.subscr&&"readonly"!==r)throw new W.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(em.querier));return e.transaction(t,r,n)},table:function(i){var o=e.table(i),l=o.schema,u=l.primaryKey,c=l.indexes,h=u.extractKey,d=u.outbound,p=u.autoIncrement&&c.filter(function(e){return e.compound&&e.keyPath.includes(u.keyPath)}),f=r(r({},o),{mutate:function(r){function s(e){return f[e="idb://".concat(t,"/").concat(i,"/").concat(e)]||(f[e]=new t5)}var c,h,d=r.trans,f=r.mutatedParts||(r.mutatedParts={}),m=s(""),g=s(":dels"),y=r.type,v="deleteRange"===r.type?[r.range]:"delete"===r.type?[r.keys]:r.values.length<50?[rp(u,r).filter(function(e){return e}),r.values]:[],b=v[0],x=v[1],v=r.trans._cache;return a(b)?(m.addKeys(b),(v="delete"===y||b.length===x.length?rm(b,v):null)||g.addKeys(b),(v||x)&&(c=v,h=x,l.indexes.forEach(function(e){var t=s(e.name||"");function r(t){return null!=t?e.extractKey(t):null}function n(r){return e.multiEntry&&a(r)?r.forEach(function(e){return t.addKey(e)}):t.addKey(r)}(c||h).forEach(function(e,t){var i=c&&r(c[t]),t=h&&r(h[t]);0!==e6(i,t)&&(null!=i&&n(i),null!=t&&n(t))})}))):b?(x={from:null!=(x=b.lower)?x:e.MIN_KEY,to:null!=(x=b.upper)?x:e.MAX_KEY},g.add(x),m.add(x)):(m.add(n),g.add(n),l.indexes.forEach(function(e){return s(e.name).add(n)})),o.mutate(r).then(function(e){return!b||"add"!==r.type&&"put"!==r.type||(m.addKeys(e.results),p&&p.forEach(function(t){for(var n=r.values.map(function(e){return t.extractKey(e)}),i=t.keyPath.findIndex(function(e){return e===u.keyPath}),a=0,o=e.results.length;a<o;++a)n[a][i]=e.results[a];s(t.name).addKeys(n)})),d.mutatedParts=rt(d.mutatedParts||{},f),e})}}),c=function(t){var r=t.query,t=r.index,r=r.range;return[t,new t5(null!=(t=r.lower)?t:e.MIN_KEY,null!=(r=r.upper)?r:e.MAX_KEY)]},m={get:function(e){return[u,new t5(e.key)]},getMany:function(e){return[u,(new t5).addKeys(e.keys)]},count:c,query:c,openCursor:c};return s(m).forEach(function(e){f[e]=function(s){var a=em.subscr,l=!!a,u=ry(em,o)&&rv(e,s)?s.obsSet={}:a;if(l){var c=function(e){return u[e="idb://".concat(t,"/").concat(i,"/").concat(e)]||(u[e]=new t5)},p=c(""),f=c(":dels"),a=m[e](s),l=a[0],a=a[1];if(("query"===e&&l.isPrimaryKey&&!s.values?f:c(l.name||"")).add(a),!l.isPrimaryKey){if("count"!==e){var g="query"===e&&d&&s.values&&o.query(r(r({},s),{values:!1}));return o[e].apply(this,arguments).then(function(t){if("query"===e){if(d&&s.values)return g.then(function(e){return e=e.result,p.addKeys(e),t});var r=s.values?t.result.map(h):t.result;(s.values?p:f).addKeys(r)}else if("openCursor"===e){var n=s.values;return t&&Object.create(t,{key:{get:function(){return f.addKey(t.primaryKey),t.key}},primaryKey:{get:function(){var e=t.primaryKey;return f.addKey(e),e}},value:{get:function(){return n&&p.addKey(t.primaryKey),t.value}}})}return t})}f.add(n)}}return o[e].apply(this,arguments)}}),f}})}};function rx(e,t,n){if(0===n.numFailures)return t;if("deleteRange"===t.type)return null;var i=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===i?null:(a((t=r({},t)).keys)&&(t.keys=t.keys.filter(function(e,t){return!(t in n.failures)})),"values"in t&&a(t.values)&&(t.values=t.values.filter(function(e,t){return!(t in n.failures)})),t)}function rw(e,t){return(void 0===t.lower||(t.lowerOpen?0<e6(e,t.lower):0<=e6(e,t.lower)))&&(void 0===t.upper||(t.upperOpen?0>e6(e,t.upper):0>=e6(e,t.upper)))}function r_(e,t,r,n,i,s){if(!r||0===r.length)return e;var o=t.query.index,l=o.multiEntry,u=t.query.range,c=n.schema.primaryKey.extractKey,h=o.extractKey,d=(o.lowLevelIndex||o).extractKey,r=r.reduce(function(e,r){var n=e,i=[];if("add"===r.type||"put"===r.type)for(var s=new t5,o=r.values.length-1;0<=o;--o){var d,p=r.values[o],f=c(p);s.hasKey(f)||(d=h(p),(l&&a(d)?d.some(function(e){return rw(e,u)}):rw(d,u))&&(s.addKey(f),i.push(p)))}switch(r.type){case"add":var m=(new t5).addKeys(t.values?e.map(function(e){return c(e)}):e),n=e.concat(t.values?i.filter(function(e){return e=c(e),!m.hasKey(e)&&(m.addKey(e),!0)}):i.map(function(e){return c(e)}).filter(function(e){return!m.hasKey(e)&&(m.addKey(e),!0)}));break;case"put":var g=(new t5).addKeys(r.values.map(function(e){return c(e)}));n=e.filter(function(e){return!g.hasKey(t.values?c(e):e)}).concat(t.values?i:i.map(function(e){return c(e)}));break;case"delete":var y=(new t5).addKeys(r.keys);n=e.filter(function(e){return!y.hasKey(t.values?c(e):e)});break;case"deleteRange":var v=r.range;n=e.filter(function(e){return!rw(c(e),v)})}return n},e);return r===e?e:(r.sort(function(e,t){return e6(d(e),d(t))||e6(c(e),c(t))}),t.limit&&t.limit<1/0&&(r.length>t.limit?r.length=t.limit:e.length===t.limit&&r.length<t.limit&&(i.dirty=!0)),s?Object.freeze(r):r)}function rk(e,t){return 0===e6(e.lower,t.lower)&&0===e6(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}var rj={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return r(r({},e),{transaction:function(r,n,i){var s,a,o=e.transaction(r,n,i);return"readwrite"===n&&(a=(s=new AbortController).signal,i=function(i){return function(){if(s.abort(),"readwrite"===n){for(var a=new Set,l=0;l<r.length;l++){var u=r[l],c=rn["idb://".concat(t,"/").concat(u)];if(c){var h=e.table(u),d=c.optimisticOps.filter(function(e){return e.trans===o});if(o._explicit&&i&&o.mutatedParts)for(var p=0,f=Object.values(c.queries.query);p<f.length;p++)for(var m=0,g=(b=f[p]).slice();m<g.length;m++)rr((x=g[m]).obsSet,o.mutatedParts)&&(F(b,x),x.subscribers.forEach(function(e){return a.add(e)}));else if(0<d.length){c.optimisticOps=c.optimisticOps.filter(function(e){return e.trans!==o});for(var y=0,v=Object.values(c.queries.query);y<v.length;y++)for(var b,x,w,_=0,k=(b=v[y]).slice();_<k.length;_++)null!=(x=k[_]).res&&o.mutatedParts&&(i&&!x.dirty?(w=Object.isFrozen(x.res),w=r_(x.res,x.req,d,h,x,w),x.dirty?(F(b,x),x.subscribers.forEach(function(e){return a.add(e)})):w!==x.res&&(x.res=w,x.promise=eb.resolve({result:w}))):(x.dirty&&F(b,x),x.subscribers.forEach(function(e){return a.add(e)})))}}}a.forEach(function(e){return e()})}}},o.addEventListener("abort",i(!1),{signal:a}),o.addEventListener("error",i(!1),{signal:a}),o.addEventListener("complete",i(!0),{signal:a})),o},table:function(n){var i=e.table(n),s=i.schema.primaryKey;return r(r({},i),{mutate:function(e){var a=em.trans;if(s.outbound||"disabled"===a.db._options.cache||a.explicit||"readwrite"!==a.idbtrans.mode)return i.mutate(e);var o=rn["idb://".concat(t,"/").concat(n)];return o?(a=i.mutate(e),("add"===e.type||"put"===e.type)&&(50<=e.values.length||rp(s,e).some(function(e){return null==e}))?a.then(function(t){var n=rx(0,r(r({},e),{values:e.values.map(function(e,n){var i;return t.failures[n]||_(e=null!=(i=s.keyPath)&&i.includes(".")?C(e):r({},e),s.keyPath,t.results[n]),e})}),t);o.optimisticOps.push(n),queueMicrotask(function(){return e.mutatedParts&&ra(e.mutatedParts)})}):(o.optimisticOps.push(e),e.mutatedParts&&ra(e.mutatedParts),a.then(function(t){0<t.numFailures&&(F(o.optimisticOps,e),(t=rx(0,e,t))&&o.optimisticOps.push(t),e.mutatedParts&&ra(e.mutatedParts))}),a.catch(function(){F(o.optimisticOps,e),e.mutatedParts&&ra(e.mutatedParts)})),a):i.mutate(e)},query:function(e){if(!ry(em,i)||!rv("query",e))return i.query(e);var r,s,a="immutable"===(null==(c=em.trans)?void 0:c.db._options.cache),o=em,l=o.requery,u=o.signal,c=function(e,t,r,n){var i=rn["idb://".concat(e,"/").concat(t)];if(!i)return[];if(!(t=i.queries[r]))return[null,!1,i,null];var s=t[(n.query?n.query.index.name:null)||""];if(!s)return[null,!1,i,null];switch(r){case"query":var a=s.find(function(e){return e.req.limit===n.limit&&e.req.values===n.values&&rk(e.req.query.range,n.query.range)});return a?[a,!0,i,s]:[s.find(function(e){var t,r;return("limit"in e.req?e.req.limit:1/0)>=n.limit&&(!n.values||e.req.values)&&(t=e.req.query.range,r=n.query.range,0>=function(e,t,r,n){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=e6(e,t))){if(r&&n)return 0;if(r)return 1;if(n)return -1}return t}(t.lower,r.lower,t.lowerOpen,r.lowerOpen)&&0<=function(e,t,r,n){if(void 0===e)return+(void 0!==t);if(void 0===t)return -1;if(0===(t=e6(e,t))){if(r&&n)return 0;if(r)return -1;if(n)return 1}return t}(t.upper,r.upper,t.upperOpen,r.upperOpen))}),!1,i,s];case"count":return[a=s.find(function(e){return rk(e.req.query.range,n.query.range)}),!!a,i,s]}}(t,n,"query",e),h=c[0],o=c[1],d=c[2],p=c[3];return h&&o?h.obsSet=e.obsSet:(o=i.query(e).then(function(e){var t=e.result;if(h&&(h.res=t),a){for(var r=0,n=t.length;r<n;++r)Object.freeze(t[r]);Object.freeze(t)}else e.result=C(t);return e}).catch(function(e){return p&&h&&F(p,h),Promise.reject(e)}),h={obsSet:e.obsSet,promise:o,subscribers:new Set,type:"query",req:e,dirty:!1},p?p.push(h):(p=[h],(d=d||(rn["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=p)),r=h,s=p,r.subscribers.add(l),u.addEventListener("abort",function(){r.subscribers.delete(l),0===r.subscribers.size&&setTimeout(function(){0===r.subscribers.size&&F(s,r)},3e3)}),h.promise.then(function(t){return{result:r_(t.result,e,null==d?void 0:d.optimisticOps,i,h,a)}})}})}})}};function rS(e,t){return new Proxy(e,{get:function(e,r,n){return"db"===r?t:Reflect.get(e,r,n)}})}var rE=(rP.prototype.version=function(e){if(isNaN(e)||e<.1)throw new W.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(t){return t._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(tK),r.stores({}),this._state.autoSchema=!1,r)},rP.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||em.letThrough||this._vip)?e():new eb(function(e,r){if(t._state.openComplete)return r(new W.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new W.DatabaseClosed);t.open().catch(Q)}t._state.dbReadyPromise.then(e,r)}).then(e)},rP.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:r,level:null==n?10:n,name:i}),e.sort(function(e,t){return e.level-t.level}),this},rP.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return n?e.create!==n:!!r&&e.name!==r})),this},rP.prototype.open=function(){var e=this;return eq(ef,function(){return function(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?eG(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller,i=Math.round(10*e.verno),a=!1;function o(){if(t.openCanceller!==n)throw new W.DatabaseClosed("db.open() was cancelled")}var l,u=t.dbReadyResolve,c=null,h=!1;return eb.race([n,("u"<typeof navigator?eb.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}l=setInterval(t,100),t()}).finally(function(){return clearInterval(l)}):Promise.resolve()).then(function n(){return new eb(function(l,u){if(o(),!r)throw new W.MissingAPI;var d=e.name,p=t.autoSchema||!i?r.open(d):r.open(d,i);if(!p)throw new W.MissingAPI;p.onerror=tE(u),p.onblocked=eO(e._fireOnBlocked),p.onupgradeneeded=eO(function(n){var i,o,l,f,m,g,y;c=p.transaction,t.autoSchema&&!e._options.allowEmptyDB?(p.onerror=tP,c.abort(),p.result.close(),(i=r.deleteDatabase(d)).onsuccess=i.onerror=eO(function(){u(new W.NoSuchDatabase("Database ".concat(d," doesnt exist")))})):(c.onerror=tE(u),h=(n=n.oldVersion>0x4000000000000000?0:n.oldVersion)<1,e.idbdb=p.result,a&&function(e,t){tH(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=tQ(0,e.idbdb,t);tY(e,e._dbSchema,t);for(var n=0,i=tq(r,e._dbSchema).change;n<i.length;n++){var s=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var r=t.objectStore(e.name);e.add.forEach(function(t){ei&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),tG(r,t)})}(i[n]);if("object"==typeof s)return s.value}}(e,c),o=n/10,l=c,f=e._dbSchema,l.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=tD("$meta",tJ("")[0],[]),e._storeNames.push("$meta")),(m=e._createTransaction("readwrite",e._storeNames,f)).create(l),m._completion.catch(u),g=m._reject.bind(m),y=em.transless||em,eB(function(){return em.trans=m,em.transless=y,0!==o?(tU(e,l),(m.storeNames.includes("$meta")?m.table("$meta").get("version").then(function(e){return null!=e?e:o}):eb.resolve(o)).then(function(t){var r,n,i;return r=t,n=[],t=e._versions,i=e._dbSchema=tQ(0,e.idbdb,l),0!==(t=t.filter(function(e){return e._cfg.version>=r})).length?(t.forEach(function(t){n.push(function(){var n=i,a=t._cfg.dbschema;tY(e,n,l),tY(e,a,l),i=e._dbSchema=a;var o=tq(n,a);o.add.forEach(function(e){tW(l,e[0],e[1].primKey,e[1].indexes)}),o.change.forEach(function(e){if(e.recreate)throw new W.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach(function(e){return tG(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),tG(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var u=t._cfg.contentUpgrade;if(u&&t._cfg.version>r){tU(e,l),m._memoizedTables={};var c=k(a);o.del.forEach(function(e){c[e]=n[e]}),tV(e,[e.Transaction.prototype]),tz(e,[e.Transaction.prototype],s(c),c),m.schema=c;var h,d=I(u);return d&&e$(),o=eb.follow(function(){var e;(h=u(m))&&d&&(e=eL.bind(null,null),h.then(e,e))}),h&&"function"==typeof h.then?eb.resolve(h):o.then(function(){return h})}}),n.push(function(r){var n=t._cfg.dbschema;[].slice.call(r.db.objectStoreNames).forEach(function(e){return null==n[e]&&r.db.deleteObjectStore(e)}),tV(e,[e.Transaction.prototype]),tz(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),m.schema=e._dbSchema}),n.push(function(r){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===t._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(e){return"$meta"!==e})):r.objectStore("$meta").put(t._cfg.version,"version"))})}),(function e(){return n.length?eb.resolve(n.shift()(m.idbtrans)).then(e):eb.resolve()})().then(function(){tH(i,l)})):eb.resolve()}).catch(g)):(s(f).forEach(function(e){tW(l,e,f[e].primKey,f[e].indexes)}),tU(e,l),void eb.follow(function(){return e.on.populate.fire(m)}).catch(g))}))},u),p.onsuccess=eO(function(){c=null;var r,o,u,f=e.idbdb=p.result,m=y(f.objectStoreNames);if(0<m.length)try{var g=f.transaction(1===m.length?m[0]:m,"readonly");if(t.autoSchema)r=f,o=g,e.verno=r.version/10,o=e._dbSchema=tQ(0,r,o),e._storeNames=y(r.objectStoreNames,0),tz(e,[e._allTables],s(o),o);else if(tY(e,e._dbSchema,g),((u=tq(tQ(0,(u=e).idbdb,g),u._dbSchema)).add.length||u.change.some(function(e){return e.add.length||e.change.length}))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),f.close(),i=f.version+1,a=!0,l(n());tU(e,g)}catch(e){}eX.push(e),f.onversionchange=eO(function(r){t.vcFired=!0,e.on("versionchange").fire(r)}),f.onclose=eO(function(){e.close({disableAutoOpen:!1})}),h&&(u=e._deps,g=d,f=u.indexedDB,u=u.IDBKeyRange,t1(f)||g===eZ||t0(f,u).put({name:g}).catch(Q)),l()},u)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),n();break;case"VersionError":if(0<i)return i=0,n()}return eb.reject(e)})})]).then(function(){return o(),t.onReadyBeingFired=[],eb.resolve(t2(function(){return e.on.ready.fire(e.vip)})).then(function r(){if(0<t.onReadyBeingFired.length){var n=t.onReadyBeingFired.reduce(en,Q);return t.onReadyBeingFired=[],eb.resolve(t2(function(){return n(e.vip)})).then(r)}})}).finally(function(){t.openCanceller===n&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(r){t.dbOpenError=r;try{c&&c.abort()}catch(e){}return n===t.openCanceller&&e._close(),eG(r)}).finally(function(){t.openComplete=!0,u()}).then(function(){var t;return h&&(t={},e.tables.forEach(function(r){r.schema.indexes.forEach(function(n){n.name&&(t["idb://".concat(e.name,"/").concat(r.name,"/").concat(n.name)]=new t5(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(r.name,"/")]=t["idb://".concat(e.name,"/").concat(r.name,"/:dels")]=new t5(-1/0,[[[]]])}),tA(tT).fire(t),ro(t,!0)),e})}(e)})},rP.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=eX.indexOf(this);if(0<=t&&eX.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new eb(function(t){e.dbReadyResolve=t}),e.openCanceller=new eb(function(t,r){e.cancelOpen=r}))},rP.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen,e=this._state;t?(e.isBeingOpened&&e.cancelOpen(new W.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new W.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},rP.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var r=0<arguments.length&&"object"!=typeof arguments[0],n=this._state;return new eb(function(i,s){function a(){t.close(e);var r=t._deps.indexedDB.deleteDatabase(t.name);r.onsuccess=eO(function(){var e,r,n;e=t._deps,r=t.name,n=e.indexedDB,e=e.IDBKeyRange,t1(n)||r===eZ||t0(n,e).delete(r).catch(Q),i()}),r.onerror=tE(s),r.onblocked=t._fireOnBlocked}if(r)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(a):a()})},rP.prototype.backendDB=function(){return this.idbdb},rP.prototype.isOpen=function(){return null!==this.idbdb},rP.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},rP.prototype.hasFailed=function(){return null!==this._state.dbOpenError},rP.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(rP.prototype,"tables",{get:function(){var e=this;return s(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),rP.prototype.transaction=function(){var e=(function(e,t,r){var n=arguments.length;if(n<2)throw new W.InvalidArgument("Too few arguments");for(var i=Array(n-1);--n;)i[n-1]=arguments[n];return r=i.pop(),[e,S(i),r]}).apply(this,arguments);return this._transaction.apply(this,e)},rP.prototype._transaction=function(e,t,r){var n=this,i=em.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var s,a,o=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map(function(e){if(e=e instanceof n.Table?e.name:e,"string"!=typeof e)throw TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===e0)s=e0;else{if("rw"!=e&&e!=e1)throw new W.InvalidArgument("Invalid transaction mode: "+e);s=e1}if(i){if(i.mode===e0&&s===e1){if(!o)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!o)throw new W.SubTransaction("Table "+e+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,function(t,r){r(e)}):eG(e)}var l=(function e(t,r,n,i,s){return eb.resolve().then(function(){var a=em.transless||em,o=t._createTransaction(r,n,t._dbSchema,i);if(o.explicit=!0,a={trans:o,transless:a},i)o.idbtrans=i.idbtrans;else try{o.create(),o.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(i){return i.name===q.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,null,s)})):eG(i)}var l,u=I(s);return u&&e$(),a=eb.follow(function(){var e;(l=s.call(o,o))&&(u?(e=eL.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=ru(l)))},a),(l&&"function"==typeof l.then?eb.resolve(l).then(function(e){return o.active?e:eG(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):a.then(function(){return l})).then(function(e){return i&&o._resolve(),o._completion.then(function(){return e})}).catch(function(e){return o._reject(e),eG(e)})})}).bind(null,this,s,a,i,r);return i?i._promise(s,l,"lock"):em.trans?eq(em.transless,function(){return n._whenReady(l)}):this._whenReady(l)},rP.prototype.table=function(e){if(!c(this._allTables,e))throw new W.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},rP);function rP(e,t){var n=this;this._middlewares={},this.verno=0;var i=rP.dependencies;this._options=t=r({addons:rP.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},i=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,a,o,l,u,c={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Q,dbReadyPromise:null,cancelOpen:Q,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};c.dbReadyPromise=new eb(function(e){c.dbReadyResolve=e}),c.openCanceller=new eb(function(e,t){c.cancelOpen=t}),this._state=c,this.name=e,this.on=ts(this,"populate","blocked","versionchange","close",{ready:[en,Q]}),this.once=function(e,t){var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];n.on(e).unsubscribe(r),t.apply(n,i)};return n.on(e,r)},this.on.ready.subscribe=v(this.on.ready.subscribe,function(e){return function(t,r){rP.vip(function(){var i=n._state;i.openComplete?(i.dbOpenError||eb.resolve().then(t),r&&e(t)):i.onReadyBeingFired?(i.onReadyBeingFired.push(t),r&&e(t)):(e(t),r||e(function e(){n.on.ready.unsubscribe(t),n.on.ready.unsubscribe(e)}))})}}),this.Collection=(s=this,ta(tf.prototype,function(e,t){this.db=s;var r=e3,n=null;if(t)try{r=t()}catch(e){n=e}var i=e._ctx,t=i.table,e=t.hook.reading.fire;this._ctx={table:t,index:i.index,isPrimKey:!i.index||t.schema.primKey.keyPath&&i.index===t.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:i.or,valueMapper:e!==Y?e:null}})),this.Table=(a=this,ta(tn.prototype,function(e,t,r){this.db=a,this._tx=r,this.name=e,this.schema=t,this.hook=a._allTables[e]?a._allTables[e].hook:ts(null,{creating:[Z,Q],reading:[J,Y],updating:[et,Q],deleting:[ee,Q]})})),this.Transaction=(o=this,ta(tO.prototype,function(e,t,r,n,i){var s=this;"readonly"!==e&&t.forEach(function(e){(e=null==(e=r[e])?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=o,this.mode=e,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=ts(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new eb(function(e,t){s._resolve=e,s._reject=t}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),eG(e)})})),this.Version=(l=this,ta(tX.prototype,function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(u=this,ta(tj.prototype,function(e,t,r){if(this.db=u,this._ctx={table:e,index:":id"===t?null:t,or:r},this._cmp=this._ascending=e6,this._descending=function(e,t){return e6(t,e)},this._max=function(e,t){return 0<e6(e,t)?e:t},this._min=function(e,t){return 0>e6(e,t)?e:t},this._IDBKeyRange=u._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=tM(t.IDBKeyRange),this._createTransaction=function(e,t,r,i){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),eX.filter(function(e){return e.name===n.name&&e!==n&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(rg),this.use(rj),this.use(rb),this.use(rh),this.use(rf);var h=new Proxy(this,{get:function(e,t,r){if("_vip"===t)return!0;if("table"===t)return function(e){return rS(n.table(e),h)};var i=Reflect.get(e,t,r);return i instanceof tn?rS(i,h):"tables"===t?i.map(function(e){return rS(e,h)}):"_createTransaction"===t?function(){return rS(i.apply(this,arguments),h)}:i}});this.vip=h,i.forEach(function(e){return e(n)})}var rT,$="u">typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",rC=(rA.prototype.subscribe=function(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})},rA.prototype[$]=function(){return this},rA);function rA(e){this._subscribe=e}try{rT={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(e){rT={indexedDB:null,IDBKeyRange:null}}function rO(e){var t,r=!1,n=new rC(function(n){var i,s=I(e),a=!1,o={},l={},u={get closed(){return a},unsubscribe:function(){a||(a=!0,i&&i.abort(),h&&tA.storagemutated.unsubscribe(p))}};n.start&&n.start(u);var h=!1,d=function(){return eH(f)},p=function(e){rt(o,e),rr(l,o)&&d()},f=function(){var u,f;!a&&rT.indexedDB&&(o={},u={},i&&i.abort(),Promise.resolve(function(t){var r=eP();try{s&&e$();var n=eB(e,t);return n=s?n.finally(eL):n}finally{r&&eT()}}(f={subscr:u,signal:(i=new AbortController).signal,requery:d,querier:e,trans:null})).then(function(e){r=!0,t=e,a||f.signal.aborted||(o={},function(e){for(var t in e)if(c(e,t))return;return 1}(l=u)||h||(tA(tT,p),h=!0),eH(function(){return!a&&n.next&&n.next(e)}))},function(e){r=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||a||eH(function(){a||n.error&&n.error(e)})}))};return setTimeout(d,0),u});return n.hasValue=function(){return r},n.getValue=function(){return t},n}function rN(e){var t=rF;try{rF=!0,tA.storagemutated.fire(e),ro(e,!0)}finally{rF=t}}h(rE,r(r({},G),{delete:function(e){return new rE(e,{addons:[]}).delete()},exists:function(e){return new rE(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){var t,r;try{return r=(t=rE.dependencies).indexedDB,t=t.IDBKeyRange,(t1(r)?Promise.resolve(r.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==eZ})}):t0(r,t).toCollection().primaryKeys()).then(e)}catch(e){return eG(new W.MissingAPI)}},defineClass:function(){return function(e){o(this,e)}},ignoreTransaction:function(e){return em.trans?eq(em.transless,e):e()},vip:t2,async:function(e){return function(){try{var t=ru(e.apply(this,arguments));return t&&"function"==typeof t.then?t:eb.resolve(t)}catch(e){return eG(e)}}},spawn:function(e,t,r){try{var n=ru(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:eb.resolve(n)}catch(e){return eG(e)}},currentTransaction:{get:function(){return em.trans||null}},waitFor:function(e,t){return t=eb.resolve("function"==typeof e?rE.ignoreTransaction(e):e).timeout(t||6e4),em.trans?em.trans.waitFor(t):t},Promise:eb,debug:{get:function(){return ei},set:function(e){ei=e}},derive:f,extend:o,props:h,override:v,Events:ts,on:tA,liveQuery:rO,extendObservabilitySet:rt,getByKeyPath:w,setByKeyPath:_,delByKeyPath:function(e,t){"string"==typeof t?_(e,t,void 0):"length"in t&&[].map.call(t,function(t){_(e,t,void 0)})},shallowClone:k,deepClone:C,getObjectDiff:rd,cmp:e6,asap:x,minKey:-1/0,addons:[],connections:eX,errnames:q,dependencies:rT,cache:rn,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),rE.maxKey=tM(rE.dependencies.IDBKeyRange),"u">typeof dispatchEvent&&"u">typeof addEventListener&&(tA(tT,function(e){rF||(e=new CustomEvent(tC,{detail:e}),rF=!0,dispatchEvent(e),rF=!1)}),addEventListener(tC,function(e){e=e.detail,rF||rN(e)}));var rR,rF=!1,rD=function(){};return"u">typeof BroadcastChannel&&((rD=function(){(rR=new BroadcastChannel(tC)).onmessage=function(e){return e.data&&rN(e.data)}})(),"function"==typeof rR.unref&&rR.unref(),tA(tT,function(e){rF||rR.postMessage(e)})),"u">typeof addEventListener&&(addEventListener("pagehide",function(e){if(!rE.disableBfCache&&e.persisted){ei&&console.debug("Dexie: handling persisted pagehide"),null!=rR&&rR.close();for(var t=0;t<eX.length;t++)eX[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!rE.disableBfCache&&e.persisted&&(ei&&console.debug("Dexie: handling persisted pageshow"),rD(),rN({all:new t5(-1/0,[[]])}))})),eb.rejectionMapper=function(e,t){return!e||e instanceof U||e instanceof TypeError||e instanceof SyntaxError||!e.name||!H[e.name]?e:(t=new H[e.name](t||e.message,e),"stack"in e&&p(t,"stack",{get:function(){return this.inner.stack}}),t)},r(rE,Object.freeze({__proto__:null,Dexie:rE,liveQuery:rO,Entity:e4,cmp:e6,PropModification:te,replacePrefix:function(e,t){return new te({replacePrefix:[e,t]})},add:function(e){return new te({add:e})},remove:function(e){return new te({remove:e})},default:rE,RangeSet:t5,mergeRanges:t6,rangesOverlap:t7}),{default:rE}),rE}()},54385,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}},43173,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let i=n(e.r(6085)),s=n(e.r(54385));r.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"u"<typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,n;let i=null,a=null,o=null,l=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){let t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}let n=null==(t=this.headers.Prefer)?void 0:t.match(/count=(exact|planned|estimated)/),s=null==(r=e.headers.get("content-range"))?void 0:r.split("/");n&&s&&s.length>1&&(o=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(i={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,o=null,l=406,u="Not Acceptable"):a=1===a.length?a[0]:null)}else{let t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(a=[],i=null,l=200,u="OK")}catch(r){404===e.status&&""===t?(l=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null==(n=null==i?void 0:i.details)?void 0:n.includes("0 rows"))&&(i=null,l=200,u="OK"),i&&this.shouldThrowOnError)throw new s.default(i)}return{error:i,data:a,count:o,status:l,statusText:u}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,n;return{error:{message:`${null!=(t=null==e?void 0:e.name)?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!=(r=null==e?void 0:e.stack)?r:""}`,hint:"",code:`${null!=(n=null==e?void 0:e.code)?n:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}}},82191,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let i=n(e.r(43173));class s extends i.default{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){let s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){let i=void 0===n?"offset":`${n}.offset`,s=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:s="text"}={}){var a;let o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!=(a=this.headers.Accept)?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!=(e=this.headers.Prefer)?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}r.default=s},14633,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let i=n(e.r(82191));class s extends i.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";"plain"===n?i="pl":"phrase"===n?i="ph":"websearch"===n&&(i="w");let s=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}r.default=s},38290,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let i=n(e.r(14633));r.default=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){let n=!1,s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new i.default({method:t?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){let n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){let a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},98042,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.version=void 0,r.version="0.0.0-automated"},85511,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_HEADERS=void 0;let n=e.r(98042);r.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`}},2259,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let i=n(e.r(38290)),s=n(e.r(14633)),a=e.r(85511);class o{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=n}from(e){let t=new URL(`${this.url}/${e}`);return new i.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:n=!1,count:i}={}){let a,o,l=new URL(`${this.url}/rpc/${e}`);r||n?(a=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(a="POST",o=t);let u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new s.default({method:a,url:l,headers:u,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}r.default=o},82215,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.PostgrestError=r.PostgrestBuilder=r.PostgrestTransformBuilder=r.PostgrestFilterBuilder=r.PostgrestQueryBuilder=r.PostgrestClient=void 0;let i=n(e.r(2259));r.PostgrestClient=i.default;let s=n(e.r(38290));r.PostgrestQueryBuilder=s.default;let a=n(e.r(14633));r.PostgrestFilterBuilder=a.default;let o=n(e.r(82191));r.PostgrestTransformBuilder=o.default;let l=n(e.r(43173));r.PostgrestBuilder=l.default;let u=n(e.r(54385));r.PostgrestError=u.default,r.default={PostgrestClient:i.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default}},71058,e=>{"use strict";let t,r,n,i,s,a,o,l,u;var c,h,d,p,f,m,g,y,v,b,x,w,_,k,j,S,E,P,T,C,A,O,N,R,F,D,M,I=e.i(43476),B=e.i(71645);let $=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var L={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let U=(0,B.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...o},l)=>(0,B.createElement)("svg",{ref:l,...L,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:$("lucide",i),...o},[...a.map(([e,t])=>(0,B.createElement)(e,t)),...Array.isArray(s)?s:[s]])),z=(e,t)=>{let r=(0,B.forwardRef)(({className:r,...n},i)=>(0,B.createElement)(U,{ref:i,iconNode:t,className:$(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...n}));return r.displayName=`${e}`,r},V=z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var K=e.i(57688);let q=(e,t)=>{if(0===e.length)return t.classGroupId;let r=e[0],n=t.nextPart.get(r),i=n?q(e.slice(1),n):void 0;if(i)return i;if(0===t.validators.length)return;let s=e.join("-");return t.validators.find(({validator:e})=>e(s))?.classGroupId},W=/^\[(.+)\]$/,H=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:G(t,e)).classGroupId=r;return}"function"==typeof e?Q(e)?H(e(n),t,r,n):t.validators.push({validator:e,classGroupId:r}):Object.entries(e).forEach(([e,i])=>{H(i,G(t,e),r,n)})})},G=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},Q=e=>e.isThemeGetter,Y=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,J=e=>{if(e.length<=1)return e;let t=[],r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},X=/\s+/;function Z(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=ee(e))&&(n&&(n+=" "),n+=t);return n}let ee=e=>{let t;if("string"==typeof e)return e;let r="";for(let n=0;n<e.length;n++)e[n]&&(t=ee(e[n]))&&(r&&(r+=" "),r+=t);return r},et=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},er=/^\[(?:([a-z-]+):)?(.+)\]$/i,en=/^\d+\/\d+$/,ei=new Set(["px","full","screen"]),es=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ea=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eo=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,el=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eu=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ec=e=>ed(e)||ei.has(e)||en.test(e),eh=e=>eS(e,"length",eE),ed=e=>!!e&&!Number.isNaN(Number(e)),ep=e=>eS(e,"number",ed),ef=e=>!!e&&Number.isInteger(Number(e)),em=e=>e.endsWith("%")&&ed(e.slice(0,-1)),eg=e=>er.test(e),ey=e=>es.test(e),ev=new Set(["length","size","percentage"]),eb=e=>eS(e,ev,eP),ex=e=>eS(e,"position",eP),ew=new Set(["image","url"]),e_=e=>eS(e,ew,eC),ek=e=>eS(e,"",eT),ej=()=>!0,eS=(e,t,r)=>{let n=er.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):r(n[2]))},eE=e=>ea.test(e)&&!eo.test(e),eP=()=>!1,eT=e=>el.test(e),eC=e=>eu.test(e),eA=function(e,...t){let r,n,i,s=function(o){let l;return n=(r={cache:(e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=new Map,n=new Map,i=(i,s)=>{r.set(i,s),++t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(i(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):i(e,t)}}})((l=t.reduce((e,t)=>t(e),e())).cacheSize),parseClassName:(e=>{let{separator:t,experimentalParseClassName:r}=e,n=1===t.length,i=t[0],s=t.length,a=e=>{let r,a=[],o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===i&&(n||e.slice(u,u+s)===t)){a.push(e.slice(l,u)),l=u+s;continue}if("/"===c){r=u;continue}}"["===c?o++:"]"===c&&o--}let u=0===a.length?e:e.substring(l),c=u.startsWith("!"),h=c?u.substring(1):u;return{modifiers:a,hasImportantModifier:c,baseClassName:h,maybePostfixModifierPosition:r&&r>l?r-l:void 0}};return r?e=>r({className:e,parseClassName:a}):a})(l),...(e=>{let t=(e=>{let{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Y(Object.entries(e.classGroups),r).forEach(([e,r])=>{H(r,n,e,t)}),n})(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),q(r,t)||(e=>{if(W.test(e)){let t=W.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}})(e)},getConflictingClassGroupIds:(e,t)=>{let i=r[e]||[];return t&&n[e]?[...i,...n[e]]:i}}})(l)}).cache.get,i=r.cache.set,s=a,a(o)};function a(e){let t=n(e);if(t)return t;let s=((e,t)=>{let{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,s=[],a=e.trim().split(X),o="";for(let e=a.length-1;e>=0;e-=1){let t=a[e],{modifiers:l,hasImportantModifier:u,baseClassName:c,maybePostfixModifierPosition:h}=r(t),d=!!h,p=n(d?c.substring(0,h):c);if(!p){if(!d||!(p=n(c))){o=t+(o.length>0?" "+o:o);continue}d=!1}let f=J(l).join(":"),m=u?f+"!":f,g=m+p;if(s.includes(g))continue;s.push(g);let y=i(p,d);for(let e=0;e<y.length;++e){let t=y[e];s.push(m+t)}o=t+(o.length>0?" "+o:o)}return o})(e,r);return i(e,s),s}return function(){return s(Z.apply(null,arguments))}}(()=>{let e=et("colors"),t=et("spacing"),r=et("blur"),n=et("brightness"),i=et("borderColor"),s=et("borderRadius"),a=et("borderSpacing"),o=et("borderWidth"),l=et("contrast"),u=et("grayscale"),c=et("hueRotate"),h=et("invert"),d=et("gap"),p=et("gradientColorStops"),f=et("gradientColorStopPositions"),m=et("inset"),g=et("margin"),y=et("opacity"),v=et("padding"),b=et("saturate"),x=et("scale"),w=et("sepia"),_=et("skew"),k=et("space"),j=et("translate"),S=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",eg,t],T=()=>[eg,t],C=()=>["",ec,eh],A=()=>["auto",ed,eg],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],N=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",eg],M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>[ed,eg];return{cacheSize:500,separator:":",theme:{colors:[ej],spacing:[ec,eh],blur:["none","",ey,eg],brightness:I(),borderColor:[e],borderRadius:["none","","full",ey,eg],borderSpacing:T(),borderWidth:C(),contrast:I(),grayscale:D(),hueRotate:I(),invert:D(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[em,eh],inset:P(),margin:P(),opacity:I(),padding:T(),saturate:I(),scale:I(),sepia:D(),skew:I(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",eg]}],container:["container"],columns:[{columns:[ey]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),eg]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ef,eg]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",eg]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",ef,eg]}],"grid-cols":[{"grid-cols":[ej]}],"col-start-end":[{col:["auto",{span:["full",ef,eg]},eg]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[ej]}],"row-start-end":[{row:["auto",{span:[ef,eg]},eg]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",eg]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",eg]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",eg,t]}],"min-w":[{"min-w":[eg,t,"min","max","fit"]}],"max-w":[{"max-w":[eg,t,"none","full","min","max","fit","prose",{screen:[ey]},ey]}],h:[{h:[eg,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[eg,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[eg,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[eg,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ey,eh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ep]}],"font-family":[{font:[ej]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",eg]}],"line-clamp":[{"line-clamp":["none",ed,ep]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ec,eg]}],"list-image":[{"list-image":["none",eg]}],"list-style-type":[{list:["none","disc","decimal",eg]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...N(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ec,eh]}],"underline-offset":[{"underline-offset":["auto",ec,eg]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",eg]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",eg]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),ex]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",eb]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},e_]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...N(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:N()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...N()]}],"outline-offset":[{"outline-offset":[ec,eg]}],"outline-w":[{outline:[ec,eh]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[ec,eh]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ey,ek]}],"shadow-color":[{shadow:[ej]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ey,eg]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",eg]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",eg]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",eg]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[ef,eg]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",eg]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",eg]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",eg]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ec,eh,ep]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function eO(...e){return eA(function(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}(e))&&(n&&(n+=" "),n+=t);return n}(e))}let eN={key:"/key.svg",lock:"/lock.svg",shield:"/shield.svg",upload:"/upload.svg",smartphone:"/smartphone.svg",cloud:"/cloud.svg",clock:"/clock.svg",search:"/search.svg",image:"/image.svg",folder:"/Openfolder.svg",refresh:"/RefreshCw.svg",chevronRight:"/ChevronRight.svg"};function eR({name:e,className:t,size:r=24}){return(0,I.jsx)("div",{className:eO("relative inline-block shrink-0",t),style:{width:r,height:r},children:(0,I.jsx)(K.default,{src:eN[e],alt:e,fill:!0,className:"object-contain",unoptimized:!0})})}var eF=e.i(3809);let eD=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],eM=new Set(eD),eI=(e,t,r)=>r>t?t:r<e?e:r,eB={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},e$={...eB,transform:e=>eI(0,1,e)},eL={...eB,default:1},eU=e=>Math.round(1e5*e)/1e5,ez=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,eV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,eK=(e,t)=>r=>!!("string"==typeof r&&eV.test(r)&&r.startsWith(e)||t&&null!=r&&Object.prototype.hasOwnProperty.call(r,t)),eq=(e,t,r)=>n=>{if("string"!=typeof n)return n;let[i,s,a,o]=n.match(ez);return{[e]:parseFloat(i),[t]:parseFloat(s),[r]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},eW={...eB,transform:e=>Math.round(eI(0,255,e))},eH={test:eK("rgb","red"),parse:eq("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+eW.transform(e)+", "+eW.transform(t)+", "+eW.transform(r)+", "+eU(e$.transform(n))+")"},eG={test:eK("#"),parse:function(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}},transform:eH.transform},eQ=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),eY=eQ("deg"),eJ=eQ("%"),eX=eQ("px"),eZ=eQ("vh"),e0=eQ("vw"),e1={...eJ,parse:e=>eJ.parse(e)/100,transform:e=>eJ.transform(100*e)},e2={test:eK("hsl","hue"),parse:eq("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+eJ.transform(eU(t))+", "+eJ.transform(eU(r))+", "+eU(e$.transform(n))+")"},e3={test:e=>eH.test(e)||eG.test(e)||e2.test(e),parse:e=>eH.test(e)?eH.parse(e):e2.test(e)?e2.parse(e):eG.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?eH.transform(e):e2.transform(e),getAnimatableNone:e=>{let t=e3.parse(e);return t.alpha=0,e3.transform(t)}},e5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,e4="number",e6="color",e7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function e8(e){let t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[],s=0,a=t.replace(e7,e=>(e3.test(e)?(n.color.push(s),i.push(e6),r.push(e3.parse(e))):e.startsWith("var(")?(n.var.push(s),i.push("var"),r.push(e)):(n.number.push(s),i.push(e4),r.push(parseFloat(e))),++s,"${}")).split("${}");return{values:r,split:a,indexes:n,types:i}}function e9(e){return e8(e).values}function te(e){let{split:t,types:r}=e8(e),n=t.length;return e=>{let i="";for(let s=0;s<n;s++)if(i+=t[s],void 0!==e[s]){let t=r[s];t===e4?i+=eU(e[s]):t===e6?i+=e3.transform(e[s]):i+=e[s]}return i}}let tt=e=>"number"==typeof e?0:e3.test(e)?e3.getAnimatableNone(e):e,tr={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(ez)?.length||0)+(e.match(e5)?.length||0)>0},parse:e9,createTransformer:te,getAnimatableNone:function(e){let t=e9(e);return te(e)(t.map(tt))}},tn=new Set(["brightness","contrast","saturate","opacity"]);function ti(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[n]=r.match(ez)||[];if(!n)return e;let i=r.replace(n,""),s=+!!tn.has(t);return n!==r&&(s*=100),t+"("+s+i+")"}let ts=/\b([a-z-]*)\(.*?\)/gu,ta={...tr,getAnimatableNone:e=>{let t=e.match(ts);return t?t.map(ti).join(" "):e}},to={...eB,transform:Math.round},tl={borderWidth:eX,borderTopWidth:eX,borderRightWidth:eX,borderBottomWidth:eX,borderLeftWidth:eX,borderRadius:eX,radius:eX,borderTopLeftRadius:eX,borderTopRightRadius:eX,borderBottomRightRadius:eX,borderBottomLeftRadius:eX,width:eX,maxWidth:eX,height:eX,maxHeight:eX,top:eX,right:eX,bottom:eX,left:eX,inset:eX,insetBlock:eX,insetBlockStart:eX,insetBlockEnd:eX,insetInline:eX,insetInlineStart:eX,insetInlineEnd:eX,padding:eX,paddingTop:eX,paddingRight:eX,paddingBottom:eX,paddingLeft:eX,paddingBlock:eX,paddingBlockStart:eX,paddingBlockEnd:eX,paddingInline:eX,paddingInlineStart:eX,paddingInlineEnd:eX,margin:eX,marginTop:eX,marginRight:eX,marginBottom:eX,marginLeft:eX,marginBlock:eX,marginBlockStart:eX,marginBlockEnd:eX,marginInline:eX,marginInlineStart:eX,marginInlineEnd:eX,backgroundPositionX:eX,backgroundPositionY:eX,rotate:eY,rotateX:eY,rotateY:eY,rotateZ:eY,scale:eL,scaleX:eL,scaleY:eL,scaleZ:eL,skew:eY,skewX:eY,skewY:eY,distance:eX,translateX:eX,translateY:eX,translateZ:eX,x:eX,y:eX,z:eX,perspective:eX,transformPerspective:eX,opacity:e$,originX:e1,originY:e1,originZ:eX,zIndex:to,fillOpacity:e$,strokeOpacity:e$,numOctaves:to},tu={...tl,color:e3,backgroundColor:e3,outlineColor:e3,fill:e3,stroke:e3,borderColor:e3,borderTopColor:e3,borderRightColor:e3,borderBottomColor:e3,borderLeftColor:e3,filter:ta,WebkitFilter:ta},tc=e=>tu[e],th=()=>({translate:0,scale:1,origin:0,originPoint:0}),td=()=>({x:th(),y:th()}),tp=()=>({min:0,max:0}),tf=()=>({x:tp(),y:tp()}),tm=e=>!!(e&&e.getVelocity),tg=new Set(["width","height","top","left","right","bottom",...eD]),ty=e=>t=>t.test(e),tv=[eB,eX,eJ,eY,e0,eZ,{test:e=>"auto"===e,parse:e=>e}],tb=e=>tv.find(ty(e));var tx=e.i(47167);let tw=()=>{},t_=()=>{};tx.default;let tk=e=>t=>"string"==typeof t&&t.startsWith(e),tj=tk("--"),tS=tk("var(--"),tE=e=>!!tS(e)&&tP.test(e.split("/*")[0].trim()),tP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function tT(e){return"string"==typeof e&&e.split("/*")[0].includes("var(--")}let tC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,tA=e=>180*e/Math.PI,tO=e=>tR(tA(Math.atan2(e[1],e[0]))),tN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:tO,rotateZ:tO,skewX:e=>tA(Math.atan(e[1])),skewY:e=>tA(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},tR=e=>((e%=360)<0&&(e+=360),e),tF=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),tD=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),tM={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tF,scaleY:tD,scale:e=>(tF(e)+tD(e))/2,rotateX:e=>tR(tA(Math.atan2(e[6],e[5]))),rotateY:e=>tR(tA(Math.atan2(-e[2],e[0]))),rotateZ:tO,rotate:tO,skewX:e=>tA(Math.atan(e[4])),skewY:e=>tA(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function tI(e){return+!!e.includes("scale")}function tB(e,t){let r,n;if(!e||"none"===e)return tI(t);let i=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(i)r=tM,n=i;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=tN,n=t}if(!n)return tI(t);let s=r[t],a=n[1].split(",").map(t$);return"function"==typeof s?s(a):a[s]}function t$(e){return parseFloat(e.trim())}let tL=e=>e===eB||e===eX,tU=new Set(["x","y","z"]),tz=eD.filter(e=>!tU.has(e)),tV={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>tB(t,"x"),y:(e,{transform:t})=>tB(t,"y")};tV.translateX=tV.x,tV.translateY=tV.y;let tK=e=>e,tq={},tW=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function tH(e,t){let r=!1,n=!0,i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,a=tW.reduce((e,r)=>(e[r]=function(e,t){let r=new Set,n=new Set,i=!1,s=!1,a=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(t){a.has(t)&&(c.schedule(t),e()),l++,t(o)}let c={schedule:(e,t=!1,s=!1)=>{let o=s&&i?r:n;return t&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{n.delete(e),a.delete(e)},process:e=>{if(o=e,i){s=!0;return}i=!0,[r,n]=[n,r],r.forEach(u),t,l=0,r.clear(),i=!1,s&&(s=!1,c.process(e))}};return c}(s,t?r:void 0),e),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:d,render:p,postRender:f}=a,m=()=>{let s=tq.useManualTiming?i.timestamp:performance.now();r=!1,tq.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(s-i.timestamp,40),1)),i.timestamp=s,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),h.process(i),d.process(i),p.process(i),f.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(m))};return{schedule:tW.reduce((t,s)=>{let o=a[s];return t[s]=(t,s=!1,a=!1)=>(!r&&(r=!0,n=!0,i.isProcessing||e(m)),o.schedule(t,s,a)),t},{}),cancel:e=>{for(let t=0;t<tW.length;t++)a[tW[t]].cancel(e)},state:i,steps:a}}let{schedule:tG,cancel:tQ,state:tY,steps:tJ}=tH("u">typeof requestAnimationFrame?requestAnimationFrame:tK,!0),tX=new Set,tZ=!1,t0=!1,t1=!1;function t2(){if(t0){let e=Array.from(tX).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{let t,n=(t=[],tz.forEach(r=>{let n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(+!!r.startsWith("scale")))}),t);n.length&&(r.set(e,n),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=r.get(e);t&&t.forEach(([t,r])=>{e.getValue(t)?.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}t0=!1,tZ=!1,tX.forEach(e=>e.complete(t1)),tX.clear()}function t3(){tX.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(t0=!0)})}class t5{constructor(e,t,r,n,i,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=n,this.element=i,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(tX.add(this),tZ||(tZ=!0,tG.read(t3),tG.resolveKeyframes(t2))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:r,motionValue:n}=this;if(null===e[0]){let i=n?.get(),s=e[e.length-1];if(void 0!==i)e[0]=i;else if(r&&t){let n=r.readValue(t,s);null!=n&&(e[0]=n)}void 0===e[0]&&(e[0]=s),n&&void 0===i&&n.set(e[0])}for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),tX.delete(this)}cancel(){"scheduled"===this.state&&(tX.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function t4(e,t){let r=tc(e);return r!==ta&&(r=tr),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let t6=new Set(["auto","none","0"]);class t7 extends t5{constructor(e,t,r,n,i){super(e,t,r,n,i,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let r=0;r<e.length;r++){let n=e[r];if("string"==typeof n&&tE(n=n.trim())){let i=function e(t,r,n=1){t_(n<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[i,s]=function(e){let t=tC.exec(e);if(!t)return[,];let[,r,n,i]=t;return[`--${r??n}`,i]}(t);if(!i)return;let a=window.getComputedStyle(r).getPropertyValue(i);if(a){let e=a.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e)?parseFloat(e):e}return tE(s)?e(s,r,n+1):s}(n,t.current);void 0!==i&&(e[r]=i),r===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!tg.has(r)||2!==e.length)return;let[n,i]=e,s=tb(n),a=tb(i);if(tT(n)!==tT(i)&&tV[r]){this.needsMeasurement=!0;return}if(s!==a)if(tL(s)&&tL(a))for(let t=0;t<e.length;t++){let r=e[t];"string"==typeof r&&(e[t]=parseFloat(r))}else tV[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,r=[];for(let t=0;t<e.length;t++)(null===e[t]||function(e){if("number"==typeof e)return 0===e;if(null===e)return!0;return"none"===e||"0"===e||/^0[^.\s]+$/u.test(e)}(e[t]))&&r.push(t);r.length&&function(e,t,r){let n,i=0;for(;i<e.length&&!n;){let t=e[i];"string"==typeof t&&!t6.has(t)&&e8(t).values.length&&(n=e[i]),i++}if(n&&r)for(let i of t)e[i]=t4(r,n)}(e,r,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=tV[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let n=t[t.length-1];void 0!==n&&e.getValue(r,n).jump(n,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;let n=e.getValue(t);n&&n.jump(this.measuredOrigin,!1);let i=r.length-1,s=r[i];r[i]=tV[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,r])=>{e.getValue(t).set(r)}),this.resolveNoneKeyframes()}}function t8(e,t){-1===e.indexOf(t)&&e.push(t)}function t9(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class re{constructor(){this.subscriptions=[]}add(e){return t8(this.subscriptions,e),()=>t9(this.subscriptions,e)}notify(e,t,r){let n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,r);else for(let i=0;i<n;i++){let n=this.subscriptions[i];n&&n(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let{schedule:rt}=tH(queueMicrotask,!1);function rr(){t=void 0}let rn={now:()=>(void 0===t&&rn.set(tY.isProcessing||tq.useManualTiming?tY.timestamp:performance.now()),t),set:e=>{t=e,queueMicrotask(rr)}};class ri{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=rn.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=rn.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new re);let r=this.events[e].add(t);return"change"===e?()=>{r(),tG.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return u&&u.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=rn.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let r=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),r?1e3/r*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rs(e,t){return new ri(e,t)}let ra=[...tv,e3,tr],ro={current:null},rl={current:!1},ru="u">typeof window,rc=new WeakMap;function rh(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function rd(e){return"string"==typeof e||Array.isArray(e)}let rp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rf=["initial",...rp];function rm(e){return rh(e.animate)||rf.some(t=>rd(e[t]))}function rg(e){return!!(rm(e)||e.variants)}function ry(e){let t=[{},{}];return e?.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function rv(e,t,r,n){if("function"==typeof t){let[i,s]=ry(n);t=t(void 0!==r?r:e.custom,i,s)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[i,s]=ry(n);t=t(void 0!==r?r:e.custom,i,s)}return t}let rb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],rx={};class rw{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=t5,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=rn.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,tG.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=s;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=rm(t),this.isVariantNode=rg(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(t,{},this);for(const e in c){const t=c[e];void 0!==o[e]&&tm(t)&&t.set(o[e])}}mount(e){this.current=e,rc.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(rl.current||function(){if(rl.current=!0,ru)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ro.current=e.matches;e.addEventListener("change",t),t()}else ro.current=!1}(),this.shouldReduceMotion=ro.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),tQ(this.notifyUpdate),tQ(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){let r;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let n=eM.has(e);n&&this.onBindTransform&&this.onBindTransform();let i=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&tG.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});"u">typeof window&&window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in rx){let t=rx[e];if(!t)continue;let{isEnabled:r,Feature:n}=t;if(!this.features[e]&&n&&r(this.props)&&(this.features[e]=new n(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tf()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<rb.length;t++){let r=rb[t];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);let n=e["on"+r];n&&(this.propEventSubscriptions[r]=this.on(r,n))}this.prevMotionValues=function(e,t,r){for(let n in t){let i=t[n],s=r[n];if(tm(i))e.addValue(n,i);else if(tm(s))e.addValue(n,rs(i,{owner:e}));else if(s!==i)if(e.hasValue(n)){let t=e.getValue(n);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{let t=e.getStaticValue(n);e.addValue(n,rs(void 0!==t?t:i,{owner:e}))}}for(let n in r)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=rs(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];if(null!=r){let n,i;if("string"==typeof r&&(n=r,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n)||(i=r,/^0[^.\s]+$/u.test(i))))r=parseFloat(r);else{let n;n=r,!ra.find(ty(n))&&tr.test(t)&&(r=t4(e,t))}this.setBaseTarget(e,tm(r)?r.get():r)}return tm(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let t,{initial:r}=this.props;if("string"==typeof r||"object"==typeof r){let n=rv(this.props,r,this.presenceContext?.custom);n&&(t=n[e])}if(r&&void 0!==t)return t;let n=this.getBaseTargetFromProps(this.props,e);return void 0===n||tm(n)?void 0!==this.initialValues[e]&&void 0===t?void 0:this.baseTarget[e]:n}on(e,t){return this.events[e]||(this.events[e]=new re),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){rt.render(this.render)}}class r_ extends rw{constructor(){super(...arguments),this.KeyframeResolver=t7}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){let r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;tm(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function rk(e){return e.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}let rj=(e,t)=>t&&"number"==typeof e?t.transform(e):e,rS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rE=eD.length;function rP(e,t,r){let{style:n,vars:i,transformOrigin:s}=e,a=!1,o=!1;for(let e in t){let r=t[e];if(eM.has(e)){a=!0;continue}if(tj(e)){i[e]=r;continue}{let t=rj(r,tl[e]);e.startsWith("origin")?(o=!0,s[e]=t):n[e]=t}}if(!t.transform&&(a||r?n.transform=function(e,t,r){let n="",i=!0;for(let s=0;s<rE;s++){let a=eD[s],o=e[a];if(void 0===o)continue;let l=!0;if("number"==typeof o)l=o===+!!a.startsWith("scale");else{let e=parseFloat(o);l=a.startsWith("scale")?1===e:0===e}if(!l||r){let e=rj(o,tl[a]);if(!l){i=!1;let t=rS[a]||a;n+=`${t}(${e}) `}r&&(t[a]=e)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}(t,e.transform,r):n.transform&&(n.transform="none")),o){let{originX:e="50%",originY:t="50%",originZ:r=0}=s;n.transformOrigin=`${e} ${t} ${r}`}}let rT={offset:"stroke-dashoffset",array:"stroke-dasharray"},rC={offset:"strokeDashoffset",array:"strokeDasharray"},rA=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function rO(e,{attrX:t,attrY:r,attrScale:n,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,u,c){if(rP(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:h,style:d}=e;for(let e of(h.transform&&(d.transform=h.transform,delete h.transform),(d.transform||h.transformOrigin)&&(d.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),d.transform&&(d.transformBox=c?.transformBox??"fill-box",delete h.transformBox),rA))void 0!==h[e]&&(d[e]=h[e],delete h[e]);void 0!==t&&(h.x=t),void 0!==r&&(h.y=r),void 0!==n&&(h.scale=n),void 0!==i&&function(e,t,r=1,n=0,i=!0){e.pathLength=1;let s=i?rT:rC;e[s.offset]=`${-n}`,e[s.array]=`${t} ${r}`}(h,i,s,a,!1)}let rN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),rR=e=>"string"==typeof e&&"svg"===e.toLowerCase();function rF(e,{style:t,vars:r},n,i){let s,a=e.style;for(s in t)a[s]=t[s];for(s in i?.applyProjectionStyles(a,n),r)a.setProperty(s,r[s])}function rD(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let rM={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!eX.test(e))return e;else e=parseFloat(e);let r=rD(e,t.target.x),n=rD(e,t.target.y);return`${r}% ${n}%`}},rI=(e,t,r)=>e+(t-e)*r,rB={borderRadius:{...rM,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rM,borderTopRightRadius:rM,borderBottomLeftRadius:rM,borderBottomRightRadius:rM,boxShadow:{correct:(e,{treeScale:t,projectionDelta:r})=>{let n=tr.parse(e);if(n.length>5)return e;let i=tr.createTransformer(e),s=+("number"!=typeof n[0]),a=r.x.scale*t.x,o=r.y.scale*t.y;n[0+s]/=a,n[1+s]/=o;let l=rI(a,o,.5);return"number"==typeof n[2+s]&&(n[2+s]/=l),"number"==typeof n[3+s]&&(n[3+s]/=l),i(n)}}};function r$(e,{layout:t,layoutId:r}){return eM.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!rB[e]||"opacity"===e)}function rL(e,t,r){let n=e.style,i=t?.style,s={};if(!n)return s;for(let t in n)(tm(n[t])||i&&tm(i[t])||r$(t,e)||r?.getValue(t)?.liveStyle!==void 0)&&(s[t]=n[t]);return s}function rU(e,t,r){let n=rL(e,t,r);for(let r in e)(tm(e[r])||tm(t[r]))&&(n[-1!==eD.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]);return n}class rz extends r_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tf}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(eM.has(t)){let e=tc(t);return e&&e.default||0}return t=rN.has(t)?t:rk(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return rU(e,t,r)}build(e,t,r){rO(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,n){for(let r in rF(e,t,void 0,n),t.attrs)e.setAttribute(rN.has(r)?r:rk(r),t.attrs[r])}mount(e){this.isSVGTag=rR(e.tagName),super.mount(e)}}function rV({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function rK(e){return void 0===e||1===e}function rq({scale:e,scaleX:t,scaleY:r}){return!rK(e)||!rK(t)||!rK(r)}function rW(e){return rq(e)||rH(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function rH(e){var t,r;return(t=e.x)&&"0%"!==t||(r=e.y)&&"0%"!==r}function rG(e,t,r,n,i){return void 0!==i&&(e=n+i*(e-n)),n+r*(e-n)+t}function rQ(e,t=0,r=1,n,i){e.min=rG(e.min,t,r,n,i),e.max=rG(e.max,t,r,n,i)}function rY(e,{x:t,y:r}){rQ(e.x,t.translate,t.scale,t.originPoint),rQ(e.y,r.translate,r.scale,r.originPoint)}function rJ(e,t){e.min=e.min+t,e.max=e.max+t}function rX(e,t,r,n,i=.5){let s=rI(e.min,e.max,i);rQ(e,t,r,s,n)}function rZ(e,t){rX(e.x,t.x,t.scaleX,t.scale,t.originX),rX(e.y,t.y,t.scaleY,t.scale,t.originY)}function r0(e,t){return rV(function(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}class r1 extends r_{constructor(){super(...arguments),this.type="html",this.renderInstance=rF}readValueFromInstance(e,t){if(eM.has(t))return this.projection?.isProjecting?tI(t):((e,t)=>{let{transform:r="none"}=getComputedStyle(e);return tB(r,t)})(e,t);{let r=window.getComputedStyle(e),n=(tj(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof n?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:t}){return r0(e,t)}build(e,t,r){rP(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return rL(e,t,r)}}let r2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function r3(e){if("string"!=typeof e||e.includes("-"));else if(r2.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let r5=(0,B.createContext)({}),r4=(0,B.createContext)({strict:!1}),r6=(0,B.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),r7=(0,B.createContext)({});function r8(e){return Array.isArray(e)?e.join(" "):e}let r9=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ne(e,t,r){for(let n in t)tm(t[n])||r$(n,r)||(e[n]=t[n])}let nt=()=>({...r9(),attrs:{}}),nr=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nn(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||nr.has(e)}let ni=e=>!nn(e);try{c=(()=>{let e=Error("Cannot find module '@emotion/is-prop-valid'");throw e.code="MODULE_NOT_FOUND",e})().default,"function"==typeof c&&(ni=e=>e.startsWith("on")?!nn(e):c(e))}catch{}function ns(e){return tm(e)?e.get():e}let na=(0,B.createContext)(null),no=e=>(t,r)=>{let n,i=(0,B.useContext)(r7),s=(0,B.useContext)(na),a=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,i){return{latestValues:function(e,t,r,n){let i={},s=n(e,{});for(let e in s)i[e]=ns(s[e]);let{initial:a,animate:o}=e,l=rm(e),u=rg(e);t&&u&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let c=!!r&&!1===r.initial,h=(c=c||!1===a)?o:a;if(h&&"boolean"!=typeof h&&!rh(h)){let t=Array.isArray(h)?h:[h];for(let r=0;r<t.length;r++){let n=rv(e,t[r]);if(n){let{transitionEnd:e,transition:t,...r}=n;for(let e in r){let t=r[e];if(Array.isArray(t)){let e=c?t.length-1:0;t=t[e]}null!==t&&(i[e]=t)}for(let t in e)i[t]=e[t]}}}return i}(r,n,i,e),renderState:t()}})(e,t,i,s);return r?a():(null===(n=(0,B.useRef)(null)).current&&(n.current=a()),n.current)},nl=no({scrapeMotionValuesFromProps:rL,createRenderState:r9}),nu=no({scrapeMotionValuesFromProps:rU,createRenderState:nt}),nc="u">typeof window,nh={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nd=!1;function np(){return!function(){if(nd)return;let e={};for(let t in nh)e[t]={isEnabled:e=>nh[t].some(t=>!!e[t])};rx=e,nd=!0}(),rx}let nf=Symbol.for("motionComponentSymbol"),nm="data-"+rk("framerAppearId"),ng=(0,B.createContext)({});function ny(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let nv=nc?B.useLayoutEffect:B.useEffect;function nb(e,{forwardMotionProps:t=!1,type:r}={},n,i){n&&function(e){let t=np();for(let r in e)t[r]={...t[r],...e[r]};rx=t}(n);let s=r?"svg"===r:r3(e),a=s?nu:nl;function o(r,n){var o;let l,u,c,h={...(0,B.useContext)(r6),...r,layoutId:function({layoutId:e}){let t=(0,B.useContext)(r5).id;return t&&void 0!==e?t+"-"+e:e}(r)},{isStatic:d}=h,p=function(e){let{initial:t,animate:r}=function(e,t){if(rm(e)){let{initial:t,animate:r}=e;return{initial:!1===t||rd(t)?t:void 0,animate:rd(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,B.useContext)(r7));return(0,B.useMemo)(()=>({initial:t,animate:r}),[r8(t),r8(r)])}(r),f=a(r,d);if(!d&&nc){(0,B.useContext)(r4).strict;let t=function(e){let{drag:t,layout:r}=np();if(!t&&!r)return{};let n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(h);l=t.MeasureLayout,p.visualElement=function(e,t,r,n,i,s){let{visualElement:a}=(0,B.useContext)(r7),o=(0,B.useContext)(r4),l=(0,B.useContext)(na),u=(0,B.useContext)(r6).reducedMotion,c=(0,B.useRef)(null);n=n||o.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:a,props:r,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:u,isSVG:s}));let h=c.current,d=(0,B.useContext)(ng);h&&!h.projection&&i&&("html"===h.type||"svg"===h.type)&&function(e,t,r,n){let{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&ny(o),visualElement:e,animationType:"string"==typeof s?s:"both",initialPromotionConfig:n,crossfade:c,layoutScroll:l,layoutRoot:u})}(c.current,r,i,d);let p=(0,B.useRef)(!1);(0,B.useInsertionEffect)(()=>{h&&p.current&&h.update(r,l)});let f=r[nm],m=(0,B.useRef)(!!f&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return nv(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),m.current&&h.animationState&&h.animationState.animateChanges())}),(0,B.useEffect)(()=>{h&&(!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(f)}),m.current=!1),h.enteringChildren=void 0)}),h}(e,f,h,i,t.ProjectionNode,s)}return(0,I.jsxs)(r7.Provider,{value:p,children:[l&&p.visualElement?(0,I.jsx)(l,{visualElement:p.visualElement,...h}):null,function(e,t,r,{latestValues:n},i,s=!1,a){let o=(a??r3(e)?function(e,t,r,n){let i=(0,B.useMemo)(()=>{let r=nt();return rO(r,t,rR(n),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let t={};ne(t,e.style,e),i.style={...t,...i.style}}return i}:function(e,t){let r,n,i={},s=(r=e.style||{},ne(n={},r,e),Object.assign(n,function({transformTemplate:e},t){return(0,B.useMemo)(()=>{let r=r9();return rP(r,t,e),Object.assign({},r.vars,r.style)},[t])}(e,t)),n);return e.drag&&!1!==e.dragListener&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=s,i})(t,n,i,e),l=function(e,t,r){let n={};for(let i in e)("values"!==i||"object"!=typeof e.values)&&(ni(i)||!0===r&&nn(i)||!t&&!nn(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}(t,"string"==typeof e,s),u=e!==B.Fragment?{...l,...o,ref:r}:{},{children:c}=t,h=(0,B.useMemo)(()=>tm(c)?c.get():c,[c]);return(0,B.createElement)(e,{...u,children:h})}(e,r,(o=p.visualElement,u=(0,B.useRef)(n),(0,B.useInsertionEffect)(()=>{u.current=n}),c=(0,B.useRef)(null),(0,B.useCallback)(e=>{e&&f.onMount?.(e),o&&(e?o.mount(e):o.unmount());let t=u.current;if("function"==typeof t)if(e){let r=t(e);"function"==typeof r&&(c.current=r)}else c.current?(c.current(),c.current=null):t(e);else t&&(t.current=e)},[o])),f,d,t,s)]})}o.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;let l=(0,B.forwardRef)(o);return l[nf]=e,l}class nx{constructor(e){this.isMounted=!1,this.node=e}update(){}}function nw(e,t,r){let n=e.getProps();return rv(n,t,void 0!==r?r:n.custom,e)}function n_(e,t){return e?.[t]??e?.default??e}let nk=e=>Array.isArray(e);function nj(e,t){let r=e.getValue("willChange");if(tm(r)&&r.add)return r.add(t);if(!r&&tq.WillChange){let r=new tq.WillChange("auto");e.addValue("willChange",r),r.add(t)}}let nS=e=>1e3*e,nE=(e,t)=>r=>t(e(r)),nP=(...e)=>e.reduce(nE),nT={layout:0,mainThread:0,waapi:0};function nC(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function nA(e,t){return r=>r>0?t:e}let nO=(e,t,r)=>{let n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},nN=[eG,eH,e2];function nR(e){let t=nN.find(t=>t.test(e));if(tw(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let r=t.parse(e);return t===e2&&(r=function({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let i=0,s=0,a=0;if(t/=100){let n=r<.5?r*(1+t):r+t-r*t,o=2*r-n;i=nC(o,n,e+1/3),s=nC(o,n,e),a=nC(o,n,e-1/3)}else i=s=a=r;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*a),alpha:n}}(r)),r}let nF=(e,t)=>{let r=nR(e),n=nR(t);if(!r||!n)return nA(e,t);let i={...r};return e=>(i.red=nO(r.red,n.red,e),i.green=nO(r.green,n.green,e),i.blue=nO(r.blue,n.blue,e),i.alpha=rI(r.alpha,n.alpha,e),eH.transform(i))},nD=new Set(["none","hidden"]);function nM(e,t){return r=>rI(e,t,r)}function nI(e){return"number"==typeof e?nM:"string"==typeof e?tE(e)?nA:e3.test(e)?nF:nL:Array.isArray(e)?nB:"object"==typeof e?e3.test(e)?nF:n$:nA}function nB(e,t){let r=[...e],n=r.length,i=e.map((e,r)=>nI(e)(e,t[r]));return e=>{for(let t=0;t<n;t++)r[t]=i[t](e);return r}}function n$(e,t){let r={...e,...t},n={};for(let i in r)void 0!==e[i]&&void 0!==t[i]&&(n[i]=nI(e[i])(e[i],t[i]));return e=>{for(let t in n)r[t]=n[t](e);return r}}let nL=(e,t)=>{let r=tr.createTransformer(t),n=e8(e),i=e8(t);if(!(n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length))return tw(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),nA(e,t);if(nD.has(e)&&!i.values.length||nD.has(t)&&!n.values.length)return nD.has(e)?r=>r<=0?e:t:r=>r>=1?t:e;return nP(nB(function(e,t){let r=[],n={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){let s=t.types[i],a=e.indexes[s][n[s]],o=e.values[a]??0;r[i]=o,n[s]++}return r}(n,i),i.values),r)};function nU(e,t,r){return"number"==typeof e&&"number"==typeof t&&"number"==typeof r?rI(e,t,r):nI(e)(e,t)}let nz=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>tG.update(t,e),stop:()=>tQ(t),now:()=>tY.isProcessing?tY.timestamp:rn.now()}},nV=(e,t,r=10)=>{let n="",i=Math.max(Math.round(t/r),2);for(let t=0;t<i;t++)n+=Math.round(1e4*e(t/(i-1)))/1e4+", ";return`linear(${n.substring(0,n.length-2)})`};function nK(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}function nq(e,t,r){var n,i;let s=Math.max(t-5,0);return n=r-e(s),(i=t-s)?1e3/i*n:0}let nW=.01,nH=2,nG=.005,nQ=.5;function nY(e,t){return e*Math.sqrt(1-t*t)}let nJ=["duration","bounce"],nX=["stiffness","damping","mass"];function nZ(e,t){return t.some(t=>void 0!==e[t])}function n0(e=.3,t=.3){let r,n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:i,restDelta:s}=n,a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:u,damping:c,mass:h,duration:d,velocity:p,isResolvedFromDuration:f}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!nZ(e,nX)&&nZ(e,nJ))if(e.visualDuration){let r=2*Math.PI/(1.2*e.visualDuration),n=r*r,i=2*eI(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:1,stiffness:n,damping:i}}else{let r=function({duration:e=800,bounce:t=.3,velocity:r=0,mass:n=1}){let i,s;tw(e<=nS(10),"Spring duration must be 10 seconds or less","spring-duration-limit");let a=1-t;a=eI(.05,1,a),e=eI(.01,10,e/1e3),a<1?(i=t=>{let n=t*a,i=n*e;return .001-(n-r)/nY(t,a)*Math.exp(-i)},s=t=>{let n=t*a*e,s=Math.pow(a,2)*Math.pow(t,2)*e,o=Math.exp(-n),l=nY(Math.pow(t,2),a);return(n*r+r-s)*o*(-i(t)+.001>0?-1:1)/l}):(i=t=>-.001+Math.exp(-t*e)*((t-r)*e+1),s=t=>e*e*(r-t)*Math.exp(-t*e));let o=function(e,t,r){let n=r;for(let r=1;r<12;r++)n-=e(n)/t(n);return n}(i,s,5/e);if(e=nS(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(o,2)*n;return{stiffness:t,damping:2*a*Math.sqrt(n*t),duration:e}}}(e);(t={...t,...r,mass:1}).isResolvedFromDuration=!0}return t}({...n,velocity:-((n.velocity||0)/1e3)}),m=p||0,g=c/(2*Math.sqrt(u*h)),y=o-a,v=Math.sqrt(u/h)/1e3,b=5>Math.abs(y);if(i||(i=b?nW:nH),s||(s=b?nG:nQ),g<1){let e=nY(v,g);r=t=>o-Math.exp(-g*v*t)*((m+g*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}else if(1===g)r=e=>o-Math.exp(-v*e)*(y+(m+v*y)*e);else{let e=v*Math.sqrt(g*g-1);r=t=>{let r=Math.exp(-g*v*t),n=Math.min(e*t,300);return o-r*((m+g*v*y)*Math.sinh(n)+e*y*Math.cosh(n))/e}}let x={calculatedDuration:f&&d||null,next:e=>{let t=r(e);if(f)l.done=e>=d;else{let n=0===e?m:0;g<1&&(n=0===e?nS(m):nq(r,e,t));let a=Math.abs(o-t)<=s;l.done=Math.abs(n)<=i&&a}return l.value=l.done?o:t,l},toString:()=>{let e=Math.min(nK(x),2e4),t=nV(t=>x.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return x}function n1({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){let h,d,p=e[0],f={done:!1,value:p},m=r*t,g=p+m,y=void 0===a?g:a(g);y!==g&&(m=y-p);let v=e=>-m*Math.exp(-e/n),b=e=>y+v(e),x=e=>{let t=v(e),r=b(e);f.done=Math.abs(t)<=u,f.value=f.done?y:r},w=e=>{let t;if(t=f.value,void 0!==o&&t<o||void 0!==l&&t>l){var r;h=e,d=n0({keyframes:[f.value,(r=f.value,void 0===o?l:void 0===l||Math.abs(o-r)<Math.abs(l-r)?o:l)],velocity:nq(b,e,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c})}};return w(0),{calculatedDuration:null,next:e=>{let t=!1;return(d||void 0!==h||(t=!0,x(e),w(e)),void 0!==h&&e>=h)?d.next(e-h):(t||x(e),f)}}}n0.applyToOptions=e=>{let t=function(e,t=100,r){let n=r({...e,keyframes:[0,t]}),i=Math.min(nK(n),2e4);return{type:"keyframes",ease:e=>n.next(i*e).value/t,duration:i/1e3}}(e,100,n0);return e.ease=t.ease,e.duration=nS(t.duration),e.type="keyframes",e};let n2=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function n3(e,t,r,n){return e===t&&r===n?tK:i=>0===i||1===i?i:n2(function(e,t,r,n,i){let s,a,o=0;do(s=n2(a=t+(r-t)/2,n,i)-e)>0?r=a:t=a;while(Math.abs(s)>1e-7&&++o<12)return a}(i,0,1,e,r),t,n)}let n5=n3(.42,0,1,1),n4=n3(0,0,.58,1),n6=n3(.42,0,.58,1),n7=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,n8=e=>t=>1-e(1-t),n9=n3(.33,1.53,.69,.99),ie=n8(n9),it=n7(ie),ir=e=>(e*=2)<1?.5*ie(e):.5*(2-Math.pow(2,-10*(e-1))),ii=e=>1-Math.sin(Math.acos(e)),is=n8(ii),ia=n7(ii),io=e=>Array.isArray(e)&&"number"==typeof e[0],il={linear:tK,easeIn:n5,easeInOut:n6,easeOut:n4,circIn:ii,circInOut:ia,circOut:is,backIn:ie,backInOut:it,backOut:n9,anticipate:ir},iu=e=>{if(io(e)){t_(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[t,r,n,i]=e;return n3(t,r,n,i)}return"string"==typeof e?(t_(void 0!==il[e],`Invalid easing type '${e}'`,"invalid-easing-type"),il[e]):e},ic=(e,t,r)=>{let n=t-e;return 0===n?1:(r-e)/n};function ih({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){var i;let s,a=Array.isArray(n)&&"number"!=typeof n[0]?n.map(iu):iu(n),o={done:!1,value:t[0]},l=function(e,t,{clamp:r=!0,ease:n,mixer:i}={}){let s=e.length;if(t_(s===t.length,"Both input and output ranges must be the same length","range-length"),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());let o=function(e,t,r){let n=[],i=r||tq.mix||nU,s=e.length-1;for(let r=0;r<s;r++){let s=i(e[r],e[r+1]);t&&(s=nP(Array.isArray(t)?t[r]||tK:t,s)),n.push(s)}return n}(t,n,i),l=o.length,u=r=>{if(a&&r<e[0])return t[0];let n=0;if(l>1)for(;n<e.length-2&&!(r<e[n+1]);n++);let i=ic(e[n],e[n+1],r);return o[n](i)};return r?t=>u(eI(e[0],e[s-1],t)):u}((i=r&&r.length===t.length?r:(!function(e,t){let r=e[e.length-1];for(let n=1;n<=t;n++){let i=ic(0,t,n);e.push(rI(r,1,i))}}(s=[0],t.length-1),s),i.map(t=>t*e)),t,{ease:Array.isArray(a)?a:t.map(()=>a||n6).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(o.value=l(t),o.done=t>=e,o)}}let id=e=>null!==e;function ip(e,{repeat:t,repeatType:r="loop"},n,i=1){let s=e.filter(id),a=i<0||t&&"loop"!==r&&t%2==1?0:s.length-1;return a&&void 0!==n?n:s[a]}let im={decay:n1,inertia:n1,tween:ih,keyframes:ih,spring:n0};function ig(e){"string"==typeof e.type&&(e.type=im[e.type])}class iy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}let iv=e=>e/100;class ib extends iy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==rn.now()&&this.tick(rn.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},nT.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){let{options:e}=this;ig(e);let{type:t=ih,repeat:r=0,repeatDelay:n=0,repeatType:i,velocity:s=0}=e,{keyframes:a}=e,o=t||ih;o!==ih&&"number"!=typeof a[0]&&(this.mixKeyframes=nP(iv,nU(a[0],a[1])),a=[0,100]);let l=o({...e,keyframes:a});"mirror"===i&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-s})),null===l.calculatedDuration&&(l.calculatedDuration=nK(l));let{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+n,this.totalDuration=this.resolvedDuration*(r+1)-n,this.generator=l}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){let{generator:r,totalDuration:n,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return r.next(0);let{delay:l=0,keyframes:u,repeat:c,repeatType:h,repeatDelay:d,type:p,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>n;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=n);let v=this.currentTime,b=r;if(c){let e=Math.min(this.currentTime,n)/a,t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,(t=Math.min(t,c+1))%2&&("reverse"===h?(r=1-r,d&&(r-=d/a)):"mirror"===h&&(b=s)),v=eI(0,1,r)*a}let x=y?{done:!1,value:u[0]}:b.next(v);i&&(x.value=i(x.value));let{done:w}=x;y||null===o||(w=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);let _=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return _&&p!==n1&&(x.value=ip(u,this.options,m,this.speed)),f&&f(x.value),_&&this.finish(),x}then(e,t){return this.finished.then(e,t)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return this.currentTime/1e3}set time(e){e=nS(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(rn.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:e=nz,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();let r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(rn.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,nT.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function ix(e){let t;return()=>(void 0===t&&(t=e()),t)}let iw=ix(()=>void 0!==window.ScrollTimeline),i_={},ik=(r=ix(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),()=>i_.linearEasing??r()),ij=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,iS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ij([0,.65,.55,1]),circOut:ij([.55,0,1,.45]),backIn:ij([.31,.01,.66,-.59]),backOut:ij([.33,1.53,.69,.99])};function iE(e){return"function"==typeof e&&"applyToOptions"in e}class iP extends iy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:n,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=!!i,this.allowFlatten=s,this.options=e,t_("string"!=typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function({type:e,...t}){return iE(e)&&ik()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=function(e,t,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u){let c={[t]:r};l&&(c.offset=l);let h=function e(t,r){if(t)return"function"==typeof t?ik()?nV(t,r):"ease-out":io(t)?ij(t):Array.isArray(t)?t.map(t=>e(t,r)||iS.easeOut):iS[t]}(o,i);Array.isArray(h)&&(c.easing=h);let d={delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"};u&&(d.pseudoElement=u);let p=e.animate(c,d);return p}(t,r,n,l,i),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){let e=ip(n,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):r.startsWith("--")?t.style.setProperty(r,e):t.style[r]=e,this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=nS(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&iw())?(this.animation.timeline=e,tK):t(this)}}let iT={anticipate:ir,backInOut:it,circInOut:ia};class iC extends iP{constructor(e){!function(e){"string"==typeof e.ease&&e.ease in iT&&(e.ease=iT[e.ease])}(e),ig(e),super(e),void 0!==e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:r,onComplete:n,element:i,...s}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);let a=new ib({...s,autoplay:!1}),o=Math.max(10,rn.now()-this.startTime),l=eI(0,10,o-10);t.setWithVelocity(a.sample(Math.max(0,o-l)).value,a.sample(o).value,l),a.stop()}}let iA=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(tr.test(e)||"0"===e)&&!e.startsWith("url("));function iO(e){e.duration=0,e.type="keyframes"}let iN=new Set(["opacity","clipPath","filter","transform"]),iR=ix(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class iF extends iy{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s="loop",keyframes:a,name:o,motionValue:l,element:u,...c}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=rn.now();const h={autoplay:e,delay:t,type:r,repeat:n,repeatDelay:i,repeatType:s,name:o,motionValue:l,element:u,...c},d=u?.KeyframeResolver||t5;this.keyframeResolver=new d(a,(e,t,r)=>this.onKeyframesResolved(e,t,h,!r),o,l,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,n){this.keyframeResolver=void 0;let{name:i,type:s,velocity:a,delay:o,isHandoff:l,onUpdate:u}=r;this.resolvedAt=rn.now(),!function(e,t,r,n){let i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;let s=e[e.length-1],a=iA(i,t),o=iA(s,t);return tw(a===o,`You are trying to animate ${t} from "${i}" to "${s}". "${a?s:i}" is not an animatable value.`,"value-not-animatable"),!!a&&!!o&&(function(e){let t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||iE(r))&&n)}(e,i,s,a)&&((tq.instantAnimations||!o)&&u?.(ip(e,r,t)),e[0]=e[e.length-1],iO(r),r.repeat=0);let c={startTime:n?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},h=!l&&function(e){let{motionValue:t,name:r,repeatDelay:n,repeatType:i,damping:s,type:a}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:o,transformTemplate:l}=t.owner.getProps();return iR()&&r&&iN.has(r)&&("transform"!==r||!l)&&!o&&!n&&"mirror"!==i&&0!==s&&"inertia"!==a}(c),d=c.motionValue?.owner?.current,p=h?new iC({...c,element:d}):new ib(c);p.finished.then(()=>{this.notifyFinished()}).catch(tK),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),t1=!0,t3(),t2(),t1=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let iD={type:"spring",stiffness:500,damping:25,restSpeed:10},iM={type:"keyframes",duration:.8},iI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iB=e=>null!==e,i$=(e,t,r,n={},i,s)=>a=>{let o=n_(n,e)||{},l=o.delay||n.delay||0,{elapsed:u=0}=n;u-=nS(l);let c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};!function({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}(o)&&Object.assign(c,((e,{keyframes:t})=>t.length>2?iM:eM.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:iD:iI)(e,c)),c.duration&&(c.duration=nS(c.duration)),c.repeatDelay&&(c.repeatDelay=nS(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let h=!1;if(!1!==c.type&&(0!==c.duration||c.repeatDelay)||(iO(c),0===c.delay&&(h=!0)),(tq.instantAnimations||tq.skipAnimations)&&(h=!0,iO(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,h&&!s&&void 0!==t.get()){let e=function(e,{repeat:t,repeatType:r="loop"},n){let i=e.filter(iB),s=t&&"loop"!==r&&t%2==1?0:i.length-1;return i[s]}(c.keyframes,o);if(void 0!==e)return void tG.update(()=>{c.onUpdate(e),c.onComplete()})}return o.isSync?new ib(c):new iF(c)};function iL(e,t,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=t;n&&(s=n);let l=[],u=i&&e.animationState&&e.animationState.getState()[i];for(let t in o){let n=e.getValue(t,e.latestValues[t]??null),i=o[t];if(void 0===i||u&&function({protectedKeys:e,needsAnimating:t},r){let n=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,n}(u,t))continue;let a={delay:r,...n_(s||{},t)},c=n.get();if(void 0!==c&&!n.isAnimating&&!Array.isArray(i)&&i===c&&!a.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){let r=e.props[nm];if(r){let e=window.MotionHandoffAnimation(r,t,tG);null!==e&&(a.startTime=e,h=!0)}}nj(e,t),n.start(i$(t,n,i,e.shouldReduceMotion&&tg.has(t)?{type:!1}:a,e,h));let d=n.animation;d&&l.push(d)}return a&&Promise.all(l).then(()=>{tG.update(()=>{a&&function(e,t){let{transitionEnd:r={},transition:n={},...i}=nw(e,t)||{};for(let t in i={...i,...r}){var s;let r=nk(s=i[t])?s[s.length-1]||0:s;e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,rs(r))}}(e,a)})}),l}function iU(e,t,r,n=0,i=1){let s=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*n;return"function"==typeof r?r(s,a):1===i?s*n:o-s*n}function iz(e,t,r={}){let n=nw(e,t,"exit"===r.type?e.presenceContext?.custom:void 0),{transition:i=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);let s=n?()=>Promise.all(iL(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(n=0)=>{let{delayChildren:s=0,staggerChildren:a,staggerDirection:o}=i;return function(e,t,r=0,n=0,i=0,s=1,a){let o=[];for(let l of e.variantChildren)l.notify("AnimationStart",t),o.push(iz(l,t,{...a,delay:r+("function"==typeof n?0:n)+iU(e.variantChildren,l,n,i,s)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,n,s,a,o,r)}:()=>Promise.resolve(),{when:o}=i;if(!o)return Promise.all([s(),a(r.delay)]);{let[e,t]="beforeChildren"===o?[s,a]:[a,s];return e().then(()=>t())}}let iV=rf.length;function iK(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}let iq=[...rp].reverse(),iW=rp.length;function iH(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iG(){return{animate:iH(!0),whileInView:iH(),whileHover:iH(),whileTap:iH(),whileDrag:iH(),whileFocus:iH(),exit:iH()}}let iQ=0;function iY(e){return[e("x"),e("y")]}let iJ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function iX(e){return iJ.has(e.tagName)||!0===e.isContentEditable}function iZ(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}let i0={x:!1,y:!1};function i1(e){return e.max-e.min}function i2(e,t,r,n=.5){e.origin=n,e.originPoint=rI(t.min,t.max,e.origin),e.scale=i1(r)/i1(t),e.translate=rI(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function i3(e,t,r,n){i2(e.x,t.x,r.x,n?n.originX:void 0),i2(e.y,t.y,r.y,n?n.originY:void 0)}function i5(e,t,r){e.min=r.min+t.min,e.max=e.min+i1(t)}function i4(e,t,r){e.min=t.min-r.min,e.max=e.min+i1(t)}function i6(e,t,r){i4(e.x,t.x,r.x),i4(e.y,t.y,r.y)}let i7=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function i8(e){return{point:{x:e.pageX,y:e.pageY}}}function i9(e,t,r,n){return iZ(e,t,e=>i7(e)&&r(e,i8(e)),n)}let se=({current:e})=>e?e.ownerDocument.defaultView:null,st=(e,t)=>Math.abs(e-t),sr=new Set(["auto","scroll"]);class sn{constructor(e,t,{transformPagePoint:r,contextWindow:n=window,dragSnapToOrigin:i=!1,distanceThreshold:s=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{var e,t;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let r=sa(this.lastMoveEventInfo,this.history),n=null!==this.startEvent,i=(e=r.offset,t={x:0,y:0},Math.sqrt(st(e.x,t.x)**2+st(e.y,t.y)**2)>=this.distanceThreshold);if(!n&&!i)return;let{point:s}=r,{timestamp:a}=tY;this.history.push({...s,timestamp:a});let{onStart:o,onMove:l}=this.handlers;n||(o&&o(this.lastMoveEvent,r),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,r)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=si(t,this.transformPagePoint),tG.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:r,onSessionEnd:n,resumeAnimation:i}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&i&&i(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let s=sa("pointercancel"===e.type?this.lastMoveEventInfo:si(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,s),n&&n(e,s)},!i7(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=n||window;const o=si(i8(e),this.transformPagePoint),{point:l}=o,{timestamp:u}=tY;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=t;c&&c(e,sa(o,this.history)),this.removeListeners=nP(i9(this.contextWindow,"pointermove",this.handlePointerMove),i9(this.contextWindow,"pointerup",this.handlePointerUp),i9(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let t=e.parentElement;for(;t;){let e=getComputedStyle(t);(sr.has(e.overflowX)||sr.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){let t=this.scrollPositions.get(e);if(!t)return;let r=e===window,n=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},i={x:n.x-t.x,y:n.y-t.y};(0!==i.x||0!==i.y)&&(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(e,n),tG.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),tQ(this.updatePoint)}}function si(e,t){return t?{point:t(e.point)}:e}function ss(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sa({point:e},t){return{point:e,delta:ss(e,so(t)),offset:ss(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null,i=so(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>nS(.1)));)r--;if(!n)return{x:0,y:0};let s=(i.timestamp-n.timestamp)/1e3;if(0===s)return{x:0,y:0};let a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,.1)}}function so(e){return e[e.length-1]}function sl(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function su(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function sc(e,t,r){return{min:sh(e,t),max:sh(e,r)}}function sh(e,t){return"number"==typeof e?e:e[t]||0}let sd=new WeakMap;class sp{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tf(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){let{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;let i=e=>{t?(this.stopAnimation(),this.snapToCursor(i8(e).point)):this.pauseAnimation()},s=(e,t)=>{this.stopAnimation();let{drag:r,dragPropagation:n,onDragStart:i}=this.getProps();if(r&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(e){if("x"===e||"y"===e)if(i0[e])return null;else return i0[e]=!0,()=>{i0[e]=!1};return i0.x||i0.y?null:(i0.x=i0.y=!0,()=>{i0.x=i0.y=!1})}(r),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),iY(e=>{let t=this.getAxisMotionValue(e).get()||0;if(eJ.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let n=r.layout.layoutBox[e];n&&(t=i1(n)*(parseFloat(t)/100))}}this.originPoint[e]=t}),i&&tG.postRender(()=>i(e,t)),nj(this.visualElement,"transform");let{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},a=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:r,dragDirectionLock:n,onDirectionLock:i,onDrag:s}=this.getProps();if(!r&&!this.openDragLock)return;let{offset:a}=t;if(n&&null===this.currentDirection){this.currentDirection=function(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(a),null!==this.currentDirection&&i&&i(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>iY(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new sn(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:se(this.visualElement),element:this.visualElement.current})}stop(e,t){let r=e||this.latestPointerEvent,n=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!n||!r)return;let{velocity:s}=n;this.startAnimation(s);let{onDragEnd:a}=this.getProps();a&&tG.postRender(()=>a(r,n))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();let{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,r){let{drag:n}=this.getProps();if(!r||!sf(e,n,this.currentDirection))return;let i=this.getAxisMotionValue(e),s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:r},n){return void 0!==t&&e<t?e=n?rI(t,e,n.min):Math.max(e,t):void 0!==r&&e>r&&(e=n?rI(r,e,n.max):Math.min(e,r)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,n=this.constraints;e&&ny(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=function(e,{top:t,left:r,bottom:n,right:i}){return{x:sl(e.x,r,i),y:sl(e.y,t,n)}}(r.layoutBox,e):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:sc(e,"left","right"),y:sc(e,"top","bottom")}}(t),n!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&iY(e=>{var t,n;let i;!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=(t=r.layoutBox[e],n=this.constraints[e],i={},void 0!==n.min&&(i.min=n.min-t.min),void 0!==n.max&&(i.max=n.max-t.min),i))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ny(t))return!1;let n=t.current;t_(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:i}=this.visualElement;if(!i||!i.layout)return!1;let s=function(e,t,r){let n=r0(e,r),{scroll:i}=t;return i&&(rJ(n.x,i.offset.x),rJ(n.y,i.offset.y)),n}(n,i.root,this.visualElement.getTransformPagePoint()),a=(e=i.layout.layoutBox,{x:su(e.x,s.x),y:su(e.y,s.y)});if(r){let e=r(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=rV(e))}return a}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:n,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{};return Promise.all(iY(a=>{if(!sf(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});let u={type:"inertia",velocity:r?e[a]:0,bounceStiffness:n?200:1e6,bounceDamping:n?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,u)})).then(a)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return nj(this.visualElement,e),r.start(i$(e,r,0,t,this.visualElement,!1))}stopAnimation(){iY(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){iY(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){iY(t=>{let{drag:r}=this.getProps();if(!sf(t,r,this.currentDirection))return;let{projection:n}=this.visualElement,i=this.getAxisMotionValue(t);if(n&&n.layout){let{min:r,max:s}=n.layout.layoutBox[t],a=i.get()||0;i.set(e[t]-rI(r,s,.5)+a)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ny(t)||!r||!this.constraints)return;this.stopAnimation();let n={x:0,y:0};iY(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){var r,i;let s,a,o,l=t.get();n[e]=(r={min:l,max:l},i=this.constraints[e],s=.5,a=i1(r),(o=i1(i))>a?s=ic(i.min,i.max-a,r.min):a>o&&(s=ic(r.min,r.max-o,i.min)),eI(0,1,s))}});let{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),iY(t=>{if(!sf(t,e,null))return;let r=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];r.set(rI(i,s,n[t]))})}addListeners(){if(!this.visualElement.current)return;sd.set(this.visualElement,this);let e=this.visualElement.current,t=i9(e,"pointerdown",t=>{let{drag:r,dragListener:n=!0}=this.getProps(),i=t.target,s=i!==e&&iX(i);r&&n&&!s&&this.start(t)}),r=()=>{let{dragConstraints:e}=this.getProps();ny(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",r);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),tG.read(r);let s=iZ(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(iY(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),t(),i(),a&&a()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:s=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:i,dragElastic:s,dragMomentum:a}}}function sf(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}let sm=e=>(t,r)=>{e&&tG.postRender(()=>e(t,r))},sg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};var sy=B;let sv=!1;class sb extends sy.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:i}=e;i&&(t.group&&t.group.add(i),r&&r.register&&n&&r.register(i),sv&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),sg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:n,isPresent:i}=this.props,{projection:s}=r;return s&&(s.isPresent=i,sv=!0,n||e.layoutDependency!==t||void 0===t||e.isPresent!==i?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||tG.postRender(()=>{let e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),rt.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;sv=!0,n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sx(e){let[t,r]=function(e=!0){let t=(0,B.useContext)(na);if(null===t)return[!0,null];let{isPresent:r,onExitComplete:n,register:i}=t,s=(0,B.useId)();(0,B.useEffect)(()=>{if(e)return i(s)},[e]);let a=(0,B.useCallback)(()=>e&&n&&n(s),[s,n,e]);return!r&&n?[!1,a]:[!0]}(),n=(0,sy.useContext)(r5);return(0,I.jsx)(sb,{...e,layoutGroup:n,switchLayoutGroup:(0,sy.useContext)(ng),isPresent:t,safeToRemove:r})}function sw(e,t,r,n,i){return e-=t,e=n+1/r*(e-n),void 0!==i&&(e=n+1/i*(e-n)),e}function s_(e,t,[r,n,i],s,a){!function(e,t=0,r=1,n=.5,i,s=e,a=e){if(eJ.test(t)&&(t=parseFloat(t),t=rI(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let o=rI(s.min,s.max,n);e===s&&(o-=t),e.min=sw(e.min,t,r,o,i),e.max=sw(e.max,t,r,o,i)}(e,t[r],t[n],t[i],t.scale,s,a)}let sk=["x","scaleX","originX"],sj=["y","scaleY","originY"];function sS(e,t,r,n){s_(e.x,t,sk,r?r.x:void 0,n?n.x:void 0),s_(e.y,t,sj,r?r.y:void 0,n?n.y:void 0)}function sE(e,t){e.min=t.min,e.max=t.max}function sP(e,t){sE(e.x,t.x),sE(e.y,t.y)}function sT(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function sC(e){return 0===e.translate&&1===e.scale}function sA(e){return sC(e.x)&&sC(e.y)}function sO(e,t){return e.min===t.min&&e.max===t.max}function sN(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function sR(e,t){return sN(e.x,t.x)&&sN(e.y,t.y)}function sF(e){return i1(e.x)/i1(e.y)}function sD(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}let sM=["TopLeft","TopRight","BottomLeft","BottomRight"],sI=sM.length,sB=e=>"string"==typeof e?parseFloat(e):e,s$=e=>"number"==typeof e||eX.test(e);function sL(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let sU=sV(0,.5,is),sz=sV(.5,.95,tK);function sV(e,t,r){return n=>n<e?0:n>t?1:r(ic(e,t,n))}function sK(e){return"object"==typeof e&&null!==e}function sq(e){return sK(e)&&"ownerSVGElement"in e}let sW=(e,t)=>e.depth-t.depth;class sH{constructor(){this.children=[],this.isDirty=!1}add(e){t8(this.children,e),this.isDirty=!0}remove(e){t9(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sW),this.isDirty=!1,this.children.forEach(e)}}class sG{constructor(){this.members=[]}add(e){t8(this.members,e),e.scheduleRender()}remove(e){if(t9(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let e=r;e>=0;e--){let r=this.members[e];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let sQ=["","X","Y","Z"],sY=0;function sJ(e,t,r,n){let{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function sX({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(e={},r=t?.()){this.id=sY++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(s1),this.nodes.forEach(s8),this.nodes.forEach(s9),this.nodes.forEach(s2)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new sH)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new re),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=sq(t)&&!(sq(t)&&"svg"===t.tagName),this.instance=t;let{layoutId:r,layout:n,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(n||r)&&(this.isLayoutDirty=!0),e){let r,n=0,i=()=>this.root.updateBlockedByResize=!1;tG.read(()=>{n=window.innerWidth}),e(t,()=>{let e=window.innerWidth;if(e!==n){let t,s;n=e,this.root.updateBlockedByResize=!0,r&&r(),t=rn.now(),s=({timestamp:e})=>{let r=e-t;r>=250&&(tQ(s),i(r-250))},tG.setup(s,!0),r=()=>tQ(s),sg.hasAnimatedSinceResize&&(sg.hasAnimatedSinceResize=!1,this.nodes.forEach(s7))}})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||n)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:r,layout:n})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let s=this.options.transition||i.getDefaultTransition()||as,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=i.getProps(),l=!this.targetLayout||!sR(this.targetLayout,n),u=!t&&r;if(this.options.layoutRoot||this.resumeFrom||u||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...n_(s,"layout"),onPlay:a,onComplete:o};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,u)}else t||s7(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),tQ(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ae),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:r}=t.options;if(!r)return;let n=r.props[nm];if(window.MotionHasOptimisedAnimation(n,"transform")){let{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",tG,!(e||r))}let{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&e(i)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;let n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(s5);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(s4);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(s6),this.nodes.forEach(sZ),this.nodes.forEach(s0)):this.nodes.forEach(s4),this.clearAllSnapshots();let e=rn.now();tY.delta=eI(0,1e3/60,e-tY.timestamp),tY.timestamp=e,tY.isProcessing=!0,tJ.update.process(tY),tJ.preRender.process(tY),tJ.render.process(tY),tY.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rt.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(s3),this.sharedNodes.forEach(at)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tG.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tG.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||i1(this.snapshot.measuredBox.x)||i1(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=tf(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!sA(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,s=n!==this.prevTransformTemplateValue;e&&this.instance&&(t||rW(this.latestValues)||s)&&(i(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let r=this.measurePageBox(),n=this.removeElementScroll(r);return e&&(n=this.removeTransform(n)),al((t=n).x),al(t.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return tf();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(ac))){let{scroll:e}=this.root;e&&(rJ(t.x,e.offset.x),rJ(t.y,e.offset.y))}return t}removeElementScroll(e){let t=tf();if(sP(t,e),this.scroll?.wasRoot)return t;for(let r=0;r<this.path.length;r++){let n=this.path[r],{scroll:i,options:s}=n;n!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&sP(t,e),rJ(t.x,i.offset.x),rJ(t.y,i.offset.y))}return t}applyTransform(e,t=!1){let r=tf();sP(r,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];!t&&n.options.layoutScroll&&n.scroll&&n!==n.root&&rZ(r,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),rW(n.latestValues)&&rZ(r,n.latestValues)}return rW(this.latestValues)&&rZ(r,this.latestValues),r}removeTransform(e){let t=tf();sP(t,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];if(!r.instance||!rW(r.latestValues))continue;rq(r.latestValues)&&r.updateSnapshot();let n=tf();sP(n,r.measurePageBox()),sS(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,n)}return rW(this.latestValues)&&sS(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tY.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);let r=!!this.resumingFrom||this!==t;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:n,layoutId:i}=this.options;if(!this.layout||!(n||i))return;this.resolvedRelativeTargetAt=tY.timestamp;let s=this.getClosestProjectingParent();if(s&&this.linkedParentVersion!==s.layoutVersion&&!s.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(s&&s.layout?this.createRelativeTarget(s,this.layout.layoutBox,s.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=tf(),this.targetWithTransforms=tf()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var a,o,l;this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,i5(a.x,o.x,l.x),i5(a.y,o.y,l.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sP(this.target,this.layout.layoutBox),rY(this.target,this.targetDelta)):sP(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,s&&!!s.resumingFrom==!!this.resumingFrom&&!s.options.layoutScroll&&s.target&&1!==this.animationProgress?this.createRelativeTarget(s,this.target,s.target):this.relativeParent=this.relativeTarget=void 0)}}getClosestProjectingParent(){if(!(!this.parent||rq(this.parent.latestValues)||rH(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,r){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tf(),this.relativeTargetOrigin=tf(),i6(this.relativeTargetOrigin,t,r),sP(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,r=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(r=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===tY.timestamp&&(r=!1),r)return;let{layout:n,layoutId:i}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(n||i))return;sP(this.layoutCorrected,this.layout.layoutBox);let s=this.treeScale.x,a=this.treeScale.y;!function(e,t,r,n=!1){let i,s,a=r.length;if(a){t.x=t.y=1;for(let o=0;o<a;o++){s=(i=r[o]).projectionDelta;let{visualElement:a}=i.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&rZ(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,rY(e,s)),n&&rW(i.latestValues)&&rZ(e,i.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=tf());let{target:o}=e;if(!o){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(sT(this.prevProjectionDelta.x,this.projectionDelta.x),sT(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),i3(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===s&&this.treeScale.y===a&&sD(this.projectionDelta.x,this.prevProjectionDelta.x)&&sD(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=td(),this.projectionDelta=td(),this.projectionDeltaWithTransform=td()}setAnimationOrigin(e,t=!1){let r,n=this.snapshot,i=n?n.latestValues:{},s={...this.latestValues},a=td();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=tf(),l=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),c=!u||u.members.length<=1,h=!!(l&&!c&&!0===this.options.crossfade&&!this.path.some(ai));this.animationProgress=0,this.mixTargetDelta=t=>{let n=t/1e3;if(ar(a.x,e.x,n),ar(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var u,d,p,f,m,g;i6(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,m=o,g=n,an(p.x,f.x,m.x,g),an(p.y,f.y,m.y,g),r&&(u=this.relativeTarget,d=r,sO(u.x,d.x)&&sO(u.y,d.y))&&(this.isProjectionDirty=!1),r||(r=tf()),sP(r,this.relativeTarget)}l&&(this.animationValues=s,function(e,t,r,n,i,s){i?(e.opacity=rI(0,r.opacity??1,sU(n)),e.opacityExit=rI(t.opacity??1,0,sz(n))):s&&(e.opacity=rI(t.opacity??1,r.opacity??1,n));for(let i=0;i<sI;i++){let s=`border${sM[i]}Radius`,a=sL(t,s),o=sL(r,s);(void 0!==a||void 0!==o)&&(a||(a=0),o||(o=0),0===a||0===o||s$(a)===s$(o)?(e[s]=Math.max(rI(sB(a),sB(o),n),0),(eJ.test(o)||eJ.test(a))&&(e[s]+="%")):e[s]=o)}(t.rotate||r.rotate)&&(e.rotate=rI(t.rotate||0,r.rotate||0,n))}(s,i,this.latestValues,n,h,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(tQ(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tG.update(()=>{var t,r,n;let i;sg.hasAnimatedSinceResize=!0,nT.layout++,this.motionValue||(this.motionValue=rs(0)),this.currentAnimation=(t=this.motionValue,r=[0,1e3],n={...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{nT.layout--},onComplete:()=>{nT.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}},(i=tm(t)?t:rs(t)).start(i$("",i,r,n)),i.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:n,latestValues:i}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&au(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||tf();let t=i1(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;let n=i1(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}sP(t,r),rZ(t,i),i3(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new sG),this.sharedNodes.get(e).add(t);let r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;let n={};r.z&&sJ("z",e,n,this.animationValues);for(let t=0;t<sQ.length;t++)sJ(`rotate${sQ[t]}`,e,n,this.animationValues),sJ(`skew${sQ[t]}`,e,n,this.animationValues);for(let t in e.render(),n)e.setStaticValue(t,n[t]),this.animationValues&&(this.animationValues[t]=n[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility="hidden";return}let r=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=ns(t?.pointerEvents)||"",e.transform=r?r(this.latestValues,""):"none";return}let n=this.getLead();if(!this.projectionDelta||!this.layout||!n.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=ns(t?.pointerEvents)||""),this.hasProjected&&!rW(this.latestValues)&&(e.transform=r?r({},""):"none",this.hasProjected=!1);return}e.visibility="";let i=n.animationValues||n.latestValues;this.applyTransformsToTarget();let s=function(e,t,r){let n="",i=e.x.translate/t.x,s=e.y.translate/t.y,a=r?.z||0;if((i||s||a)&&(n=`translate3d(${i}px, ${s}px, ${a}px) `),(1!==t.x||1!==t.y)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){let{transformPerspective:e,rotate:t,rotateX:i,rotateY:s,skewX:a,skewY:o}=r;e&&(n=`perspective(${e}px) ${n}`),t&&(n+=`rotate(${t}deg) `),i&&(n+=`rotateX(${i}deg) `),s&&(n+=`rotateY(${s}deg) `),a&&(n+=`skewX(${a}deg) `),o&&(n+=`skewY(${o}deg) `)}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(n+=`scale(${o}, ${l})`),n||"none"}(this.projectionDeltaWithTransform,this.treeScale,i);r&&(s=r(i,s)),e.transform=s;let{x:a,y:o}=this.projectionDelta;for(let t in e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,n.animationValues?e.opacity=n===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=n===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0,rB){if(void 0===i[t])continue;let{correct:r,applyTo:a,isCSSVariable:o}=rB[t],l="none"===s?i[t]:r(i[t],n);if(a){let t=a.length;for(let r=0;r<t;r++)e[a[r]]=l}else o?this.options.visualElement.renderState.vars[t]=l:e[t]=l}this.options.layoutId&&(e.pointerEvents=n===this?ns(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(s5),this.root.sharedNodes.clear()}}}function sZ(e){e.updateLayout()}function s0(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){let{layoutBox:r,measuredBox:n}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;"size"===i?iY(e=>{let n=s?t.measuredBox[e]:t.layoutBox[e],i=i1(n);n.min=r[e].min,n.max=n.min+i}):au(i,t.layoutBox,r)&&iY(n=>{let i=s?t.measuredBox[n]:t.layoutBox[n],a=i1(r[n]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+a)});let a=td();i3(a,r,t.layoutBox);let o=td();s?i3(o,e.applyTransform(n,!0),t.measuredBox):i3(o,r,t.layoutBox);let l=!sA(a),u=!1;if(!e.resumeFrom){let n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){let{snapshot:i,layout:s}=n;if(i&&s){let a=tf();i6(a,t.layoutBox,i.layoutBox);let o=tf();i6(o,r,s.layoutBox),sR(a,o)||(u=!0),n.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function s1(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function s2(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function s3(e){e.clearSnapshot()}function s5(e){e.clearMeasurements()}function s4(e){e.isLayoutDirty=!1}function s6(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function s7(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function s8(e){e.resolveTargetDelta()}function s9(e){e.calcProjection()}function ae(e){e.resetSkewAndRotation()}function at(e){e.removeLeadSnapshot()}function ar(e,t,r){e.translate=rI(t.translate,0,r),e.scale=rI(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function an(e,t,r,n){e.min=rI(t.min,r.min,n),e.max=rI(t.max,r.max,n)}function ai(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let as={duration:.45,ease:[.4,0,.1,1]},aa=e=>"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ao=aa("applewebkit/")&&!aa("chrome/")?Math.round:tK;function al(e){e.min=ao(e.min),e.max=ao(e.max)}function au(e,t,r){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(sF(t)-sF(r)))}function ac(e){return e!==e.root&&e.scroll?.wasRoot}let ah=sX({attachResizeListener:(e,t)=>iZ(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),ad={current:void 0},ap=sX({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ad.current){let e=new ah({});e.mount(window),e.setOptions({layoutScroll:!0}),ad.current=e}return ad.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function af(e,t){let r=function(e,t,r){if(null==e)return[];if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document,r=(void 0)??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e).filter(e=>null!=e)}(e),n=new AbortController;return[r,{passive:!0,...t,signal:n.signal},()=>n.abort()]}function am(e){return!("touch"===e.pointerType||i0.x||i0.y)}function ag(e,t,r){let{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===r);let i=n["onHover"+r];i&&tG.postRender(()=>i(t,i8(t)))}let ay=(e,t)=>!!t&&(e===t||ay(e,t.parentElement)),av=new WeakSet;function ab(e){return t=>{"Enter"===t.key&&e(t)}}function ax(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function aw(e){return i7(e)&&!(i0.x||i0.y)}function a_(e,t,r){let{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===r);let i=n["onTap"+("End"===r?"":r)];i&&tG.postRender(()=>i(t,i8(t)))}let ak=new WeakMap,aj=new WeakMap,aS=e=>{let t=ak.get(e.target);t&&t(e)},aE=e=>{e.forEach(aS)},aP={some:0,all:1},aT=function(e,t){if("u"<typeof Proxy)return nb;let r=new Map,n=(r,n)=>nb(r,n,e,t);return new Proxy((e,t)=>n(e,t),{get:(i,s)=>"create"===s?n:(r.has(s)||r.set(s,nb(s,void 0,e,t)),r.get(s))})}({animation:{Feature:class extends nx{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:r})=>(function(e,t,r={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t))n=Promise.all(t.map(t=>iz(e,t,r)));else if("string"==typeof t)n=iz(e,t,r);else{let i="function"==typeof t?nw(e,t,r.custom):t;n=Promise.all(iL(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})})(e,t,r))),r=iG(),n=!0,i=t=>(r,n)=>{let i=nw(e,n,"exit"===t?e.presenceContext?.custom:void 0);if(i){let{transition:e,transitionEnd:t,...n}=i;r={...r,...n,...t}}return r};function s(s){let{props:a}=e,o=function e(t){if(!t)return;if(!t.isControllingVariants){let r=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(r.initial=t.props.initial),r}let r={};for(let e=0;e<iV;e++){let n=rf[e],i=t.props[n];(rd(i)||!1===i)&&(r[n]=i)}return r}(e.parent)||{},l=[],u=new Set,c={},h=1/0;for(let t=0;t<iW;t++){var d,p;let f=iq[t],m=r[f],g=void 0!==a[f]?a[f]:o[f],y=rd(g),v=f===s?m.isActive:null;!1===v&&(h=t);let b=g===o[f]&&g!==a[f]&&y;if(b&&n&&e.manuallyAnimateOnMount&&(b=!1),m.protectedKeys={...c},!m.isActive&&null===v||!g&&!m.prevProp||rh(g)||"boolean"==typeof g)continue;let x=(d=m.prevProp,"string"==typeof(p=g)?p!==d:!!Array.isArray(p)&&!iK(p,d)),w=x||f===s&&m.isActive&&!b&&y||t>h&&y,_=!1,k=Array.isArray(g)?g:[g],j=k.reduce(i(f),{});!1===v&&(j={});let{prevResolvedValues:S={}}=m,E={...S,...j},P=t=>{w=!0,u.has(t)&&(_=!0,u.delete(t)),m.needsAnimating[t]=!0;let r=e.getValue(t);r&&(r.liveStyle=!1)};for(let e in E){let t=j[e],r=S[e];if(!c.hasOwnProperty(e))(nk(t)&&nk(r)?iK(t,r):t===r)?void 0!==t&&u.has(e)?P(e):m.protectedKeys[e]=!0:null!=t?P(e):u.add(e)}m.prevProp=g,m.prevResolvedValues=j,m.isActive&&(c={...c,...j}),n&&e.blockInitialAnimation&&(w=!1);let T=b&&x,C=!T||_;w&&C&&l.push(...k.map(t=>{let r={type:f};if("string"==typeof t&&n&&!T&&e.manuallyAnimateOnMount&&e.parent){let{parent:n}=e,i=nw(n,t);if(n.enteringChildren&&i){let{delayChildren:t}=i.transition||{};r.delay=iU(n.enteringChildren,e,t)}}return{animation:t,options:r}}))}if(u.size){let t={};if("boolean"!=typeof a.initial){let r=nw(e,Array.isArray(a.initial)?a.initial[0]:a.initial);r&&r.transition&&(t.transition=r.transition)}u.forEach(r=>{let n=e.getBaseTarget(r),i=e.getValue(r);i&&(i.liveStyle=!0),t[r]=n??null}),l.push({animation:t})}let f=!!l.length;return n&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(f=!1),n=!1,f?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,n){if(r[t].isActive===n)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,n)),r[t].isActive=n;let i=s(t);for(let e in r)r[e].protectedKeys={};return i},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=iG()}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();rh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends nx{constructor(){super(...arguments),this.id=iQ++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;let n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}},inView:{Feature:class extends nx{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var e;let t;this.unmount();let{viewport:r={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:a}=r,o={root:n?n.current:void 0,rootMargin:i,threshold:"number"==typeof s?s:aP[s]},l=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,a&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),i=t?r:n;i&&i(e)};return e=this.node.current,t=function({root:e,...t}){let r=e||document;aj.has(r)||aj.set(r,{});let n=aj.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(aE,{root:e,...t})),n[i]}(o),ak.set(e,l),t.observe(e),()=>{ak.delete(e),t.unobserve(e)}}mount(){this.startObserver()}update(){if("u"<typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends nx{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[n,i,s]=af(e,r),a=e=>{let n=e.currentTarget;if(!aw(e))return;av.add(n);let s=t(n,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),av.has(n)&&av.delete(n),aw(e)&&"function"==typeof s&&s(e,{success:t})},o=e=>{a(e,n===window||n===document||r.useGlobalTarget||ay(n,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,i),window.addEventListener("pointercancel",l,i)};return n.forEach(e=>{(r.useGlobalTarget?window:e).addEventListener("pointerdown",a,i),sK(e)&&"offsetHeight"in e&&(e.addEventListener("focus",e=>((e,t)=>{let r=e.currentTarget;if(!r)return;let n=ab(()=>{if(av.has(r))return;ax(r,"down");let e=ab(()=>{ax(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>ax(r,"cancel"),t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)})(e,i)),iX(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),s}(e,(e,t)=>(a_(this.node,t,"Start"),(e,{success:t})=>a_(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends nx{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nP(iZ(this.node.current,"focus",()=>this.onFocus()),iZ(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends nx{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[n,i,s]=af(e,r),a=e=>{if(!am(e))return;let{target:r}=e,n=t(r,e);if("function"!=typeof n||!r)return;let s=e=>{am(e)&&(n(e),r.removeEventListener("pointerleave",s))};r.addEventListener("pointerleave",s,i)};return n.forEach(e=>{e.addEventListener("pointerenter",a,i)}),s}(e,(e,t)=>(ag(this.node,t,"Start"),e=>ag(this.node,e,"End"))))}unmount(){}}},pan:{Feature:class extends nx{constructor(){super(...arguments),this.removePointerDownListener=tK}onPointerDown(e){this.session=new sn(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:se(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:sm(e),onStart:sm(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&tG.postRender(()=>n(e,t))}}}mount(){this.removePointerDownListener=i9(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends nx{constructor(e){super(e),this.removeGroupControls=tK,this.removeListeners=tK,this.controls=new sp(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tK}update(){let{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.endPanSession()}},ProjectionNode:ap,MeasureLayout:sx},layout:{ProjectionNode:ap,MeasureLayout:sx}},(e,t)=>t.isSVG??r3(e)?new rz(t):new r1(t,{allowProjection:e!==B.Fragment})),aC=({currentStep:e=1,onContinue:t,onBack:r,totalSteps:n=3})=>(0,I.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6 w-full",children:[(0,I.jsxs)("div",{className:"flex items-center gap-4 relative",children:[Array.from({length:n}).map((t,r)=>{let i=r+1;return(0,I.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,I.jsx)("div",{className:eO("w-2 h-2 rounded-full relative z-10 transition-all",i<=e?"bg-[#007AFF]":"bg-[#E5E5EA]")}),i<n&&(0,I.jsx)("div",{className:eO("w-8 h-0.5 transition-all",i<e?"bg-[#007AFF]":"bg-[#E5E5EA]")})]},i)}),(0,I.jsx)(aT.div,{initial:{width:0},animate:{width:`${e/n*100}%`},className:"absolute left-0 top-1/2 -translate-y-1/2 h-1 bg-[#007AFF]/20 rounded-full",transition:{type:"spring",stiffness:300,damping:30,mass:.5}})]}),(0,I.jsxs)("p",{className:"text-sm text-[#6E6E73]",children:["Schritt ",e," von ",n]})]}),aA=z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),aO=()=>(0,I.jsxs)("div",{className:"loader-container",children:[(0,I.jsx)("div",{className:"peeking-photo-icon",children:(0,I.jsx)(aA,{strokeWidth:1.5})}),(0,I.jsxs)("div",{className:"shield-container",children:[Array.from({length:150}).map((e,t)=>(0,I.jsx)("div",{className:"particle",style:{animationDelay:`${t%10*.1+.02*Math.floor(t/10)}s`}},t)),(0,I.jsxs)("div",{className:"shield-structure",children:[(0,I.jsx)("div",{className:"structure-line line-1"}),(0,I.jsx)("div",{className:"structure-line line-2"}),(0,I.jsx)("div",{className:"structure-line line-3"}),(0,I.jsx)("div",{className:"structure-line line-4"})]})]}),(0,I.jsx)("div",{className:"loading-text",children:"LDT..."})]});function aN(){let[e,t]=(0,B.useState)(null),[r,n]=(0,B.useState)(!1),[i,s]=(0,B.useState)(null),[a,o]=(0,B.useState)(!1);(0,B.useEffect)(()=>{let e=(0,eF.loadKeyFromStorage)();e&&(t(e),s((0,eF.keyToRecoveryPhrase)(e))),n(!0)},[]);let l=(0,B.useCallback)(()=>new Promise(e=>{o(!0),setTimeout(()=>{let r=(0,eF.generateKeyPair)().secretKey;t(r),(0,eF.saveKeyToStorage)(r);let n=(0,eF.keyToRecoveryPhrase)(r);s(n),o(!1),e(n)},1500)}),[]);return{secretKey:e,isInitialized:r,hasKey:!!e,recoveryPhrase:i,isGeneratingKey:a,generateNewKey:l,restoreFromPhrase:(0,B.useCallback)(e=>{try{let r=(0,eF.recoveryPhraseToKey)(e);return t(r),(0,eF.saveKeyToStorage)(r),s(e),!0}catch{return!1}},[]),clearKey:(0,B.useCallback)(()=>{t(null),s(null),(0,eF.clearKeyFromStorage)()},[])}}let aR=e=>{let t,r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,s={setState:n,getState:i,getInitialState:()=>a,subscribe:e=>(r.add(e),()=>r.delete(e))},a=t=e(n,i,s);return s},aF=e=>{let t=e?aR(e):aR,r=e=>(function(e,t=e=>e){let r=B.default.useSyncExternalStore(e.subscribe,B.default.useCallback(()=>t(e.getState()),[e,t]),B.default.useCallback(()=>t(e.getInitialState()),[e,t]));return B.default.useDebugValue(r),r})(t,e);return Object.assign(r,t),r};function aD(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var n;let i=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(n=r.getItem(e))?n:null;return s instanceof Promise?s.then(i):i(s)},setItem:(e,n)=>r.setItem(e,JSON.stringify(n,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}let aM=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>aM(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>aM(t)(e)}}},aI=(n?aF(n):aF)((i=e=>({backupActive:!1,autoBackupEnabled:!0,backgroundBackupEnabled:!1,selectedPlan:"free",lastBackup:"Noch nie",permanence:0,setBackupActive:t=>e({backupActive:t}),setAutoBackupEnabled:t=>e({autoBackupEnabled:t}),setBackgroundBackupEnabled:t=>e({backgroundBackupEnabled:t}),setSelectedPlan:t=>e({selectedPlan:t}),setLastBackup:t=>e({lastBackup:t}),setPermanence:t=>e({permanence:t})}),s={name:"photovault-settings",storage:aD(()=>localStorage)},(e,t,r)=>{let n,a={storage:aD(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...s},o=!1,l=0,u=new Set,c=new Set,h=a.storage;if(!h)return i((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),e(...t)},t,r);let d=()=>{let e=a.partialize({...t()});return h.setItem(a.name,{state:e,version:a.version})},p=r.setState;r.setState=(e,t)=>(p(e,t),d());let f=i((...t)=>(e(...t),d()),t,r);r.getInitialState=()=>f;let m=()=>{var r,i;if(!h)return;let s=++l;o=!1,u.forEach(e=>{var r;return e(null!=(r=t())?r:f)});let p=(null==(i=a.onRehydrateStorage)?void 0:i.call(a,null!=(r=t())?r:f))||void 0;return aM(h.getItem.bind(h))(a.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];else{if(a.migrate){let t=a.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(r=>{var i;if(s!==l)return;let[o,u]=r;if(e(n=a.merge(u,null!=(i=t())?i:f),!0),o)return d()}).then(()=>{s===l&&(null==p||p(n,void 0),n=t(),o=!0,c.forEach(e=>e(n)))}).catch(e=>{s===l&&(null==p||p(void 0,e))})};return r.persist={setOptions:e=>{a={...a,...e},e.storage&&(h=e.storage)},clearStorage:()=>{null==h||h.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},a.skipHydration||m(),n||f}));function aB({state:e,setState:t,step:r,setStep:n,onComplete:i}){let[s,a]=(0,B.useState)(!1),[o,l]=(0,B.useState)(!1),[u,c]=(0,B.useState)(!1),{isGeneratingKey:h,generateNewKey:d,recoveryPhrase:p}=aN(),f=aI(e=>e.setSelectedPlan),m=aI(e=>e.setAutoBackupEnabled),g=async()=>{await d(),a(!0)},y=p?.split("-").slice(0,12)||[];return h?(0,I.jsx)(aO,{}):(0,I.jsxs)("div",{className:"min-h-screen flex flex-col px-6 pt-12 pb-8 safe-area-inset",children:[(0,I.jsx)(aC,{currentStep:s?1:r}),1===r&&!s&&(0,I.jsx)(a$,{onContinue:g,onImport:()=>{console.log("Show import dialog"),c(!0)}}),1===r&&s&&(0,I.jsx)(aL,{phrase:y,confirmed:o,onConfirmChange:l,onContinue:()=>{console.log("TODO: Verify checkbox, proceed to step 2"),a(!1),l(!1),n(2)}}),2===r&&(0,I.jsx)(aU,{selectedSource:e.photoSource,onSelect:e=>{console.log("Selected photo source:",e),t(t=>({...t,photoSource:e})),n(3)}}),3===r&&(0,I.jsx)(az,{selectedPlan:e.selectedPlan,onSelect:e=>{console.log("free"===e?"Set Free Plan":"Set Backup+ Plan"),f(e),"backup-plus"===e&&m(!0),t(t=>({...t,selectedPlan:e})),i()}}),u&&(0,I.jsx)(aV,{onClose:()=>c(!1),onSuccess:(e,t)=>{c(!1),i()}})]})}function a$({onContinue:e,onImport:t}){return(0,I.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,I.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[(0,I.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6",children:(0,I.jsx)(eR,{name:"key",size:40})}),(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-3",children:"Erstelle deinen Schlssel"}),(0,I.jsx)("p",{className:"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px] mb-6",children:"Dieser Schlssel verschlsselt alle Fotos. Speichere ihn gut:"}),(0,I.jsxs)("div",{className:"bg-[#F2F2F7] rounded-xl p-4 w-full max-w-[300px]",children:[(0,I.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,I.jsx)(eR,{name:"key",size:20}),(0,I.jsx)("span",{className:"text-[15px] text-[#1D1D1F] font-medium",children:"12-Wort Backup-Phrase"})]}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:"Wird im nchsten Schritt erstellt und angezeigt"})]})]}),(0,I.jsxs)("div",{className:"space-y-3",children:[(0,I.jsx)("button",{onClick:e,className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target",children:"Schlssel erstellen"}),(0,I.jsx)("button",{onClick:t,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Ich habe bereits einen Schlssel"})]})]})}function aL({phrase:e,confirmed:t,onConfirmChange:r,onContinue:n}){return(0,I.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsxs)("div",{className:"text-center mb-6",children:[(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2",children:"Notiere diese Wrter"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73]",children:"Speichere sie sicher ab. Du brauchst sie zur Wiederherstellung."})]}),(0,I.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-6",children:e.map((e,t)=>(0,I.jsxs)("div",{className:"bg-white rounded-lg p-3 text-center border border-[#E5E5EA]",children:[(0,I.jsx)("span",{className:"text-[11px] text-[#8E8E93] block mb-0.5",children:t+1}),(0,I.jsx)("span",{className:"text-[15px] text-[#1D1D1F] font-mono",children:e})]},t))}),(0,I.jsx)("div",{className:"bg-[#FF3B30]/10 rounded-xl p-4 mb-6",children:(0,I.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center",children:" Teile diese Wrter niemals mit anderen. Wer sie hat, kann auf deine Fotos zugreifen."})}),(0,I.jsxs)("button",{onClick:()=>r(!t),className:"w-full flex items-center gap-3 p-4 bg-white rounded-xl ios-tap-target",children:[(0,I.jsx)("div",{className:`w-6 h-6 rounded-md border-2 flex items-center justify-center ${t?"bg-[#007AFF] border-[#007AFF]":"border-[#C7C7CC]"}`,children:t&&(0,I.jsx)(V,{className:"w-4 h-4 text-white"})}),(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Ich habe die Wrter notiert"})]})]}),(0,I.jsx)("button",{onClick:n,disabled:!t,className:`w-full h-[50px] text-[17px] font-semibold rounded-xl ios-tap-target ${t?"bg-[#007AFF] text-white":"bg-[#E5E5EA] text-[#8E8E93]"}`,children:"Weiter"})]})}function aU({selectedSource:e,onSelect:t}){return(0,I.jsx)("div",{className:"flex-1 flex flex-col",children:(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsxs)("div",{className:"flex flex-col items-center text-center mb-8",children:[(0,I.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6",children:(0,I.jsx)(eR,{name:"folder",size:40})}),(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2",children:"Whle Backup-Quelle"}),(0,I.jsx)("p",{className:"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px]",children:"Wo sind deine Fotos gespeichert?"})]}),(0,I.jsx)("div",{className:"bg-[#F2F2F7] rounded-xl p-4 mb-6",children:(0,I.jsxs)("p",{className:"text-[15px] text-[#6E6E73] text-center",children:[" ",(0,I.jsx)("strong",{children:"Tipp:"}),' Die meisten Nutzer whlen "Fotos-App". Du kannst dies spter in den Einstellungen ndern.']})}),(0,I.jsx)("div",{className:"space-y-3",children:[{id:"photos-app",label:"Fotos-App",description:"Alle Fotos aus der iOS Foto-Bibliothek",details:"Empfohlen fr die meisten Nutzer"},{id:"files-app",label:"Dateien-App",description:"Fotos aus einem bestimmten Ordner",details:"Fr fortgeschrittene Nutzer"}].map(r=>(0,I.jsx)("button",{onClick:()=>t(r.id),className:`w-full p-4 rounded-xl bg-white text-left ios-tap-target transition-all ${e===r.id?"ring-2 ring-[#007AFF] shadow-lg":""}`,children:(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsx)("p",{className:"text-[17px] font-medium text-[#1D1D1F]",children:r.label}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] mt-0.5",children:r.description}),(0,I.jsx)("p",{className:"text-[13px] text-[#8E8E93] mt-1",children:r.details})]}),(0,I.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${e===r.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:e===r.id&&(0,I.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})},r.id))})]})})}function az({selectedPlan:e,onSelect:t}){let[r,n]=(0,B.useState)(e);return(0,I.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsxs)("div",{className:"flex flex-col items-center text-center mb-6",children:[(0,I.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6",children:(0,I.jsx)(eR,{name:"cloud",size:40})}),(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2",children:"Whle Speicherplan"}),(0,I.jsx)("p",{className:"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px]",children:"Du kannst das spter jederzeit ndern"})]}),(0,I.jsx)("div",{className:"bg-[#F2F2F7] rounded-xl p-4 mb-4",children:(0,I.jsxs)("p",{className:"text-[13px] text-[#6E6E73] text-center",children:[" ",(0,I.jsx)("strong",{children:"Empfehlung:"})," Starte mit FREE und upgrade spter, wenn du mehr Speicher brauchst."]})}),(0,I.jsx)("div",{className:"space-y-3",children:[{id:"free",label:"FREE",subtitle:"Auf deinen Gerten",price:"0/Monat",features:["Unbegrenzte Fotos","Zero-Knowledge Verschlsselung","Multi-Device Sync"],description:"Perfekt fr den Start"},{id:"backup-plus",label:"BACKUP+",subtitle:"Dauerhaft im Netz",price:"2,99/Monat",features:["Alles von Free","200 GB Cloud-Backup","Schnellere Synchronisierung"],recommended:!0,description:"Maximale Sicherheit"}].map(e=>(0,I.jsxs)("button",{onClick:()=>n(e.id),className:`w-full p-4 rounded-xl bg-white text-left ios-tap-target relative transition-all ${r===e.id?"ring-2 ring-[#007AFF] shadow-lg":""}`,children:[e.recommended&&(0,I.jsx)("span",{className:"absolute -top-2 left-4 px-2 py-0.5 bg-[#30D158] text-white text-[11px] font-semibold rounded-full",children:"EMPFOHLEN"}),(0,I.jsxs)("div",{className:"flex items-start justify-between",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsx)("p",{className:"text-[15px] font-bold text-[#007AFF] tracking-wide",children:e.label}),(0,I.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] mt-0.5",children:e.subtitle}),(0,I.jsx)("p",{className:"text-[13px] text-[#8E8E93] mt-1",children:e.description}),(0,I.jsx)("ul",{className:"mt-3 space-y-1.5",children:e.features.map(e=>(0,I.jsxs)("li",{className:"text-[15px] text-[#6E6E73] flex items-center gap-2",children:[(0,I.jsx)("span",{className:"text-[#30D158]",children:""})," ",e]},e))}),(0,I.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] mt-4",children:e.price})]}),(0,I.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${r===e.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:r===e.id&&(0,I.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})]},e.id))})]}),(0,I.jsx)("button",{onClick:()=>t(r),className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target mt-4",children:"PhotoVault starten"})]})}function aV({onClose:e,onSuccess:t}){let[r,n]=(0,B.useState)(""),[i,s]=(0,B.useState)(null),[a,o]=(0,B.useState)(!1);return(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Schlssel importieren"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-6",children:"Gib deine Backup-Phrase ein (mit Bindestrichen oder Leerzeichen)"}),(0,I.jsx)("textarea",{value:r,onChange:e=>{n(e.target.value),s(null)},placeholder:"abc123XY-def456AB-ghi789CD-...",className:"w-full h-[100px] bg-[#F2F2F7] rounded-xl p-4 text-[15px] text-[#1D1D1F] font-mono resize-none mb-2"}),i&&(0,I.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center mb-4",children:i}),(0,I.jsxs)("div",{className:"space-y-3",children:[(0,I.jsx)("button",{onClick:()=>{s(null),o(!0);try{let e=r.trim().replace(/[\s\n]+/g,"-").replace(/-+/g,"-");if(!e){s("Bitte gib deinen Schlssel ein"),o(!1);return}let n=(0,eF.recoveryPhraseToKey)(e);if(!n||32!==n.length){s("Ungltiger Schlssel. Bitte berprfe die Eingabe."),o(!1);return}(0,eF.saveKeyToStorage)(n);let i=e.split("-").slice(0,12);console.log("Key imported successfully"),t(e,i)}catch(e){console.error("Key import error:",e),s("Ungltiger Schlssel. Bitte berprfe die Eingabe."),o(!1)}},disabled:a||!r.trim(),className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target disabled:opacity-50",children:a?"Importiere...":"Importieren"}),(0,I.jsx)("button",{onClick:e,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Abbrechen"})]})]})})}let aK=z("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),aq=z("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),aW=z("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var aH=e.i(75555),aG=e.i(40143),aQ=e.i(86491),aY=e.i(15823),aJ=e.i(93803),aX=e.i(19273),aZ=e.i(80166),a0=class extends aY.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#r=(0,aJ.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#n=void 0;#i=void 0;#s=void 0;#a;#o;#r;#t;#l;#u;#c;#h;#d;#p;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#n.addObserver(this),a1(this.#n,this.options)?this.#m():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return a2(this.#n,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return a2(this.#n,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#v(),this.#n.removeObserver(this)}setOptions(e){let t=this.options,r=this.#n;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,aX.resolveEnabled)(this.options.enabled,this.#n))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#b(),this.#n.setOptions(this.options),t._defaulted&&!(0,aX.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#n,observer:this});let n=this.hasListeners();n&&a3(this.#n,r,this.options,t)&&this.#m(),this.updateResult(),n&&(this.#n!==r||(0,aX.resolveEnabled)(this.options.enabled,this.#n)!==(0,aX.resolveEnabled)(t.enabled,this.#n)||(0,aX.resolveStaleTime)(this.options.staleTime,this.#n)!==(0,aX.resolveStaleTime)(t.staleTime,this.#n))&&this.#x();let i=this.#w();n&&(this.#n!==r||(0,aX.resolveEnabled)(this.options.enabled,this.#n)!==(0,aX.resolveEnabled)(t.enabled,this.#n)||i!==this.#p)&&this.#_(i)}getOptimisticResult(e){var t,r;let n=this.#e.getQueryCache().build(this.#e,e),i=this.createResult(n,e);return t=this,r=i,(0,aX.shallowEqualObjects)(t.getCurrentResult(),r)||(this.#s=i,this.#o=this.options,this.#a=this.#n.state),i}getCurrentResult(){return this.#s}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"===r&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#r.status||this.#r.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#n}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#m({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#m(e){this.#b();let t=this.#n.fetch(this.options,e);return e?.throwOnError||(t=t.catch(aX.noop)),t}#x(){this.#y();let e=(0,aX.resolveStaleTime)(this.options.staleTime,this.#n);if(aX.isServer||this.#s.isStale||!(0,aX.isValidTimeout)(e))return;let t=(0,aX.timeUntilStale)(this.#s.dataUpdatedAt,e);this.#h=aZ.timeoutManager.setTimeout(()=>{this.#s.isStale||this.updateResult()},t+1)}#w(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#n):this.options.refetchInterval)??!1}#_(e){this.#v(),this.#p=e,!aX.isServer&&!1!==(0,aX.resolveEnabled)(this.options.enabled,this.#n)&&(0,aX.isValidTimeout)(this.#p)&&0!==this.#p&&(this.#d=aZ.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||aH.focusManager.isFocused())&&this.#m()},this.#p))}#g(){this.#x(),this.#_(this.#w())}#y(){this.#h&&(aZ.timeoutManager.clearTimeout(this.#h),this.#h=void 0)}#v(){this.#d&&(aZ.timeoutManager.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){let r,n=this.#n,i=this.options,s=this.#s,a=this.#a,o=this.#o,l=e!==n?e.state:this.#i,{state:u}=e,c={...u},h=!1;if(t._optimisticResults){let r=this.hasListeners(),s=!r&&a1(e,t),a=r&&a3(e,n,t,i);(s||a)&&(c={...c,...(0,aQ.fetchState)(u.data,e.options)}),"isRestoring"===t._optimisticResults&&(c.fetchStatus="idle")}let{error:d,errorUpdatedAt:p,status:f}=c;r=c.data;let m=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===f){let e;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(e=s.data,m=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#c?.state.data,this.#c):t.placeholderData,void 0!==e&&(f="success",r=(0,aX.replaceData)(s?.data,e,t),h=!0)}if(t.select&&void 0!==r&&!m)if(s&&r===a?.data&&t.select===this.#l)r=this.#u;else try{this.#l=t.select,r=t.select(r),r=(0,aX.replaceData)(s?.data,r,t),this.#u=r,this.#t=null}catch(e){this.#t=e}this.#t&&(d=this.#t,r=this.#u,p=Date.now(),f="error");let g="fetching"===c.fetchStatus,y="pending"===f,v="error"===f,b=y&&g,x=void 0!==r,w={status:f,fetchStatus:c.fetchStatus,isPending:y,isSuccess:"success"===f,isError:v,isInitialLoading:b,isLoading:b,data:r,dataUpdatedAt:c.dataUpdatedAt,error:d,errorUpdatedAt:p,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>l.dataUpdateCount||c.errorUpdateCount>l.errorUpdateCount,isFetching:g,isRefetching:g&&!y,isLoadingError:v&&!x,isPaused:"paused"===c.fetchStatus,isPlaceholderData:h,isRefetchError:v&&x,isStale:a5(e,t),refetch:this.refetch,promise:this.#r,isEnabled:!1!==(0,aX.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=void 0!==w.data,r="error"===w.status&&!t,i=e=>{r?e.reject(w.error):t&&e.resolve(w.data)},s=()=>{i(this.#r=w.promise=(0,aJ.pendingThenable)())},a=this.#r;switch(a.status){case"pending":e.queryHash===n.queryHash&&i(a);break;case"fulfilled":(r||w.data!==a.value)&&s();break;case"rejected":r&&w.error===a.reason||s()}}return w}updateResult(){let e=this.#s,t=this.createResult(this.#n,this.options);if(this.#a=this.#n.state,this.#o=this.options,void 0!==this.#a.data&&(this.#c=this.#n),(0,aX.shallowEqualObjects)(t,e))return;this.#s=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#f.size)return!0;let n=new Set(r??this.#f);return this.options.throwOnError&&n.add("error"),Object.keys(this.#s).some(t=>this.#s[t]!==e[t]&&n.has(t))};this.#k({listeners:r()})}#b(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#n)return;let t=this.#n;this.#n=e,this.#i=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#k(e){aG.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#s)}),this.#e.getQueryCache().notify({query:this.#n,type:"observerResultsUpdated"})})}};function a1(e,t){return!1!==(0,aX.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&a2(e,t,t.refetchOnMount)}function a2(e,t,r){if(!1!==(0,aX.resolveEnabled)(t.enabled,e)&&"static"!==(0,aX.resolveStaleTime)(t.staleTime,e)){let n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&a5(e,t)}return!1}function a3(e,t,r,n){return(e!==t||!1===(0,aX.resolveEnabled)(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&a5(e,r)}function a5(e,t){return!1!==(0,aX.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,aX.resolveStaleTime)(t.staleTime,e))}var a4=e.i(12598),a6=B.createContext((a=!1,{clearReset:()=>{a=!1},reset:()=>{a=!0},isReset:()=>a})),a7=B.createContext(!1);a7.Provider;var a8=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function a9(e,t){return function(e,t,r){let n,i=B.useContext(a7),s=B.useContext(a6),a=(0,a4.useQueryClient)(r),o=a.defaultQueryOptions(e);a.getDefaultOptions().queries?._experimental_beforeQuery?.(o);let l=a.getQueryCache().get(o.queryHash);if(o._optimisticResults=i?"isRestoring":"optimistic",o.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=o.staleTime;o.staleTime="function"==typeof t?(...r)=>e(t(...r)):e(t),"number"==typeof o.gcTime&&(o.gcTime=Math.max(o.gcTime,1e3))}n=l?.state.error&&"function"==typeof o.throwOnError?(0,aX.shouldThrowError)(o.throwOnError,[l.state.error,l]):o.throwOnError,(o.suspense||o.experimental_prefetchInRender||n)&&!s.isReset()&&(o.retryOnMount=!1),B.useEffect(()=>{s.clearReset()},[s]);let u=!a.getQueryCache().get(o.queryHash),[c]=B.useState(()=>new t(a,o)),h=c.getOptimisticResult(o),d=!i&&!1!==e.subscribed;if(B.useSyncExternalStore(B.useCallback(e=>{let t=d?c.subscribe(aG.notifyManager.batchCalls(e)):aX.noop;return c.updateResult(),t},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),B.useEffect(()=>{c.setOptions(o)},[o,c]),o?.suspense&&h.isPending)throw a8(o,c,s);if((({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&void 0===e.data||(0,aX.shouldThrowError)(r,[e.error,n])))({result:h,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw h.error;if(a.getDefaultOptions().queries?._experimental_afterQuery?.(o,h),o.experimental_prefetchInRender&&!aX.isServer&&h.isLoading&&h.isFetching&&!i){let e=u?a8(o,c,s):l?.promise;e?.catch(aX.noop).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?h:c.trackResult(h)}(e,a0,t)}var oe=e.i(14272),ot=aY,or=class extends ot.Subscribable{#e;#s=void 0;#j;#S;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#E()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,aX.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#j,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,aX.hashKey)(t.mutationKey)!==(0,aX.hashKey)(this.options.mutationKey)?this.reset():this.#j?.state.status==="pending"&&this.#j.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#j?.removeObserver(this)}onMutationUpdate(e){this.#E(),this.#k(e)}getCurrentResult(){return this.#s}reset(){this.#j?.removeObserver(this),this.#j=void 0,this.#E(),this.#k()}mutate(e,t){return this.#S=t,this.#j?.removeObserver(this),this.#j=this.#e.getMutationCache().build(this.#e,this.options),this.#j.addObserver(this),this.#j.execute(e)}#E(){let e=this.#j?.state??(0,oe.getDefaultState)();this.#s={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#k(e){aG.notifyManager.batch(()=>{if(this.#S&&this.hasListeners()){let t=this.#s.variables,r=this.#s.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#S.onSuccess?.(e.data,t,r,n)}catch(e){Promise.reject(e)}try{this.#S.onSettled?.(e.data,null,t,r,n)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#S.onError?.(e.error,t,r,n)}catch(e){Promise.reject(e)}try{this.#S.onSettled?.(void 0,e.error,t,r,n)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#s)})})}};function on(e,t){let r=(0,a4.useQueryClient)(t),[n]=B.useState(()=>new or(r,e));B.useEffect(()=>{n.setOptions(e)},[n,e]);let i=B.useSyncExternalStore(B.useCallback(e=>n.subscribe(aG.notifyManager.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=B.useCallback((e,t)=>{n.mutate(e,t).catch(aX.noop)},[n]);if(i.error&&(0,aX.shouldThrowError)(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}var oi=e.i(93560);let os=Symbol.for("Dexie"),oa=globalThis[os]||(globalThis[os]=oi.default);if(oi.default.semVer!==oa.semVer)throw Error(`Two different versions of Dexie loaded in the same app: ${oi.default.semVer} and ${oa.semVer}`);let{liveQuery:oo,mergeRanges:ol,rangesOverlap:ou,RangeSet:oc,cmp:oh,Entity:od,PropModification:op,replacePrefix:of,add:om,remove:og,DexieYProvider:oy}=oa,ov=oa,ob=new class extends ov{photos;constructor(){super("PhotoVaultDB"),this.version(1).stores({photos:"++id, cid, uploadedAt"})}};async function ox(e){return await ob.photos.add(e)}async function ow(){return await ob.photos.orderBy("uploadedAt").reverse().toArray()}async function o_(e){await ob.photos.delete(e)}async function ok(){return await ob.photos.count()}class oj extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class oS extends oj{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class oE extends oj{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class oP extends oj{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}(h=S||(S={})).Any="any",h.ApNortheast1="ap-northeast-1",h.ApNortheast2="ap-northeast-2",h.ApSouth1="ap-south-1",h.ApSoutheast1="ap-southeast-1",h.ApSoutheast2="ap-southeast-2",h.CaCentral1="ca-central-1",h.EuCentral1="eu-central-1",h.EuWest1="eu-west-1",h.EuWest2="eu-west-2",h.EuWest3="eu-west-3",h.SaEast1="sa-east-1",h.UsEast1="us-east-1",h.UsWest1="us-west-1",h.UsWest2="us-west-2";class oT{constructor(t,{headers:r={},customFetch:n,region:i=S.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=(t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(11737).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r,n,i,s,a;return n=this,i=void 0,s=void 0,a=function*(){try{let n,{headers:i,method:s,body:a}=t,o={},{region:l}=t;l||(l=this.region),l&&"any"!==l&&(o["x-region"]=l),a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&("u">typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",n=a):"string"==typeof a?(o["Content-Type"]="text/plain",n=a):"u">typeof FormData&&a instanceof FormData?n=a:(o["Content-Type"]="application/json",n=JSON.stringify(a)));let u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:n}).catch(e=>{throw new oS(e)}),c=u.headers.get("x-relay-error");if(c&&"true"===c)throw new oE(u);if(!u.ok)throw new oP(u);let h=(null!=(r=u.headers.get("Content-Type"))?r:"text/plain").split(";")[0].trim();return{data:"application/json"===h?yield u.json():"application/octet-stream"===h?yield u.blob():"text/event-stream"===h?u:"multipart/form-data"===h?yield u.formData():yield u.text(),error:null}}catch(e){return{data:null,error:e}}},new(s||(s=Promise))(function(e,t){function r(e){try{l(a.next(e))}catch(e){t(e)}}function o(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof s?n:new s(function(e){e(n)})).then(r,o)}l((a=a.apply(n,i||[])).next())})}}let{PostgrestClient:oC,PostgrestQueryBuilder:oA,PostgrestFilterBuilder:oO,PostgrestTransformBuilder:oN,PostgrestBuilder:oR,PostgrestError:oF}=e.i(82215).default,oD={"X-Client-Info":"realtime-js/2.11.2"};(d=E||(E={}))[d.connecting=0]="connecting",d[d.open=1]="open",d[d.closing=2]="closing",d[d.closed=3]="closed",(p=P||(P={})).closed="closed",p.errored="errored",p.joined="joined",p.joining="joining",p.leaving="leaving",(f=T||(T={})).close="phx_close",f.error="phx_error",f.join="phx_join",f.reply="phx_reply",f.leave="phx_leave",f.access_token="access_token",(C||(C={})).websocket="websocket",(m=A||(A={})).Connecting="connecting",m.Open="open",m.Closing="closing",m.Closed="closed";class oM{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):"string"==typeof e?t(JSON.parse(e)):t({})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let n=t.getUint8(1),i=t.getUint8(2),s=this.HEADER_LENGTH+2,a=r.decode(e.slice(s,s+n));s+=n;let o=r.decode(e.slice(s,s+i));return s+=i,{ref:null,topic:a,event:o,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class oI{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(g=O||(O={})).abstime="abstime",g.bool="bool",g.date="date",g.daterange="daterange",g.float4="float4",g.float8="float8",g.int2="int2",g.int4="int4",g.int4range="int4range",g.int8="int8",g.int8range="int8range",g.json="json",g.jsonb="jsonb",g.money="money",g.numeric="numeric",g.oid="oid",g.reltime="reltime",g.text="text",g.time="time",g.timestamp="timestamp",g.timestamptz="timestamptz",g.timetz="timetz",g.tsrange="tsrange",g.tstzrange="tstzrange";let oB=(e,t,r={})=>{var n;let i=null!=(n=r.skipTypes)?n:[];return Object.keys(t).reduce((r,n)=>(r[n]=o$(n,e,t,i),r),{})},o$=(e,t,r,n)=>{let i=t.find(t=>t.name===e),s=null==i?void 0:i.type,a=r[e];return s&&!n.includes(s)?oL(s,a):oU(a)},oL=(e,t)=>{if("_"===e.charAt(0))return oq(t,e.slice(1,e.length));switch(e){case O.bool:return oz(t);case O.float4:case O.float8:case O.int2:case O.int4:case O.int8:case O.numeric:case O.oid:return oV(t);case O.json:case O.jsonb:return oK(t);case O.timestamp:return oW(t);case O.abstime:case O.date:case O.daterange:case O.int4range:case O.int8range:case O.money:case O.reltime:case O.text:case O.time:case O.timestamptz:case O.timetz:case O.tsrange:case O.tstzrange:default:return oU(t)}},oU=e=>e,oz=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},oV=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},oK=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){console.log(`JSON parse error: ${e}`)}return e},oq=(e,t)=>{if("string"!=typeof e)return e;let r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n,i=e.slice(1,r);try{n=JSON.parse("["+i+"]")}catch(e){n=i?i.split(","):[]}return n.map(e=>oL(t,e))}return e},oW=e=>"string"==typeof e?e.replace(" ","T"):e,oH=e=>{let t=e;return(t=(t=t.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")};class oG{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null==(r=this.receivedResp)?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(y=N||(N={})).SYNC="sync",y.JOIN="join",y.LEAVE="leave";class oQ{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{let{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oQ.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=oQ.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{let{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=oQ.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){let i=this.cloneDeep(e),s=this.transformState(t),a={},o={};return this.map(i,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{let r=i[e];if(r){let n=t.map(e=>e.presence_ref),i=r.map(e=>e.presence_ref),s=t.filter(e=>0>i.indexOf(e.presence_ref)),l=r.filter(e=>0>n.indexOf(e.presence_ref));s.length>0&&(a[e]=s),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:o},r,n)}static syncDiff(e,t,r,n){let{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(t,n)=>{var i;let s=null!=(i=e[t])?i:[];if(e[t]=this.cloneDeep(n),s.length>0){let r=e[t].map(e=>e.presence_ref),n=s.filter(e=>0>r.indexOf(e.presence_ref));e[t].unshift(...n)}r(t,s,n)}),this.map(s,(t,r)=>{let i=e[t];if(!i)return;let s=r.map(e=>e.presence_ref);i=i.filter(e=>0>s.indexOf(e.presence_ref)),e[t]=i,n(t,i,r),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,r)=>{let n=e[r];return"metas"in n?t[r]=n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(v=R||(R={})).ALL="*",v.INSERT="INSERT",v.UPDATE="UPDATE",v.DELETE="DELETE",(b=F||(F={})).BROADCAST="broadcast",b.PRESENCE="presence",b.POSTGRES_CHANGES="postgres_changes",b.SYSTEM="system",(x=D||(D={})).SUBSCRIBED="SUBSCRIBED",x.TIMED_OUT="TIMED_OUT",x.CLOSED="CLOSED",x.CHANNEL_ERROR="CHANNEL_ERROR";class oY{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=P.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new oG(this,T.join,this.params,this.timeout),this.rejoinTimer=new oI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=P.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=P.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=P.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=P.errored,this.rejoinTimer.scheduleTimeout())}),this._on(T.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new oQ(this),this.broadcastEndpointURL=oH(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:i,presence:s,private:a}}=this.params;this._onError(t=>null==e?void 0:e(D.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(D.CLOSED));let o={},l={broadcast:i,presence:s,postgres_changes:null!=(n=null==(r=this.bindings.postgres_changes)?void 0:r.map(e=>e.filter))?n:[],private:a};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0===t){null==e||e(D.SUBSCRIBED);return}{let n=this.bindings.postgres_changes,i=null!=(r=null==n?void 0:n.length)?r:0,s=[];for(let r=0;r<i;r++){let i=n[r],{filter:{event:a,schema:o,table:l,filter:u}}=i,c=t&&t[r];if(c&&c.event===a&&c.schema===o&&c.table===l&&c.filter===u)s.push(Object.assign(Object.assign({},i),{id:c.id}));else{this.unsubscribe(),null==e||e(D.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=s,e&&e(D.SUBSCRIBED);return}}).receive("error",t=>{null==e||e(D.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(D.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,i,s;let a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null==(s=null==(i=null==(n=this.params)?void 0:n.config)?void 0:i.broadcast)?void 0:s.ack)||r("ok"),a.receive("ok",()=>r("ok")),a.receive("error",()=>r("error")),a.receive("timeout",()=>r("timed out"))});{let{event:i,payload:s}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!=(r=t.timeout)?r:this.timeout);return await (null==(n=e.body)?void 0:n.cancel()),e.ok?"ok":"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=P.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(T.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let n=new oG(this,T.leave,{},e);n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){let n=new AbortController,i=setTimeout(()=>n.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),s}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new oG(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;let s=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:u}=T;if(r&&[a,o,l,u].indexOf(s)>=0&&r!==this._joinRef())return;let c=this._onMessage(s,t,r);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null==(n=this.bindings.postgres_changes)||n.filter(e=>{var t,r,n;return(null==(t=e.filter)?void 0:t.event)==="*"||(null==(n=null==(r=e.filter)?void 0:r.event)?void 0:n.toLocaleLowerCase())===s}).map(e=>e.callback(c,r)):null==(i=this.bindings[s])||i.filter(e=>{var r,n,i,a,o,l;if(!["broadcast","presence","postgres_changes"].includes(s))return e.type.toLocaleLowerCase()===s;if("id"in e){let s=e.id,a=null==(r=e.filter)?void 0:r.event;return s&&(null==(n=t.ids)?void 0:n.includes(s))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null==(i=t.data)?void 0:i.type.toLocaleLowerCase()))}{let r=null==(o=null==(a=null==e?void 0:e.filter)?void 0:a.event)?void 0:o.toLocaleLowerCase();return"*"===r||r===(null==(l=null==t?void 0:t.event)?void 0:l.toLocaleLowerCase())}}).map(e=>{if("object"==typeof c&&"ids"in c){let e=c.data,{schema:t,table:r,commit_timestamp:n,type:i,errors:s}=e;c=Object.assign(Object.assign({},{schema:t,table:r,commit_timestamp:n,eventType:i,new:{},old:{},errors:s}),this._getPayloadRecords(e))}e.callback(c,r)})}_isClosed(){return this.state===P.closed}_isJoined(){return this.state===P.joined}_isJoining(){return this.state===P.joining}_isLeaving(){return this.state===P.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null==(n=e.type)?void 0:n.toLocaleLowerCase())===r&&oY.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(T.close,{},e)}_onError(e){this._on(T.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=P.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=oB(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=oB(e.columns,e.old_record)),t}}let oJ=()=>{},oX="u">typeof WebSocket,oZ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class o0{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=oD,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=oJ,this.conn=null,this.sendBuffer=[],this.serializer=new oM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(11737).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},this.endPoint=`${t}/${C.websocket}`,this.httpEndpoint=oH(t),(null==r?void 0:r.transport)?this.transport=r.transport:this.transport=null,(null==r?void 0:r.params)&&(this.params=r.params),(null==r?void 0:r.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),(null==r?void 0:r.timeout)&&(this.timeout=r.timeout),(null==r?void 0:r.logger)&&(this.logger=r.logger),(null==r?void 0:r.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=null==(n=null==r?void 0:r.params)?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=(null==r?void 0:r.reconnectAfterMs)?r.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==r?void 0:r.encode)?r.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==r?void 0:r.decode)?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new oI(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==r?void 0:r.fetch),null==r?void 0:r.worker){if("u">typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.worker=(null==r?void 0:r.worker)||!1,this.workerUrl=null==r?void 0:r.workerUrl}this.accessToken=(null==r?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(oX){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new o1(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),e.A(56555).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case E.connecting:return A.Connecting;case E.open:return A.Open;case E.closing:return A.Closing;default:return A.Closed}}isConnected(){return this.connectionState()===A.Open}channel(e,t={config:{}}){let r=new oY(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){let{topic:t,event:r,payload:n,ref:i}=e,s=()=>{this.encode(e,e=>{var t;null==(t=this.conn)||t.send(e)})};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let e=null;try{e=JSON.parse(atob(t.split(".")[1]))}catch(e){}if(e&&e.exp&&!(Math.floor(Date.now()/1e3)-e.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`);this.accessTokenValue=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(T.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),null==(e=this.conn)||e.close(1e3,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:r,payload:n,ref:i}=e;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${r} ${i&&"("+i+")"||""}`,n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(T.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([oZ],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class o1{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=E.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}var o2=e.i(67034);class o3 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function o5(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class o4 extends o3{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class o6 extends o3{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}let o7=t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(11737).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},o8=e=>{if(Array.isArray(e))return e.map(e=>o8(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,r])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=o8(r)}),t};var o9=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})};let le=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function lt(t,r,n,i,s,a){return o9(this,void 0,void 0,function*(){return new Promise((o,l)=>{let u;t(n,(u={method:r,headers:(null==i?void 0:i.headers)||{}},"GET"===r?u:(u.headers=Object.assign({"Content-Type":"application/json"},null==i?void 0:i.headers),a&&(u.body=JSON.stringify(a)),Object.assign(Object.assign({},u),s)))).then(e=>{if(!e.ok)throw e;return(null==i?void 0:i.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(t=>o9(void 0,void 0,void 0,function*(){var r,n,s,a;let o=yield(r=void 0,n=void 0,s=void 0,a=function*(){return"u"<typeof Response?(yield e.A(11737)).Response:Response},new(s||(s=Promise))(function(e,t){function i(e){try{l(a.next(e))}catch(e){t(e)}}function o(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof s?r:new s(function(e){e(r)})).then(i,o)}l((a=a.apply(r,n||[])).next())}));t instanceof o&&!(null==i?void 0:i.noResolveJson)?t.json().then(e=>{l(new o4(le(e),t.status||500))}).catch(e=>{l(new o6(le(e),e))}):l(new o6(le(t),t))}))})})}function lr(e,t,r,n){return o9(this,void 0,void 0,function*(){return lt(e,"GET",t,r,n)})}function ln(e,t,r,n,i){return o9(this,void 0,void 0,function*(){return lt(e,"POST",t,n,i,r)})}function li(e,t,r,n,i){return o9(this,void 0,void 0,function*(){return lt(e,"DELETE",t,n,i,r)})}var ls=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})};let la={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ll{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=o7(n)}uploadOrUpdate(e,t,r,n){return ls(this,void 0,void 0,function*(){try{let i,s=Object.assign(Object.assign({},lo),n),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)}),o=s.metadata;"u">typeof Blob&&r instanceof Blob?((i=new FormData).append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",r)):"u">typeof FormData&&r instanceof FormData?((i=r).append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==n?void 0:n.headers)&&(a=Object.assign(Object.assign({},a),n.headers));let l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{})),h=yield c.json();if(c.ok)return{data:{path:l,id:h.Id,fullPath:h.Key},error:null};return{data:null,error:h}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}upload(e,t,r){return ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return ls(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(e),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",t);try{let e,t=Object.assign({upsert:lo.upsert},n),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"u">typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"u">typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType);let o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:s}),l=yield o.json();if(o.ok)return{data:{path:i,fullPath:l.Key},error:null};return{data:null,error:l}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return ls(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");let i=yield ln(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new o3("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}update(e,t,r){return ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ls(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}copy(e,t,r){return ls(this,void 0,void 0,function*(){try{return{data:{path:(yield ln(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,r){return ls(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield ln(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers}),s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,r){return ls(this,void 0,void 0,function*(){try{let n=yield ln(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}download(e,t){return ls(this,void 0,void 0,function*(){let r=void 0!==(null==t?void 0:t.transform),n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=n?`?${n}`:"";try{let t=this._getFinalPath(e),n=yield lr(this.fetch,`${this.url}/${r?"render/image/authenticated":"object"}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}info(e){return ls(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let e=yield lr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:o8(e),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}exists(e){return ls(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield function(e,t,r,n){return o9(this,void 0,void 0,function*(){return lt(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(o5(e)&&e instanceof o6){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){let r=this._getFinalPath(e),n=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&n.push(i);let s=void 0!==(null==t?void 0:t.transform),a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&n.push(a);let o=n.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s?"render/image":"object"}/public/${r}${o}`)}}}remove(e){return ls(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}list(e,t,r){return ls(this,void 0,void 0,function*(){try{let n=Object.assign(Object.assign(Object.assign({},la),t),{prefix:e||""});return{data:yield ln(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return void 0!==o2.Buffer?o2.Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}let lu={"X-Client-Info":"storage-js/2.7.1"};var lc=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})};class lh{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},lu),t),this.fetch=o7(r)}listBuckets(){return lc(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}getBucket(e){return lc(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}createBucket(e,t={public:!1}){return lc(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return lc(this,void 0,void 0,function*(){try{return{data:yield function(e,t,r,n,i){return o9(this,void 0,void 0,function*(){return lt(e,"PUT",t,n,void 0,r)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}emptyBucket(e){return lc(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}deleteBucket(e){return lc(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(o5(e))return{data:null,error:e};throw e}})}}class ld extends lh{constructor(e,t={},r){super(e,t,r)}from(e){return new ll(this.url,this.headers,e,this.fetch)}}let lp="";lp="u">typeof Deno?"deno":"u">typeof document?"web":"u">typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let lf={headers:{"X-Client-Info":`supabase-js-${lp}/2.48.1`}},lm={schema:"public"},lg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ly={};var lv=e.i(6085);let lb="2.67.3",lx={"X-Client-Info":`gotrue-js/${lb}`},lw="X-Supabase-Api-Version",l_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lk=()=>"u">typeof window&&"u">typeof document,lj={tested:!1,writable:!1},lS=()=>{if(!lk())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(lj.tested)return lj.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),lj.tested=!0,lj.writable=!0}catch(e){lj.tested=!0,lj.writable=!1}return lj.writable},lE=t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(11737).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},lP=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},lT=async(e,t)=>{let r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}},lC=async(e,t)=>{await e.removeItem(t)};class lA{constructor(){this.promise=new lA.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function lO(e){let t=e.split(".");if(3!==t.length)throw Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw Error("JWT is not valid: payload is not in base64url format");return JSON.parse(function(e){let t,r,n,i,s,a,o,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;for(e=e.replace("-","+").replace("_","/");c<e.length;)i=l.indexOf(e.charAt(c++)),s=l.indexOf(e.charAt(c++)),a=l.indexOf(e.charAt(c++)),o=l.indexOf(e.charAt(c++)),t=i<<2|s>>4,r=(15&s)<<4|a>>2,n=(3&a)<<6|o,u+=String.fromCharCode(t),64!=a&&0!=r&&(u+=String.fromCharCode(r)),64!=o&&0!=n&&(u+=String.fromCharCode(n));return u}(t[1]))}async function lN(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function lR(e){return("0"+e.toString(16)).substr(-2)}async function lF(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>String.fromCharCode(e)).join("")}async function lD(e){return"u">typeof crypto&&void 0!==crypto.subtle&&"u">typeof TextEncoder?btoa(await lF(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e)}async function lM(e,t,r=!1){let n=function(){let e=new Uint32Array(56);if("u"<typeof crypto){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,lR).join("")}(),i=n;r&&(i+="/PASSWORD_RECOVERY"),await lP(e,`${t}-code-verifier`,i);let s=await lD(n),a=n===s?"plain":"s256";return[s,a]}lA.promiseConstructor=Promise;let lI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class lB extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function l$(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class lL extends lB{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class lU extends lB{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class lz extends lB{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class lV extends lz{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class lK extends lz{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lq extends lz{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class lW extends lz{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lH extends lz{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lG extends lz{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function lQ(e){return l$(e)&&"AuthRetryableFetchError"===e.name}class lY extends lz{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var lJ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};let lX=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lZ=[502,503,504];async function l0(e){var t;let r,n;if(!("object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json))throw new lG(lX(e),0);if(lZ.includes(e.status))throw new lG(lX(e),e.status);try{r=await e.json()}catch(e){throw new lU(lX(e),e)}let i=function(e){let t=e.headers.get(lw);if(!t||!t.match(lI))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(i&&i.getTime()>=l_["2024-01-01"].timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?n=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(n=r.error_code),n){if("weak_password"===n)throw new lY(lX(r),e.status,(null==(t=r.weak_password)?void 0:t.reasons)||[]);else if("session_not_found"===n)throw new lV}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new lY(lX(r),e.status,r.weak_password.reasons);throw new lL(lX(r),e.status||500,n)}async function l1(e,t,r,n){var i;let s=Object.assign({},null==n?void 0:n.headers);s[lw]||(s[lw]=l_["2024-01-01"].name),(null==n?void 0:n.jwt)&&(s.Authorization=`Bearer ${n.jwt}`);let a=null!=(i=null==n?void 0:n.query)?i:{};(null==n?void 0:n.redirectTo)&&(a.redirect_to=n.redirectTo);let o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await l2(e,t,r+o,{headers:s,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function l2(e,t,r,n,i,s){let a,o,l=(o={method:t,headers:(null==n?void 0:n.headers)||{}},"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==n?void 0:n.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),i)));try{a=await e(r,Object.assign({},l))}catch(e){throw console.error(e),new lG(lX(e),0)}if(a.ok||await l0(a),null==n?void 0:n.noResolveJson)return a;try{return await a.json()}catch(e){await l0(e)}}function l3(e){var t,r,n;let i=null;(n=e).access_token&&n.refresh_token&&n.expires_in&&(i=Object.assign({},e),e.expires_at||(i.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:i,user:null!=(t=e.user)?t:e},error:null}}function l5(e){let t=l3(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function l4(e){var t;return{data:{user:null!=(t=e.user)?t:e},error:null}}function l6(e){return{data:e,error:null}}function l7(e){let{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=e;return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},user:Object.assign({},lJ(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function l8(e){return e}var l9=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class ue{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=lE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await l1(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(l$(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await l1(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:l4})}catch(e){if(l$(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,r=l9(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await l1(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:l7,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(l$(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await l1(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:l4})}catch(e){if(l$(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,r,n,i,s,a,o;try{let l={nextPage:null,lastPage:0,total:0},u=await l1(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(i=null==(n=null==e?void 0:e.perPage)?void 0:n.toString())?i:""},xform:l8});if(u.error)throw u.error;let c=await u.json(),h=null!=(s=u.headers.get("x-total-count"))?s:0,d=null!=(o=null==(a=u.headers.get("link"))?void 0:a.split(","))?o:[];return d.length>0&&(d.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(e){if(l$(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){try{return await l1(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:l4})}catch(e){if(l$(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){try{return await l1(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:l4})}catch(e){if(l$(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){try{return await l1(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:l4})}catch(e){if(l$(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){try{let{data:t,error:r}=await l1(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(e){if(l$(e))return{data:null,error:e};throw e}}async _deleteFactor(e){try{return{data:await l1(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(l$(e))return{data:null,error:e};throw e}}}let ut={getItem:e=>lS()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{lS()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{lS()&&globalThis.localStorage.removeItem(e)}};function ur(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}let un={debug:!!(globalThis&&lS()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class ui extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class us extends ui{}async function ua(e,t,r){un.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),un.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(n){un.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{un.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}if(0===t)throw un.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new us(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(un.debug)try{let e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}))}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"u">typeof self&&(self.globalThis=self)}let uo={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ul(e,t,r){return await r()}class uu{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=uu.nextInstanceID,uu.nextInstanceID+=1,this.instanceID>0&&lk()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},uo),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new ue({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=lE(n.fetch),this.lock=n.lock||ul,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:lk()&&(null==(t=null==globalThis?void 0:globalThis.navigator)?void 0:t.locks)?this.lock=ua:this.lock=ul,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:lS()?this.storage=ut:(this.memoryStorage={},this.storage=ur(this.memoryStorage)):(this.memoryStorage={},this.storage=ur(this.memoryStorage)),lk()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null==(r=this.broadcastChannel)||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t=function(e){let t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(e){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),lk()&&this.detectSessionInUrl&&"none"!==r){let{data:n,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),l$(i)&&"AuthImplicitGrantRedirectError"===i.name){let t=null==(e=i.details)?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}let{session:s,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){if(l$(e))return{error:e};return{error:new lU("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{let{data:i,error:s}=await l1(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(r=null==(t=null==e?void 0:e.options)?void 0:t.data)?r:{},gotrue_meta_security:{captcha_token:null==(n=null==e?void 0:e.options)?void 0:n.captchaToken}},xform:l3});if(s||!i)return{data:{user:null,session:null},error:s};let a=i.session,o=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:o,session:a},error:null}}catch(e){if(l$(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){var t,r,n;try{let i;if("email"in e){let{email:r,password:n,options:s}=e,a=null,o=null;"pkce"===this.flowType&&([a,o]=await lM(this.storage,this.storageKey)),i=await l1(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!=(t=null==s?void 0:s.data)?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:o},xform:l3})}else if("phone"in e){let{phone:t,password:s,options:a}=e;i=await l1(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!=(r=null==a?void 0:a.data)?r:{},channel:null!=(n=null==a?void 0:a.channel)?n:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:l3})}else throw new lq("You must provide either an email or phone number and a password");let{data:s,error:a}=i;if(a||!s)return{data:{user:null,session:null},error:a};let o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(e){if(l$(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if("email"in e){let{email:r,password:n,options:i}=e;t=await l1(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:l5})}else if("phone"in e){let{phone:r,password:n,options:i}=e;t=await l1(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:l5})}else throw new lq("You must provide either an email or phone number and a password");let{data:r,error:n}=t;if(n)return{data:{user:null,session:null},error:n};if(!r||!r.session||!r.user)return{data:{user:null,session:null},error:new lK};return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}}catch(e){if(l$(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null==(t=e.options)?void 0:t.redirectTo,scopes:null==(r=e.options)?void 0:r.scopes,queryParams:null==(n=e.options)?void 0:n.queryParams,skipBrowserRedirect:null==(i=e.options)?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){let t=await lT(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{let{data:t,error:i}=await l1(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:l3});if(await lC(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!t||!t.session||!t.user)return{data:{user:null,session:null,redirectType:null},error:new lK};return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:i}}catch(e){if(l$(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{let{options:t,provider:r,token:n,access_token:i,nonce:s}=e,{data:a,error:o}=await l1(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:l3});if(o)return{data:{user:null,session:null},error:o};if(!a||!a.session||!a.user)return{data:{user:null,session:null},error:new lK};return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:o}}catch(e){if(l$(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,r,n,i,s;try{if("email"in e){let{email:n,options:i}=e,s=null,a=null;"pkce"===this.flowType&&([s,a]=await lM(this.storage,this.storageKey));let{error:o}=await l1(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!=(t=null==i?void 0:i.data)?t:{},create_user:null==(r=null==i?void 0:i.shouldCreateUser)||r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:a},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){let{phone:t,options:r}=e,{data:a,error:o}=await l1(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!=(n=null==r?void 0:r.data)?n:{},create_user:null==(i=null==r?void 0:r.shouldCreateUser)||i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!=(s=null==r?void 0:r.channel)?s:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new lq("You must provide either an email or phone number.")}catch(e){if(l$(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,r;try{let n,i;"options"in e&&(n=null==(t=e.options)?void 0:t.redirectTo,i=null==(r=e.options)?void 0:r.captchaToken);let{data:s,error:a}=await l1(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:l3});if(a)throw a;if(!s)throw Error("An error occurred on token verification.");let o=s.session,l=s.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(e){if(l$(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,r,n;try{let i=null,s=null;return"pkce"===this.flowType&&([i,s]=await lM(this.storage,this.storageKey)),await l1(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!=(r=null==(t=e.options)?void 0:t.redirectTo)?r:void 0}),(null==(n=null==e?void 0:e.options)?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:l6})}catch(e){if(l$(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new lV;let{error:n}=await l1(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(l$(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:n,options:i}=e,{error:s}=await l1(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){let{phone:r,type:n,options:i}=e,{data:s,error:a}=await l1(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:a}}throw new lq("You must provide either an email or phone number and a type")}catch(e){if(l$(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let e=null,t=await lT(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let r=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,n)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,n))})}return{data:{session:e},error:null}}let{session:n,error:i}=await this._callRefreshToken(e.refresh_token);if(i)return{data:{session:null},error:i};return{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{if(e)return await l1(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:l4});return await this._useSession(async e=>{var t,r,n;let{data:i,error:s}=e;if(s)throw s;return(null==(t=i.session)?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await l1(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(n=null==(r=i.session)?void 0:r.access_token)?n:void 0,xform:l4}):{data:{user:null},error:new lV}})}catch(e){if(l$(e))return l$(e)&&"AuthSessionMissingError"===e.name&&(await this._removeSession(),await lC(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new lV;let s=n.session,a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await lM(this.storage,this.storageKey));let{data:l,error:u}=await l1(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:s.access_token,xform:l4});if(u)throw u;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(e){if(l$(e))return{data:{user:null},error:e};throw e}}_decodeJWT(e){return lO(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new lV;let t=Date.now()/1e3,r=t,n=!0,i=null,s=lO(e.access_token);if(s.exp&&(n=(r=s.exp)<=t),n){let{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};i=t}else{let{data:n,error:s}=await this._getUser(e.access_token);if(s)throw s;i={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(e){if(l$(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:n,error:i}=t;if(i)throw i;e=null!=(r=n.session)?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new lV;let{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(l$(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e,t){try{if(!lk())throw new lW("No browser detected.");if(e.error||e.error_description||e.error_code)throw new lW(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new lH("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new lW("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new lH("No code detected.");let{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;let n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:s,expires_in:a,expires_at:o,token_type:l}=e;if(!i||!a||!s||!l)throw new lW("No session defined in URL");let u=Math.round(Date.now()/1e3),c=parseInt(a),h=u+c;o&&(h=parseInt(o));let d=h-u;1e3*d<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${c}s`);let p=h-c;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);let{data:f,error:m}=await this._getUser(i);if(m)throw m;let g={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:c,expires_at:h,refresh_token:s,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(e){if(l$(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await lT(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:n,error:i}=t;if(i)return{error:i};let s=null==(r=n.session)?void 0:r.access_token;if(s){let{error:t}=await this.admin.signOut(s,e);if(t&&!(l$(t)&&"AuthApiError"===t.name&&(404===t.status||401===t.status||403===t.status)))return{error:t}}return"others"!==e&&(await this._removeSession(),await lC(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){let t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{let{data:{session:n},error:i}=t;if(i)throw i;await (null==(r=this.stateChangeEmitters.get(e))?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(t){await (null==(n=this.stateChangeEmitters.get(e))?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await lM(this.storage,this.storageKey,!0));try{return await l1(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(l$(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!=(e=t.user.identities)?e:[]},error:null}}catch(e){if(l$(e))return{data:null,error:e};throw e}}async linkIdentity(e){var t;try{let{data:r,error:n}=await this._useSession(async t=>{var r,n,i,s,a;let{data:o,error:l}=t;if(l)throw l;let u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null==(r=e.options)?void 0:r.redirectTo,scopes:null==(n=e.options)?void 0:n.scopes,queryParams:null==(i=e.options)?void 0:i.queryParams,skipBrowserRedirect:!0});return await l1(this.fetch,"GET",u,{headers:this.headers,jwt:null!=(a=null==(s=o.session)?void 0:s.access_token)?a:void 0})});if(n)throw n;return!lk()||(null==(t=e.options)?void 0:t.skipBrowserRedirect)||window.location.assign(null==r?void 0:r.url),{data:{provider:e.provider,url:null==r?void 0:r.url},error:null}}catch(t){if(l$(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;let{data:i,error:s}=t;if(s)throw s;return await l1(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!=(n=null==(r=i.session)?void 0:r.access_token)?n:void 0})})}catch(e){if(l$(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{var r,n;let i=Date.now();return await (r=async r=>(r>0&&await lN(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await l1(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:l3})),n=(e,t)=>{let r=200*Math.pow(2,e);return t&&lQ(t)&&Date.now()+r-i<3e4},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{let t=await r(i);if(!n(i,null,t))return void e(t)}catch(e){if(!n(i,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),l$(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),lk()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;let t="#_recoverAndRefresh()";this._debug(t,"begin");try{let r=await lT(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),null!==r&&await this._removeSession();return}let n=Math.round(Date.now()/1e3),i=(null!=(e=r.expires_at)?e:1/0)<n+10;if(this._debug(t,`session has${i?"":" not"} expired with margin of 10s`),i){if(this.autoRefreshToken&&r.refresh_token){let{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),lQ(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(e){this._debug(t,"error",e),console.error(e);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new lV;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new lA;let{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new lV;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);let n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(e){if(this._debug(n,"error",e),l$(e)){let r={session:null,error:e};return lQ(e)||await this._removeSession(),null==(t=this.refreshingDeferred)||t.resolve(r),r}throw null==(r=this.refreshingDeferred)||r.reject(e),e}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){let n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let n=[],i=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(e){n.push(e)}});if(await Promise.all(i),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await lP(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await lC(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lk()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"u">typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let n=Math.floor((1e3*r.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ui)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lk()||!(null==window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){let[e,t]=await lM(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){let e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:n,error:i}=t;return i?{data:null,error:i}:await l1(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token})})}catch(e){if(l$(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;let{data:i,error:s}=t;if(s)return{data:null,error:s};let a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await l1(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null==(r=null==i?void 0:i.session)?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null==(n=null==o?void 0:o.totp)?void 0:n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(e){if(l$(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:n,error:i}=t;if(i)return{data:null,error:i};let{data:s,error:a}=await l1(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:a})})}catch(e){if(l$(e))return{data:null,error:e};throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:n,error:i}=t;return i?{data:null,error:i}:await l1(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token})})}catch(e){if(l$(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){let{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};let r=(null==e?void 0:e.factors)||[],n=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;let{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let s=this._decodeJWT(n.access_token),a=null;s.aal&&(a=s.aal);let o=a;return(null!=(r=null==(t=n.user.factors)?void 0:t.filter(e=>"verified"===e.status))?r:[]).length>0&&(o="aal2"),{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}))}}uu.nextInstanceID=0;let uc=uu;class uh extends uc{constructor(e){super(e)}}let ud=new class e{constructor(e,t,r){var n,i,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw Error("supabaseUrl is required.");if(!t)throw Error("supabaseKey is required.");const a=e.replace(/\/$/,"");this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const o=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l=function(e,t){let{db:r,auth:n,realtime:i,global:s}=e,{db:a,auth:o,realtime:l,global:u}=t,c={db:Object.assign(Object.assign({},a),r),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s),accessToken:()=>{var e,t,r,n;return e=this,t=void 0,n=function*(){return""},new(r=void 0,r=Promise)(function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})}};return e.accessToken?c.accessToken=e.accessToken:delete c.accessToken,c}(null!=r?r:{},{db:lm,realtime:ly,auth:Object.assign(Object.assign({},lg),{storageKey:o}),global:lf});this.storageKey=null!=(n=l.auth.storageKey)?n:"",this.headers=null!=(i=l.global.headers)?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(s=l.auth)?s:{},this.headers,l.global.fetch),this.fetch=((e,t,r)=>{let n,i=(n=r||("u"<typeof fetch?lv.default:fetch),(...e)=>n(...e)),s="u"<typeof Headers?lv.Headers:Headers;return(r,n)=>{var a,o,l,u;return a=void 0,o=void 0,l=void 0,u=function*(){var a;let o=null!=(a=yield t())?a:e,l=new s(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),i(r,Object.assign(Object.assign({},n),{headers:l}))},new(l||(l=Promise))(function(e,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function n(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof l?i:new l(function(e){e(i)})).then(r,n)}i((u=u.apply(a,o||[])).next())})}})(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new oC(`${a}/rest/v1`,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),l.accessToken||this._listenForAuthEvents()}get functions(){return new oT(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ld(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t,r,n,i,s;return r=this,n=void 0,i=void 0,s=function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return null!=(t=null==(e=r.session)?void 0:e.access_token)?t:null},new(i||(i=Promise))(function(e,t){function a(e){try{l(s.next(e))}catch(e){t(e)}}function o(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof i?r:new i(function(e){e(r)})).then(a,o)}l((s=s.apply(r,n||[])).next())})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:i,flowType:s,lock:a,debug:o},l,u){let c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uh({url:this.authUrl,headers:Object.assign(Object.assign({},c),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,flowType:s,lock:a,debug:o,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new o0(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?this.changedAccessToken=r:"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}}("https://jextayidnmtsoofugnig.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpleHRheWlkbm10c29vZnVnbmlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODM1MDAsImV4cCI6MjA4NDY1OTUwMH0.vxRq32MPWyO_znst5nFCiQ7AWJtlJeOFWMY-RlZmjrs",void 0);async function up(e,t,r,n,i,s){let{data:a,error:o}=await ud.from("photos_metadata").insert([{cid:e,file_size_bytes:t,device_id:r,nonce:n,mime_type:i,user_key_hash:s}]).select();if(o)throw console.error("Supabase Metadata Upload Error:",o),o;return a}async function uf(e,t){let r=ud.from("photos_metadata").select("cid, device_id, uploaded_at, file_size_bytes, nonce, mime_type");t&&(r=r.eq("user_key_hash",t));let{data:n,error:i}=await r.order("uploaded_at",{ascending:!1});if(i)throw console.error("Supabase Load Error:",i),i;return n||[]}async function um(e){let{data:t,error:r}=await ud.from("photos_metadata").select("id").eq("cid",e).single();return r&&"PGRST116"!==r.code&&console.error("Supabase Check Error:",r),!!t}async function ug(e,t,r,n){let{data:i,error:s}=await ud.from("devices").upsert([{id:e,device_name:t,device_type:r,user_key_hash:n}],{onConflict:"id"}).select();if(s)throw console.error("Supabase Device Registration Error:",s),s;return i?.[0]}async function uy(e){let{data:t,error:r}=await ud.from("devices").select("*").eq("user_key_hash",e).order("created_at",{ascending:!1});if(r)throw console.error("Supabase Get Devices Error:",r),r;return t||[]}let uv=tx.default.env.NEXT_PUBLIC_PINATA_JWT||"",ub=tx.default.env.NEXT_PUBLIC_PINATA_GATEWAY||"https://gateway.pinata.cloud";async function ux(e,t){if(!uv)return console.warn("PINATA_JWT not configured - using local mock CID"),`Qm${function(){let e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",t="";for(let r=0;r<44;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}()}`;let r=new FormData;r.append("file",e,t||"encrypted-photo.bin");let n=JSON.stringify({name:t||"photovault-encrypted",keyvalues:{app:"photovault",type:"encrypted-photo"}});r.append("pinataMetadata",n);let i=JSON.stringify({cidVersion:1});r.append("pinataOptions",i);let s=await fetch("https://api.pinata.cloud/pinning/pinFileToIPFS",{method:"POST",headers:{Authorization:`Bearer ${uv}`},body:r});if(!s.ok)throw console.error("Pinata upload failed:",await s.text()),Error(`IPFS upload failed: ${s.status}`);let a=await s.json();return console.log("IPFS upload successful:",a.IpfsHash),a.IpfsHash}async function uw(e){let t=`${ub}/ipfs/${e}`,r=await fetch(t,{method:"GET",headers:uv?{"x-pinata-gateway-token":uv}:{}});if(!r.ok){let t=`https://ipfs.io/ipfs/${e}`,n=await fetch(t);if(!n.ok)throw Error(`IPFS download failed: ${r.status}`);return await n.blob()}return await r.blob()}let u_=async(e,t)=>{try{console.log("Uploading to IPFS...",{size:e.size,fileName:t});let r=await ux(e,t);return console.log("IPFS upload successful:",r),r}catch(e){throw console.error("Remote Storage Upload failed:",e),e}},uk=async e=>{try{console.log("Downloading from IPFS:",e);let t=await uw(e);return console.log("IPFS download successful:",{cid:e,size:t.size}),t}catch(e){throw console.error("Remote Storage Download failed:",e),e}};function uj(e){return e.startsWith("Qm")||e.startsWith("bafy")||e.startsWith("bafk")}var uS=e.i(4629);function uE(e){let t=(0,a4.useQueryClient)(),[r,n]=(0,B.useState)(null);(0,B.useEffect)(()=>{e?(0,eF.getUserKeyHash)(e).then(n):n(null)},[e]);let{data:i=[],isLoading:s,error:a}=a9({queryKey:["photos"],queryFn:ow,enabled:!!e}),{data:o=0}=a9({queryKey:["photoCount"],queryFn:ok}),l=on({mutationFn:async t=>{let n;if(!e)throw Error("No encryption key");let{encrypted:i,nonce:s}=await (0,eF.encryptFile)(t,e);console.log("File encrypted:",{size:i.size,nonce:s.slice(0,8)+"..."});try{n=await u_(i,t.name),console.log("Uploaded to IPFS with CID:",n)}catch(e){console.error("IPFS upload failed:",e),console.log("Using local fallback CID:",n=`cid_${Date.now()}_${Math.random().toString(36).slice(2)}`)}let a={cid:n,nonce:s,fileName:t.name,mimeType:t.type,fileSize:t.size,uploadedAt:new Date,encryptedBlob:i};await ox(a),console.log("Saved to local IndexedDB");let o=(0,uS.getDeviceId)();try{await up(n,t.size,o,s,t.type,r||void 0),console.log("Metadata synced to Supabase:",n)}catch(e){console.error("Supabase metadata sync failed (photo saved locally & on IPFS):",e)}return a},onSuccess:()=>{t.invalidateQueries({queryKey:["photos"]}),t.invalidateQueries({queryKey:["photoCount"]})}}),u=on({mutationFn:async e=>{await o_(e)},onSuccess:()=>{t.invalidateQueries({queryKey:["photos"]}),t.invalidateQueries({queryKey:["photoCount"]})}}),c=(0,B.useCallback)(async t=>{if(!e||!t.encryptedBlob)return null;let r=await (0,eF.decryptFile)(t.encryptedBlob,t.nonce,e,t.mimeType);return r?URL.createObjectURL(r):null},[e]);return{photos:i,photoCount:o,isLoading:s,error:a,uploadPhoto:l.mutate,deletePhoto:u.mutate,decryptPhoto:c,isUploading:l.isPending,userKeyHash:r}}var uP=Object.defineProperty,uT=Object.getOwnPropertySymbols,uC=Object.prototype.hasOwnProperty,uA=Object.prototype.propertyIsEnumerable,uO=(e,t,r)=>t in e?uP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uN=(e,t)=>{for(var r in t||(t={}))uC.call(t,r)&&uO(e,r,t[r]);if(uT)for(var r of uT(t))uA.call(t,r)&&uO(e,r,t[r]);return e},uR=(e,t)=>{var r={};for(var n in e)uC.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&uT)for(var n of uT(e))0>t.indexOf(n)&&uA.call(e,n)&&(r[n]=e[n]);return r};(e=>{let t=class t{constructor(e,r,n,s){if(this.version=e,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version value out of range");if(s<-1||s>7)throw RangeError("Mask value out of range");this.size=4*e+17;let a=[];for(let e=0;e<this.size;e++)a.push(!1);for(let e=0;e<this.size;e++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const o=this.addEccAndInterleave(n);if(this.drawCodewords(o),-1==s){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const r=this.getPenaltyScore();r<e&&(s=t,e=r),this.applyMask(t)}}i(0<=s&&s<=7),this.mask=s,this.applyMask(s),this.drawFormatBits(s),this.isFunction=[]}static encodeText(r,n){let i=e.QrSegment.makeSegments(r);return t.encodeSegments(i,n)}static encodeBinary(r,n){let i=e.QrSegment.makeBytes(r);return t.encodeSegments([i],n)}static encodeSegments(e,n,s=1,o=40,l=-1,u=!0){let c,h;if(!(t.MIN_VERSION<=s&&s<=o&&o<=t.MAX_VERSION)||l<-1||l>7)throw RangeError("Invalid value");for(c=s;;c++){let r=8*t.getNumDataCodewords(c,n),i=a.getTotalBits(e,c);if(i<=r){h=i;break}if(c>=o)throw RangeError("Data too long")}for(let e of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])u&&h<=8*t.getNumDataCodewords(c,e)&&(n=e);let d=[];for(let t of e)for(let e of(r(t.mode.modeBits,4,d),r(t.numChars,t.mode.numCharCountBits(c),d),t.getData()))d.push(e);i(d.length==h);let p=8*t.getNumDataCodewords(c,n);i(d.length<=p),r(0,Math.min(4,p-d.length),d),r(0,(8-d.length%8)%8,d),i(d.length%8==0);for(let e=236;d.length<p;e^=253)r(e,8,d);let f=[];for(;8*f.length<d.length;)f.push(0);return d.forEach((e,t)=>f[t>>>3]|=e<<7-(7&t)),new t(c,n,f,l)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let e=this.getAlignmentPatternPositions(),t=e.length;for(let r=0;r<t;r++)for(let n=0;n<t;n++)(0!=r||0!=n)&&(0!=r||n!=t-1)&&(r!=t-1||0!=n)&&this.drawAlignmentPattern(e[r],e[n]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){let t=this.errorCorrectionLevel.formatBits<<3|e,r=t;for(let e=0;e<10;e++)r=r<<1^(r>>>9)*1335;let s=(t<<10|r)^21522;i(s>>>15==0);for(let e=0;e<=5;e++)this.setFunctionModule(8,e,n(s,e));this.setFunctionModule(8,7,n(s,6)),this.setFunctionModule(8,8,n(s,7)),this.setFunctionModule(7,8,n(s,8));for(let e=9;e<15;e++)this.setFunctionModule(14-e,8,n(s,e));for(let e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,n(s,e));for(let e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,n(s,e));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;let t=this.version<<12|e;i(t>>>18==0);for(let e=0;e<18;e++){let r=n(t,e),i=this.size-11+e%3,s=Math.floor(e/3);this.setFunctionModule(i,s,r),this.setFunctionModule(s,i,r)}}drawFinderPattern(e,t){for(let r=-4;r<=4;r++)for(let n=-4;n<=4;n++){let i=Math.max(Math.abs(n),Math.abs(r)),s=e+n,a=t+r;0<=s&&s<this.size&&0<=a&&a<this.size&&this.setFunctionModule(s,a,2!=i&&4!=i)}}drawAlignmentPattern(e,t){for(let r=-2;r<=2;r++)for(let n=-2;n<=2;n++)this.setFunctionModule(e+n,t+r,1!=Math.max(Math.abs(n),Math.abs(r)))}setFunctionModule(e,t,r){this.modules[t][e]=r,this.isFunction[t][e]=!0}addEccAndInterleave(e){let r=this.version,n=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(r,n))throw RangeError("Invalid argument");let s=t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][r],a=t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][r],o=Math.floor(t.getNumRawDataModules(r)/8),l=s-o%s,u=Math.floor(o/s),c=[],h=t.reedSolomonComputeDivisor(a);for(let r=0,n=0;r<s;r++){let i=e.slice(n,n+u-a+(r<l?0:1));n+=i.length;let s=t.reedSolomonComputeRemainder(i,h);r<l&&i.push(0),c.push(i.concat(s))}let d=[];for(let e=0;e<c[0].length;e++)c.forEach((t,r)=>{(e!=u-a||r>=l)&&d.push(t[e])});return i(d.length==o),d}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let r=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let i=0;i<this.size;i++)for(let s=0;s<2;s++){let a=t-s,o=(t+1&2)==0?this.size-1-i:i;!this.isFunction[o][a]&&r<8*e.length&&(this.modules[o][a]=n(e[r>>>3],7-(7&r)),r++)}}i(r==8*e.length)}applyMask(e){if(e<0||e>7)throw RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let r=0;r<this.size;r++){let n;switch(e){case 0:n=(r+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+t)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:n=r*t%2+r*t%3==0;break;case 6:n=(r*t%2+r*t%3)%2==0;break;case 7:n=((r+t)%2+r*t%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[t][r]&&n&&(this.modules[t][r]=!this.modules[t][r])}}getPenaltyScore(){let e=0;for(let r=0;r<this.size;r++){let n=!1,i=0,s=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[r][a]==n?5==++i?e+=t.PENALTY_N1:i>5&&e++:(this.finderPenaltyAddHistory(i,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[r][a],i=1);e+=this.finderPenaltyTerminateAndCount(n,i,s)*t.PENALTY_N3}for(let r=0;r<this.size;r++){let n=!1,i=0,s=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[a][r]==n?5==++i?e+=t.PENALTY_N1:i>5&&e++:(this.finderPenaltyAddHistory(i,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[a][r],i=1);e+=this.finderPenaltyTerminateAndCount(n,i,s)*t.PENALTY_N3}for(let r=0;r<this.size-1;r++)for(let n=0;n<this.size-1;n++){let i=this.modules[r][n];i==this.modules[r][n+1]&&i==this.modules[r+1][n]&&i==this.modules[r+1][n+1]&&(e+=t.PENALTY_N2)}let r=0;for(let e of this.modules)r=e.reduce((e,t)=>e+ +!!t,r);let n=this.size*this.size,s=Math.ceil(Math.abs(20*r-10*n)/n)-1;return i(0<=s&&s<=9),i(0<=(e+=s*t.PENALTY_N4)&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{let e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),r=[6];for(let n=this.size-7;r.length<e;n-=t)r.splice(1,0,n);return r}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version number out of range");let r=(16*e+128)*e+64;if(e>=2){let t=Math.floor(e/7)+2;r-=(25*t-10)*t-55,e>=7&&(r-=36)}return i(208<=r&&r<=29648),r}static getNumDataCodewords(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw RangeError("Degree out of range");let r=[];for(let t=0;t<e-1;t++)r.push(0);r.push(1);let n=1;for(let i=0;i<e;i++){for(let e=0;e<r.length;e++)r[e]=t.reedSolomonMultiply(r[e],n),e+1<r.length&&(r[e]^=r[e+1]);n=t.reedSolomonMultiply(n,2)}return r}static reedSolomonComputeRemainder(e,r){let n=r.map(e=>0);for(let i of e){let e=i^n.shift();n.push(0),r.forEach((r,i)=>n[i]^=t.reedSolomonMultiply(r,e))}return n}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw RangeError("Byte out of range");let r=0;for(let n=7;n>=0;n--)r=r<<1^(r>>>7)*285^(t>>>n&1)*e;return i(r>>>8==0),r}finderPenaltyCountPatterns(e){let t=e[1];i(t<=3*this.size);let r=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(r&&e[0]>=4*t&&e[6]>=t?1:0)+(r&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,r){return e&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function r(e,t,r){if(t<0||t>31||e>>>t!=0)throw RangeError("Value out of range");for(let n=t-1;n>=0;n--)r.push(e>>>n&1)}function n(e,t){return(e>>>t&1)!=0}function i(e){if(!e)throw Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;let s=class e{constructor(e,t,r){if(this.mode=e,this.numChars=t,this.bitData=r,t<0)throw RangeError("Invalid argument");this.bitData=r.slice()}static makeBytes(t){let n=[];for(let e of t)r(e,8,n);return new e(e.Mode.BYTE,t.length,n)}static makeNumeric(t){if(!e.isNumeric(t))throw RangeError("String contains non-numeric characters");let n=[];for(let e=0;e<t.length;){let i=Math.min(t.length-e,3);r(parseInt(t.substring(e,e+i),10),3*i+1,n),e+=i}return new e(e.Mode.NUMERIC,t.length,n)}static makeAlphanumeric(t){let n;if(!e.isAlphanumeric(t))throw RangeError("String contains unencodable characters in alphanumeric mode");let i=[];for(n=0;n+2<=t.length;n+=2){let s=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));r(s+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),11,i)}return n<t.length&&r(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,i),new e(e.Mode.ALPHANUMERIC,t.length,i)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let n=[];if(t<0)throw RangeError("ECI assignment value out of range");if(t<128)r(t,8,n);else if(t<16384)r(2,2,n),r(t,14,n);else if(t<1e6)r(6,3,n),r(t,21,n);else throw RangeError("ECI assignment value out of range");return new e(e.Mode.ECI,0,n)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let r=0;for(let n of e){let e=n.mode.numCharCountBits(t);if(n.numChars>=1<<e)return 1/0;r+=4+e+n.bitData.length}return r}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let r=0;r<e.length;r++)"%"!=e.charAt(r)?t.push(e.charCodeAt(r)):(t.push(parseInt(e.substring(r+1,r+3),16)),r+=2);return t}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=s;e.QrSegment=s})(M||(M={})),_=(w=M||(M={})).QrCode||(w.QrCode={}),(o=class{constructor(e,t){this.ordinal=e,this.formatBits=t}}).LOW=new o(0,1),o.MEDIUM=new o(1,0),o.QUARTILE=new o(2,3),o.HIGH=new o(3,2),_.Ecc=o,j=(k=M||(M={})).QrSegment||(k.QrSegment={}),(l=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}).NUMERIC=new l(1,[10,12,14]),l.ALPHANUMERIC=new l(2,[9,11,13]),l.BYTE=new l(4,[8,16,16]),l.KANJI=new l(8,[8,10,12]),l.ECI=new l(7,[0,0,0]),j.Mode=l;var uF=M,uD={L:uF.QrCode.Ecc.LOW,M:uF.QrCode.Ecc.MEDIUM,Q:uF.QrCode.Ecc.QUARTILE,H:uF.QrCode.Ecc.HIGH},uM="#FFFFFF",uI="#000000";function uB(e,t=0){let r=[];return e.forEach(function(e,n){let i=null;e.forEach(function(s,a){if(!s&&null!==i){r.push(`M${i+t} ${n+t}h${a-i}v1H${i+t}z`),i=null;return}if(a===e.length-1){if(!s)return;null===i?r.push(`M${a+t},${n+t} h1v1H${a+t}z`):r.push(`M${i+t},${n+t} h${a+1-i}v1H${i+t}z`);return}s&&null===i&&(i=a)})}),r.join("")}function u$(e,t){return e.slice().map((e,r)=>r<t.y||r>=t.y+t.h?e:e.map((e,r)=>(r<t.x||r>=t.x+t.w)&&e))}function uL({value:e,level:t,minVersion:r,includeMargin:n,marginSize:i,imageSettings:s,size:a,boostLevel:o}){let l=B.default.useMemo(()=>{let n=(Array.isArray(e)?e:[e]).reduce((e,t)=>(e.push(...uF.QrSegment.makeSegments(t)),e),[]);return uF.QrCode.encodeSegments(n,uD[t],r,void 0,void 0,o)},[e,t,r,o]),{cells:u,margin:c,numCells:h,calculatedImageSettings:d}=B.default.useMemo(()=>{let e=l.getModules(),t=null!=i?Math.max(Math.floor(i),0):4*!!n,r=e.length+2*t,o=function(e,t,r,n){if(null==n)return null;let i=e.length+2*r,s=Math.floor(.1*t),a=i/t,o=(n.width||s)*a,l=(n.height||s)*a,u=null==n.x?e.length/2-o/2:n.x*a,c=null==n.y?e.length/2-l/2:n.y*a,h=null==n.opacity?1:n.opacity,d=null;if(n.excavate){let e=Math.floor(u),t=Math.floor(c),r=Math.ceil(o+u-e),n=Math.ceil(l+c-t);d={x:e,y:t,w:r,h:n}}return{x:u,y:c,h:l,w:o,excavation:d,opacity:h,crossOrigin:n.crossOrigin}}(e,a,t,s);return{cells:e,margin:t,numCells:r,calculatedImageSettings:o}},[l,a,s,n,i]);return{qrcode:l,margin:c,cells:u,numCells:h,calculatedImageSettings:d}}var uU=function(){try{new Path2D().addPath(new Path2D)}catch(e){return!1}return!0}();B.default.forwardRef(function(e,t){let{value:r,size:n=128,level:i="L",bgColor:s=uM,fgColor:a=uI,includeMargin:o=!1,minVersion:l=1,boostLevel:u,marginSize:c,imageSettings:h}=e,d=uR(e,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:p}=d,f=uR(d,["style"]),m=null==h?void 0:h.src,g=B.default.useRef(null),y=B.default.useRef(null),v=B.default.useCallback(e=>{g.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[t]),[b,x]=B.default.useState(!1),{margin:w,cells:_,numCells:k,calculatedImageSettings:j}=uL({value:r,level:i,minVersion:l,boostLevel:u,includeMargin:o,marginSize:c,imageSettings:h,size:n});B.default.useEffect(()=>{if(null!=g.current){let e=g.current,t=e.getContext("2d");if(!t)return;let r=_,i=y.current,o=null!=j&&null!==i&&i.complete&&0!==i.naturalHeight&&0!==i.naturalWidth;o&&null!=j.excavation&&(r=u$(_,j.excavation));let l=window.devicePixelRatio||1;e.height=e.width=n*l;let u=n/k*l;t.scale(u,u),t.fillStyle=s,t.fillRect(0,0,k,k),t.fillStyle=a,uU?t.fill(new Path2D(uB(r,w))):_.forEach(function(e,r){e.forEach(function(e,n){e&&t.fillRect(n+w,r+w,1,1)})}),j&&(t.globalAlpha=j.opacity),o&&t.drawImage(i,j.x+w,j.y+w,j.w,j.h)}}),B.default.useEffect(()=>{x(!1)},[m]);let S=uN({height:n,width:n},p),E=null;return null!=m&&(E=B.default.createElement("img",{src:m,key:m,style:{display:"none"},onLoad:()=>{x(!0)},ref:y,crossOrigin:null==j?void 0:j.crossOrigin})),B.default.createElement(B.default.Fragment,null,B.default.createElement("canvas",uN({style:S,height:n,width:n,ref:v,role:"img"},f)),E)}).displayName="QRCodeCanvas";var uz=B.default.forwardRef(function(e,t){let{value:r,size:n=128,level:i="L",bgColor:s=uM,fgColor:a=uI,includeMargin:o=!1,minVersion:l=1,boostLevel:u,title:c,marginSize:h,imageSettings:d}=e,p=uR(e,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:f,cells:m,numCells:g,calculatedImageSettings:y}=uL({value:r,level:i,minVersion:l,boostLevel:u,includeMargin:o,marginSize:h,imageSettings:d,size:n}),v=m,b=null;null!=d&&null!=y&&(null!=y.excavation&&(v=u$(m,y.excavation)),b=B.default.createElement("image",{href:d.src,height:y.h,width:y.w,x:y.x+f,y:y.y+f,preserveAspectRatio:"none",opacity:y.opacity,crossOrigin:y.crossOrigin}));let x=uB(v,f);return B.default.createElement("svg",uN({height:n,width:n,viewBox:`0 0 ${g} ${g}`,ref:t,role:"img"},p),!!c&&B.default.createElement("title",null,c),B.default.createElement("path",{fill:s,d:`M0,0 h${g}v${g}H0z`,shapeRendering:"crispEdges"}),B.default.createElement("path",{fill:a,d:x,shapeRendering:"crispEdges"}),b)});uz.displayName="QRCodeSVG";let uV=z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),uK=z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),uq=z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),uW=z("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);function uH({isOpen:e,onClose:t}){let[r,n]=(0,B.useState)("show"),[i,s]=(0,B.useState)(""),[a,o]=(0,B.useState)(!1),[l,u]=(0,B.useState)(null),[c,h]=(0,B.useState)(!1),{recoveryPhrase:d,restoreFromPhrase:p}=aN(),f=async()=>{if(d)try{await navigator.clipboard.writeText(d),o(!0),setTimeout(()=>o(!1),2e3)}catch{console.error("Failed to copy to clipboard")}};return e?(0,I.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[380px] rounded-2xl overflow-hidden",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-[#E5E5EA]",children:[(0,I.jsx)("h2",{className:"sf-pro-display text-[17px] font-semibold text-[#1D1D1F]",children:"Gert verbinden"}),(0,I.jsx)("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full bg-[#F2F2F7]",children:(0,I.jsx)(uV,{className:"w-4 h-4 text-[#6E6E73]"})})]}),(0,I.jsxs)("div",{className:"flex border-b border-[#E5E5EA]",children:[(0,I.jsxs)("button",{onClick:()=>n("show"),className:`flex-1 py-3 text-[15px] font-medium flex items-center justify-center gap-2 ${"show"===r?"text-[#007AFF] border-b-2 border-[#007AFF]":"text-[#6E6E73]"}`,children:[(0,I.jsx)(uW,{className:"w-4 h-4"}),"Schlssel zeigen"]}),(0,I.jsxs)("button",{onClick:()=>n("input"),className:`flex-1 py-3 text-[15px] font-medium flex items-center justify-center gap-2 ${"input"===r?"text-[#007AFF] border-b-2 border-[#007AFF]":"text-[#6E6E73]"}`,children:[(0,I.jsx)(uq,{className:"w-4 h-4"}),"Schlssel eingeben"]})]}),(0,I.jsx)("div",{className:"p-5",children:"show"===r?(0,I.jsxs)("div",{className:"flex flex-col items-center",children:[(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mb-4",children:"Scanne diesen QR-Code mit deinem anderen Gert oder kopiere den Schlssel."}),d&&(0,I.jsx)("div",{className:"bg-white p-4 rounded-xl border border-[#E5E5EA] mb-4",children:(0,I.jsx)(uz,{value:d,size:180,level:"M",includeMargin:!1})}),(0,I.jsxs)("div",{className:"w-full bg-[#F2F2F7] rounded-xl p-3 mb-4",children:[(0,I.jsx)("p",{className:"text-[11px] text-[#6E6E73] mb-1",children:"Dein Schlssel:"}),(0,I.jsx)("p",{className:"text-[13px] font-mono text-[#1D1D1F] break-all leading-relaxed",children:d||"Kein Schlssel verfgbar"})]}),(0,I.jsx)("button",{onClick:f,disabled:!d,className:"w-full h-[44px] bg-[#007AFF] text-white text-[15px] font-semibold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:a?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(V,{className:"w-4 h-4"}),"Kopiert!"]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(uK,{className:"w-4 h-4"}),"Schlssel kopieren"]})})]}):(0,I.jsxs)("div",{className:"flex flex-col",children:[(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mb-4",children:"Gib den Schlssel von deinem anderen Gert ein, um deine Fotos zu synchronisieren."}),(0,I.jsx)("textarea",{value:i,onChange:e=>{s(e.target.value),u(null)},placeholder:"Schlssel hier eingeben...",className:"w-full h-[100px] bg-[#F2F2F7] rounded-xl p-3 text-[14px] font-mono text-[#1D1D1F] resize-none mb-3 placeholder:text-[#C7C7CC]"}),l&&(0,I.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center mb-3",children:l}),c&&(0,I.jsx)("p",{className:"text-[13px] text-[#30D158] text-center mb-3",children:"Schlssel erfolgreich importiert!"}),(0,I.jsxs)("button",{onClick:()=>{(u(null),i.trim())?p(i.trim())?(h(!0),s(""),setTimeout(()=>{h(!1),t()},1500)):u("Ungltiger Schlssel. Bitte berprfe die Eingabe."):u("Bitte gib einen Schlssel ein")},disabled:!i.trim()||c,className:"w-full h-[44px] bg-[#30D158] text-white text-[15px] font-semibold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,I.jsx)(uq,{className:"w-4 h-4"}),"Gert verbinden"]}),(0,I.jsx)("p",{className:"text-[11px] text-[#FF9500] text-center mt-4",children:"Achtung: Dies berschreibt deinen aktuellen Schlssel. Stelle sicher, dass du ihn gesichert hast."})]})})]})}):null}function uG({state:e,setState:t}){let[r,n]=(0,B.useState)(null),[i,s]=(0,B.useState)(!1),[a,o]=(0,B.useState)(!1),[l,u]=(0,B.useState)(!1),[c,h]=(0,B.useState)({current:0,total:0}),d=aI(e=>e.backupActive),p=aI(e=>e.setBackupActive),f=aI(e=>e.lastBackup),m=aI(e=>e.setLastBackup),g=aI(e=>e.permanence),{secretKey:y,hasKey:v}=aN(),{photoCount:b,userKeyHash:x}=uE(v?y:null),w=b>0?b:e.photosCount,_=async()=>{if(!l&&y){u(!0),console.log("Starting backup to IPFS...");try{let e=(await ow()).filter(e=>e.encryptedBlob);h({current:0,total:e.length});let t=0,r=(0,uS.getDeviceId)(),n=x||await (0,eF.getUserKeyHash)(y);for(let i of e)if(i.encryptedBlob)try{if(!await um(i.cid)){let e=await u_(i.encryptedBlob,i.fileName);console.log(`Uploaded to IPFS: ${e}`),await up(e,i.fileSize,r,i.nonce,i.mimeType,n)}t++,h({current:t,total:e.length})}catch(e){console.error(`Failed to upload ${i.cid}:`,e)}m("Gerade eben"),console.log(`Backup complete: ${t} photos processed`)}catch(e){console.error("Backup failed:",e)}finally{u(!1),h({current:0,total:0})}}};return(0,I.jsxs)("div",{className:"h-full flex flex-col px-5 pt-6 pb-4 overflow-y-auto",children:[(0,I.jsxs)("header",{className:"mb-6",children:[(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] text-[#1D1D1F]",children:"Backup"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] mt-1",children:"Verschlsseltes Photo-Backup"})]}),(0,I.jsx)("button",{onClick:()=>{s(!0)},className:"w-full bg-white rounded-xl p-5 mb-3 ios-tap-target",children:(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{className:"flex items-center gap-4",children:[(0,I.jsx)("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${d?"bg-[#30D158]/10":"bg-[#E5E5EA]"}`,children:(0,I.jsx)(eR,{name:"shield",size:28})}),(0,I.jsxs)("div",{className:"text-left",children:[(0,I.jsxs)("p",{className:"text-[17px] font-semibold text-[#1D1D1F]",children:["Backup ",d?"Aktiv":"Aus"]}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73]",children:d?"Deine Fotos werden geschtzt":"Tippe zum Aktivieren"})]})]}),(0,I.jsx)("div",{className:`w-[51px] h-[31px] rounded-full p-[2px] ${d?"bg-[#30D158]":"bg-[#E5E5EA]"}`,children:(0,I.jsx)("div",{className:`w-[27px] h-[27px] rounded-full bg-white shadow-sm transition-transform duration-200 transform ${d?"translate-x-5":""}`})})]})}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-2 mb-6",children:"Automatisch neue Fotos sichern"}),(0,I.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[(0,I.jsx)(uQ,{icon:(0,I.jsx)(eR,{name:"image",size:20}),value:w.toLocaleString(),label:"Fotos gesichert",tooltip:"Lokal auf deinen Gerten gespeichert",showTooltip:"photos"===r,onTap:()=>n("photos"===r?null:"photos")}),(0,I.jsx)(uQ,{icon:(0,I.jsx)(eR,{name:"clock",size:20}),value:f,label:"Letztes Backup",tooltip:"Automatisches Backup alle 6 Stunden",showTooltip:"lastBackup"===r,onTap:()=>n("lastBackup"===r?null:"lastBackup")}),(0,I.jsx)(uQ,{icon:(0,I.jsx)(eR,{name:"shield",size:20}),value:`${g}%`,label:"Dauerhaft",tooltip:"Fotos sind auf mehreren Gerten gesichert",showTooltip:"permanence"===r,onTap:()=>n("permanence"===r?null:"permanence")})]}),(0,I.jsx)("button",{onClick:_,disabled:l,className:`w-full h-[50px] text-[17px] font-semibold rounded-xl mb-3 ios-tap-target ${d?"bg-[#007AFF] text-white":"bg-[#30D158] text-white"} disabled:opacity-70 flex items-center justify-center`,children:l?(0,I.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,I.jsx)(aW,{className:"w-5 h-5 animate-spin"}),c.total>0?`${c.current}/${c.total} hochladen...`:"Vorbereiten..."]}):d?"Jetzt sichern":"Backup aktivieren"}),(0,I.jsxs)("button",{onClick:()=>o(!0),className:"w-full h-[50px] text-[17px] font-semibold rounded-xl mb-4 ios-tap-target bg-[#F2F2F7] text-[#007AFF] flex items-center justify-center gap-2",children:[(0,I.jsx)(aq,{className:"w-5 h-5"}),"Gert verbinden"]}),(0,I.jsx)("div",{className:"mt-auto pt-4",children:(0,I.jsxs)("p",{className:"text-[15px] text-[#8E8E93] text-center leading-relaxed",children:["Deine Fotos sind verschlsselt.",(0,I.jsx)("br",{}),"Niemand kann sie sehen."]})}),i&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-8",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[270px] rounded-2xl overflow-hidden",children:[(0,I.jsxs)("div",{className:"p-4 text-center",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[17px] text-[#1D1D1F] mb-1",children:d?"Backup deaktivieren?":"Backup aktivieren?"}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] leading-relaxed",children:d?"Neue Fotos werden nicht mehr automatisch gesichert.":"Neue Fotos werden automatisch verschlsselt und gesichert."})]}),(0,I.jsxs)("div",{className:"border-t border-[#E5E5EA]",children:[(0,I.jsx)("button",{onClick:()=>s(!1),className:"w-full py-3 text-[17px] text-[#007AFF] border-b border-[#E5E5EA] ios-tap-target",children:"Abbrechen"}),(0,I.jsx)("button",{onClick:()=>{p(!d),s(!1)},className:`w-full py-3 text-[17px] font-semibold ios-tap-target ${d?"text-[#FF3B30]":"text-[#30D158]"}`,children:d?"Deaktivieren":"Aktivieren"})]})]})}),(0,I.jsx)(uH,{isOpen:a,onClose:()=>o(!1)})]})}function uQ({icon:e,value:t,label:r,tooltip:n,showTooltip:i,onTap:s}){return(0,I.jsxs)("div",{className:"relative",children:[(0,I.jsxs)("button",{onClick:s,className:"w-full bg-white rounded-xl p-4 text-center ios-tap-target",children:[(0,I.jsxs)("div",{className:"flex justify-center mb-2 relative",children:[e,(0,I.jsx)(aK,{className:"w-3 h-3 text-[#C7C7CC] absolute -right-1 -top-1"})]}),(0,I.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] truncate",children:t}),(0,I.jsx)("p",{className:"text-[11px] text-[#6E6E73]",children:r})]}),i&&(0,I.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-[180px] bg-[#1D1D1F] text-white text-[13px] p-3 rounded-lg z-10 text-center",children:[n,(0,I.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-[#1D1D1F]"})]})]})}let uY=z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function uJ({state:t,setState:r,onRestartOnboarding:n}){let[i,s]=(0,B.useState)(!1),[a,o]=(0,B.useState)(!1),[l,u]=(0,B.useState)(!1),[c,h]=(0,B.useState)(!1),[d,p]=(0,B.useState)(!1),[f,m]=(0,B.useState)(!1),[g,y]=(0,B.useState)([]),v=aI(e=>e.autoBackupEnabled),b=aI(e=>e.setAutoBackupEnabled),x=aI(e=>e.backgroundBackupEnabled),w=aI(e=>e.setBackgroundBackupEnabled),_=aI(e=>e.selectedPlan),k=aI(e=>e.setSelectedPlan),{secretKey:j,recoveryPhrase:S,generateNewKey:E,clearKey:P}=aN(),T=(0,uS.getDeviceId)(),[C,A]=(0,B.useState)(null);(0,B.useEffect)(()=>{j&&e.A(88936).then(e=>e.getUserKeyHash(j)).then(A)},[j]),(0,B.useEffect)(()=>{C&&(async()=>{try{let e=await uy(C);y(e)}catch(e){console.error("Failed to fetch devices:",e)}})()},[C]);let O=S?.split("-").slice(0,12)||[],N=async()=>{P(),await E()&&r(e=>({...e,photosCount:0})),u(!1)},[R,F]=(0,B.useState)(!1);if(i){let e=g.map(e=>({id:e.id,name:e.device_name||"Unbekanntes Gert",lastActive:e.id===T?"Aktiv":function(e){if(!e)return"Unbekannt";let t=new Date(e),r=new Date().getTime()-t.getTime(),n=Math.floor(r/6e4),i=Math.floor(r/36e5),s=Math.floor(r/864e5);return n<1?"Gerade eben":n<60?`vor ${n} Min.`:i<24?`vor ${i} Std.`:s<7?`vor ${s} Tagen`:t.toLocaleDateString("de-DE")}(e.created_at),syncing:!1}));return 0===e.length&&e.push({id:T,name:"Dieses Gert",lastActive:"Aktiv",syncing:!1}),(0,I.jsx)(uZ,{devices:e,onBack:()=>s(!1),onAddDevice:()=>{s(!1),F(!0)}})}return(0,I.jsxs)("div",{className:"h-full flex flex-col pb-4 overflow-y-auto",children:[(0,I.jsx)("header",{className:"px-5 pt-6 pb-4 bg-[#F2F2F7]",children:(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] text-[#1D1D1F]",children:"Einstellungen"})}),(0,I.jsxs)("div",{className:"flex-1 px-5",children:[(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Backup"}),(0,I.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,I.jsx)(uX,{label:"Automatisches Backup",description:"Neue Fotos automatisch sichern",enabled:v,onToggle:()=>{b(!v)}}),(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsx)(uX,{label:"Hintergrund-Backup",description:"Weiter sichern wenn App geschlossen",enabled:x,onToggle:()=>{w(!x)}}),(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsxs)("button",{onClick:()=>p(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsxs)("div",{className:"flex items-center gap-3",children:[(0,I.jsx)(eR,{name:"folder",size:24}),(0,I.jsxs)("div",{className:"text-left",children:[(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F] block",children:"Backup-Quelle"}),(0,I.jsx)("span",{className:"text-[13px] text-[#6E6E73]",children:"photos-app"===t.photoSource?"Fotos-App":"Dateien-App"})]})]}),(0,I.jsx)(eR,{name:"chevronRight",size:16})]})]})]}),(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Speicher"}),(0,I.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,I.jsxs)("div",{className:"p-4",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Aktueller Plan"}),(0,I.jsx)("span",{className:"text-[15px] font-semibold text-[#007AFF]",children:"free"===_?"Free":"Backup+"})]}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:"free"===_?"Fotos auf deinen Gerten":"200 GB Cloud-Backup"})]}),(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsx)("div",{className:"p-4",children:(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsx)("span",{className:"text-[15px] text-[#6E6E73]",children:"Verwendet"}),(0,I.jsxs)("span",{className:"text-[15px] text-[#1D1D1F]",children:[t.photosCount.toLocaleString()," Fotos (nur lokal)"]})]})}),(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsxs)("button",{onClick:()=>m(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsx)("span",{className:"text-[17px] text-[#007AFF]",children:"free"===_?"Upgrade zu Backup+":"Plan verwalten"}),(0,I.jsx)(eR,{name:"chevronRight",size:16})]})]})]}),(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Gerte"}),(0,I.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:(0,I.jsxs)("button",{onClick:()=>{console.log("Fetch Device List"),s(!0)},className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsxs)("div",{className:"flex items-center gap-3",children:[(0,I.jsx)(eR,{name:"smartphone",size:24}),(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Verbundene Gerte"})]}),(0,I.jsxs)("div",{className:"flex items-center gap-2",children:[(0,I.jsx)("span",{className:"text-[15px] text-[#6E6E73]",children:g.length||1}),(0,I.jsx)(eR,{name:"chevronRight",size:16})]})]})})]}),(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Sicherheit"}),(0,I.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,I.jsxs)("button",{onClick:()=>o(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Backup-Phrase anzeigen"}),(0,I.jsx)(eR,{name:"chevronRight",size:16})]}),(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsxs)("button",{onClick:()=>u(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsx)("span",{className:"text-[17px] text-[#FF3B30]",children:"Neuen Schlssel erstellen"}),(0,I.jsx)(eR,{name:"chevronRight",size:16})]})]}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-4 mt-2",children:"Teile diese Wrter niemals mit anderen."})]}),(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Setup"}),(0,I.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:(0,I.jsxs)("button",{onClick:()=>{console.log("TODO: Navigate to onboarding screen 1"),n()},className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsxs)("div",{className:"flex items-center gap-3",children:[(0,I.jsx)(eR,{name:"refresh",size:24}),(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Onboarding wiederholen"})]}),(0,I.jsx)(eR,{name:"chevronRight",size:16})]})}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-4 mt-2",children:"Schlssel, Quelle und Plan neu einrichten"})]})]}),a&&(0,I.jsx)(u2,{title:"Sicherheitshinweis",message:"Deine Backup-Phrase gibt vollen Zugriff auf deine verschlsselten Fotos. Nur an einem privaten Ort anzeigen.",confirmLabel:"Phrase anzeigen",confirmDestructive:!1,onConfirm:()=>{o(!1),h(!0)},onCancel:()=>o(!1)}),c&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Deine Backup-Phrase"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-4",children:"Notiere diese Wrter und bewahre sie sicher auf."}),O.length>0?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:O.map((e,t)=>(0,I.jsxs)("div",{className:"bg-[#F2F2F7] rounded-lg p-2 text-center",children:[(0,I.jsx)("span",{className:"text-[11px] text-[#8E8E93] block",children:t+1}),(0,I.jsx)("span",{className:"text-[14px] text-[#1D1D1F] font-mono",children:e})]},t))}),(0,I.jsxs)("div",{className:"bg-[#F2F2F7] rounded-xl p-3 mb-4",children:[(0,I.jsx)("p",{className:"text-[11px] text-[#6E6E73] mb-1",children:"Vollstndiger Schlssel:"}),(0,I.jsx)("p",{className:"text-[12px] font-mono text-[#1D1D1F] break-all",children:S})]})]}):(0,I.jsx)("div",{className:"bg-[#FF9500]/10 rounded-xl p-4 mb-4",children:(0,I.jsx)("p",{className:"text-[13px] text-[#FF9500] text-center",children:"Kein Schlssel gefunden. Bitte erstelle einen neuen Schlssel."})}),(0,I.jsx)("div",{className:"bg-[#FF3B30]/10 rounded-xl p-3 mb-4",children:(0,I.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center",children:" Teile diese Wrter niemals mit anderen"})}),(0,I.jsx)("button",{onClick:()=>h(!1),className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target",children:"Fertig"})]})}),l&&(0,I.jsx)(u2,{title:"Datenverlust-Warnung",message:"Das Erstellen eines neuen Schlssels lscht alle vorhandenen Backup-Daten permanent. Diese Aktion kann nicht rckgngig gemacht werden.",confirmLabel:"Neuen Schlssel erstellen",confirmDestructive:!0,onConfirm:N,onCancel:()=>u(!1)}),d&&(0,I.jsx)(u0,{currentSource:t.photoSource,onSelect:e=>{console.log("Update backup source preference:",e),r(t=>({...t,photoSource:e})),p(!1)},onClose:()=>p(!1)}),f&&(0,I.jsx)(u1,{currentPlan:_,onSelect:e=>{console.log("Update plan:",e),k(e),m(!1)},onClose:()=>m(!1)}),(0,I.jsx)(uH,{isOpen:R,onClose:()=>F(!1)})]})}function uX({label:e,description:t,enabled:r,onToggle:n}){return(0,I.jsxs)("button",{onClick:n,className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsxs)("div",{className:"text-left",children:[(0,I.jsx)("p",{className:"text-[17px] text-[#1D1D1F]",children:e}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] mt-0.5",children:t})]}),(0,I.jsx)("div",{className:`w-[51px] h-[31px] rounded-full p-[2px] shrink-0 ${r?"bg-[#30D158]":"bg-[#E5E5EA]"}`,children:(0,I.jsx)("div",{className:`w-[27px] h-[27px] rounded-full bg-white shadow-sm ${r?"ml-auto":""}`})})]})}function uZ({devices:e,onBack:t,onAddDevice:r}){return(0,I.jsxs)("div",{className:"h-full flex flex-col pb-4 overflow-y-auto",children:[(0,I.jsxs)("header",{className:"px-5 pt-6 pb-4 bg-[#F2F2F7]",children:[(0,I.jsx)("button",{onClick:t,className:"text-[#007AFF] text-[17px] ios-tap-target mb-2",children:" Zurck"}),(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] text-[#1D1D1F]",children:"Gerte"})]}),(0,I.jsxs)("div",{className:"flex-1 px-5",children:[(0,I.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:e.map((e,t)=>(0,I.jsxs)("div",{children:[t>0&&(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsxs)("div",{className:"flex items-center gap-3 p-4",children:[(0,I.jsx)(eR,{name:"smartphone",size:32}),(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsx)("p",{className:"text-[17px] text-[#1D1D1F]",children:e.name}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:e.lastActive})]}),e.syncing?(0,I.jsx)(aW,{className:"w-5 h-5 text-[#007AFF] animate-spin"}):"Aktiv"===e.lastActive?(0,I.jsxs)("div",{className:"flex items-center gap-1",children:[(0,I.jsx)(V,{className:"w-4 h-4 text-[#30D158]"}),(0,I.jsx)("span",{className:"text-[13px] text-[#30D158] font-medium",children:"Dieses Gert"})]}):null]})]},e.id))}),(0,I.jsxs)("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 mt-6 p-4 bg-white rounded-xl ios-tap-target",children:[(0,I.jsx)(uY,{className:"w-5 h-5 text-[#007AFF]"}),(0,I.jsx)("span",{className:"text-[17px] text-[#007AFF]",children:"Neues Gert verbinden"})]}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mt-3",children:"Scanne den QR-Code oder gib deine Backup-Phrase ein"})]})]})}function u0({currentSource:e,onSelect:t,onClose:r}){return(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Backup-Quelle"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-6",children:"Wo sind deine Fotos gespeichert?"}),(0,I.jsx)("div",{className:"space-y-3 mb-6",children:[{id:"photos-app",label:"Fotos-App",description:"Alle Fotos aus der iOS Foto-Bibliothek"},{id:"files-app",label:"Dateien-App",description:"Fotos aus einem bestimmten Ordner"}].map(r=>(0,I.jsx)("button",{onClick:()=>t(r.id),className:`w-full p-4 rounded-xl bg-[#F2F2F7] text-left ios-tap-target ${e===r.id?"ring-2 ring-[#007AFF]":""}`,children:(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"text-[17px] font-medium text-[#1D1D1F]",children:r.label}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] mt-0.5",children:r.description})]}),(0,I.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${e===r.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:e===r.id&&(0,I.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})},r.id))}),(0,I.jsx)("button",{onClick:r,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Abbrechen"})]})})}function u1({currentPlan:e,onSelect:t,onClose:r}){return(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10 max-h-[80vh] overflow-y-auto",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Speicherplan"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-6",children:"Du kannst jederzeit wechseln"}),(0,I.jsx)("div",{className:"space-y-3 mb-6",children:[{id:"free",label:"FREE",subtitle:"Auf deinen Gerten",price:"0/Monat",features:["Unbegrenzte Fotos","Zero-Knowledge Verschlsselung","Multi-Device Sync"]},{id:"backup-plus",label:"BACKUP+",subtitle:"Dauerhaft im Netz",price:"2,99/Monat",features:["Alles von Free","200 GB Cloud-Backup","Schnellere Synchronisierung"]}].map(r=>(0,I.jsx)("button",{onClick:()=>t(r.id),className:`w-full p-4 rounded-xl bg-[#F2F2F7] text-left ios-tap-target ${e===r.id?"ring-2 ring-[#007AFF]":""}`,children:(0,I.jsxs)("div",{className:"flex items-start justify-between",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsx)("p",{className:"text-[13px] font-bold text-[#007AFF] tracking-wide",children:r.label}),(0,I.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] mt-0.5",children:r.subtitle}),(0,I.jsx)("ul",{className:"mt-2 space-y-1",children:r.features.map(e=>(0,I.jsxs)("li",{className:"text-[13px] text-[#6E6E73] flex items-center gap-2",children:[(0,I.jsx)("span",{className:"text-[#30D158]",children:""})," ",e]},e))}),(0,I.jsx)("p",{className:"text-[15px] font-semibold text-[#1D1D1F] mt-3",children:r.price})]}),(0,I.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${e===r.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:e===r.id&&(0,I.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})},r.id))}),(0,I.jsx)("button",{onClick:r,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Abbrechen"})]})})}function u2({title:e,message:t,confirmLabel:r,confirmDestructive:n,onConfirm:i,onCancel:s}){return(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-8",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[270px] rounded-2xl overflow-hidden",children:[(0,I.jsxs)("div",{className:"p-4 text-center",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[17px] text-[#1D1D1F] mb-1",children:e}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] leading-relaxed",children:t})]}),(0,I.jsxs)("div",{className:"border-t border-[#E5E5EA]",children:[(0,I.jsx)("button",{onClick:s,className:"w-full py-3 text-[17px] text-[#007AFF] border-b border-[#E5E5EA] ios-tap-target",children:"Abbrechen"}),(0,I.jsx)("button",{onClick:i,className:`w-full py-3 text-[17px] font-semibold ios-tap-target ${n?"text-[#FF3B30]":"text-[#007AFF]"}`,children:r})]})]})})}let u3=z("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),u5=z("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]),u4=z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),u6=z("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);function u7({photo:e,secretKey:t,showCloudBadge:r=!0}){let[n,i]=(0,B.useState)(null),[s,a]=(0,B.useState)(!1),[o,l]=(0,B.useState)(!1),[u,c]=(0,B.useState)(!1),[h,d]=(0,B.useState)(!1),p=(0,B.useRef)(null);return((0,B.useEffect)(()=>{if(t&&!n)return(async()=>{l(!0);try{let r=e.encryptedBlob;if(!r&&e.cid&&uj(e.cid)){c(!0),d(!0),console.log("Fetching from IPFS for thumbnail:",e.cid);try{r=await uk(e.cid),console.log("Fetched from IPFS:",{cid:e.cid,size:r.size})}catch(e){console.error("Failed to fetch from IPFS:",e),a(!0);return}finally{c(!1)}}if(!r){console.log("No blob available for:",e.cid),d(!0);return}let n=await (0,eF.decryptFile)(r,e.nonce,t,e.mimeType);if(n){let e=URL.createObjectURL(n);p.current=e,i(e)}else a(!0)}catch(t){console.error("Failed to decrypt photo:",e.cid,t),a(!0)}finally{l(!1)}})(),()=>{p.current&&(URL.revokeObjectURL(p.current),p.current=null)}},[e,t,n]),s)?(0,I.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center bg-red-50 text-red-500 p-2 text-center",children:[(0,I.jsx)(eR,{name:"lock",size:24,className:"mb-1 opacity-50"}),(0,I.jsx)("span",{className:"text-[10px]",children:"Fehler"})]}):u?(0,I.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center bg-blue-50",children:[(0,I.jsx)(u6,{className:"w-5 h-5 text-blue-400 mb-1 animate-pulse"}),(0,I.jsx)(aW,{className:"w-4 h-4 animate-spin text-blue-400"}),(0,I.jsx)("span",{className:"text-[9px] text-blue-500 mt-1",children:"Laden..."})]}):o||!n?!h||n||o?(0,I.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,I.jsx)(aW,{className:"w-6 h-6 animate-spin text-gray-400"})}):(0,I.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-100 relative",children:[(0,I.jsx)(u6,{className:"w-6 h-6 text-gray-400"}),(0,I.jsx)("span",{className:"text-[9px] text-gray-500 mt-1",children:"In der Cloud"})]}):(0,I.jsxs)("div",{className:"relative w-full h-full",children:[(0,I.jsx)("img",{src:n,alt:"",className:"w-full h-full object-cover animate-in fade-in duration-500",loading:"lazy"}),r&&h&&(0,I.jsx)("div",{className:"absolute bottom-1 right-1 bg-black/50 rounded-full p-1",children:(0,I.jsx)(u6,{className:"w-3 h-3 text-white"})})]})}function u8({photosCount:t}){var r;let n,i,s,a,o,[l,u]=(0,B.useState)(""),[c,h]=(0,B.useState)(!1),[d,p]=(0,B.useState)(!1),[f,m]=(0,B.useState)(null),[g,y]=(0,B.useState)(!1),[v,b]=(0,B.useState)(new Set),[x,w]=(0,B.useState)(null),[_,k]=(0,B.useState)(null),[j,S]=(0,B.useState)(null),[E,P]=(0,B.useState)(!1),[T,C]=(0,B.useState)(!1),A=(0,B.useRef)(null),{secretKey:O}=aN(),{photos:N,uploadPhoto:R,isUploading:F}=uE(O),{remoteCIDs:D,remoteCIDsFromOtherDevices:M,isConnected:$}=function(t={}){let{onNewPhoto:r,onPhotoDeleted:n,enabled:i=!0,secretKey:s}=t,[a,o]=(0,B.useState)([]),[l,u]=(0,B.useState)(!1),[c,h]=(0,B.useState)(null),[d,p]=(0,B.useState)(null),f=(0,uS.getDeviceId)();(0,B.useEffect)(()=>{s?(0,eF.getUserKeyHash)(s).then(p):p(null)},[s]),(0,B.useEffect)(()=>{d&&"server"!==f&&(async()=>{try{let{getDeviceName:t,getDeviceType:r}=await e.A(66244),n=t(),i=r();await ug(f,n,i,d),console.log("Device registered with hash:",d)}catch(e){console.error("Failed to register device:",e)}})()},[d,f]);let m=(0,B.useCallback)(async()=>{try{let e=(await uf(f,d||void 0)).map(e=>({cid:e.cid,device_id:e.device_id,uploaded_at:e.uploaded_at,file_size_bytes:e.file_size_bytes,nonce:e.nonce||null,mime_type:e.mime_type||null,isFromOtherDevice:e.device_id!==f}));return o(e),h(null),e}catch(e){return console.error("Failed to load remote CIDs:",e),h(e),[]}},[f,d]);(0,B.useEffect)(()=>{if(!i)return;let e=null;return(async()=>{await m(),e=ud.channel("photos_metadata_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"photos_metadata"},e=>{let t=e.new;if(d&&t.user_key_hash!==d)return;let n={cid:t.cid,device_id:t.device_id,uploaded_at:t.uploaded_at,file_size_bytes:t.file_size_bytes,nonce:t.nonce,mime_type:t.mime_type,isFromOtherDevice:t.device_id!==f};n.isFromOtherDevice&&(console.log("New photo metadata received from another device:",n.cid),r?.(n)),o(e=>e.some(e=>e.cid===n.cid)?e:[n,...e])}).on("postgres_changes",{event:"DELETE",schema:"public",table:"photos_metadata"},e=>{let t=e.old;n?.(t.cid),o(e=>e.filter(e=>e.cid!==t.cid))}).subscribe(e=>{console.log("Realtime subscription status:",e),u("SUBSCRIBED"===e)})})(),()=>{e&&ud.removeChannel(e)}},[i,f,d,r,n,m]);let g=(0,B.useCallback)(async()=>m(),[m]),y=a.filter(e=>e.isFromOtherDevice);return{remoteCIDs:a,remoteCIDsFromOtherDevices:y,isConnected:l,lastSyncError:c,refresh:g,deviceId:f,userKeyHash:d}}({onNewPhoto:(0,B.useCallback)(e=>{console.log("New photo from device:",e.device_id),k(`Neues Foto von anderem Ger\xe4t empfangen`),setTimeout(()=>k(null),3e3)},[]),enabled:!0,secretKey:O}),L=(n=N.map(e=>({id:e.id?.toString()||e.cid,cid:e.cid,placeholderUrl:"",category:"photo",date:e.uploadedAt.toISOString().split("T")[0],metadata:e,isLocal:!0,isCloud:uj(e.cid)})),i=new Set(N.map(e=>e.cid)),[...n,...D.filter(e=>!i.has(e.cid)).map(e=>({id:e.cid,cid:e.cid,placeholderUrl:"",category:"cloud",date:e.uploaded_at?new Date(e.uploaded_at).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],metadata:{cid:e.cid,nonce:e.nonce||"",fileName:`cloud_${e.cid}`,mimeType:e.mime_type||"image/jpeg",fileSize:e.file_size_bytes||0,uploadedAt:e.uploaded_at?new Date(e.uploaded_at):new Date},isLocal:!1,isCloud:!0}))]),U=L.length>0?L:(r=Math.min(t,50),s=["nature","architecture","travel","food","animals","city","landscape","portrait","ocean","forest"],a=new Date,Array.from({length:r},(e,t)=>{let r=new Date(a);return r.setDate(r.getDate()-Math.floor(t/3)),{id:`photo-${t}`,cid:`Qm${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}`,placeholderUrl:`https://picsum.photos/seed/${t+100}/400/400`,category:s[t%s.length],date:r.toISOString().split("T")[0],metadata:void 0}})),z=(o={},U.filter(e=>(!f||e.category===f)&&(!l||!!e.category.includes(l.toLowerCase()))).forEach(e=>{o[e.date]||(o[e.date]=[]),o[e.date].push(e)}),Object.entries(o).map(([e,t])=>{var r;let n,i,s;return{date:e,photos:t,label:(n=new Date(r=e),((s=new Date(i=new Date)).setDate(s.getDate()-1),r===i.toISOString().split("T")[0])?"Heute":r===s.toISOString().split("T")[0]?"Gestern":n.toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long"}))}})),K=async e=>{if(O&&e.metadata){P(!0),S(null);try{let t=e.metadata.encryptedBlob;if(!t&&e.cid&&uj(e.cid)&&(console.log("Loading full-res from IPFS:",e.cid),t=await uk(e.cid)),!t)return void console.error("No blob available for fullscreen");let r=await (0,eF.decryptFile)(t,e.metadata.nonce,O,e.metadata.mimeType);if(r){let e=URL.createObjectURL(r);S(e)}}catch(e){console.error("Failed to load fullscreen photo:",e)}finally{P(!1)}}},q=async e=>{if(O&&e.metadata){C(!0);try{let t=e.metadata.encryptedBlob;if(!t&&e.cid&&uj(e.cid)&&(t=await uk(e.cid)),!t)return;let r=await (0,eF.decryptFile)(t,e.metadata.nonce,O,e.metadata.mimeType);if(r){let t=URL.createObjectURL(r),n=document.createElement("a");n.href=t,n.download=e.metadata.fileName||`photo_${e.cid.slice(0,8)}.jpg`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),k("Foto heruntergeladen!"),setTimeout(()=>k(null),2e3)}}catch(e){console.error("Failed to download photo:",e)}finally{C(!1)}}},W=()=>{A.current&&(clearTimeout(A.current),A.current=null)};return(0,I.jsxs)("div",{className:"flex flex-col h-full bg-[#F2F2F7]",children:[(0,I.jsx)("header",{className:"h-[60px] bg-white border-b border-[#E5E5EA] px-4 flex items-center justify-between shrink-0",children:c?(0,I.jsxs)("div",{className:"flex-1 flex items-center gap-3",children:[(0,I.jsxs)("div",{className:"flex-1 bg-[#E5E5EA] rounded-lg px-3 py-2 flex items-center gap-2",children:[(0,I.jsx)(eR,{name:"search",size:16}),(0,I.jsx)("input",{type:"text",placeholder:"Suchen...",value:l,onChange:e=>u(e.target.value),className:"flex-1 bg-transparent text-[15px] text-[#1D1D1F] outline-none",autoFocus:!0})]}),(0,I.jsx)("button",{onClick:()=>{h(!1),u("")},className:"text-[17px] text-[#007AFF] ios-tap-target",children:"Abbrechen"})]}):g?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("button",{onClick:()=>{y(!1),b(new Set)},className:"text-[17px] text-[#007AFF] ios-tap-target",children:"Abbrechen"}),(0,I.jsxs)("span",{className:"sf-pro-display text-[17px] text-[#1D1D1F]",children:[v.size," ausgewhlt"]}),(0,I.jsx)("button",{onClick:()=>{console.log("TODO: Delete selected photos",Array.from(v))},className:"text-[17px] text-[#FF3B30] ios-tap-target",children:"Lschen"})]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"flex items-center gap-2",children:[(0,I.jsx)(eR,{name:"lock",size:20}),(0,I.jsx)("h1",{className:"sf-pro-display text-[20px] text-[#1D1D1F]",children:"Galerie"}),$?(0,I.jsx)(u6,{className:"w-4 h-4 text-[#007AFF]"}):(0,I.jsx)(u5,{className:"w-4 h-4 text-[#8E8E93]"})]}),(0,I.jsxs)("div",{className:"flex items-center gap-4",children:[(0,I.jsxs)("label",{className:"ios-tap-target cursor-pointer",children:[(0,I.jsx)("div",{className:F?"animate-pulse opacity-50":"",children:(0,I.jsx)(eR,{name:"upload",size:24})}),(0,I.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{Array.from(e.target.files||[]).forEach(e=>R(e))},className:"hidden",disabled:F})]}),(0,I.jsx)("button",{onClick:()=>h(!0),className:"ios-tap-target",children:(0,I.jsx)(eR,{name:"search",size:24})}),(0,I.jsx)("button",{onClick:()=>p(!d),className:"ios-tap-target",children:(0,I.jsx)(u3,{className:`w-6 h-6 ${f?"text-[#30D158]":"text-[#007AFF]"}`})})]})]})}),d&&(0,I.jsx)("div",{className:"bg-white border-b border-[#E5E5EA] px-4 py-3 shrink-0",children:(0,I.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-1 -mx-1 px-1",children:[(0,I.jsx)("button",{onClick:()=>m(null),className:`px-4 py-1.5 rounded-full text-[15px] whitespace-nowrap shrink-0 ${null===f?"bg-[#007AFF] text-white":"bg-[#E5E5EA] text-[#1D1D1F]"}`,children:"Alle"}),[{id:"nature",label:"Natur"},{id:"architecture",label:"Architektur"},{id:"travel",label:"Reisen"},{id:"food",label:"Essen"},{id:"animals",label:"Tiere"},{id:"city",label:"Stadt"},{id:"landscape",label:"Landschaft"}].map(e=>(0,I.jsx)("button",{onClick:()=>m(e.id),className:`px-4 py-1.5 rounded-full text-[15px] whitespace-nowrap shrink-0 ${f===e.id?"bg-[#007AFF] text-white":"bg-[#E5E5EA] text-[#1D1D1F]"}`,children:e.label},e.id))]})}),(0,I.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[z.map(e=>(0,I.jsxs)("div",{className:"mb-2",children:[(0,I.jsx)("div",{className:"sticky top-0 bg-[#F2F2F7]/95 backdrop-blur-sm px-3 py-2 z-10",children:(0,I.jsx)("p",{className:"text-[13px] font-semibold text-[#6E6E73]",children:e.label})}),(0,I.jsx)("div",{className:"grid grid-cols-3 gap-[2px] px-[2px]",children:e.photos.map(e=>{let t=void 0!==e.metadata;return(0,I.jsxs)("button",{onClick:()=>{var t;return t=e.id,void(g?b(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r}):(w(t),e.metadata&&K(e)))},onTouchStart:()=>{var t;return t=e.id,void(A.current=setTimeout(()=>{y(!0),b(new Set([t]))},500))},onTouchEnd:W,onTouchCancel:W,onContextMenu:t=>{t.preventDefault(),y(!0),b(new Set([e.id]))},className:"relative aspect-square overflow-hidden bg-[#E5E5EA]",children:[t?(0,I.jsx)(u7,{photo:e.metadata,secretKey:O,showCloudBadge:!0}):e.placeholderUrl?(0,I.jsx)("img",{src:e.placeholderUrl,alt:"",className:"w-full h-full object-cover",loading:"lazy"}):null,g&&(0,I.jsx)("div",{className:"absolute inset-0 bg-black/20",children:(0,I.jsx)("div",{className:`absolute top-2 right-2 w-6 h-6 rounded-full border-2 flex items-center justify-center ${v.has(e.id)?"bg-[#007AFF] border-[#007AFF]":"border-white bg-black/30"}`,children:v.has(e.id)&&(0,I.jsx)(V,{className:"w-4 h-4 text-white"})})})]},e.id)})})]},e.date)),(0,I.jsxs)("div",{className:"text-center py-6 px-4",children:[(0,I.jsx)("p",{className:"text-[13px] text-[#8E8E93]",children:"Lange drcken zum Auswhlen  Tippen zum ffnen"}),(0,I.jsxs)("p",{className:"text-[11px] text-[#C7C7CC] mt-1",children:[N.length," Fotos lokal  ",D.length," in der Cloud"]}),M.length>0&&(0,I.jsxs)("div",{className:"text-[11px] text-[#007AFF] mt-1 flex items-center justify-center gap-1",children:[(0,I.jsx)(eR,{name:"smartphone",size:12}),M.length," von anderen Gerten"]})]})]}),_&&(0,I.jsxs)("div",{className:"fixed top-[70px] left-1/2 -translate-x-1/2 bg-[#1D1D1F] text-white px-4 py-2 rounded-full text-[13px] flex items-center gap-2 z-50 animate-pulse",children:[(0,I.jsx)(u6,{className:"w-4 h-4"}),_]}),x&&(0,I.jsxs)("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[(0,I.jsxs)("header",{className:"h-[60px] flex items-center justify-between px-4 bg-black/80",children:[(0,I.jsx)("button",{onClick:()=>{w(null),j&&(URL.revokeObjectURL(j),S(null))},className:"ios-tap-target",children:(0,I.jsx)(uV,{className:"w-6 h-6 text-white"})}),(0,I.jsxs)("span",{className:"text-[17px] text-white",children:["Foto ",U.findIndex(e=>e.id===x)+1," von"," ",U.length]}),(0,I.jsx)("div",{className:"w-10"})]}),(0,I.jsx)("div",{className:"flex-1 flex items-center justify-center p-4",children:E?(0,I.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,I.jsx)(aW,{className:"w-12 h-12 animate-spin text-white/60"}),(0,I.jsx)("p",{className:"text-white/60 text-center",children:"Lade von IPFS..."})]}):j?(0,I.jsx)("img",{src:j,alt:"",className:"max-w-full max-h-full object-contain rounded-lg"}):(0,I.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,I.jsx)(eR,{name:"lock",size:64}),(0,I.jsx)("p",{className:"text-white/80 text-center",children:"Verschlsseltes Foto"})]})}),(0,I.jsxs)("footer",{className:"h-[80px] flex items-center justify-center gap-6 bg-black/80 px-4",children:[(0,I.jsxs)("button",{onClick:()=>{let e=U.find(e=>e.id===x);e&&q(e)},disabled:T,className:"flex flex-col items-center gap-1 ios-tap-target",children:[T?(0,I.jsx)(aW,{className:"w-6 h-6 animate-spin text-white"}):(0,I.jsx)(u4,{className:"w-6 h-6 text-white"}),(0,I.jsx)("span",{className:"text-[11px] text-white/80",children:"Herunterladen"})]}),(0,I.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,I.jsx)(eR,{name:"lock",size:20}),(0,I.jsx)("span",{className:"text-[11px] text-white/60",children:"Verschlsselt"})]})]})]})]})}let u9=z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ce={isOnboarded:!1,backupActive:!1,selectedPlan:"free",autoBackupEnabled:!0,backgroundBackupEnabled:!1,photosCount:0,lastBackup:"Noch nie",permanence:0,encryptionKey:"",backupPhrase:[],devices:[],photoSource:"photos-app"};function ct(){let[e,t]=(0,B.useState)(ce),[r,n]=(0,B.useState)("onboarding"),[i,s]=(0,B.useState)(1),[a,o]=(0,B.useState)(!0);return((0,B.useEffect)(()=>{let e=setTimeout(()=>{"true"===localStorage.getItem("photovault_onboarded")&&(t(e=>({...e,isOnboarded:!0})),n("gallery")),o(!1)},2e3);return()=>clearTimeout(e)},[]),a)?(0,I.jsx)(aO,{}):"onboarding"===r?(0,I.jsx)("div",{className:"min-h-screen ios-bg-gray",children:(0,I.jsx)("div",{className:"max-w-[428px] mx-auto min-h-screen bg-[#F2F2F7]",children:(0,I.jsx)(aB,{state:e,setState:t,step:i,setStep:s,onComplete:()=>{localStorage.setItem("photovault_onboarded","true"),t(e=>({...e,isOnboarded:!0})),n("gallery"),console.log("Onboarding completed with state:",e)}})})}):(0,I.jsx)("div",{className:"min-h-screen ios-bg-gray",children:(0,I.jsxs)("div",{className:"max-w-[428px] mx-auto min-h-screen bg-[#F2F2F7] flex flex-col",children:[(0,I.jsxs)("div",{className:"flex-1 overflow-hidden pb-[80px]",children:["gallery"===r&&(0,I.jsx)(u8,{photosCount:e.photosCount}),"dashboard"===r&&(0,I.jsx)(uG,{state:e,setState:t}),"settings"===r&&(0,I.jsx)(uJ,{state:e,setState:t,onRestartOnboarding:()=>{console.log("TODO: Navigate to onboarding screen 1"),localStorage.removeItem("photovault_onboarded"),t(e=>({...e,isOnboarded:!1})),s(1),n("onboarding")}})]}),(0,I.jsx)(cr,{currentScreen:r,onNavigate:e=>{n(e)}})]})})}function cr({currentScreen:e,onNavigate:t}){return(0,I.jsxs)("nav",{className:"fixed bottom-0 left-0 right-0 h-[80px] bg-white border-t border-[#E5E5EA] flex items-start justify-around pt-2 pb-6 max-w-[428px] mx-auto",children:[(0,I.jsxs)("button",{onClick:()=>t("gallery"),className:"flex flex-col items-center gap-1 ios-tap-target px-4",children:[(0,I.jsx)(eR,{name:"image",size:24}),(0,I.jsx)("span",{className:`text-[10px] ${"gallery"===e?"text-[#007AFF]":"text-[#6E6E73]"}`,children:"Galerie"})]}),(0,I.jsxs)("button",{onClick:()=>t("dashboard"),className:"flex flex-col items-center gap-1 ios-tap-target px-4",children:[(0,I.jsx)(eR,{name:"shield",size:24}),(0,I.jsx)("span",{className:`text-[10px] ${"dashboard"===e?"text-[#007AFF]":"text-[#6E6E73]"}`,children:"Backup"})]}),(0,I.jsxs)("button",{onClick:()=>t("settings"),className:"flex flex-col items-center gap-1 ios-tap-target px-4",children:[(0,I.jsx)(u9,{className:`w-6 h-6 ${"settings"===e?"text-[#007AFF]":"text-[#6E6E73]"}`}),(0,I.jsx)("span",{className:`text-[10px] ${"settings"===e?"text-[#007AFF]":"text-[#6E6E73]"}`,children:"Einstellungen"})]})]})}e.s(["PhotoVaultApp",()=>ct],71058)}]);