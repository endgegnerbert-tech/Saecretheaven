(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67423,(e,t,r)=>{"use strict";function n({widthInt:e,heightInt:t,blurWidth:r,blurHeight:n,blurDataURL:i,objectFit:s}){let o=r?40*r:e,a=n?40*n:t,l=o&&a?`viewBox='0 0 ${o} ${a}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${l}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${l?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${i}'/%3E%3C/svg%3E`}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getImageBlurSvg",{enumerable:!0,get:function(){return n}})},87690,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={VALID_LOADERS:function(){return s},imageConfigDefault:function(){return o}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=["default","imgix","cloudinary","akamai","custom"],o={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},8927,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getImgProps",{enumerable:!0,get:function(){return u}}),e.r(33525);let n=e.r(43369),i=e.r(67423),s=e.r(87690),o=["-moz-initial","fill","none","scale-down",void 0];function a(e){return void 0!==e.default}function l(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function u({src:e,sizes:t,unoptimized:r=!1,priority:u=!1,preload:c=!1,loading:h,className:d,quality:f,width:p,height:m,fill:y=!1,style:g,overrideSrc:v,onLoad:b,onLoadingComplete:x,placeholder:w="empty",blurDataURL:_,fetchPriority:k,decoding:E="async",layout:S,objectFit:j,objectPosition:A,lazyBoundary:T,lazyRoot:P,...C},O){var R;let N,M,D,{imgConf:F,showAltText:I,blurComplete:B,defaultLoader:L}=O,U=F||s.imageConfigDefault;if("allSizes"in U)N=U;else{let e=[...U.deviceSizes,...U.imageSizes].sort((e,t)=>e-t),t=U.deviceSizes.sort((e,t)=>e-t),r=U.qualities?.sort((e,t)=>e-t);N={...U,allSizes:e,deviceSizes:t,qualities:r}}if(void 0===L)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let $=C.loader||L;delete C.loader,delete C.srcSet;let z="__next_img_default"in $;if(z){if("custom"===N.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=$;$=t=>{let{config:r,...n}=t;return e(n)}}if(S){"fill"===S&&(y=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[S];e&&(g={...g,...e});let r={responsive:"100vw",fill:"100vw"}[S];r&&!t&&(t=r)}let V="",K=l(p),q=l(m);if((R=e)&&"object"==typeof R&&(a(R)||void 0!==R.src)){let t=a(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(M=t.blurWidth,D=t.blurHeight,_=_||t.blurDataURL,V=t.src,!y)if(K||q){if(K&&!q){let e=K/t.width;q=Math.round(t.height*e)}else if(!K&&q){let e=q/t.height;K=Math.round(t.width*e)}}else K=t.width,q=t.height}let W=!u&&!c&&("lazy"===h||void 0===h);(!(e="string"==typeof e?e:V)||e.startsWith("data:")||e.startsWith("blob:"))&&(r=!0,W=!1),N.unoptimized&&(r=!0),z&&!N.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(r=!0);let G=l(f),H=Object.assign(y?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:j,objectPosition:A}:{},I?{}:{color:"transparent"},g),Y=B||"empty"===w?null:"blur"===w?`url("data:image/svg+xml;charset=utf-8,${(0,i.getImageBlurSvg)({widthInt:K,heightInt:q,blurWidth:M,blurHeight:D,blurDataURL:_||"",objectFit:H.objectFit})}")`:`url("${w}")`,Q=o.includes(H.objectFit)?"fill"===H.objectFit?"100% 100%":"cover":H.objectFit,J=Y?{backgroundSize:Q,backgroundPosition:H.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:Y}:{},X=function({config:e,src:t,unoptimized:r,width:i,quality:s,sizes:o,loader:a}){if(r){let e=(0,n.getDeploymentId)();if(t.startsWith("/")&&!t.startsWith("//")&&e){let r=t.includes("?")?"&":"?";t=`${t}${r}dpl=${e}`}return{src:t,srcSet:void 0,sizes:void 0}}let{widths:l,kind:u}=function({deviceSizes:e,allSizes:t},r,n){if(n){let r=/(^|\s)(1?\d?\d)vw/g,i=[];for(let e;e=r.exec(n);)i.push(parseInt(e[2]));if(i.length){let r=.01*Math.min(...i);return{widths:t.filter(t=>t>=e[0]*r),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof r?{widths:e,kind:"w"}:{widths:[...new Set([r,2*r].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,i,o),c=l.length-1;return{sizes:o||"w"!==u?o:"100vw",srcSet:l.map((r,n)=>`${a({config:e,src:t,quality:s,width:r})} ${"w"===u?r:n+1}${u}`).join(", "),src:a({config:e,src:t,quality:s,width:l[c]})}}({config:N,src:e,unoptimized:r,width:K,quality:G,sizes:t,loader:$}),Z=W?"lazy":h;return{props:{...C,loading:Z,fetchPriority:k,width:K,height:q,decoding:E,className:d,style:{...H,...J},sizes:X.sizes,srcSet:X.srcSet,src:v||X.src},meta:{unoptimized:r,preload:c||u,placeholder:w,fill:y}}}},98879,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let n=e.r(71645),i="u"<typeof window,s=i?()=>{}:n.useLayoutEffect,o=i?()=>{}:n.useEffect;function a(e){let{headManager:t,reduceComponentsToState:r}=e;function a(){if(t&&t.mountedInstances){let e=n.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(r(e))}}return i&&(t?.mountedInstances?.add(e.children),a()),s(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),s(()=>(t&&(t._pendingUpdate=a),()=>{t&&(t._pendingUpdate=a)})),o(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},25633,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return m},defaultHead:function(){return h}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(55682),o=e.r(90809),a=e.r(43476),l=o._(e.r(71645)),u=s._(e.r(98879)),c=e.r(42732);function h(){return[(0,a.jsx)("meta",{charSet:"utf-8"},"charset"),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function d(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(33525);let f=["name","httpEquiv","charSet","itemProp"];function p(e){let t,r,n,i;return e.reduce(d,[]).reverse().concat(h().reverse()).filter((t=new Set,r=new Set,n=new Set,i={},e=>{let s=!0,o=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){o=!0;let r=e.key.slice(e.key.indexOf("$")+1);t.has(r)?s=!1:t.add(r)}switch(e.type){case"title":case"base":r.has(e.type)?s=!1:r.add(e.type);break;case"meta":for(let t=0,r=f.length;t<r;t++){let r=f[t];if(e.props.hasOwnProperty(r))if("charSet"===r)n.has(r)?s=!1:n.add(r);else{let t=e.props[r],n=i[r]||new Set;("name"!==r||!o)&&n.has(t)?s=!1:(n.add(t),i[r]=n)}}}return s})).reverse().map((e,t)=>{let r=e.key||t;return l.default.cloneElement(e,{key:r})})}let m=function({children:e}){let t=(0,l.useContext)(c.HeadManagerContext);return(0,a.jsx)(u.default,{reduceComponentsToState:p,headManager:t,children:e})};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18556,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ImageConfigContext",{enumerable:!0,get:function(){return s}});let n=e.r(55682)._(e.r(71645)),i=e.r(87690),s=n.default.createContext(i.imageConfigDefault)},65856,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RouterContext",{enumerable:!0,get:function(){return n}});let n=e.r(55682)._(e.r(71645)).default.createContext(null)},70965,(e,t,r)=>{"use strict";function n(e,t){let r=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e,0):r}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"findClosestQuality",{enumerable:!0,get:function(){return n}})},1948,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return o}});let n=e.r(70965),i=e.r(43369);function s({config:e,src:t,width:r,quality:s}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let o=(0,n.findClosestQuality)(s,e),a=(0,i.getDeploymentId)();return`${e.path}?url=${encodeURIComponent(t)}&w=${r}&q=${o}${t.startsWith("/")&&a?`&dpl=${a}`:""}`}s.__next_img_default=!0;let o=s},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return i}});let n=e.r(71645);function i(e,t){let r=(0,n.useRef)(null),i=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=i.current;t&&(i.current=null,t())}else e&&(r.current=s(e,n)),t&&(i.current=s(t,n))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},85437,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return x}});let n=e.r(55682),i=e.r(90809),s=e.r(43476),o=i._(e.r(71645)),a=n._(e.r(74080)),l=n._(e.r(25633)),u=e.r(8927),c=e.r(87690),h=e.r(18556);e.r(33525);let d=e.r(65856),f=n._(e.r(1948)),p=e.r(18581),m={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function y(e,t,r,n,i,s,o){let a=e?.src;e&&e["data-loaded-src"]!==a&&(e["data-loaded-src"]=a,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&i(!0),r?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,i=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>i,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{i=!0,t.stopPropagation()}})}n?.current&&n.current(e)}}))}function g(e){return o.use?{fetchPriority:e}:{fetchpriority:e}}"u"<typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let v=(0,o.forwardRef)(({src:e,srcSet:t,sizes:r,height:n,width:i,decoding:a,className:l,style:u,fetchPriority:c,placeholder:h,loading:d,unoptimized:f,fill:m,onLoadRef:v,onLoadingCompleteRef:b,setBlurComplete:x,setShowAltText:w,sizesInput:_,onLoad:k,onError:E,...S},j)=>{let A=(0,o.useCallback)(e=>{e&&(E&&(e.src=e.src),e.complete&&y(e,h,v,b,x,f,_))},[e,h,v,b,x,E,f,_]),T=(0,p.useMergedRef)(j,A);return(0,s.jsx)("img",{...S,...g(c),loading:d,width:i,height:n,decoding:a,"data-nimg":m?"fill":"1",className:l,style:u,sizes:r,srcSet:t,src:e,ref:T,onLoad:e=>{y(e.currentTarget,h,v,b,x,f,_)},onError:e=>{w(!0),"empty"!==h&&x(!0),E&&E(e)}})});function b({isAppRouter:e,imgAttributes:t}){let r={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...g(t.fetchPriority)};return e&&a.default.preload?(a.default.preload(t.src,r),null):(0,s.jsx)(l.default,{children:(0,s.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...r},"__nimg-"+t.src+t.srcSet+t.sizes)})}let x=(0,o.forwardRef)((e,t)=>{let r=(0,o.useContext)(d.RouterContext),n=(0,o.useContext)(h.ImageConfigContext),i=(0,o.useMemo)(()=>{let e=m||n||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),r=e.deviceSizes.sort((e,t)=>e-t),i=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:r,qualities:i,localPatterns:"u"<typeof window?n?.localPatterns:e.localPatterns}},[n]),{onLoad:a,onLoadingComplete:l}=e,p=(0,o.useRef)(a);(0,o.useEffect)(()=>{p.current=a},[a]);let y=(0,o.useRef)(l);(0,o.useEffect)(()=>{y.current=l},[l]);let[g,x]=(0,o.useState)(!1),[w,_]=(0,o.useState)(!1),{props:k,meta:E}=(0,u.getImgProps)(e,{defaultLoader:f.default,imgConf:i,blurComplete:g,showAltText:w});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{...k,unoptimized:E.unoptimized,placeholder:E.placeholder,fill:E.fill,onLoadRef:p,onLoadingCompleteRef:y,setBlurComplete:x,setShowAltText:_,sizesInput:e.sizes,ref:t}),E.preload?(0,s.jsx)(b,{isAppRouter:!r,imgAttributes:k}):null]})});("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},94909,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return c},getImageProps:function(){return u}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(55682),o=e.r(8927),a=e.r(85437),l=s._(e.r(1948));function u(e){let{props:t}=(0,o.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let c=a.Image},57688,(e,t,r)=>{t.exports=e.r(94909)},96510,(e,t,r)=>{!function(e){"use strict";var t,r=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=r(),a=r([1]),l=r([56129,1]),u=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function m(e,t,r,n,i){var s,o=0;for(s=0;s<i;s++)o|=e[t+s]^r[n+s];return(1&o-1>>>8)-1}function y(e,t,r,n){return m(e,t,r,n,16)}function g(e,t,r,n){return m(e,t,r,n,32)}function v(e,t,r,n){!function(e,t,r,n){for(var i,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,l=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,c=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,x=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=s,_=o,k=a,E=l,S=u,j=c,A=h,T=d,P=f,C=p,O=m,R=y,N=g,M=v,D=b,F=x,I=0;I<20;I+=2)S^=(i=w+N|0)<<7|i>>>25,P^=(i=S+w|0)<<9|i>>>23,N^=(i=P+S|0)<<13|i>>>19,w^=(i=N+P|0)<<18|i>>>14,C^=(i=j+_|0)<<7|i>>>25,M^=(i=C+j|0)<<9|i>>>23,_^=(i=M+C|0)<<13|i>>>19,j^=(i=_+M|0)<<18|i>>>14,D^=(i=O+A|0)<<7|i>>>25,k^=(i=D+O|0)<<9|i>>>23,A^=(i=k+D|0)<<13|i>>>19,O^=(i=A+k|0)<<18|i>>>14,E^=(i=F+R|0)<<7|i>>>25,T^=(i=E+F|0)<<9|i>>>23,R^=(i=T+E|0)<<13|i>>>19,F^=(i=R+T|0)<<18|i>>>14,_^=(i=w+E|0)<<7|i>>>25,k^=(i=_+w|0)<<9|i>>>23,E^=(i=k+_|0)<<13|i>>>19,w^=(i=E+k|0)<<18|i>>>14,A^=(i=j+S|0)<<7|i>>>25,T^=(i=A+j|0)<<9|i>>>23,S^=(i=T+A|0)<<13|i>>>19,j^=(i=S+T|0)<<18|i>>>14,R^=(i=O+C|0)<<7|i>>>25,P^=(i=R+O|0)<<9|i>>>23,C^=(i=P+R|0)<<13|i>>>19,O^=(i=C+P|0)<<18|i>>>14,N^=(i=F+D|0)<<7|i>>>25,M^=(i=N+F|0)<<9|i>>>23,D^=(i=M+N|0)<<13|i>>>19,F^=(i=D+M|0)<<18|i>>>14;w=w+s|0,_=_+o|0,k=k+a|0,E=E+l|0,S=S+u|0,j=j+c|0,A=A+h|0,T=T+d|0,P=P+f|0,C=C+p|0,O=O+m|0,R=R+y|0,N=N+g|0,M=M+v|0,D=D+b|0,F=F+x|0,e[0]=w>>>0&255,e[1]=w>>>8&255,e[2]=w>>>16&255,e[3]=w>>>24&255,e[4]=_>>>0&255,e[5]=_>>>8&255,e[6]=_>>>16&255,e[7]=_>>>24&255,e[8]=k>>>0&255,e[9]=k>>>8&255,e[10]=k>>>16&255,e[11]=k>>>24&255,e[12]=E>>>0&255,e[13]=E>>>8&255,e[14]=E>>>16&255,e[15]=E>>>24&255,e[16]=S>>>0&255,e[17]=S>>>8&255,e[18]=S>>>16&255,e[19]=S>>>24&255,e[20]=j>>>0&255,e[21]=j>>>8&255,e[22]=j>>>16&255,e[23]=j>>>24&255,e[24]=A>>>0&255,e[25]=A>>>8&255,e[26]=A>>>16&255,e[27]=A>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=P>>>0&255,e[33]=P>>>8&255,e[34]=P>>>16&255,e[35]=P>>>24&255,e[36]=C>>>0&255,e[37]=C>>>8&255,e[38]=C>>>16&255,e[39]=C>>>24&255,e[40]=O>>>0&255,e[41]=O>>>8&255,e[42]=O>>>16&255,e[43]=O>>>24&255,e[44]=R>>>0&255,e[45]=R>>>8&255,e[46]=R>>>16&255,e[47]=R>>>24&255,e[48]=N>>>0&255,e[49]=N>>>8&255,e[50]=N>>>16&255,e[51]=N>>>24&255,e[52]=M>>>0&255,e[53]=M>>>8&255,e[54]=M>>>16&255,e[55]=M>>>24&255,e[56]=D>>>0&255,e[57]=D>>>8&255,e[58]=D>>>16&255,e[59]=D>>>24&255,e[60]=F>>>0&255,e[61]=F>>>8&255,e[62]=F>>>16&255,e[63]=F>>>24&255}(e,t,r,n)}function b(e,t,r,n){!function(e,t,r,n){for(var i,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,l=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,c=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,x=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=s,_=o,k=a,E=l,S=u,j=c,A=h,T=d,P=f,C=p,O=m,R=y,N=g,M=v,D=b,F=x,I=0;I<20;I+=2)S^=(i=w+N|0)<<7|i>>>25,P^=(i=S+w|0)<<9|i>>>23,N^=(i=P+S|0)<<13|i>>>19,w^=(i=N+P|0)<<18|i>>>14,C^=(i=j+_|0)<<7|i>>>25,M^=(i=C+j|0)<<9|i>>>23,_^=(i=M+C|0)<<13|i>>>19,j^=(i=_+M|0)<<18|i>>>14,D^=(i=O+A|0)<<7|i>>>25,k^=(i=D+O|0)<<9|i>>>23,A^=(i=k+D|0)<<13|i>>>19,O^=(i=A+k|0)<<18|i>>>14,E^=(i=F+R|0)<<7|i>>>25,T^=(i=E+F|0)<<9|i>>>23,R^=(i=T+E|0)<<13|i>>>19,F^=(i=R+T|0)<<18|i>>>14,_^=(i=w+E|0)<<7|i>>>25,k^=(i=_+w|0)<<9|i>>>23,E^=(i=k+_|0)<<13|i>>>19,w^=(i=E+k|0)<<18|i>>>14,A^=(i=j+S|0)<<7|i>>>25,T^=(i=A+j|0)<<9|i>>>23,S^=(i=T+A|0)<<13|i>>>19,j^=(i=S+T|0)<<18|i>>>14,R^=(i=O+C|0)<<7|i>>>25,P^=(i=R+O|0)<<9|i>>>23,C^=(i=P+R|0)<<13|i>>>19,O^=(i=C+P|0)<<18|i>>>14,N^=(i=F+D|0)<<7|i>>>25,M^=(i=N+F|0)<<9|i>>>23,D^=(i=M+N|0)<<13|i>>>19,F^=(i=D+M|0)<<18|i>>>14;e[0]=w>>>0&255,e[1]=w>>>8&255,e[2]=w>>>16&255,e[3]=w>>>24&255,e[4]=j>>>0&255,e[5]=j>>>8&255,e[6]=j>>>16&255,e[7]=j>>>24&255,e[8]=O>>>0&255,e[9]=O>>>8&255,e[10]=O>>>16&255,e[11]=O>>>24&255,e[12]=F>>>0&255,e[13]=F>>>8&255,e[14]=F>>>16&255,e[15]=F>>>24&255,e[16]=A>>>0&255,e[17]=A>>>8&255,e[18]=A>>>16&255,e[19]=A>>>24&255,e[20]=T>>>0&255,e[21]=T>>>8&255,e[22]=T>>>16&255,e[23]=T>>>24&255,e[24]=P>>>0&255,e[25]=P>>>8&255,e[26]=P>>>16&255,e[27]=P>>>24&255,e[28]=C>>>0&255,e[29]=C>>>8&255,e[30]=C>>>16&255,e[31]=C>>>24&255}(e,t,r,n)}var x=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(e,t,r,n,i,s,o){var a,l,u=new Uint8Array(16),c=new Uint8Array(64);for(l=0;l<16;l++)u[l]=0;for(l=0;l<8;l++)u[l]=s[l];for(;i>=64;){for(v(c,u,o,x),l=0;l<64;l++)e[t+l]=r[n+l]^c[l];for(l=8,a=1;l<16;l++)a=a+(255&u[l])|0,u[l]=255&a,a>>>=8;i-=64,t+=64,n+=64}if(i>0)for(v(c,u,o,x),l=0;l<i;l++)e[t+l]=r[n+l]^c[l];return 0}function _(e,t,r,n,i){var s,o,a=new Uint8Array(16),l=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=n[o];for(;r>=64;){for(v(l,a,i,x),o=0;o<64;o++)e[t+o]=l[o];for(o=8,s=1;o<16;o++)s=s+(255&a[o])|0,a[o]=255&s,s>>>=8;r-=64,t+=64}if(r>0)for(v(l,a,i,x),o=0;o<r;o++)e[t+o]=l[o];return 0}function k(e,t,r,n,i){var s=new Uint8Array(32);b(s,n,i,x);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=n[a+16];return _(e,t,r,o,s)}function E(e,t,r,n,i,s,o){var a=new Uint8Array(32);b(a,s,o,x);for(var l=new Uint8Array(8),u=0;u<8;u++)l[u]=s[u+16];return w(e,t,r,n,i,l,a)}var S=function(e){var t,r,n,i,s,o,a,l;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=(t>>>13|r<<3)&8191,n=255&e[4]|(255&e[5])<<8,this.r[2]=(r>>>10|n<<6)&7939,i=255&e[6]|(255&e[7])<<8,this.r[3]=(n>>>7|i<<9)&8191,s=255&e[8]|(255&e[9])<<8,this.r[4]=(i>>>4|s<<12)&255,this.r[5]=s>>>1&8190,o=255&e[10]|(255&e[11])<<8,this.r[6]=(s>>>14|o<<2)&8191,a=255&e[12]|(255&e[13])<<8,this.r[7]=(o>>>11|a<<5)&8065,l=255&e[14]|(255&e[15])<<8,this.r[8]=(a>>>8|l<<8)&8191,this.r[9]=l>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function j(e,t,r,n,i,s){var o=new S(s);return o.update(r,n,i),o.finish(e,t),0}function A(e,t,r,n,i,s){var o=new Uint8Array(16);return j(o,0,r,n,i,s),y(e,t,o,0)}function T(e,t,r,n,i){var s;if(r<32)return -1;for(E(e,0,t,0,r,n,i),j(e,16,e,32,r-32,e),s=0;s<16;s++)e[s]=0;return 0}function P(e,t,r,n,i){var s,o=new Uint8Array(32);if(r<32||(k(o,0,32,n,i),0!==A(t,16,t,32,r-32,o)))return -1;for(E(e,0,t,0,r,n,i),s=0;s<32;s++)e[s]=0;return 0}function C(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function O(e){var t,r,n=1;for(t=0;t<16;t++)n=Math.floor((r=e[t]+n+65535)/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function R(e,t,r){for(var n,i=~(r-1),s=0;s<16;s++)n=i&(e[s]^t[s]),e[s]^=n,t[s]^=n}function N(e,t){var n,i,s,o=r(),a=r();for(n=0;n<16;n++)a[n]=t[n];for(O(a),O(a),O(a),i=0;i<2;i++){for(n=1,o[0]=a[0]-65517;n<15;n++)o[n]=a[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),s=o[15]>>16&1,o[14]&=65535,R(a,o,1-s)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function M(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return N(r,e),N(n,t),g(r,0,n,0)}function D(e){var t=new Uint8Array(32);return N(t,e),1&t[0]}function F(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function I(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function B(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function L(e,t,r){var n,i,s=0,o=0,a=0,l=0,u=0,c=0,h=0,d=0,f=0,p=0,m=0,y=0,g=0,v=0,b=0,x=0,w=0,_=0,k=0,E=0,S=0,j=0,A=0,T=0,P=0,C=0,O=0,R=0,N=0,M=0,D=0,F=r[0],I=r[1],B=r[2],L=r[3],U=r[4],$=r[5],z=r[6],V=r[7],K=r[8],q=r[9],W=r[10],G=r[11],H=r[12],Y=r[13],Q=r[14],J=r[15];s+=(n=t[0])*F,o+=n*I,a+=n*B,l+=n*L,u+=n*U,c+=n*$,h+=n*z,d+=n*V,f+=n*K,p+=n*q,m+=n*W,y+=n*G,g+=n*H,v+=n*Y,b+=n*Q,x+=n*J,o+=(n=t[1])*F,a+=n*I,l+=n*B,u+=n*L,c+=n*U,h+=n*$,d+=n*z,f+=n*V,p+=n*K,m+=n*q,y+=n*W,g+=n*G,v+=n*H,b+=n*Y,x+=n*Q,w+=n*J,a+=(n=t[2])*F,l+=n*I,u+=n*B,c+=n*L,h+=n*U,d+=n*$,f+=n*z,p+=n*V,m+=n*K,y+=n*q,g+=n*W,v+=n*G,b+=n*H,x+=n*Y,w+=n*Q,_+=n*J,l+=(n=t[3])*F,u+=n*I,c+=n*B,h+=n*L,d+=n*U,f+=n*$,p+=n*z,m+=n*V,y+=n*K,g+=n*q,v+=n*W,b+=n*G,x+=n*H,w+=n*Y,_+=n*Q,k+=n*J,u+=(n=t[4])*F,c+=n*I,h+=n*B,d+=n*L,f+=n*U,p+=n*$,m+=n*z,y+=n*V,g+=n*K,v+=n*q,b+=n*W,x+=n*G,w+=n*H,_+=n*Y,k+=n*Q,E+=n*J,c+=(n=t[5])*F,h+=n*I,d+=n*B,f+=n*L,p+=n*U,m+=n*$,y+=n*z,g+=n*V,v+=n*K,b+=n*q,x+=n*W,w+=n*G,_+=n*H,k+=n*Y,E+=n*Q,S+=n*J,h+=(n=t[6])*F,d+=n*I,f+=n*B,p+=n*L,m+=n*U,y+=n*$,g+=n*z,v+=n*V,b+=n*K,x+=n*q,w+=n*W,_+=n*G,k+=n*H,E+=n*Y,S+=n*Q,j+=n*J,d+=(n=t[7])*F,f+=n*I,p+=n*B,m+=n*L,y+=n*U,g+=n*$,v+=n*z,b+=n*V,x+=n*K,w+=n*q,_+=n*W,k+=n*G,E+=n*H,S+=n*Y,j+=n*Q,A+=n*J,f+=(n=t[8])*F,p+=n*I,m+=n*B,y+=n*L,g+=n*U,v+=n*$,b+=n*z,x+=n*V,w+=n*K,_+=n*q,k+=n*W,E+=n*G,S+=n*H,j+=n*Y,A+=n*Q,T+=n*J,p+=(n=t[9])*F,m+=n*I,y+=n*B,g+=n*L,v+=n*U,b+=n*$,x+=n*z,w+=n*V,_+=n*K,k+=n*q,E+=n*W,S+=n*G,j+=n*H,A+=n*Y,T+=n*Q,P+=n*J,m+=(n=t[10])*F,y+=n*I,g+=n*B,v+=n*L,b+=n*U,x+=n*$,w+=n*z,_+=n*V,k+=n*K,E+=n*q,S+=n*W,j+=n*G,A+=n*H,T+=n*Y,P+=n*Q,C+=n*J,y+=(n=t[11])*F,g+=n*I,v+=n*B,b+=n*L,x+=n*U,w+=n*$,_+=n*z,k+=n*V,E+=n*K,S+=n*q,j+=n*W,A+=n*G,T+=n*H,P+=n*Y,C+=n*Q,O+=n*J,g+=(n=t[12])*F,v+=n*I,b+=n*B,x+=n*L,w+=n*U,_+=n*$,k+=n*z,E+=n*V,S+=n*K,j+=n*q,A+=n*W,T+=n*G,P+=n*H,C+=n*Y,O+=n*Q,R+=n*J,v+=(n=t[13])*F,b+=n*I,x+=n*B,w+=n*L,_+=n*U,k+=n*$,E+=n*z,S+=n*V,j+=n*K,A+=n*q,T+=n*W,P+=n*G,C+=n*H,O+=n*Y,R+=n*Q,N+=n*J,b+=(n=t[14])*F,x+=n*I,w+=n*B,_+=n*L,k+=n*U,E+=n*$,S+=n*z,j+=n*V,A+=n*K,T+=n*q,P+=n*W,C+=n*G,O+=n*H,R+=n*Y,N+=n*Q,M+=n*J,x+=(n=t[15])*F,w+=n*I,_+=n*B,k+=n*L,E+=n*U,S+=n*$,j+=n*z,A+=n*V,T+=n*K,P+=n*q,C+=n*W,O+=n*G,R+=n*H,N+=n*Y,M+=n*Q,D+=n*J,s+=38*w,o+=38*_,a+=38*k,l+=38*E,u+=38*S,c+=38*j,h+=38*A,d+=38*T,f+=38*P,p+=38*C,m+=38*O,y+=38*R,g+=38*N,v+=38*M,b+=38*D,i=Math.floor((n=s+(i=1)+65535)/65536),s=n-65536*i,i=Math.floor((n=o+i+65535)/65536),o=n-65536*i,i=Math.floor((n=a+i+65535)/65536),a=n-65536*i,i=Math.floor((n=l+i+65535)/65536),l=n-65536*i,i=Math.floor((n=u+i+65535)/65536),u=n-65536*i,i=Math.floor((n=c+i+65535)/65536),c=n-65536*i,i=Math.floor((n=h+i+65535)/65536),h=n-65536*i,i=Math.floor((n=d+i+65535)/65536),d=n-65536*i,i=Math.floor((n=f+i+65535)/65536),f=n-65536*i,i=Math.floor((n=p+i+65535)/65536),p=n-65536*i,i=Math.floor((n=m+i+65535)/65536),m=n-65536*i,i=Math.floor((n=y+i+65535)/65536),y=n-65536*i,i=Math.floor((n=g+i+65535)/65536),g=n-65536*i,i=Math.floor((n=v+i+65535)/65536),v=n-65536*i,i=Math.floor((n=b+i+65535)/65536),b=n-65536*i,i=Math.floor((n=x+i+65535)/65536),x=n-65536*i,s+=i-1+37*(i-1),i=Math.floor((n=s+(i=1)+65535)/65536),s=n-65536*i,i=Math.floor((n=o+i+65535)/65536),o=n-65536*i,i=Math.floor((n=a+i+65535)/65536),a=n-65536*i,i=Math.floor((n=l+i+65535)/65536),l=n-65536*i,i=Math.floor((n=u+i+65535)/65536),u=n-65536*i,i=Math.floor((n=c+i+65535)/65536),c=n-65536*i,i=Math.floor((n=h+i+65535)/65536),h=n-65536*i,i=Math.floor((n=d+i+65535)/65536),d=n-65536*i,i=Math.floor((n=f+i+65535)/65536),f=n-65536*i,i=Math.floor((n=p+i+65535)/65536),p=n-65536*i,i=Math.floor((n=m+i+65535)/65536),m=n-65536*i,i=Math.floor((n=y+i+65535)/65536),y=n-65536*i,i=Math.floor((n=g+i+65535)/65536),g=n-65536*i,i=Math.floor((n=v+i+65535)/65536),v=n-65536*i,i=Math.floor((n=b+i+65535)/65536),b=n-65536*i,i=Math.floor((n=x+i+65535)/65536),x=n-65536*i,s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=l,e[4]=u,e[5]=c,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=m,e[11]=y,e[12]=g,e[13]=v,e[14]=b,e[15]=x}function U(e,t){L(e,t,t)}function $(e,t){var n,i=r();for(n=0;n<16;n++)i[n]=t[n];for(n=253;n>=0;n--)U(i,i),2!==n&&4!==n&&L(i,i,t);for(n=0;n<16;n++)e[n]=i[n]}function z(e,t){var n,i=r();for(n=0;n<16;n++)i[n]=t[n];for(n=250;n>=0;n--)U(i,i),1!==n&&L(i,i,t);for(n=0;n<16;n++)e[n]=i[n]}function V(e,t,n){var i,s,o=new Uint8Array(32),a=new Float64Array(80),u=r(),c=r(),h=r(),d=r(),f=r(),p=r();for(s=0;s<31;s++)o[s]=t[s];for(o[31]=127&t[31]|64,o[0]&=248,F(a,n),s=0;s<16;s++)c[s]=a[s],d[s]=u[s]=h[s]=0;for(s=254,u[0]=d[0]=1;s>=0;--s)R(u,c,i=o[s>>>3]>>>(7&s)&1),R(h,d,i),I(f,u,h),B(u,u,h),I(h,c,d),B(c,c,d),U(d,f),U(p,u),L(u,h,u),L(h,c,f),I(f,u,h),B(u,u,h),U(c,u),B(h,d,p),L(u,h,l),I(u,u,d),L(h,h,u),L(u,d,p),L(d,c,a),U(c,f),R(u,c,i),R(h,d,i);for(s=0;s<16;s++)a[s+16]=u[s],a[s+32]=h[s],a[s+48]=c[s],a[s+64]=d[s];var m=a.subarray(32),y=a.subarray(16);return $(m,m),L(y,y,m),N(e,y),0}function K(e,t){return V(e,t,s)}function q(e,t){return n(t,32),K(e,t)}function W(e,t,r){var n=new Uint8Array(32);return V(n,r,t),b(e,i,n,x)}S.prototype.blocks=function(e,t,r){for(var n,i,s,o,a,l,u,c,h,d,f,p,m,y,g,v,b,x,w,_=2048*!this.fin,k=this.h[0],E=this.h[1],S=this.h[2],j=this.h[3],A=this.h[4],T=this.h[5],P=this.h[6],C=this.h[7],O=this.h[8],R=this.h[9],N=this.r[0],M=this.r[1],D=this.r[2],F=this.r[3],I=this.r[4],B=this.r[5],L=this.r[6],U=this.r[7],$=this.r[8],z=this.r[9];r>=16;)k+=8191&(n=255&e[t+0]|(255&e[t+1])<<8),E+=(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3)&8191,S+=(i>>>10|(s=255&e[t+4]|(255&e[t+5])<<8)<<6)&8191,j+=(s>>>7|(o=255&e[t+6]|(255&e[t+7])<<8)<<9)&8191,A+=(o>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12)&8191,T+=a>>>1&8191,P+=(a>>>14|(l=255&e[t+10]|(255&e[t+11])<<8)<<2)&8191,C+=(l>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5)&8191,O+=(u>>>8|(c=255&e[t+14]|(255&e[t+15])<<8)<<8)&8191,R+=c>>>5|_,h=(d=(h=0)+k*N+5*z*E+5*$*S+5*U*j+5*L*A)>>>13,d&=8191,d+=5*B*T,d+=5*I*P,d+=5*F*C,d+=5*D*O,d+=5*M*R,h+=d>>>13,d&=8191,h=(f=h+k*M+E*N+5*z*S+5*$*j+5*U*A)>>>13,f&=8191,f+=5*L*T,f+=5*B*P,f+=5*I*C,f+=5*F*O,f+=5*D*R,h+=f>>>13,f&=8191,h=(p=h+k*D+E*M+S*N+5*z*j+5*$*A)>>>13,p&=8191,p+=5*U*T,p+=5*L*P,p+=5*B*C,p+=5*I*O,p+=5*F*R,h+=p>>>13,p&=8191,h=(m=h+k*F+E*D+S*M+j*N+5*z*A)>>>13,m&=8191,m+=5*$*T,m+=5*U*P,m+=5*L*C,m+=5*B*O,m+=5*I*R,h+=m>>>13,m&=8191,h=(y=h+k*I+E*F+S*D+j*M+A*N)>>>13,y&=8191,y+=5*z*T,y+=5*$*P,y+=5*U*C,y+=5*L*O,y+=5*B*R,h+=y>>>13,y&=8191,h=(g=h+k*B+E*I+S*F+j*D+A*M)>>>13,g&=8191,g+=T*N,g+=5*z*P,g+=5*$*C,g+=5*U*O,g+=5*L*R,h+=g>>>13,g&=8191,h=(v=h+k*L+E*B+S*I+j*F+A*D)>>>13,v&=8191,v+=T*M,v+=P*N,v+=5*z*C,v+=5*$*O,v+=5*U*R,h+=v>>>13,v&=8191,h=(b=h+k*U+E*L+S*B+j*I+A*F)>>>13,b&=8191,b+=T*D,b+=P*M,b+=C*N,b+=5*z*O,b+=5*$*R,h+=b>>>13,b&=8191,h=(x=h+k*$+E*U+S*L+j*B+A*I)>>>13,x&=8191,x+=T*F,x+=P*D,x+=C*M,x+=O*N,x+=5*z*R,h+=x>>>13,x&=8191,h=(w=h+k*z+E*$+S*U+j*L+A*B)>>>13,w&=8191,w+=T*I,w+=P*F,w+=C*D,w+=O*M,w+=R*N,h+=w>>>13,w&=8191,d=8191&(h=(h=(h<<2)+h|0)+d|0),h>>>=13,f+=h,k=d,E=f,S=p,j=m,A=y,T=g,P=v,C=b,O=x,R=w,t+=16,r-=16;this.h[0]=k,this.h[1]=E,this.h[2]=S,this.h[3]=j,this.h[4]=A,this.h[5]=T,this.h[6]=P,this.h[7]=C,this.h[8]=O,this.h[9]=R},S.prototype.finish=function(e,t){var r,n,i,s,o=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=r,r=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this.h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(s=0,n=~n;s<10;s++)this.h[s]=this.h[s]&n|o[s];for(s=1,this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,i=this.h[0]+this.pad[0],this.h[0]=65535&i;s<8;s++)i=(this.h[s]+this.pad[s]|0)+(i>>>16)|0,this.h[s]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},S.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var G=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0xfc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x6ca6351,0xe003826f,0x14292967,0xa0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x6f067aa,0x72176fba,0xa637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function H(e,t,r,n){for(var i,s,o,a,l,u,c,h,d,f,p,m,y,g,v,b,x,w,_,k,E,S,j,A,T,P,C=new Int32Array(16),O=new Int32Array(16),R=e[0],N=e[1],M=e[2],D=e[3],F=e[4],I=e[5],B=e[6],L=e[7],U=t[0],$=t[1],z=t[2],V=t[3],K=t[4],q=t[5],W=t[6],H=t[7],Y=0;n>=128;){for(_=0;_<16;_++)k=8*_+Y,C[_]=r[k+0]<<24|r[k+1]<<16|r[k+2]<<8|r[k+3],O[_]=r[k+4]<<24|r[k+5]<<16|r[k+6]<<8|r[k+7];for(_=0;_<80;_++)if(i=R,s=N,o=M,a=D,l=F,u=I,c=B,h=L,d=U,f=$,p=z,m=V,y=K,g=q,v=W,b=H,E=L,j=65535&(S=H),A=S>>>16,T=65535&E,P=E>>>16,E=(F>>>14|K<<18)^(F>>>18|K<<14)^(K>>>9|F<<23),j+=65535&(S=(K>>>14|F<<18)^(K>>>18|F<<14)^(F>>>9|K<<23)),A+=S>>>16,T+=65535&E,P+=E>>>16,E=F&I^~F&B,j+=65535&(S=K&q^~K&W),A+=S>>>16,T+=65535&E,P+=E>>>16,E=G[2*_],j+=65535&(S=G[2*_+1]),A+=S>>>16,T+=65535&E,P+=E>>>16,E=C[_%16],j+=65535&(S=O[_%16]),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,x=65535&T|P<<16,w=65535&j|A<<16,E=x,j=65535&(S=w),A=S>>>16,T=65535&E,P=E>>>16,E=(R>>>28|U<<4)^(U>>>2|R<<30)^(U>>>7|R<<25),j+=65535&(S=(U>>>28|R<<4)^(R>>>2|U<<30)^(R>>>7|U<<25)),A+=S>>>16,T+=65535&E,P+=E>>>16,E=R&N^R&M^N&M,j+=65535&(S=U&$^U&z^$&z),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,h=65535&T|P<<16,b=65535&j|A<<16,E=a,j=65535&(S=m),A=S>>>16,T=65535&E,P=E>>>16,E=x,j+=65535&(S=w),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,a=65535&T|P<<16,m=65535&j|A<<16,N=i,M=s,D=o,F=a,I=l,B=u,L=c,R=h,$=d,z=f,V=p,K=m,q=y,W=g,H=v,U=b,_%16==15)for(k=0;k<16;k++)E=C[k],j=65535&(S=O[k]),A=S>>>16,T=65535&E,P=E>>>16,E=C[(k+9)%16],j+=65535&(S=O[(k+9)%16]),A+=S>>>16,T+=65535&E,P+=E>>>16,E=((x=C[(k+1)%16])>>>1|(w=O[(k+1)%16])<<31)^(x>>>8|w<<24)^x>>>7,j+=65535&(S=(w>>>1|x<<31)^(w>>>8|x<<24)^(w>>>7|x<<25)),A+=S>>>16,T+=65535&E,P+=E>>>16,E=((x=C[(k+14)%16])>>>19|(w=O[(k+14)%16])<<13)^(w>>>29|x<<3)^x>>>6,j+=65535&(S=(w>>>19|x<<13)^(x>>>29|w<<3)^(w>>>6|x<<26)),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,C[k]=65535&T|P<<16,O[k]=65535&j|A<<16;E=R,j=65535&(S=U),A=S>>>16,T=65535&E,P=E>>>16,E=e[0],j+=65535&(S=t[0]),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,e[0]=R=65535&T|P<<16,t[0]=U=65535&j|A<<16,E=N,j=65535&(S=$),A=S>>>16,T=65535&E,P=E>>>16,E=e[1],j+=65535&(S=t[1]),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,e[1]=N=65535&T|P<<16,t[1]=$=65535&j|A<<16,E=M,j=65535&(S=z),A=S>>>16,T=65535&E,P=E>>>16,E=e[2],j+=65535&(S=t[2]),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,e[2]=M=65535&T|P<<16,t[2]=z=65535&j|A<<16,E=D,j=65535&(S=V),A=S>>>16,T=65535&E,P=E>>>16,E=e[3],j+=65535&(S=t[3]),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,e[3]=D=65535&T|P<<16,t[3]=V=65535&j|A<<16,E=F,j=65535&(S=K),A=S>>>16,T=65535&E,P=E>>>16,E=e[4],j+=65535&(S=t[4]),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,e[4]=F=65535&T|P<<16,t[4]=K=65535&j|A<<16,E=I,j=65535&(S=q),A=S>>>16,T=65535&E,P=E>>>16,E=e[5],j+=65535&(S=t[5]),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,e[5]=I=65535&T|P<<16,t[5]=q=65535&j|A<<16,E=B,j=65535&(S=W),A=S>>>16,T=65535&E,P=E>>>16,E=e[6],j+=65535&(S=t[6]),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,e[6]=B=65535&T|P<<16,t[6]=W=65535&j|A<<16,E=L,j=65535&(S=H),A=S>>>16,T=65535&E,P=E>>>16,E=e[7],j+=65535&(S=t[7]),A+=S>>>16,T+=65535&E,P+=E>>>16,A+=j>>>16,T+=A>>>16,P+=T>>>16,e[7]=L=65535&T|P<<16,t[7]=H=65535&j|A<<16,Y+=128,n-=128}return n}function Y(e,t,r){var n,i=new Int32Array(8),s=new Int32Array(8),o=new Uint8Array(256),a=r;for(i[0]=0x6a09e667,i[1]=0xbb67ae85,i[2]=0x3c6ef372,i[3]=0xa54ff53a,i[4]=0x510e527f,i[5]=0x9b05688c,i[6]=0x1f83d9ab,i[7]=0x5be0cd19,s[0]=0xf3bcc908,s[1]=0x84caa73b,s[2]=0xfe94f82b,s[3]=0x5f1d36f1,s[4]=0xade682d1,s[5]=0x2b3e6c1f,s[6]=0xfb41bd6b,s[7]=0x137e2179,H(i,s,t,r),r%=128,n=0;n<r;n++)o[n]=t[a-r+n];for(o[r]=128,o[(r=256-(r<112)*128)-9]=0,p(o,r-8,a/0x20000000|0,a<<3),H(i,s,o,r),n=0;n<8;n++)p(e,8*n,i[n],s[n]);return 0}function Q(e,t){var n=r(),i=r(),s=r(),o=r(),a=r(),l=r(),u=r(),h=r(),d=r();B(n,e[1],e[0]),B(d,t[1],t[0]),L(n,n,d),I(i,e[0],e[1]),I(d,t[0],t[1]),L(i,i,d),L(s,e[3],t[3]),L(s,s,c),L(o,e[2],t[2]),I(o,o,o),B(a,i,n),B(l,o,s),I(u,o,s),I(h,i,n),L(e[0],a,l),L(e[1],h,u),L(e[2],u,l),L(e[3],a,h)}function J(e,t,r){var n;for(n=0;n<4;n++)R(e[n],t[n],r)}function X(e,t){var n=r(),i=r(),s=r();$(s,t[2]),L(n,t[0],s),L(i,t[1],s),N(e,i),e[31]^=D(n)<<7}function Z(e,t,r){var n,i;for(C(e[0],o),C(e[1],a),C(e[2],a),C(e[3],o),i=255;i>=0;--i)J(e,t,n=r[i/8|0]>>(7&i)&1),Q(t,e),Q(e,e),J(e,t,n)}function ee(e,t){var n=[r(),r(),r(),r()];C(n[0],h),C(n[1],d),C(n[2],a),L(n[3],h,d),Z(e,n,t)}function et(e,t,i){var s,o=new Uint8Array(64),a=[r(),r(),r(),r()];for(i||n(t,32),Y(o,t,32),o[0]&=248,o[31]&=127,o[31]|=64,ee(a,o),X(e,a),s=0;s<32;s++)t[s+32]=e[s];return 0}var er=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function en(e,t){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*er[i-(n-32)],r=Math.floor((t[i]+128)/256),t[i]-=256*r;t[i]+=r,t[n]=0}for(i=0,r=0;i<32;i++)t[i]+=r-(t[31]>>4)*er[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*er[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function ei(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;en(e,r)}function es(e,t,n,i){var s,o,a=new Uint8Array(64),l=new Uint8Array(64),u=new Uint8Array(64),c=new Float64Array(64),h=[r(),r(),r(),r()];for(Y(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64,s=0;s<n;s++)e[64+s]=t[s];for(s=0;s<32;s++)e[32+s]=a[32+s];for(Y(u,e.subarray(32),n+32),ei(u),ee(h,u),X(e,h),s=32;s<64;s++)e[s]=i[s];for(Y(l,e,n+64),ei(l),s=0;s<64;s++)c[s]=0;for(s=0;s<32;s++)c[s]=u[s];for(s=0;s<32;s++)for(o=0;o<32;o++)c[s+o]+=l[s]*a[o];return en(e.subarray(32),c),n+64}function eo(e,t,n,i){var s,l,c,h,d,p,m,y,v=new Uint8Array(32),b=new Uint8Array(64),x=[r(),r(),r(),r()],w=[r(),r(),r(),r()];if(n<64||(s=r(),l=r(),c=r(),h=r(),d=r(),p=r(),m=r(),(C(w[2],a),F(w[1],i),U(c,w[1]),L(h,c,u),B(c,c,w[2]),I(h,w[2],h),U(d,h),U(p,d),L(m,p,d),L(s,m,c),L(s,s,h),z(s,s),L(s,s,c),L(s,s,h),L(s,s,h),L(w[0],s,h),U(l,w[0]),L(l,l,h),M(l,c)&&L(w[0],w[0],f),U(l,w[0]),L(l,l,h),M(l,c))?-1:(D(w[0])===i[31]>>7&&B(w[0],o,w[0]),L(w[3],w[0],w[1]),0)))return -1;for(y=0;y<n;y++)e[y]=t[y];for(y=0;y<32;y++)e[y+32]=i[y];if(Y(b,e,n),ei(b),Z(x,w,b),ee(w,t.subarray(32)),Q(x,w),X(v,x),n-=64,g(t,0,v,0)){for(y=0;y<n;y++)e[y]=0;return -1}for(y=0;y<n;y++)e[y]=t[y+64];return n}function ea(e,t){if(32!==e.length)throw Error("bad key size");if(24!==t.length)throw Error("bad nonce size")}function el(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw TypeError("unexpected type, use Uint8Array")}function eu(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:E,crypto_stream:k,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:_,crypto_onetimeauth:j,crypto_onetimeauth_verify:A,crypto_verify_16:y,crypto_verify_32:g,crypto_secretbox:T,crypto_secretbox_open:P,crypto_scalarmult:V,crypto_scalarmult_base:K,crypto_box_beforenm:W,crypto_box_afternm:T,crypto_box:function(e,t,r,n,i,s){var o=new Uint8Array(32);return W(o,i,s),T(e,t,r,n,o)},crypto_box_open:function(e,t,r,n,i,s){var o=new Uint8Array(32);return W(o,i,s),P(e,t,r,n,o)},crypto_box_keypair:q,crypto_hash:Y,crypto_sign:es,crypto_sign_keypair:et,crypto_sign_open:eo,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:r,D:u,L:er,pack25519:N,unpack25519:F,M:L,A:I,S:U,Z:B,pow2523:z,add:Q,set25519:C,modL:en,scalarmult:Z,scalarbase:ee},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,r){el(e,t,r),ea(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),s=0;s<e.length;s++)n[s+32]=e[s];return T(i,n,n.length,t,r),i.subarray(16)},e.secretbox.open=function(e,t,r){el(e,t,r),ea(r,t);for(var n=new Uint8Array(16+e.length),i=new Uint8Array(n.length),s=0;s<e.length;s++)n[s+16]=e[s];return n.length<32||0!==P(i,n,n.length,t,r)?null:i.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(el(e,t),32!==e.length)throw Error("bad n size");if(32!==t.length)throw Error("bad p size");var r=new Uint8Array(32);return V(r,e,t),r},e.scalarMult.base=function(e){if(el(e),32!==e.length)throw Error("bad n size");var t=new Uint8Array(32);return K(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var s=e.box.before(n,i);return e.secretbox(t,r,s)},e.box.before=function(e,t){el(e,t);if(32!==e.length)throw Error("bad public key size");if(32!==t.length)throw Error("bad secret key size");var r=new Uint8Array(32);return W(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var s=e.box.before(n,i);return e.secretbox.open(t,r,s)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return q(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(el(e),32!==e.length)throw Error("bad secret key size");var t=new Uint8Array(32);return K(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(el(e,t),64!==t.length)throw Error("bad secret key size");var r=new Uint8Array(64+e.length);return es(r,e,e.length,t),r},e.sign.open=function(e,t){if(el(e,t),32!==t.length)throw Error("bad public key size");var r=new Uint8Array(e.length),n=eo(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),s=0;s<i.length;s++)i[s]=r[s];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(64),s=0;s<i.length;s++)i[s]=n[s];return i},e.sign.detached.verify=function(e,t,r){if(el(e,t,r),64!==t.length)throw Error("bad signature size");if(32!==r.length)throw Error("bad public key size");var n,i=new Uint8Array(64+e.length),s=new Uint8Array(64+e.length);for(n=0;n<64;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+64]=e[n];return eo(s,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return et(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(el(e),64!==e.length)throw Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(el(e),32!==e.length)throw Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=e[n];return et(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){el(e);var t=new Uint8Array(64);return Y(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return el(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===m(e,0,t,0,e.length)},e.setPRNG=function(e){n=e},(t="u">typeof self?self.crypto||self.msCrypto:null)&&t.getRandomValues?e.setPRNG(function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];eu(i)}):(t={}).randomBytes&&e.setPRNG(function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];eu(i)})}(t.exports?t.exports:self.nacl=self.nacl||{})},67034,(e,t,r)=>{var n={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,s=l(e),o=s[0],a=s[1],u=new i((o+a)*3/4-a),c=0,h=a>0?o-4:o;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=0,a=n-i;o<a;o+=16383)s.push(function(e,t,n){for(var i,s=[],o=t;o<n;o+=3)i=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[i>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===i?s.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&s.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],n=[],i="u">typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n[45]=62,n[95]=63},72:function(e,t,r){"use strict";var n=r(675),i=r(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var n=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);var s=0|f(n,i),l=o(s),u=l.write(n,i);return u!==s&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(P(e,SharedArrayBuffer)||e&&P(e.buffer,SharedArrayBuffer)))return function(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),n}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return a.from(c,t,r);var p=function(e){if(a.isBuffer(e)){var t=0|d(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?o(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(p)return p;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|d(e))}function h(e){for(var t=e.length<0?0:0|d(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!a.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(u(e),e<=0)?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||P(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return S(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return A(e).length;default:if(i)return n?-1:S(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){var i,s,o,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=C[e[s]];return i}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return i=this,s=t,o=r,0===s&&o===i.length?n.fromByteArray(i):n.fromByteArray(i.slice(s,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}(this,t,r);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(s=r*=1)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return g(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var s,o=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*o}else -1!==c&&(s-=s-c),c=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var h=!0,d=0;d<l;d++)if(u(e,s+d)!==u(t,d)){h=!1;break}if(h)return s}return -1}a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(P(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),P(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(P(s,Uint8Array)&&(s=a.from(s)),!a.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(e,t,r,n,i){if(P(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var s=i-n,o=r-t,l=Math.min(s,o),u=this.slice(n,i),c=e.slice(t,r),h=0;h<l;++h)if(u[h]!==c[h]){s=u[h],o=c[h];break}return s<o?-1:+(o<s)},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)};function v(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,l,u=e[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:(192&(s=e[i+1]))==128&&(l=(31&u)<<6|63&s)>127&&(c=l);break;case 3:s=e[i+1],o=e[i+2],(192&s)==128&&(192&o)==128&&(l=(15&u)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}var d=n,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,d.slice(m,m+=4096));return p}function b(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,i,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function w(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function _(e,t,r,n,s){return t*=1,r>>>=0,s||w(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,s){return t*=1,r>>>=0,s||w(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,s,o,a,l,u,c,h,d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var f=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a,l=parseInt(t.substr(2*o,2),16);if((a=l)!=a)break;e[r+o]=l}return o}(this,e,t,r);case"utf8":case"utf-8":return i=t,s=r,T(S(e,this.length-i),this,i,s);case"ascii":return o=t,a=r,T(j(e),this,o,a);case"latin1":case"binary":return function(e,t,r,n){return T(j(t),e,r,n)}(this,e,t,r);case"base64":return l=t,u=r,T(A(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,h=r,T(function(e,t){for(var r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-c),this,c,h);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||b(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;x(this,e,t,r,i,0)}var s=1,o=0;for(this[t]=255&e;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;x(this,e,t,r,i,0)}var s=r-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||x(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return _(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return _(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var s=i-1;s>=0;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,s=e.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=a.isBuffer(e)?e:a.from(e,n),l=o.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%l]}return this};var E=/[^+/0-9A-Za-z-_]/g;function S(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function j(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function A(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function T(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function P(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var C=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},783:function(e,t){t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=r?i-1:0,d=r?-1:1,f=e[t+h];for(h+=d,s=f&(1<<-c)-1,f>>=-c,c+=a;c>0;s=256*s+e[t+h],h+=d,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=256*o+e[t+h],h+=d,c-=8);if(0===s)s=1-u;else{if(s===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=u}return(f?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,l,u=8*s-i-1,c=(1<<u)-1,h=c>>1,d=5960464477539062e-23*(23===i),f=n?0:s-1,p=n?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(t*l-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;e[r+f]=255&o,f+=p,o/=256,u-=8);e[r+f-p]|=128*m}}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},o=!0;try{n[e](r,r.exports,s),o=!1}finally{o&&delete i[e]}return r.exports}s.ab="/ROOT/node_modules/next/dist/compiled/buffer/",t.exports=s(72)},34673,(e,t,r)=>{var n=e.i(67034);!function(e,r){"use strict";t.exports?t.exports=r():(e.nacl||(e.nacl={}),e.nacl.util=r())}(e.e,function(){"use strict";var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw TypeError("expected string");var t,r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n},e.encodeUTF8=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(r.join("")))},"u"<typeof atob?void 0!==n.Buffer.from?(e.encodeBase64=function(e){return n.Buffer.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(n.Buffer.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new n.Buffer(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new n.Buffer(e,"base64"),0))}):(e.encodeBase64=function(e){var t,r=[],n=e.length;for(t=0;t<n;t++)r.push(String.fromCharCode(e[t]));return btoa(r.join(""))},e.decodeBase64=function(e){t(e);var r,n=atob(e),i=new Uint8Array(n.length);for(r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}),e})},93560,(e,t,r)=>{e.e,t.exports=function(){"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)},r=function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function n(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}var i="u">typeof globalThis?globalThis:"u">typeof self?self:"u">typeof window?window:e.g,s=Object.keys,o=Array.isArray;function a(e,t){return"object"!=typeof t||s(t).forEach(function(r){e[r]=t[r]}),e}"u"<typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,u={}.hasOwnProperty;function c(e,t){return u.call(e,t)}function h(e,t){"function"==typeof t&&(t=t(l(e))),("u"<typeof Reflect?s:Reflect.ownKeys)(t).forEach(function(r){f(e,r,t[r])})}var d=Object.defineProperty;function f(e,t,r,n){d(e,t,a(r&&c(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:h.bind(null,e.prototype)}}}}var m=Object.getOwnPropertyDescriptor,y=[].slice;function g(e,t,r){return y.call(e,t,r)}function v(e,t){return t(e)}function b(e){if(!e)throw Error("Assertion Failed")}function x(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function w(e,t){if("string"==typeof t&&c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,i=t.length;n<i;++n){var s=w(e,t[n]);r.push(s)}return r}var o=t.indexOf(".");if(-1!==o){var a=e[t.substr(0,o)];return null==a?void 0:w(a,t.substr(o+1))}}function _(e,t,r){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof r&&"length"in r);for(var n=0,i=t.length;n<i;++n)_(e,t[n],r[n])}else{var s,a,l=t.indexOf(".");-1!==l?(s=t.substr(0,l),""===(a=t.substr(l+1))?void 0===r?o(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=r:_(l=(l=e[s])&&c(e,s)?l:e[s]={},a,r)):void 0===r?o(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function k(e){var t,r={};for(t in e)c(e,t)&&(r[t]=e[t]);return r}var E=[].concat;function S(e){return E.apply([],e)}var j="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(S([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return i[e]}),A=new Set(j.map(function(e){return i[e]})),T=null;function P(e){return T=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var r=T.get(t);if(r)return r;if(o(t)){r=[],T.set(t,r);for(var n=0,i=t.length;n<i;++n)r.push(e(t[n]))}else if(A.has(t.constructor))r=t;else{var s,a=l(t);for(s in r=a===Object.prototype?{}:Object.create(a),T.set(t,r),t)c(t,s)&&(r[s]=e(t[s]))}return r}(e),T=null,e}var C={}.toString;function O(e){return C.call(e).slice(8,-1)}var R="u">typeof Symbol?Symbol.iterator:"@@iterator",N="symbol"==typeof R?function(e){var t;return null!=e&&(t=e[R])&&t.apply(e)}:function(){return null};function M(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var D={};function F(e){var t,r,n,i;if(1==arguments.length){if(o(e))return e.slice();if(this===D&&"string"==typeof e)return[e];if(i=N(e)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(null==e||"number"!=typeof(t=e.length))return[e];for(r=Array(t);t--;)r[t]=e[t];return r}for(t=arguments.length,r=Array(t);t--;)r[t]=arguments[t];return r}var I="u">typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},B=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],L=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(B),U={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function $(e,t){this.name=e,this.message=t}function z(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}function V(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=z(e,t)}function K(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=z(e,this.failures)}p($).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(V).from($),p(K).from($);var q=L.reduce(function(e,t){return e[t]=t+"Error",e},{}),W=L.reduce(function(e,t){var r=t+"Error";function n(e,n){this.name=r,e?"string"==typeof e?(this.message="".concat(e).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=U[t]||r,this.inner=null)}return p(n).from($),e[t]=n,e},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var G=B.reduce(function(e,t){return e[t+"Error"]=W[t],e},{}),H=L.reduce(function(e,t){return -1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=W[t]),e},{});function Y(){}function Q(e){return e}function J(e,t){return null==e||e===Q?t:function(r){return t(e(r))}}function X(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Z(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?X(n,this.onsuccess):n),i&&(this.onerror=this.onerror?X(i,this.onerror):i),void 0!==s?s:r}}function ee(e,t){return e===Y?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?X(r,this.onsuccess):r),n&&(this.onerror=this.onerror?X(n,this.onerror):n)}}function et(e,t){return e===Y?t:function(r){var n=e.apply(this,arguments);a(r,n);var i=this.onsuccess,s=this.onerror;return this.onsuccess=null,this.onerror=null,r=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?X(i,this.onsuccess):i),s&&(this.onerror=this.onerror?X(s,this.onerror):s),void 0===n?void 0===r?void 0:r:a(n,r)}}function er(e,t){return e===Y?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function en(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,i=arguments.length,s=Array(i);i--;)s[i]=arguments[i];return r.then(function(){return t.apply(n,s)})}return t.apply(this,arguments)}}H.ModifyError=V,H.DexieError=$,H.BulkError=K;var ei="u">typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),es={},j="u"<typeof Promise?[]:function(){var e=Promise.resolve();if("u"<typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]}(),B=j[0],L=j[1],j=j[2],L=L&&L.then,eo=B&&B.constructor,ea=!!j,el=function(e,t){ey.push([e,t]),ec&&(queueMicrotask(ej),ec=!1)},eu=!0,ec=!0,eh=[],ed=[],ef=Q,ep={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Y,pgp:!1,env:{},finalize:Y},em=ep,ey=[],eg=0,ev=[];function eb(e){if("object"!=typeof this)throw TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=em;if("function"!=typeof e){if(e!==es)throw TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&e_(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,r){try{r(function(r){if(null===t._state){if(r===t)throw TypeError("A promise cannot be resolved with itself.");var n=t._lib&&eA();r&&"function"==typeof r.then?e(t,function(e,t){r instanceof eb?r._then(e,t):r.then(e,t)}):(t._state=!0,t._value=r,ek(t)),n&&eT()}},e_.bind(null,t))}catch(e){e_(t,e)}}(this,e)}var ex={get:function(){var e=em,t=eF;function r(r,n){var i=this,s=!e.global&&(e!==em||t!==eF),o=s&&!eU(),a=new eb(function(t,a){eE(i,new ew(eW(r,e,s,o),eW(n,e,s,o),t,a,e))});return this._consoleTask&&(a._consoleTask=this._consoleTask),a}return r.prototype=es,r},set:function(e){f(this,"then",e&&e.prototype===es?ex:{get:function(){return e},set:ex.set})}};function ew(e,t,r,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=i}function e_(e,t){var r;ed.push(t),null===e._state&&(r=e._lib&&eA(),t=ef(t),e._state=!1,e._value=t,eh.some(function(t){return t._value===e._value})||eh.push(e),ek(e),r&&eT())}function ek(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)eE(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),0===eg&&(++eg,el(function(){0==--eg&&eP()},[]))}function eE(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++eg,el(eS,[r,e,t])}else e._listeners.push(t)}function eS(e,t,r){try{var n,i=t._value;!t._state&&ed.length&&(ed=[]),n=ei&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||-1!==ed.indexOf(i)||function(e){for(var t=eh.length;t;)if(eh[--t]._value===e._value)return eh.splice(t,1)}(t),r.resolve(n)}catch(e){r.reject(e)}finally{0==--eg&&eP(),--r.psd.ref||r.psd.finalize()}}function ej(){eq(ep,function(){eA()&&eT()})}function eA(){var e=eu;return ec=eu=!1,e}function eT(){var e,t,r;do for(;0<ey.length;)for(e=ey,ey=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}while(0<ey.length)ec=eu=!0}function eP(){var e=eh;eh=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=ev.slice(0),r=t.length;r;)t[--r]()}function eC(e){return new eb(es,!1,e)}function eO(e,t){var r=em;return function(){var n=eA(),i=em;try{return eV(r,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{eV(i,!1),n&&eT()}}}h(eb.prototype,{then:ex,_then:function(e,t){eE(this,new ew(null,null,e,t,em))},catch:function(e){if(1==arguments.length)return this.then(null,e);var t=arguments[1];return"function"==typeof e?this.then(null,function(r){return(r instanceof e?t:eC)(r)}):this.then(null,function(r){return(r&&r.name===e?t:eC)(r)})},finally:function(e){return this.then(function(t){return eb.resolve(e()).then(function(){return t})},function(t){return eb.resolve(e()).then(function(){return eC(t)})})},timeout:function(e,t){var r=this;return e<1/0?new eb(function(n,i){var s=setTimeout(function(){return i(new W.Timeout(t))},e);r.then(n,i).finally(clearTimeout.bind(null,s))}):this}}),"u">typeof Symbol&&Symbol.toStringTag&&f(eb.prototype,Symbol.toStringTag,"Dexie.Promise"),ep.env=eK(),h(eb,{all:function(){var e=F.apply(null,arguments).map(e$);return new eb(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach(function(i,s){return eb.resolve(i).then(function(r){e[s]=r,--n||t(e)},r)})})},resolve:function(e){return e instanceof eb?e:e&&"function"==typeof e.then?new eb(function(t,r){e.then(t,r)}):new eb(es,!0,e)},reject:eC,race:function(){var e=F.apply(null,arguments).map(e$);return new eb(function(t,r){e.map(function(e){return eb.resolve(e).then(t,r)})})},PSD:{get:function(){return em},set:function(e){return em=e}},totalEchoes:{get:function(){return eF}},newPSD:eB,usePSD:eq,scheduler:{get:function(){return el},set:function(e){el=e}},rejectionMapper:{get:function(){return ef},set:function(e){ef=e}},follow:function(e,t){return new eb(function(r,n){return eB(function(t,r){var n=em;n.unhandleds=[],n.onunhandled=r,n.finalize=X(function(){var e,n=this;e=function(){0===n.unhandleds.length?t():r(n.unhandleds[0])},ev.push(function t(){e(),ev.splice(ev.indexOf(t),1)}),++eg,el(function(){0==--eg&&eP()},[])},n.finalize),e()},t,r,n)})}}),eo&&(eo.allSettled&&f(eb,"allSettled",function(){var e=F.apply(null,arguments).map(e$);return new eb(function(t){0===e.length&&t([]);var r=e.length,n=Array(r);e.forEach(function(e,i){return eb.resolve(e).then(function(e){return n[i]={status:"fulfilled",value:e}},function(e){return n[i]={status:"rejected",reason:e}}).then(function(){return--r||t(n)})})})}),eo.any&&"u">typeof AggregateError&&f(eb,"any",function(){var e=F.apply(null,arguments).map(e$);return new eb(function(t,r){0===e.length&&r(AggregateError([]));var n=e.length,i=Array(n);e.forEach(function(e,s){return eb.resolve(e).then(function(e){return t(e)},function(e){i[s]=e,--n||r(AggregateError(i))})})})}),eo.withResolvers&&(eb.withResolvers=eo.withResolvers));var eR={awaits:0,echoes:0,id:0},eN=0,eM=[],eD=0,eF=0,eI=0;function eB(e,t,r,n){var i=em,s=Object.create(i);return s.parent=i,s.ref=0,s.global=!1,s.id=++eI,ep.env,s.env=ea?{Promise:eb,PromiseProp:{value:eb,configurable:!0,writable:!0},all:eb.all,race:eb.race,allSettled:eb.allSettled,any:eb.any,resolve:eb.resolve,reject:eb.reject}:{},t&&a(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()},n=eq(s,e,r,n),0===s.ref&&s.finalize(),n}function eL(){return eR.id||(eR.id=++eN),++eR.awaits,eR.echoes+=100,eR.id}function eU(){return!!eR.awaits&&(0==--eR.awaits&&(eR.id=0),eR.echoes=100*eR.awaits,!0)}function e$(e){return eR.echoes&&e&&e.constructor===eo?(eL(),e.then(function(e){return eU(),e},function(e){return eU(),eH(e)})):e}function ez(){var e=eM[eM.length-1];eM.pop(),eV(e,!1)}function eV(e,t){var r,n=em;(t?!eR.echoes||eD++&&e===em:!eD||--eD&&e===em)||queueMicrotask(t?(function(e){++eF,eR.echoes&&0!=--eR.echoes||(eR.echoes=eR.awaits=eR.id=0),eM.push(em),eV(e,!0)}).bind(null,e):ez),e!==em&&(em=e,n===ep&&(ep.env=eK()),ea&&(r=ep.env.Promise,t=e.env,(n.global||e.global)&&(Object.defineProperty(i,"Promise",t.PromiseProp),r.all=t.all,r.race=t.race,r.resolve=t.resolve,r.reject=t.reject,t.allSettled&&(r.allSettled=t.allSettled),t.any&&(r.any=t.any))))}function eK(){var e=i.Promise;return ea?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function eq(e,t,r,n,i){var s=em;try{return eV(e,!0),t(r,n,i)}finally{eV(s,!1)}}function eW(e,t,r,n){return"function"!=typeof e?e:function(){var i=em;r&&eL(),eV(t,!0);try{return e.apply(this,arguments)}finally{eV(i,!1),n&&queueMicrotask(eU)}}}function eG(e){Promise===eo&&0===eR.echoes?0===eD?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+L).indexOf("[native code]")&&(eL=eU=Y);var eH=eb.reject,eY=String.fromCharCode(65535),eQ="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",eJ="String expected.",eX=[],eZ="__dbnames",e0="readonly",e1="readwrite";function e5(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var e2={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function e3(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=P(t))[e],t}}function e6(){throw W.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function e8(e,t){try{var r=e4(e),n=e4(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var r=e.length,n=t.length,i=r<n?r:n,s=0;s<i;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return r===n?0:r<n?-1:1}(e7(e),e7(t));case"Array":return function(e,t){for(var r=e.length,n=t.length,i=r<n?r:n,s=0;s<i;++s){var o=e8(e[s],t[s]);if(0!==o)return o}return r===n?0:r<n?-1:1}(e,t)}}catch(e){}return NaN}function e4(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=O(e))?"binary":e}function e7(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function e9(e,t,r){var n=e.schema.yProps;return n?(t&&0<r.numFailures&&(t=t.filter(function(e,t){return!r.failures[t]})),Promise.all(n.map(function(r){return r=r.updatesTable,t?e.db.table(r).where("k").anyOf(t).delete():e.db.table(r).clear()})).then(function(){return r})):r}var te=(tt.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var r=t.add;if(o(r))return n(n([],o(e)?e:[],!0),r,!0).sort();if("number"==typeof r)return(Number(e)||0)+r;if("bigint"==typeof r)try{return BigInt(e)+r}catch(e){return BigInt(0)+r}throw TypeError("Invalid term ".concat(r))}if(void 0!==t.remove){var i=t.remove;if(o(i))return o(e)?e.filter(function(e){return!i.includes(e)}).sort():[];if("number"==typeof i)return Number(e)-i;if("bigint"==typeof i)try{return BigInt(e)-i}catch(e){return BigInt(0)-i}throw TypeError("Invalid subtrahend ".concat(i))}return(r=null==(r=t.replacePrefix)?void 0:r[0])&&"string"==typeof e&&e.startsWith(r)?t.replacePrefix[1]+e.substring(r.length):e},tt);function tt(e){this["@@propmod"]=e}function tr(e,t){for(var r=s(t),n=r.length,i=!1,o=0;o<n;++o){var a=r[o],l=t[a],u=w(e,a);l instanceof te?(_(e,a,l.execute(u)),i=!0):u!==l&&(_(e,a,l),i=!0)}return i}var tn=(ti.prototype._trans=function(e,t,r){var n=this._tx||em.trans,i=this.name,s=ei&&"u">typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function o(e,r,n){if(!n.schema[i])throw new W.NotFound("Table "+i+" not part of transaction");return t(n.idbtrans,n)}var a=eA();try{var l=n&&n.db._novip===this.db._novip?n===em.trans?n._promise(e,o,r):eB(function(){return n._promise(e,o,r)},{trans:n,transless:em.transless||em}):function e(t,r,n,i){if(t.idbdb&&(t._state.openComplete||em.letThrough||t._vip)){var s=t._createTransaction(r,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===q.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,i)})):eH(s)}return s._promise(r,function(e,t){return eB(function(){return em.trans=s,i(e,t,s)})}).then(function(e){if("readwrite"===r)try{s.idbtrans.commit()}catch(e){}return"readonly"===r?e:s._completion.then(function(){return e})})}if(t._state.openComplete)return eH(new W.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return eH(new W.DatabaseClosed);t.open().catch(Y)}return t._state.dbReadyPromise.then(function(){return e(t,r,n,i)})}(this.db,e,[this.name],o);return s&&(l._consoleTask=s,l=l.catch(function(e){return console.trace(e),eH(e)})),l}finally{a&&eT()}},ti.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?eH(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return r.core.get({trans:t,key:e}).then(function(e){return r.hook.reading.fire(e)})}).then(t)},ti.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(o(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=s(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var r=0;r<t.length;++r)if(-1===t.indexOf(e.keyPath[r]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(r&&this.db._maxKey!==eY){var n=r.keyPath.slice(0,t.length);return this.where(n).equals(n.map(function(t){return e[t]}))}!r&&ei&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName,a=t.reduce(function(t,r){var n=t[0],s=t[1],t=i[r],a=e[r];return[n||t,n||!t?e5(s,t&&t.multi?function(e){return o(e=w(e,r))&&e.some(function(e){return 0===e8(a,e)})}:function(e){return 0===e8(a,w(e,r))}):s]},[null,null]),n=a[0],a=a[1];return n?this.where(n.name).equals(e[n.keyPath]).filter(a):r?this.filter(a):this.where(t).equals("")},ti.prototype.filter=function(e){return this.toCollection().and(e)},ti.prototype.count=function(e){return this.toCollection().count(e)},ti.prototype.offset=function(e){return this.toCollection().offset(e)},ti.prototype.limit=function(e){return this.toCollection().limit(e)},ti.prototype.each=function(e){return this.toCollection().each(e)},ti.prototype.toArray=function(e){return this.toCollection().toArray(e)},ti.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ti.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,o(e)?"[".concat(e.join("+"),"]"):e))},ti.prototype.reverse=function(){return this.toCollection().reverse()},ti.prototype.mapToClass=function(e){var r,n=this.db,i=this.name;function s(){return null!==r&&r.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof e6&&(function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(s,r=e),Object.defineProperty(s.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),s.prototype.table=function(){return i},e=s);for(var o=new Set,a=e.prototype;a;a=l(a))Object.getOwnPropertyNames(a).forEach(function(e){return o.add(e)});function u(t){if(!t)return t;var r,n=Object.create(e.prototype);for(r in t)if(!o.has(r))try{n[r]=t[r]}catch(e){}return n}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),e},ti.prototype.defineClass=function(){return this.mapToClass(function(e){a(this,e)})},ti.prototype.add=function(e,t){var r=this,n=this.schema.primKey,i=n.auto,s=n.keyPath,o=e;return s&&i&&(o=e3(s)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]})}).then(function(e){return e.numFailures?eb.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{_(e,s,t)}catch(e){}return t})},ti.prototype.upsert=function(e,t){var r=this,n=this.schema.primKey.keyPath;return this._trans("readwrite",function(i){return r.core.get({trans:i,key:e}).then(function(s){var o=null!=s?s:{};return tr(o,t),n&&_(o,n,e),r.core.mutate({trans:i,type:"put",values:[o],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(e){return e.numFailures?eb.reject(e.failures[0]):!!s})})})},ti.prototype.update=function(e,t){return"object"!=typeof e||o(e)?this.where(":id").equals(e).modify(t):void 0===(e=w(e,this.schema.primKey.keyPath))?eH(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},ti.prototype.put=function(e,t){var r=this,n=this.schema.primKey,i=n.auto,s=n.keyPath,o=e;return s&&i&&(o=e3(s)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?eb.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{_(e,s,t)}catch(e){}return t})},ti.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]}).then(function(r){return e9(t,[e],r)}).then(function(e){return e.numFailures?eb.reject(e.failures[0]):void 0})})},ti.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:e2}).then(function(t){return e9(e,null,t)})}).then(function(e){return e.numFailures?eb.reject(e.failures[0]):void 0})},ti.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},ti.prototype.bulkAdd=function(e,t,r){var n=this,i=Array.isArray(t)?t:void 0,s=(r=r||(i?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=n.schema.primKey,o=r.auto,r=r.keyPath;if(r&&i)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,r=r&&o?e.map(e3(r)):e;return n.core.mutate({trans:t,type:"add",keys:i,values:r,wantResults:s}).then(function(e){var t=e.numFailures,r=e.results,i=e.lastResult,e=e.failures;if(0===t)return s?r:i;throw new K("".concat(n.name,".bulkAdd(): ").concat(t," of ").concat(a," operations failed"),e)})})},ti.prototype.bulkPut=function(e,t,r){var n=this,i=Array.isArray(t)?t:void 0,s=(r=r||(i?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=n.schema.primKey,o=r.auto,r=r.keyPath;if(r&&i)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,r=r&&o?e.map(e3(r)):e;return n.core.mutate({trans:t,type:"put",keys:i,values:r,wantResults:s}).then(function(e){var t=e.numFailures,r=e.results,i=e.lastResult,e=e.failures;if(0===t)return s?r:i;throw new K("".concat(n.name,".bulkPut(): ").concat(t," of ").concat(a," operations failed"),e)})})},ti.prototype.bulkUpdate=function(e){var t=this,r=this.core,n=e.map(function(e){return e.key}),i=e.map(function(e){return e.changes}),s=[];return this._trans("readwrite",function(o){return r.getMany({trans:o,keys:n,cache:"clone"}).then(function(a){var l=[],u=[];e.forEach(function(e,r){var n=e.key,i=e.changes,o=a[r];if(o){for(var c=0,h=Object.keys(i);c<h.length;c++){var d=h[c],f=i[d];if(d===t.schema.primKey.keyPath){if(0!==e8(f,n))throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else _(o,d,f)}s.push(r),l.push(n),u.push(o)}});var c=l.length;return r.mutate({trans:o,type:"put",keys:l,values:u,updates:{keys:n,changeSpecs:i}}).then(function(e){var r=e.numFailures,n=e.failures;if(0===r)return c;for(var i=0,o=Object.keys(n);i<o.length;i++){var a,l=o[i],u=s[Number(l)];null!=u&&(a=n[l],delete n[l],n[u]=a)}throw new K("".concat(t.name,".bulkUpdate(): ").concat(r," of ").concat(c," operations failed"),n)})})})},ti.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e}).then(function(r){return e9(t,e,r)})}).then(function(e){var n=e.numFailures,i=e.lastResult,e=e.failures;if(0===n)return i;throw new K("".concat(t.name,".bulkDelete(): ").concat(n," of ").concat(r," operations failed"),e)})},ti);function ti(){}function ts(e){function t(t,n){if(n){for(var i=arguments.length,s=Array(i-1);--i;)s[i-1]=arguments[i];return r[t].subscribe.apply(null,s),e}if("string"==typeof t)return r[t]}var r={};t.addEventType=a;for(var n=1,i=arguments.length;n<i;++n)a(arguments[n]);return t;function a(e,n,i){if("object"!=typeof e){n=n||er;var l={subscribers:[],fire:i=i||Y,subscribe:function(e){-1===l.subscribers.indexOf(e)&&(l.subscribers.push(e),l.fire=n(l.fire,e))},unsubscribe:function(e){l.subscribers=l.subscribers.filter(function(t){return t!==e}),l.fire=l.subscribers.reduce(n,i)}};return r[e]=t[e]=l}s(e).forEach(function(t){var r=e[t];if(o(r))a(t,e[t][0],e[t][1]);else{if("asap"!==r)throw new W.InvalidArgument("Invalid event config");var n=a(t,Q,function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){x(function(){e.apply(null,t)})})})}})}}function to(e,t){return p(t).from({prototype:e}),t}function ta(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function tl(e,t){e.filter=e5(e.filter,t)}function tu(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return e5(n(),t())}:t,e.justLimit=r&&!n}function tc(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new W.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function th(e,t,r){var n=tc(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function td(e,t,r,n){var i=e.replayFilter?e5(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},o=function(e,r,n){var o,a;i&&!i(r,n,function(e){return r.stop(e)},function(e){return r.fail(e)})||("[object ArrayBuffer]"==(a=""+(o=r.primaryKey))&&(a=""+new Uint8Array(o)),c(s,a)||(s[a]=!0,t(e,r,n)))};return Promise.all([e.or._iterate(o,r),tf(th(e,n,r),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return tf(th(e,n,r),e5(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function tf(e,t,r,n){var i=eO(n?function(e,t,i){return r(n(e),t,i)}:r);return e.then(function(e){if(e)return e.start(function(){var r=function(){return e.continue()};t&&!t(e,function(e){return r=e},function(t){e.stop(t),r=Y},function(t){e.fail(t),r=Y})||i(e.value,e,function(e){return r=e}),r()})})}var tp=(tm.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,eH.bind(null,r.error)):r.table._trans("readonly",e).then(t)},tm.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,eH.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},tm.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=e5(t.algorithm,e)},tm.prototype._iterate=function(e,t){return td(this._ctx,e,t,this._ctx.table.core)},tm.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&a(r,e),t._ctx=r,t},tm.prototype.raw=function(){return this._ctx.valueMapper=null,this},tm.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return td(t,e,r,t.table.core)})},tm.prototype.count=function(e){var t=this;return this._read(function(e){var r=t._ctx,n=r.table.core;if(ta(r,!0))return n.count({trans:e,query:{index:tc(r,n.schema),range:r.range}}).then(function(e){return Math.min(e,r.limit)});var i=0;return td(r,function(){return++i,!1},e,n).then(function(){return i})}).then(e)},tm.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],i=r.length-1;function s(e,t){return t?s(e[r[t]],t-1):e[n]}var o="next"===this._ctx.dir?1:-1;function a(e,t){return e8(s(e,i),s(t,i))*o}return this.toArray(function(e){return e.sort(a)}).then(t)},tm.prototype.toArray=function(e){var t=this;return this._read(function(e){var r=t._ctx;if("next"===r.dir&&ta(r,!0)&&0<r.limit){var n=r.valueMapper,i=tc(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(function(e){return e=e.result,n?e.map(n):e})}var s=[];return td(r,function(e){return s.push(e)},e,r.table.core).then(function(){return s})},e)},tm.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,ta(t)?tu(t,function(){var t=e;return function(e,r){return 0===t||(1===t?--t:r(function(){e.advance(t),t=0}),!1)}}):tu(t,function(){var t=e;return function(){return--t<0}})),this},tm.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),tu(this._ctx,function(){var t=e;return function(e,r,n){return--t<=0&&r(n),0<=t}},!0),this},tm.prototype.until=function(e,t){return tl(this._ctx,function(r,n,i){return!e(r.value)||(n(i),t)}),this},tm.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},tm.prototype.last=function(e){return this.reverse().first(e)},tm.prototype.filter=function(e){var t;return tl(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=e5(t.isMatch,e),this},tm.prototype.and=function(e){return this.filter(e)},tm.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},tm.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},tm.prototype.desc=function(){return this.reverse()},tm.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})},tm.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},tm.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},tm.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},tm.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&ta(t,!0)&&0<t.limit)return this._read(function(e){var r=tc(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},tm.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},tm.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},tm.prototype.lastKey=function(e){return this.reverse().firstKey(e)},tm.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return tl(this._ctx,function(e){var r=e.primaryKey.toString(),e=c(t,r);return t[r]=!0,!e}),this},tm.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(n){var i="function"==typeof e?e:function(t){return tr(t,e)},o=r.table.core,a=o.schema.primaryKey,l=a.outbound,u=a.extractKey,c=200,a=t.db._options.modifyChunkSize;function h(e,t){var r=t.failures,t=t.numFailures;f+=e-t;for(var n=0,i=s(r);n<i.length;n++){var o=i[n];d.push(r[o])}}a&&(c="object"==typeof a?a[o.name]||a["*"]||200:a);var d=[],f=0,p=[],m=e===ty;return t.clone().primaryKeys().then(function(t){var s=ta(r)&&r.limit===1/0&&("function"!=typeof e||m)&&{index:r.index,range:r.range};return(function a(d){var f=Math.min(c,t.length-d),p=t.slice(d,d+f);return(m?Promise.resolve([]):o.getMany({trans:n,keys:p,cache:"immutable"})).then(function(y){var g=[],v=[],b=l?[]:null,x=m?p:[];if(!m)for(var w=0;w<f;++w){var _=y[w],k={value:P(_),primKey:t[d+w]};!1!==i.call(k,k.value,k)&&(null==k.value?x.push(t[d+w]):l||0===e8(u(_),u(k.value))?(v.push(k.value),l&&b.push(t[d+w])):(x.push(t[d+w]),g.push(k.value)))}return Promise.resolve(0<g.length&&o.mutate({trans:n,type:"add",values:g}).then(function(e){for(var t in e.failures)x.splice(parseInt(t),1);h(g.length,e)})).then(function(){return(0<v.length||s&&"object"==typeof e)&&o.mutate({trans:n,type:"put",keys:b,values:v,criteria:s,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<d}).then(function(e){return h(v.length,e)})}).then(function(){return(0<x.length||s&&m)&&o.mutate({trans:n,type:"delete",keys:x,criteria:s,isAdditionalChunk:0<d}).then(function(e){return e9(r.table,x,e)}).then(function(e){return h(x.length,e)})}).then(function(){return t.length>d+f&&a(d+c)})})})(0).then(function(){if(0<d.length)throw new V("Error modifying one or more objects",d,f,p);return t.length})})})},tm.prototype.delete=function(){var e=this._ctx,t=e.range;return ta(e)&&!e.table.schema.yProps&&(e.isPrimKey||3===t.type)?this._write(function(r){var n=e.table.core.schema.primaryKey;return e.table.core.count({trans:r,query:{index:n,range:t}}).then(function(n){return e.table.core.mutate({trans:r,type:"deleteRange",range:t}).then(function(e){var t=e.failures,e=e.numFailures;if(e)throw new V("Could not delete some values",Object.keys(t).map(function(e){return t[e]}),n-e);return n-e})})}):this.modify(ty)},tm);function tm(){}var ty=function(e,t){return t.value=null};function tg(e,t){return e<t?-1:+(e!==t)}function tv(e,t){return t<e?-1:+(e!==t)}function tb(e,t,r){return(e=e instanceof tE?new e.Collection(e):e)._ctx.error=new(r||TypeError)(t),e}function tx(e){return new e.Collection(e,function(){return tk("")}).limit(0)}function tw(e,t,r,n){var i,s,o,a,l,u,c,h=r.length;if(!r.every(function(e){return"string"==typeof e}))return tb(e,eJ);function d(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},s="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},o="next"===e?tg:tv;var t=r.map(function(e){return{lower:s(e),upper:i(e)}}).sort(function(e,t){return o(e.lower,t.lower)});a=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),c="next"===(u=e)?"":n}d("next"),(e=new e.Collection(e,function(){return t_(a[0],l[h-1]+n)}))._ondirectionchange=function(e){d(e)};var f=0;return e._addAlgorithm(function(e,r,n){var i=e.key;if("string"!=typeof i)return!1;var d=s(i);if(t(d,l,f))return!0;for(var p=null,m=f;m<h;++m){var y=function(e,t,r,n,i,s){for(var o=Math.min(e.length,n.length),a=-1,l=0;l<o;++l){var u=t[l];if(u!==n[l])return 0>i(e[l],r[l])?e.substr(0,l)+r[l]+r.substr(l+1):0>i(e[l],n[l])?e.substr(0,l)+n[l]+r.substr(l+1):0<=a?e.substr(0,a)+t[a]+r.substr(a+1):null;0>i(e[l],u)&&(a=l)}return o<n.length&&"next"===s?e+r.substr(e.length):o<e.length&&"prev"===s?e.substr(0,r.length):a<0?null:e.substr(0,a)+n[a]+r.substr(a+1)}(i,d,a[m],l[m],o,u);null===y&&null===p?f=m+1:(null===p||0<o(p,y))&&(p=y)}return r(null!==p?function(){e.continue(p+c)}:n),!1}),e}function t_(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function tk(e){return{type:1,lower:e,upper:e}}var tE=(Object.defineProperty(tS.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),tS.prototype.between=function(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?tx(this):new this.Collection(this,function(){return t_(e,t,!r,!n)})}catch(e){return tb(this,eQ)}},tS.prototype.equals=function(e){return null==e?tb(this,eQ):new this.Collection(this,function(){return tk(e)})},tS.prototype.above=function(e){return null==e?tb(this,eQ):new this.Collection(this,function(){return t_(e,void 0,!0)})},tS.prototype.aboveOrEqual=function(e){return null==e?tb(this,eQ):new this.Collection(this,function(){return t_(e,void 0,!1)})},tS.prototype.below=function(e){return null==e?tb(this,eQ):new this.Collection(this,function(){return t_(void 0,e,!1,!0)})},tS.prototype.belowOrEqual=function(e){return null==e?tb(this,eQ):new this.Collection(this,function(){return t_(void 0,e)})},tS.prototype.startsWith=function(e){return"string"!=typeof e?tb(this,eJ):this.between(e,e+eY,!0,!0)},tS.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):tw(this,function(e,t){return 0===e.indexOf(t[0])},[e],eY)},tS.prototype.equalsIgnoreCase=function(e){return tw(this,function(e,t){return e===t[0]},[e],"")},tS.prototype.anyOfIgnoreCase=function(){var e=F.apply(D,arguments);return 0===e.length?tx(this):tw(this,function(e,t){return -1!==t.indexOf(e)},e,"")},tS.prototype.startsWithAnyOfIgnoreCase=function(){var e=F.apply(D,arguments);return 0===e.length?tx(this):tw(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,eY)},tS.prototype.anyOf=function(){var e=this,t=F.apply(D,arguments),r=this._cmp;try{t.sort(r)}catch(e){return tb(this,eQ)}if(0===t.length)return tx(this);var n=new this.Collection(this,function(){return t_(t[0],t[t.length-1])});n._ondirectionchange=function(n){r="next"===n?e._ascending:e._descending,t.sort(r)};var i=0;return n._addAlgorithm(function(e,n,s){for(var o=e.key;0<r(o,t[i]);)if(++i===t.length)return n(s),!1;return 0===r(o,t[i])||(n(function(){e.continue(t[i])}),!1)}),n},tS.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},tS.prototype.noneOf=function(){var e=F.apply(D,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return tb(this,eQ)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},tS.prototype.inAnyRange=function(e,t){var r=this,n=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(0===e.length)return tx(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&0>=i(e[0],e[1])}))return tb(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var l,u=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers,h=i;function d(e,t){return h(e[0],t[0])}try{(l=e.reduce(function(e,t){for(var r=0,i=e.length;r<i;++r){var s=e[r];if(0>n(t[0],s[1])&&0<n(t[1],s[0])){s[0]=o(s[0],t[0]),s[1]=a(s[1],t[1]);break}}return r===i&&e.push(t),e},[])).sort(d)}catch(e){return tb(this,eQ)}var f=0,p=c?function(e){return 0<i(e,l[f][1])}:function(e){return 0<=i(e,l[f][1])},m=u?function(e){return 0<s(e,l[f][0])}:function(e){return 0<=s(e,l[f][0])},y=p,e=new this.Collection(this,function(){return t_(l[0][0],l[l.length-1][1],!u,!c)});return e._ondirectionchange=function(e){h="next"===e?(y=p,i):(y=m,s),l.sort(d)},e._addAlgorithm(function(e,t,n){for(var s=e.key;y(s);)if(++f===l.length)return t(n),!1;return!p(s)&&!m(s)||(0===r._cmp(s,l[f][1])||0===r._cmp(s,l[f][0])||t(function(){h===i?e.continue(l[f][0]):e.continue(l[f][1])}),!1)}),e},tS.prototype.startsWithAnyOf=function(){var e=F.apply(D,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?tx(this):this.inAnyRange(e.map(function(e){return[e,e+eY]})):tb(this,"startsWithAnyOf() only works with strings")},tS);function tS(){}function tj(e){return eO(function(t){return tA(t),e(t.target.error),!1})}function tA(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var tT="storagemutated",tP="x-storagemutated-1",tC=ts(null,tT),tO=(tR.prototype._lock=function(){return b(!em.global),++this._reculock,1!==this._reculock||em.global||(em.lockOwnerFor=this),this},tR.prototype._unlock=function(){if(b(!em.global),0==--this._reculock)for(em.global||(em.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{eq(e[1],e[0])}catch(e){}}return this},tR.prototype._locked=function(){return this._reculock&&em.lockOwnerFor!==this},tR.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new W.DatabaseClosed(n);case"MissingAPIError":throw new W.MissingAPI(n.message,n);default:throw new W.OpenFailed(n)}if(!this.active)throw new W.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=eO(function(r){tA(r),t._reject(e.error)}),e.onabort=eO(function(r){tA(r),t.active&&t._reject(new W.Abort(e.error)),t.active=!1,t.on("abort").fire(r)}),e.oncomplete=eO(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&tC.storagemutated.fire(e.mutatedParts)}),this},tR.prototype._promise=function(e,t,r){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return eH(new W.ReadOnly("Transaction is readonly"));if(!this.active)return eH(new W.TransactionInactive);if(this._locked())return new eb(function(i,s){n._blockedFuncs.push([function(){n._promise(e,t,r).then(i,s)},em])});if(r)return eB(function(){var e=new eb(function(e,r){n._lock();var i=t(e,r,n);i&&i.then&&i.then(e,r)});return e.finally(function(){return n._unlock()}),e._lib=!0,e});var i=new eb(function(e,r){var i=t(e,r,n);i&&i.then&&i.then(e,r)});return i._lib=!0,i},tR.prototype._root=function(){return this.parent?this.parent._root():this},tR.prototype.waitFor=function(e){var t,r=this._root(),n=eb.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return n}):(r._waitingFor=n,r._waitingQueue=[],t=r.idbtrans.objectStore(r.storeNames[0]),function e(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(t.get(-1/0).onsuccess=e)}());var i=r._waitingFor;return new eb(function(e,t){n.then(function(t){return r._waitingQueue.push(eO(e.bind(null,t)))},function(e){return r._waitingQueue.push(eO(t.bind(null,e)))}).finally(function(){r._waitingFor===i&&(r._waitingFor=null)})})},tR.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))},tR.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];var r=this.schema[e];if(!r)throw new W.NotFound("Table "+e+" not part of transaction");return(r=new this.db.Table(e,r,this)).core=this.db.core.table(e),t[e]=r},tR);function tR(){}function tN(e,t,r,n,i,s,o,a){return{name:e,keyPath:t,unique:r,multi:n,auto:i,compound:s,src:(r&&!o?"&":"")+(n?"*":"")+(i?"++":"")+tM(t),type:a}}function tM(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function tD(e,t,r){var n;return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:(n=function(e){return[e.name,e]},r.reduce(function(e,t,r){return(r=n(t,r))&&(e[r[0]]=r[1]),e},{}))}}var tF=function(e){try{return e.only([[]]),tF=function(){return[[]]},[[]]}catch(e){return tF=function(){return eY},eY}};function tI(e){return null==e?function(){}:"string"==typeof e?1===e.split(".").length?function(t){return t[e]}:function(t){return w(t,e)}:function(t){return w(t,e)}}function tB(e){return[].slice.call(e)}var tL=0;function tU(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function t$(e,t){var n,i,s,a,l=t.db,t=(n=e._middlewares,i=e._deps,s=t,a=i.IDBKeyRange,i.indexedDB,{dbcore:(s=function(e,t,r){function n(e){if(3===e.type)return null;if(4===e.type)throw Error("Cannot convert never type to IDBKeyRange");var r=e.lower,n=e.upper,i=e.lowerOpen,e=e.upperOpen;return void 0===r?void 0===n?null:t.upperBound(n,!!e):void 0===n?t.lowerBound(r,!!i):t.bound(r,n,!!i,!!e)}var i,s,a=(i=r,s=tB(e.objectStoreNames),{schema:{name:e.name,tables:s.map(function(e){return i.objectStore(e)}).map(function(e){var t=e.keyPath,r=e.autoIncrement,n=o(t),i={},r={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:n,keyPath:t,autoIncrement:r,unique:!0,extractKey:tI(t)},indexes:tB(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,r=e.unique,n=e.multiEntry,e=e.keyPath,n={name:t,compound:o(e),keyPath:e,unique:r,multiEntry:n,extractKey:tI(e)};return i[tU(e)]=n}),getIndexByKeyPath:function(e){return i[tU(e)]}};return i[":id"]=r.primaryKey,null!=t&&(i[tU(t)]=r.primaryKey),r})},hasGetAll:0<s.length&&"getAll"in i.objectStore(s[0])&&!("u">typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),r=a.schema,l=a.hasGetAll,a=r.tables.map(function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var r=e.trans,i=e.type,s=e.keys,o=e.values,a=e.range;return new Promise(function(e,l){e=eO(e);var u=r.objectStore(t),c=null==u.keyPath,h="put"===i||"add"===i;if(!h&&"delete"!==i&&"deleteRange"!==i)throw Error("Invalid operation type: "+i);var d,f=(s||o||{length:1}).length;if(s&&o&&s.length!==o.length)throw Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function p(e){++g,tA(e)}var m=[],y=[],g=0;if("deleteRange"===i){if(4===a.type)return e({numFailures:g,failures:y,results:[],lastResult:void 0});3===a.type?m.push(d=u.clear()):m.push(d=u.delete(n(a)))}else{var c=h?c?[o,s]:[o,null]:[s,null],v=c[0],b=c[1];if(h)for(var x=0;x<f;++x)m.push(d=b&&void 0!==b[x]?u[i](v[x],b[x]):u[i](v[x])),d.onerror=p;else for(x=0;x<f;++x)m.push(d=u[i](v[x])),d.onerror=p}function w(t){t=t.target.result,m.forEach(function(e,t){return null!=e.error&&(y[t]=e.error)}),e({numFailures:g,failures:y,results:"delete"===i?s:m.map(function(e){return e.result}),lastResult:t})}d.onerror=function(e){p(e),w(e)},d.onsuccess=w})},getMany:function(e){var r=e.trans,n=e.keys;return new Promise(function(e,i){e=eO(e);for(var s,o=r.objectStore(t),a=n.length,l=Array(a),u=0,c=0,h=function(t){l[(t=t.target)._pos]=t.result,++c===u&&e(l)},d=tj(i),f=0;f<a;++f)null!=n[f]&&((s=o.get(n[f]))._pos=f,s.onsuccess=h,s.onerror=d,++u);0===u&&e(l)})},get:function(e){var r=e.trans,n=e.key;return new Promise(function(e,i){e=eO(e);var s=r.objectStore(t).get(n);s.onsuccess=function(t){return e(t.target.result)},s.onerror=tj(i)})},query:function(e){return new Promise(function(r,i){r=eO(r);var s,o,a,u=e.trans,c=e.values,h=e.limit,d=e.query,f=h===1/0?void 0:h,p=d.index,d=d.range,u=u.objectStore(t),p=p.isPrimaryKey?u:u.index(p.name),d=n(d);if(0===h)return r({result:[]});l?((f=c?p.getAll(d,f):p.getAllKeys(d,f)).onsuccess=function(e){return r({result:e.target.result})},f.onerror=tj(i)):(s=0,o=!c&&"openKeyCursor"in p?p.openKeyCursor(d):p.openCursor(d),a=[],o.onsuccess=function(e){var t=o.result;return t?(a.push(c?t.value:t.primaryKey),++s===h?r({result:a}):void t.continue()):r({result:a})},o.onerror=tj(i))})},openCursor:function(e){var r=e.trans,i=e.values,s=e.query,o=e.reverse,a=e.unique;return new Promise(function(e,l){e=eO(e);var u=s.index,c=s.range,h=r.objectStore(t),h=u.isPrimaryKey?h:h.index(u.name),u=o?a?"prevunique":"prev":a?"nextunique":"next",d=!i&&"openKeyCursor"in h?h.openKeyCursor(n(c),u):h.openCursor(n(c),u);d.onerror=tj(l),d.onsuccess=eO(function(t){var n,i,s,o,a=d.result;a?(a.___id=++tL,a.done=!1,n=a.continue.bind(a),i=(i=a.continuePrimaryKey)&&i.bind(a),s=a.advance.bind(a),o=function(){throw Error("Cursor not stopped")},a.trans=r,a.stop=a.continue=a.continuePrimaryKey=a.advance=function(){throw Error("Cursor not started")},a.fail=eO(l),a.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},a.start=function(e){function t(){if(d.result)try{e()}catch(e){a.fail(e)}else a.done=!0,a.start=function(){throw Error("Cursor behind last entry")},a.stop()}var r=new Promise(function(e,t){e=eO(e),d.onerror=tj(t),a.fail=t,a.stop=function(t){a.stop=a.continue=a.continuePrimaryKey=a.advance=o,e(t)}});return d.onsuccess=eO(function(e){d.onsuccess=t,t()}),a.continue=n,a.continuePrimaryKey=i,a.advance=s,t(),r},e(a)):e(null)},l)})},count:function(e){var r=e.query,i=e.trans,s=r.index,o=r.range;return new Promise(function(e,r){var a=i.objectStore(t),l=s.isPrimaryKey?a:a.index(s.name),a=n(o),l=a?l.count(a):l.count();l.onsuccess=eO(function(t){return e(t.target.result)}),l.onerror=tj(r)})}}}),u={};return a.forEach(function(e){return u[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw Error("Table '".concat(e,"' not found"));return u[e]},MIN_KEY:-1/0,MAX_KEY:tF(t),schema:r}}(l,a,s),n.dbcore.reduce(function(e,t){return t=t.create,r(r({},e),t(e))},s))});e.core=t.dbcore,e.tables.forEach(function(t){var r=t.name;e.core.schema.tables.some(function(e){return e.name===r})&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function tz(e,t,r,n){r.forEach(function(r){var i=n[r];t.forEach(function(t){var n=function e(t,r){return m(t,r)||(t=l(t))&&e(t,r)}(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?f(t,r,{get:function(){return this.table(r)},set:function(e){d(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,i))})})}function tV(e,t){t.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function tK(e,t){return e._cfg.version-t._cfg.version}function tq(e,t){var r,n={del:[],add:[],change:[]};for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],s=t[r];if(i){var o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto)o.recreate=!0,n.change.push(o);else{var a=i.idxByName,l=s.idxByName,u=void 0;for(u in a)l[u]||o.del.push(u);for(u in l){var c=a[u],h=l[u];c?c.src!==h.src&&o.change.push(h):o.add.push(h)}(0<o.del.length||0<o.add.length||0<o.change.length)&&n.change.push(o)}}else n.add.push([r,s])}return n}function tW(e,t,r,n){var i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(e){return tH(i,e)}),i}function tG(e,t){s(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(ei&&console.debug("Dexie: Creating missing table",r),tW(t,r,e[r].primKey,e[r].indexes))})}function tH(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function tY(e,t,r){var n={};return g(t.objectStoreNames,0).forEach(function(e){for(var t=r.objectStore(e),i=tN(tM(l=t.keyPath),l||"",!0,!1,!!t.autoIncrement,l&&"string"!=typeof l,!0),s=[],o=0;o<t.indexNames.length;++o){var a=t.index(t.indexNames[o]),l=a.keyPath,a=tN(a.name,l,!!a.unique,!!a.multiEntry,!1,l&&"string"!=typeof l,!1);s.push(a)}n[e]=tD(e,i,s)}),n}function tQ(e,t,r){for(var n=r.db.objectStoreNames,s=0;s<n.length;++s){var o=n[s],a=r.objectStore(o);e._hasGetAll="getAll"in a;for(var l=0;l<a.indexNames.length;++l){var u=a.indexNames[l],c=a.index(u).keyPath,h="string"==typeof c?c:"["+g(c).join("+")+"]";!t[o]||(c=t[o].idxByName[h])&&(c.name=u,delete t[o].idxByName[h],t[o].idxByName[u]=c)}}"u">typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function tJ(e){return e.split(",").map(function(e,t){var r=e.split(":"),n=null==(i=r[1])?void 0:i.trim(),i=(e=r[0].trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return tN(i,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),o(r),0===t,n)})}var tX=(tZ.prototype._createTableSchema=tD,tZ.prototype._parseIndexSyntax=tJ,tZ.prototype._parseStoresSpec=function(e,t){var r=this;s(e).forEach(function(n){if(null!==e[n]){var i=r._parseIndexSyntax(e[n]),s=i.shift();if(!s)throw new W.Schema("Invalid schema for table "+n+": "+e[n]);if(s.unique=!0,s.multi)throw new W.Schema("Primary key cannot be multiEntry*");i.forEach(function(e){if(e.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")}),i=r._createTableSchema(n,s,i),t[n]=i}})},tZ.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e;var e=t._versions,r={},n={};return e.forEach(function(e){a(r,e._cfg.storesSource),n=e._cfg.dbschema={},e._parseStoresSpec(r,n)}),t._dbSchema=n,tV(t,[t._allTables,t,t.Transaction.prototype]),tz(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],s(n),n),t._storeNames=s(n),this},tZ.prototype.upgrade=function(e){return this._cfg.contentUpgrade=en(this._cfg.contentUpgrade||Y,e),this},tZ);function tZ(){}function t0(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new rj(eZ,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function t1(e){return e&&"function"==typeof e.databases}function t5(e){return eB(function(){return em.letThrough=!0,e()})}function t2(e){return!("from"in e)}var t3=function(e,t){if(!this){var r=new t3;return e&&"d"in e&&a(r,e),r}a(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function t6(e,t,r){var n=e8(t,r);if(!isNaN(n)){if(0<n)throw RangeError();if(t2(e))return a(e,{from:t,to:r,d:1});var i=e.l,n=e.r;if(0>e8(r,e.from))return i?t6(i,t,r):e.l={from:t,to:r,d:1,l:null,r:null},t9(e);if(0<e8(t,e.to))return n?t6(n,t,r):e.r={from:t,to:r,d:1,l:null,r:null},t9(e);0>e8(t,e.from)&&(e.from=t,e.l=null,e.d=n?n.d+1:1),0<e8(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,i&&!e.l&&t8(e,i),n&&r&&t8(e,n)}}function t8(e,t){t2(t)||function e(t,r){var n=r.from,i=r.to,s=r.l,r=r.r;t6(t,n,i),s&&e(t,s),r&&e(t,r)}(e,t)}function t4(e,t){var r=t7(t),n=r.next();if(n.done)return!1;for(var i=n.value,s=t7(e),o=s.next(i.from),a=o.value;!n.done&&!o.done;){if(0>=e8(a.from,i.to)&&0<=e8(a.to,i.from))return!0;0>e8(i.from,a.from)?i=(n=r.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function t7(e){var t=t2(e)?null:{s:0,n:e};return{next:function(e){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&0>e8(e,t.n.from);)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||0>=e8(e,t.n.to))return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function t9(e){var t,n,i=((null==(t=e.r)?void 0:t.d)||0)-((null==(n=e.l)?void 0:n.d)||0),s=1<i?"r":i<-1?"l":"";s&&(t="r"==s?"l":"r",n=r({},e),i=e[s],e.from=i.from,e.to=i.to,e[s]=i[s],n[s]=i[t],(e[t]=n).d=re(n)),e.d=re(e)}function re(e){var t=e.r,e=e.l;return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function rt(e,t){return s(t).forEach(function(r){e[r]?t8(e[r],t[r]):e[r]=function e(t){var r,n,i={};for(r in t)c(t,r)&&(n=t[r],i[r]=!n||"object"!=typeof n||A.has(n.constructor)?n:e(n));return i}(t[r])}),e}function rr(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&t4(t[r],e[r])})}h(t3.prototype,((L={add:function(e){return t8(this,e),this},addKey:function(e){return t6(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return t6(t,e,e)}),this},hasKey:function(e){var t=t7(this).next(e).value;return t&&0>=e8(t.from,e)&&0<=e8(t.to,e)}})[R]=function(){return t7(this)},L));var rn={},ri={},rs=!1;function ro(e){rt(ri,e),rs||(rs=!0,setTimeout(function(){rs=!1,ra(ri,(ri={},!1))},0))}function ra(e,t){void 0===t&&(t=!1);var r=new Set;if(e.all)for(var n=0,i=Object.values(rn);n<i.length;n++)rl(o=i[n],e,r,t);else for(var s in e){var o,a=/^idb\:\/\/(.*)\/(.*)\//.exec(s);a&&(s=a[1],a=a[2],(o=rn["idb://".concat(s,"/").concat(a)])&&rl(o,e,r,t))}r.forEach(function(e){return e()})}function rl(e,t,r,n){for(var i=[],s=0,o=Object.entries(e.queries.query);s<o.length;s++){for(var a=o[s],l=a[0],u=[],c=0,h=a[1];c<h.length;c++){var d=h[c];rr(t,d.obsSet)?d.subscribers.forEach(function(e){return r.add(e)}):n&&u.push(d)}n&&i.push([l,u])}if(n)for(var f=0;f<i.length;f++){var p=i[f],l=p[0],u=p[1];e.queries.query[l]=u}}function ru(e){function t(t){return e.next(t)}var r=i(t),n=i(function(t){return e.throw(t)});function i(e){return function(t){var i=e(t),t=i.value;return i.done?t:t&&"function"==typeof t.then?t.then(r,n):o(t)?Promise.all(t).then(r,n):r(t)}}return i(t)()}function rc(e,t,r){for(var n=o(e)?e.slice():[e],i=0;i<r;++i)n.push(t);return n}var rh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),i=n.schema,s={},o=[];function a(e,t,n){var i=tU(e),l=s[i]=s[i]||[],u=null==e?0:"string"==typeof e?1:e.length,c=0<t,c=r(r({},n),{name:c?"".concat(i,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:c,keyTail:t,keyLength:u,extractKey:tI(e),unique:!c&&n.unique});return l.push(c),c.isPrimaryKey||o.push(c),1<u&&a(2===u?e[0]:e.slice(0,u-1),t+1,n),l.sort(function(e,t){return e.keyTail-t.keyTail}),c}t=a(i.primaryKey.keyPath,0,i.primaryKey),s[":id"]=[t];for(var l=0,u=i.indexes;l<u.length;l++){var c=u[l];a(c.keyPath,0,c)}function h(t){var n,i=t.query.index;return i.isVirtual?r(r({},t),{query:{index:i.lowLevelIndex,range:(n=t.query.range,i=i.keyTail,{type:1===n.type?2:n.type,lower:rc(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:rc(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):t}return r(r({},n),{schema:r(r({},i),{primaryKey:t,indexes:o,getIndexByKeyPath:function(e){return(e=s[tU(e)])&&e[0]}}),count:function(e){return n.count(h(e))},query:function(e){return n.query(h(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,s=r.isVirtual,o=r.keyLength;return s?n.openCursor(h(t)).then(function(r){var n;return r&&Object.create(n=r,{continue:{value:function(r){null!=r?n.continue(rc(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,o).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(rc(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:function(){return n.value}}})}):n.openCursor(t)}})}})}};function rd(e,t,r,n){return r=r||{},n=n||"",s(e).forEach(function(i){var s,o,a;c(t,i)?(s=e[i],o=t[i],"object"==typeof s&&"object"==typeof o&&s&&o?(a=O(s))!==O(o)?r[n+i]=t[i]:"Object"===a?rd(s,o,r,n+i+"."):s!==o&&(r[n+i]=t[i]):s!==o&&(r[n+i]=t[i])):r[n+i]=void 0}),s(t).forEach(function(i){c(e,i)||(r[n+i]=t[i])}),r}function rf(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var rp={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return r(r({},e),{table:function(t){var i=e.table(t),s=i.schema.primaryKey;return r(r({},i),{mutate:function(e){var o=em.trans,a=o.table(t).hook,l=a.deleting,u=a.creating,h=a.updating;switch(e.type){case"add":if(u.fire===Y)break;return o._promise("readwrite",function(){return d(e)},!0);case"put":if(u.fire===Y&&h.fire===Y)break;return o._promise("readwrite",function(){return d(e)},!0);case"delete":if(l.fire===Y)break;return o._promise("readwrite",function(){return d(e)},!0);case"deleteRange":if(l.fire===Y)break;return o._promise("readwrite",function(){return function e(t,n,o){return i.query({trans:t,values:!1,query:{index:s,range:n},limit:o}).then(function(i){var s=i.result;return d({type:"delete",keys:s,trans:t}).then(function(i){return 0<i.numFailures?Promise.reject(i.failures[0]):s.length<o?{failures:[],numFailures:0,lastResult:void 0}:e(t,r(r({},n),{lower:s[s.length-1],lowerOpen:!0}),o)})})}(e.trans,e.range,1e4)},!0)}return i.mutate(e);function d(e){var t,o=em.trans,a=e.keys||rf(s,e);if(!a)throw Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?r(r({},e),{keys:a}):r({},e)).type&&(e.values=n([],e.values,!0)),e.keys&&(e.keys=n([],e.keys,!0)),("add"===(t=e).type?Promise.resolve([]):i.getMany({trans:t.trans,keys:a,cache:"immutable"})).then(function(t){var r=a.map(function(r,n){var i,a,d,f=t[n],p={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(p,r,f,o):"add"===e.type||void 0===f?(i=u.fire.call(p,r,e.values[n],o),null==r&&null!=i&&(e.keys[n]=r=i,s.outbound||_(e.values[n],s.keyPath,r))):(i=rd(f,e.values[n]),(a=h.fire.call(p,i,r,f,o))&&(d=e.values[n],Object.keys(a).forEach(function(e){c(d,e)?d[e]=a[e]:_(d,e,a[e])}))),p});return i.mutate(e).then(function(n){for(var i=n.failures,s=n.results,o=n.numFailures,n=n.lastResult,l=0;l<a.length;++l){var u=(s||a)[l],c=r[l];null==u?c.onerror&&c.onerror(i[l]):c.onsuccess&&c.onsuccess("put"===e.type&&t[l]?e.values[l]:u)}return{failures:i,results:s,numFailures:o,lastResult:n}}).catch(function(e){return r.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function rm(e,t,r){try{if(!t||t.keys.length<e.length)return null;for(var n=[],i=0,s=0;i<t.keys.length&&s<e.length;++i)0===e8(t.keys[i],e[s])&&(n.push(r?P(t.values[i]):t.values[i]),++s);return n.length===e.length?n:null}catch(e){return null}}var ry={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return r(r({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=rm(e.keys,e.trans._cache,"clone"===e.cache);return t?eb.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?P(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function rg(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function rv(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var rb={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new t3(e.MIN_KEY,e.MAX_KEY);return r(r({},e),{transaction:function(t,r,n){if(em.subscr&&"readonly"!==r)throw new W.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(em.querier));return e.transaction(t,r,n)},table:function(i){var a=e.table(i),l=a.schema,u=l.primaryKey,c=l.indexes,h=u.extractKey,d=u.outbound,f=u.autoIncrement&&c.filter(function(e){return e.compound&&e.keyPath.includes(u.keyPath)}),p=r(r({},a),{mutate:function(r){function s(e){return p[e="idb://".concat(t,"/").concat(i,"/").concat(e)]||(p[e]=new t3)}var c,h,d=r.trans,p=r.mutatedParts||(r.mutatedParts={}),m=s(""),y=s(":dels"),g=r.type,v="deleteRange"===r.type?[r.range]:"delete"===r.type?[r.keys]:r.values.length<50?[rf(u,r).filter(function(e){return e}),r.values]:[],b=v[0],x=v[1],v=r.trans._cache;return o(b)?(m.addKeys(b),(v="delete"===g||b.length===x.length?rm(b,v):null)||y.addKeys(b),(v||x)&&(c=v,h=x,l.indexes.forEach(function(e){var t=s(e.name||"");function r(t){return null!=t?e.extractKey(t):null}function n(r){return e.multiEntry&&o(r)?r.forEach(function(e){return t.addKey(e)}):t.addKey(r)}(c||h).forEach(function(e,t){var i=c&&r(c[t]),t=h&&r(h[t]);0!==e8(i,t)&&(null!=i&&n(i),null!=t&&n(t))})}))):b?(x={from:null!=(x=b.lower)?x:e.MIN_KEY,to:null!=(x=b.upper)?x:e.MAX_KEY},y.add(x),m.add(x)):(m.add(n),y.add(n),l.indexes.forEach(function(e){return s(e.name).add(n)})),a.mutate(r).then(function(e){return!b||"add"!==r.type&&"put"!==r.type||(m.addKeys(e.results),f&&f.forEach(function(t){for(var n=r.values.map(function(e){return t.extractKey(e)}),i=t.keyPath.findIndex(function(e){return e===u.keyPath}),o=0,a=e.results.length;o<a;++o)n[o][i]=e.results[o];s(t.name).addKeys(n)})),d.mutatedParts=rt(d.mutatedParts||{},p),e})}}),c=function(t){var r=t.query,t=r.index,r=r.range;return[t,new t3(null!=(t=r.lower)?t:e.MIN_KEY,null!=(r=r.upper)?r:e.MAX_KEY)]},m={get:function(e){return[u,new t3(e.key)]},getMany:function(e){return[u,(new t3).addKeys(e.keys)]},count:c,query:c,openCursor:c};return s(m).forEach(function(e){p[e]=function(s){var o=em.subscr,l=!!o,u=rg(em,a)&&rv(e,s)?s.obsSet={}:o;if(l){var c=function(e){return u[e="idb://".concat(t,"/").concat(i,"/").concat(e)]||(u[e]=new t3)},f=c(""),p=c(":dels"),o=m[e](s),l=o[0],o=o[1];if(("query"===e&&l.isPrimaryKey&&!s.values?p:c(l.name||"")).add(o),!l.isPrimaryKey){if("count"!==e){var y="query"===e&&d&&s.values&&a.query(r(r({},s),{values:!1}));return a[e].apply(this,arguments).then(function(t){if("query"===e){if(d&&s.values)return y.then(function(e){return e=e.result,f.addKeys(e),t});var r=s.values?t.result.map(h):t.result;(s.values?f:p).addKeys(r)}else if("openCursor"===e){var n=s.values;return t&&Object.create(t,{key:{get:function(){return p.addKey(t.primaryKey),t.key}},primaryKey:{get:function(){var e=t.primaryKey;return p.addKey(e),e}},value:{get:function(){return n&&f.addKey(t.primaryKey),t.value}}})}return t})}p.add(n)}}return a[e].apply(this,arguments)}}),p}})}};function rx(e,t,n){if(0===n.numFailures)return t;if("deleteRange"===t.type)return null;var i=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===i?null:(o((t=r({},t)).keys)&&(t.keys=t.keys.filter(function(e,t){return!(t in n.failures)})),"values"in t&&o(t.values)&&(t.values=t.values.filter(function(e,t){return!(t in n.failures)})),t)}function rw(e,t){return(void 0===t.lower||(t.lowerOpen?0<e8(e,t.lower):0<=e8(e,t.lower)))&&(void 0===t.upper||(t.upperOpen?0>e8(e,t.upper):0>=e8(e,t.upper)))}function r_(e,t,r,n,i,s){if(!r||0===r.length)return e;var a=t.query.index,l=a.multiEntry,u=t.query.range,c=n.schema.primaryKey.extractKey,h=a.extractKey,d=(a.lowLevelIndex||a).extractKey,r=r.reduce(function(e,r){var n=e,i=[];if("add"===r.type||"put"===r.type)for(var s=new t3,a=r.values.length-1;0<=a;--a){var d,f=r.values[a],p=c(f);s.hasKey(p)||(d=h(f),(l&&o(d)?d.some(function(e){return rw(e,u)}):rw(d,u))&&(s.addKey(p),i.push(f)))}switch(r.type){case"add":var m=(new t3).addKeys(t.values?e.map(function(e){return c(e)}):e),n=e.concat(t.values?i.filter(function(e){return e=c(e),!m.hasKey(e)&&(m.addKey(e),!0)}):i.map(function(e){return c(e)}).filter(function(e){return!m.hasKey(e)&&(m.addKey(e),!0)}));break;case"put":var y=(new t3).addKeys(r.values.map(function(e){return c(e)}));n=e.filter(function(e){return!y.hasKey(t.values?c(e):e)}).concat(t.values?i:i.map(function(e){return c(e)}));break;case"delete":var g=(new t3).addKeys(r.keys);n=e.filter(function(e){return!g.hasKey(t.values?c(e):e)});break;case"deleteRange":var v=r.range;n=e.filter(function(e){return!rw(c(e),v)})}return n},e);return r===e?e:(r.sort(function(e,t){return e8(d(e),d(t))||e8(c(e),c(t))}),t.limit&&t.limit<1/0&&(r.length>t.limit?r.length=t.limit:e.length===t.limit&&r.length<t.limit&&(i.dirty=!0)),s?Object.freeze(r):r)}function rk(e,t){return 0===e8(e.lower,t.lower)&&0===e8(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}var rE={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return r(r({},e),{transaction:function(r,n,i){var s,o,a=e.transaction(r,n,i);return"readwrite"===n&&(o=(s=new AbortController).signal,i=function(i){return function(){if(s.abort(),"readwrite"===n){for(var o=new Set,l=0;l<r.length;l++){var u=r[l],c=rn["idb://".concat(t,"/").concat(u)];if(c){var h=e.table(u),d=c.optimisticOps.filter(function(e){return e.trans===a});if(a._explicit&&i&&a.mutatedParts)for(var f=0,p=Object.values(c.queries.query);f<p.length;f++)for(var m=0,y=(b=p[f]).slice();m<y.length;m++)rr((x=y[m]).obsSet,a.mutatedParts)&&(M(b,x),x.subscribers.forEach(function(e){return o.add(e)}));else if(0<d.length){c.optimisticOps=c.optimisticOps.filter(function(e){return e.trans!==a});for(var g=0,v=Object.values(c.queries.query);g<v.length;g++)for(var b,x,w,_=0,k=(b=v[g]).slice();_<k.length;_++)null!=(x=k[_]).res&&a.mutatedParts&&(i&&!x.dirty?(w=Object.isFrozen(x.res),w=r_(x.res,x.req,d,h,x,w),x.dirty?(M(b,x),x.subscribers.forEach(function(e){return o.add(e)})):w!==x.res&&(x.res=w,x.promise=eb.resolve({result:w}))):(x.dirty&&M(b,x),x.subscribers.forEach(function(e){return o.add(e)})))}}}o.forEach(function(e){return e()})}}},a.addEventListener("abort",i(!1),{signal:o}),a.addEventListener("error",i(!1),{signal:o}),a.addEventListener("complete",i(!0),{signal:o})),a},table:function(n){var i=e.table(n),s=i.schema.primaryKey;return r(r({},i),{mutate:function(e){var o=em.trans;if(s.outbound||"disabled"===o.db._options.cache||o.explicit||"readwrite"!==o.idbtrans.mode)return i.mutate(e);var a=rn["idb://".concat(t,"/").concat(n)];return a?(o=i.mutate(e),("add"===e.type||"put"===e.type)&&(50<=e.values.length||rf(s,e).some(function(e){return null==e}))?o.then(function(t){var n=rx(0,r(r({},e),{values:e.values.map(function(e,n){var i;return t.failures[n]||_(e=null!=(i=s.keyPath)&&i.includes(".")?P(e):r({},e),s.keyPath,t.results[n]),e})}),t);a.optimisticOps.push(n),queueMicrotask(function(){return e.mutatedParts&&ro(e.mutatedParts)})}):(a.optimisticOps.push(e),e.mutatedParts&&ro(e.mutatedParts),o.then(function(t){0<t.numFailures&&(M(a.optimisticOps,e),(t=rx(0,e,t))&&a.optimisticOps.push(t),e.mutatedParts&&ro(e.mutatedParts))}),o.catch(function(){M(a.optimisticOps,e),e.mutatedParts&&ro(e.mutatedParts)})),o):i.mutate(e)},query:function(e){if(!rg(em,i)||!rv("query",e))return i.query(e);var r,s,o="immutable"===(null==(c=em.trans)?void 0:c.db._options.cache),a=em,l=a.requery,u=a.signal,c=function(e,t,r,n){var i=rn["idb://".concat(e,"/").concat(t)];if(!i)return[];if(!(t=i.queries[r]))return[null,!1,i,null];var s=t[(n.query?n.query.index.name:null)||""];if(!s)return[null,!1,i,null];switch(r){case"query":var o=s.find(function(e){return e.req.limit===n.limit&&e.req.values===n.values&&rk(e.req.query.range,n.query.range)});return o?[o,!0,i,s]:[s.find(function(e){var t,r;return("limit"in e.req?e.req.limit:1/0)>=n.limit&&(!n.values||e.req.values)&&(t=e.req.query.range,r=n.query.range,0>=function(e,t,r,n){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=e8(e,t))){if(r&&n)return 0;if(r)return 1;if(n)return -1}return t}(t.lower,r.lower,t.lowerOpen,r.lowerOpen)&&0<=function(e,t,r,n){if(void 0===e)return+(void 0!==t);if(void 0===t)return -1;if(0===(t=e8(e,t))){if(r&&n)return 0;if(r)return -1;if(n)return 1}return t}(t.upper,r.upper,t.upperOpen,r.upperOpen))}),!1,i,s];case"count":return[o=s.find(function(e){return rk(e.req.query.range,n.query.range)}),!!o,i,s]}}(t,n,"query",e),h=c[0],a=c[1],d=c[2],f=c[3];return h&&a?h.obsSet=e.obsSet:(a=i.query(e).then(function(e){var t=e.result;if(h&&(h.res=t),o){for(var r=0,n=t.length;r<n;++r)Object.freeze(t[r]);Object.freeze(t)}else e.result=P(t);return e}).catch(function(e){return f&&h&&M(f,h),Promise.reject(e)}),h={obsSet:e.obsSet,promise:a,subscribers:new Set,type:"query",req:e,dirty:!1},f?f.push(h):(f=[h],(d=d||(rn["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=f)),r=h,s=f,r.subscribers.add(l),u.addEventListener("abort",function(){r.subscribers.delete(l),0===r.subscribers.size&&setTimeout(function(){0===r.subscribers.size&&M(s,r)},3e3)}),h.promise.then(function(t){return{result:r_(t.result,e,null==d?void 0:d.optimisticOps,i,h,o)}})}})}})}};function rS(e,t){return new Proxy(e,{get:function(e,r,n){return"db"===r?t:Reflect.get(e,r,n)}})}var rj=(rA.prototype.version=function(e){if(isNaN(e)||e<.1)throw new W.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(t){return t._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(tK),r.stores({}),this._state.autoSchema=!1,r)},rA.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||em.letThrough||this._vip)?e():new eb(function(e,r){if(t._state.openComplete)return r(new W.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new W.DatabaseClosed);t.open().catch(Y)}t._state.dbReadyPromise.then(e,r)}).then(e)},rA.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:r,level:null==n?10:n,name:i}),e.sort(function(e,t){return e.level-t.level}),this},rA.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return n?e.create!==n:!!r&&e.name!==r})),this},rA.prototype.open=function(){var e=this;return eq(ep,function(){return function(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?eH(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller,i=Math.round(10*e.verno),o=!1;function a(){if(t.openCanceller!==n)throw new W.DatabaseClosed("db.open() was cancelled")}var l,u=t.dbReadyResolve,c=null,h=!1;return eb.race([n,("u"<typeof navigator?eb.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}l=setInterval(t,100),t()}).finally(function(){return clearInterval(l)}):Promise.resolve()).then(function n(){return new eb(function(l,u){if(a(),!r)throw new W.MissingAPI;var d=e.name,f=t.autoSchema||!i?r.open(d):r.open(d,i);if(!f)throw new W.MissingAPI;f.onerror=tj(u),f.onblocked=eO(e._fireOnBlocked),f.onupgradeneeded=eO(function(n){var i,a,l,p,m,y,g;c=f.transaction,t.autoSchema&&!e._options.allowEmptyDB?(f.onerror=tA,c.abort(),f.result.close(),(i=r.deleteDatabase(d)).onsuccess=i.onerror=eO(function(){u(new W.NoSuchDatabase("Database ".concat(d," doesnt exist")))})):(c.onerror=tj(u),h=(n=n.oldVersion>0x4000000000000000?0:n.oldVersion)<1,e.idbdb=f.result,o&&function(e,t){tG(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=tY(0,e.idbdb,t);tQ(e,e._dbSchema,t);for(var n=0,i=tq(r,e._dbSchema).change;n<i.length;n++){var s=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var r=t.objectStore(e.name);e.add.forEach(function(t){ei&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),tH(r,t)})}(i[n]);if("object"==typeof s)return s.value}}(e,c),a=n/10,l=c,p=e._dbSchema,l.objectStoreNames.contains("$meta")&&!p.$meta&&(p.$meta=tD("$meta",tJ("")[0],[]),e._storeNames.push("$meta")),(m=e._createTransaction("readwrite",e._storeNames,p)).create(l),m._completion.catch(u),y=m._reject.bind(m),g=em.transless||em,eB(function(){return em.trans=m,em.transless=g,0!==a?(t$(e,l),(m.storeNames.includes("$meta")?m.table("$meta").get("version").then(function(e){return null!=e?e:a}):eb.resolve(a)).then(function(t){var r,n,i;return r=t,n=[],t=e._versions,i=e._dbSchema=tY(0,e.idbdb,l),0!==(t=t.filter(function(e){return e._cfg.version>=r})).length?(t.forEach(function(t){n.push(function(){var n=i,o=t._cfg.dbschema;tQ(e,n,l),tQ(e,o,l),i=e._dbSchema=o;var a=tq(n,o);a.add.forEach(function(e){tW(l,e[0],e[1].primKey,e[1].indexes)}),a.change.forEach(function(e){if(e.recreate)throw new W.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach(function(e){return tH(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),tH(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var u=t._cfg.contentUpgrade;if(u&&t._cfg.version>r){t$(e,l),m._memoizedTables={};var c=k(o);a.del.forEach(function(e){c[e]=n[e]}),tV(e,[e.Transaction.prototype]),tz(e,[e.Transaction.prototype],s(c),c),m.schema=c;var h,d=I(u);return d&&eL(),a=eb.follow(function(){var e;(h=u(m))&&d&&(e=eU.bind(null,null),h.then(e,e))}),h&&"function"==typeof h.then?eb.resolve(h):a.then(function(){return h})}}),n.push(function(r){var n=t._cfg.dbschema;[].slice.call(r.db.objectStoreNames).forEach(function(e){return null==n[e]&&r.db.deleteObjectStore(e)}),tV(e,[e.Transaction.prototype]),tz(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),m.schema=e._dbSchema}),n.push(function(r){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===t._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(e){return"$meta"!==e})):r.objectStore("$meta").put(t._cfg.version,"version"))})}),(function e(){return n.length?eb.resolve(n.shift()(m.idbtrans)).then(e):eb.resolve()})().then(function(){tG(i,l)})):eb.resolve()}).catch(y)):(s(p).forEach(function(e){tW(l,e,p[e].primKey,p[e].indexes)}),t$(e,l),void eb.follow(function(){return e.on.populate.fire(m)}).catch(y))}))},u),f.onsuccess=eO(function(){c=null;var r,a,u,p=e.idbdb=f.result,m=g(p.objectStoreNames);if(0<m.length)try{var y=p.transaction(1===m.length?m[0]:m,"readonly");if(t.autoSchema)r=p,a=y,e.verno=r.version/10,a=e._dbSchema=tY(0,r,a),e._storeNames=g(r.objectStoreNames,0),tz(e,[e._allTables],s(a),a);else if(tQ(e,e._dbSchema,y),((u=tq(tY(0,(u=e).idbdb,y),u._dbSchema)).add.length||u.change.some(function(e){return e.add.length||e.change.length}))&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),p.close(),i=p.version+1,o=!0,l(n());t$(e,y)}catch(e){}eX.push(e),p.onversionchange=eO(function(r){t.vcFired=!0,e.on("versionchange").fire(r)}),p.onclose=eO(function(){e.close({disableAutoOpen:!1})}),h&&(u=e._deps,y=d,p=u.indexedDB,u=u.IDBKeyRange,t1(p)||y===eZ||t0(p,u).put({name:y}).catch(Y)),l()},u)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),n();break;case"VersionError":if(0<i)return i=0,n()}return eb.reject(e)})})]).then(function(){return a(),t.onReadyBeingFired=[],eb.resolve(t5(function(){return e.on.ready.fire(e.vip)})).then(function r(){if(0<t.onReadyBeingFired.length){var n=t.onReadyBeingFired.reduce(en,Y);return t.onReadyBeingFired=[],eb.resolve(t5(function(){return n(e.vip)})).then(r)}})}).finally(function(){t.openCanceller===n&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(r){t.dbOpenError=r;try{c&&c.abort()}catch(e){}return n===t.openCanceller&&e._close(),eH(r)}).finally(function(){t.openComplete=!0,u()}).then(function(){var t;return h&&(t={},e.tables.forEach(function(r){r.schema.indexes.forEach(function(n){n.name&&(t["idb://".concat(e.name,"/").concat(r.name,"/").concat(n.name)]=new t3(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(r.name,"/")]=t["idb://".concat(e.name,"/").concat(r.name,"/:dels")]=new t3(-1/0,[[[]]])}),tC(tT).fire(t),ra(t,!0)),e})}(e)})},rA.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=eX.indexOf(this);if(0<=t&&eX.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new eb(function(t){e.dbReadyResolve=t}),e.openCanceller=new eb(function(t,r){e.cancelOpen=r}))},rA.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen,e=this._state;t?(e.isBeingOpened&&e.cancelOpen(new W.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new W.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},rA.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var r=0<arguments.length&&"object"!=typeof arguments[0],n=this._state;return new eb(function(i,s){function o(){t.close(e);var r=t._deps.indexedDB.deleteDatabase(t.name);r.onsuccess=eO(function(){var e,r,n;e=t._deps,r=t.name,n=e.indexedDB,e=e.IDBKeyRange,t1(n)||r===eZ||t0(n,e).delete(r).catch(Y),i()}),r.onerror=tj(s),r.onblocked=t._fireOnBlocked}if(r)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})},rA.prototype.backendDB=function(){return this.idbdb},rA.prototype.isOpen=function(){return null!==this.idbdb},rA.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},rA.prototype.hasFailed=function(){return null!==this._state.dbOpenError},rA.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(rA.prototype,"tables",{get:function(){var e=this;return s(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),rA.prototype.transaction=function(){var e=(function(e,t,r){var n=arguments.length;if(n<2)throw new W.InvalidArgument("Too few arguments");for(var i=Array(n-1);--n;)i[n-1]=arguments[n];return r=i.pop(),[e,S(i),r]}).apply(this,arguments);return this._transaction.apply(this,e)},rA.prototype._transaction=function(e,t,r){var n=this,i=em.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var s,o,a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(o=t.map(function(e){if(e=e instanceof n.Table?e.name:e,"string"!=typeof e)throw TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===e0)s=e0;else{if("rw"!=e&&e!=e1)throw new W.InvalidArgument("Invalid transaction mode: "+e);s=e1}if(i){if(i.mode===e0&&s===e1){if(!a)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach(function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!a)throw new W.SubTransaction("Table "+e+" not included in parent transaction.");i=null}}),a&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,function(t,r){r(e)}):eH(e)}var l=(function e(t,r,n,i,s){return eb.resolve().then(function(){var o=em.transless||em,a=t._createTransaction(r,n,t._dbSchema,i);if(a.explicit=!0,o={trans:a,transless:o},i)a.idbtrans=i.idbtrans;else try{a.create(),a.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(i){return i.name===q.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,null,s)})):eH(i)}var l,u=I(s);return u&&eL(),o=eb.follow(function(){var e;(l=s.call(a,a))&&(u?(e=eU.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=ru(l)))},o),(l&&"function"==typeof l.then?eb.resolve(l).then(function(e){return a.active?e:eH(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):o.then(function(){return l})).then(function(e){return i&&a._resolve(),a._completion.then(function(){return e})}).catch(function(e){return a._reject(e),eH(e)})})}).bind(null,this,s,o,i,r);return i?i._promise(s,l,"lock"):em.trans?eq(em.transless,function(){return n._whenReady(l)}):this._whenReady(l)},rA.prototype.table=function(e){if(!c(this._allTables,e))throw new W.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},rA);function rA(e,t){var n=this;this._middlewares={},this.verno=0;var i=rA.dependencies;this._options=t=r({addons:rA.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},i=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,o,a,l,u,c={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Y,dbReadyPromise:null,cancelOpen:Y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};c.dbReadyPromise=new eb(function(e){c.dbReadyResolve=e}),c.openCanceller=new eb(function(e,t){c.cancelOpen=t}),this._state=c,this.name=e,this.on=ts(this,"populate","blocked","versionchange","close",{ready:[en,Y]}),this.once=function(e,t){var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];n.on(e).unsubscribe(r),t.apply(n,i)};return n.on(e,r)},this.on.ready.subscribe=v(this.on.ready.subscribe,function(e){return function(t,r){rA.vip(function(){var i=n._state;i.openComplete?(i.dbOpenError||eb.resolve().then(t),r&&e(t)):i.onReadyBeingFired?(i.onReadyBeingFired.push(t),r&&e(t)):(e(t),r||e(function e(){n.on.ready.unsubscribe(t),n.on.ready.unsubscribe(e)}))})}}),this.Collection=(s=this,to(tp.prototype,function(e,t){this.db=s;var r=e2,n=null;if(t)try{r=t()}catch(e){n=e}var i=e._ctx,t=i.table,e=t.hook.reading.fire;this._ctx={table:t,index:i.index,isPrimKey:!i.index||t.schema.primKey.keyPath&&i.index===t.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:i.or,valueMapper:e!==Q?e:null}})),this.Table=(o=this,to(tn.prototype,function(e,t,r){this.db=o,this._tx=r,this.name=e,this.schema=t,this.hook=o._allTables[e]?o._allTables[e].hook:ts(null,{creating:[Z,Y],reading:[J,Q],updating:[et,Y],deleting:[ee,Y]})})),this.Transaction=(a=this,to(tO.prototype,function(e,t,r,n,i){var s=this;"readonly"!==e&&t.forEach(function(e){(e=null==(e=r[e])?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=a,this.mode=e,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=ts(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new eb(function(e,t){s._resolve=e,s._reject=t}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),eH(e)})})),this.Version=(l=this,to(tX.prototype,function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(u=this,to(tE.prototype,function(e,t,r){if(this.db=u,this._ctx={table:e,index:":id"===t?null:t,or:r},this._cmp=this._ascending=e8,this._descending=function(e,t){return e8(t,e)},this._max=function(e,t){return 0<e8(e,t)?e:t},this._min=function(e,t){return 0>e8(e,t)?e:t},this._IDBKeyRange=u._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=tF(t.IDBKeyRange),this._createTransaction=function(e,t,r,i){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),eX.filter(function(e){return e.name===n.name&&e!==n&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(ry),this.use(rE),this.use(rb),this.use(rh),this.use(rp);var h=new Proxy(this,{get:function(e,t,r){if("_vip"===t)return!0;if("table"===t)return function(e){return rS(n.table(e),h)};var i=Reflect.get(e,t,r);return i instanceof tn?rS(i,h):"tables"===t?i.map(function(e){return rS(e,h)}):"_createTransaction"===t?function(){return rS(i.apply(this,arguments),h)}:i}});this.vip=h,i.forEach(function(e){return e(n)})}var rT,L="u">typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",rP=(rC.prototype.subscribe=function(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})},rC.prototype[L]=function(){return this},rC);function rC(e){this._subscribe=e}try{rT={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(e){rT={indexedDB:null,IDBKeyRange:null}}function rO(e){var t,r=!1,n=new rP(function(n){var i,s=I(e),o=!1,a={},l={},u={get closed(){return o},unsubscribe:function(){o||(o=!0,i&&i.abort(),h&&tC.storagemutated.unsubscribe(f))}};n.start&&n.start(u);var h=!1,d=function(){return eG(p)},f=function(e){rt(a,e),rr(l,a)&&d()},p=function(){var u,p;!o&&rT.indexedDB&&(a={},u={},i&&i.abort(),Promise.resolve(function(t){var r=eA();try{s&&eL();var n=eB(e,t);return n=s?n.finally(eU):n}finally{r&&eT()}}(p={subscr:u,signal:(i=new AbortController).signal,requery:d,querier:e,trans:null})).then(function(e){r=!0,t=e,o||p.signal.aborted||(a={},function(e){for(var t in e)if(c(e,t))return;return 1}(l=u)||h||(tC(tT,f),h=!0),eG(function(){return!o&&n.next&&n.next(e)}))},function(e){r=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||o||eG(function(){o||n.error&&n.error(e)})}))};return setTimeout(d,0),u});return n.hasValue=function(){return r},n.getValue=function(){return t},n}function rR(e){var t=rM;try{rM=!0,tC.storagemutated.fire(e),ra(e,!0)}finally{rM=t}}h(rj,r(r({},H),{delete:function(e){return new rj(e,{addons:[]}).delete()},exists:function(e){return new rj(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){var t,r;try{return r=(t=rj.dependencies).indexedDB,t=t.IDBKeyRange,(t1(r)?Promise.resolve(r.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==eZ})}):t0(r,t).toCollection().primaryKeys()).then(e)}catch(e){return eH(new W.MissingAPI)}},defineClass:function(){return function(e){a(this,e)}},ignoreTransaction:function(e){return em.trans?eq(em.transless,e):e()},vip:t5,async:function(e){return function(){try{var t=ru(e.apply(this,arguments));return t&&"function"==typeof t.then?t:eb.resolve(t)}catch(e){return eH(e)}}},spawn:function(e,t,r){try{var n=ru(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:eb.resolve(n)}catch(e){return eH(e)}},currentTransaction:{get:function(){return em.trans||null}},waitFor:function(e,t){return t=eb.resolve("function"==typeof e?rj.ignoreTransaction(e):e).timeout(t||6e4),em.trans?em.trans.waitFor(t):t},Promise:eb,debug:{get:function(){return ei},set:function(e){ei=e}},derive:p,extend:a,props:h,override:v,Events:ts,on:tC,liveQuery:rO,extendObservabilitySet:rt,getByKeyPath:w,setByKeyPath:_,delByKeyPath:function(e,t){"string"==typeof t?_(e,t,void 0):"length"in t&&[].map.call(t,function(t){_(e,t,void 0)})},shallowClone:k,deepClone:P,getObjectDiff:rd,cmp:e8,asap:x,minKey:-1/0,addons:[],connections:eX,errnames:q,dependencies:rT,cache:rn,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),rj.maxKey=tF(rj.dependencies.IDBKeyRange),"u">typeof dispatchEvent&&"u">typeof addEventListener&&(tC(tT,function(e){rM||(e=new CustomEvent(tP,{detail:e}),rM=!0,dispatchEvent(e),rM=!1)}),addEventListener(tP,function(e){e=e.detail,rM||rR(e)}));var rN,rM=!1,rD=function(){};return"u">typeof BroadcastChannel&&((rD=function(){(rN=new BroadcastChannel(tP)).onmessage=function(e){return e.data&&rR(e.data)}})(),"function"==typeof rN.unref&&rN.unref(),tC(tT,function(e){rM||rN.postMessage(e)})),"u">typeof addEventListener&&(addEventListener("pagehide",function(e){if(!rj.disableBfCache&&e.persisted){ei&&console.debug("Dexie: handling persisted pagehide"),null!=rN&&rN.close();for(var t=0;t<eX.length;t++)eX[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!rj.disableBfCache&&e.persisted&&(ei&&console.debug("Dexie: handling persisted pageshow"),rD(),rR({all:new t3(-1/0,[[]])}))})),eb.rejectionMapper=function(e,t){return!e||e instanceof $||e instanceof TypeError||e instanceof SyntaxError||!e.name||!G[e.name]?e:(t=new G[e.name](t||e.message,e),"stack"in e&&f(t,"stack",{get:function(){return this.inner.stack}}),t)},r(rj,Object.freeze({__proto__:null,Dexie:rj,liveQuery:rO,Entity:e6,cmp:e8,PropModification:te,replacePrefix:function(e,t){return new te({replacePrefix:[e,t]})},add:function(e){return new te({add:e})},remove:function(e){return new te({remove:e})},default:rj,RangeSet:t3,mergeRanges:t8,rangesOverlap:t4}),{default:rj}),rj}()},54385,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}},43173,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let i=n(e.r(6085)),s=n(e.r(54385));r.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"u"<typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,n;let i=null,o=null,a=null,l=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){let t=await e.text();""===t||(o="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}let n=null==(t=this.headers.Prefer)?void 0:t.match(/count=(exact|planned|estimated)/),s=null==(r=e.headers.get("content-range"))?void 0:r.split("/");n&&s&&s.length>1&&(a=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,a=null,l=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{let t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,l=200,u="OK")}catch(r){404===e.status&&""===t?(l=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null==(n=null==i?void 0:i.details)?void 0:n.includes("0 rows"))&&(i=null,l=200,u="OK"),i&&this.shouldThrowOnError)throw new s.default(i)}return{error:i,data:o,count:a,status:l,statusText:u}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,n;return{error:{message:`${null!=(t=null==e?void 0:e.name)?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!=(r=null==e?void 0:e.stack)?r:""}`,hint:"",code:`${null!=(n=null==e?void 0:e.code)?n:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}}},82191,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let i=n(e.r(43173));class s extends i.default{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){let s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){let i=void 0===n?"offset":`${n}.offset`,s=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:s="text"}={}){var o;let a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!=(o=this.headers.Accept)?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`,this}rollback(){var e;return(null!=(e=this.headers.Prefer)?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}r.default=s},14633,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let i=n(e.r(82191));class s extends i.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";"plain"===n?i="pl":"phrase"===n?i="ph":"websearch"===n&&(i="w");let s=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}r.default=s},38290,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let i=n(e.r(14633));r.default=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){let n=!1,s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new i.default({method:t?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){let n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){let o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},98042,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.version=void 0,r.version="0.0.0-automated"},85511,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_HEADERS=void 0;let n=e.r(98042);r.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`}},2259,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let i=n(e.r(38290)),s=n(e.r(14633)),o=e.r(85511);class a{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},o.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=n}from(e){let t=new URL(`${this.url}/${e}`);return new i.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:n=!1,count:i}={}){let o,a,l=new URL(`${this.url}/rpc/${e}`);r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(o="POST",a=t);let u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new s.default({method:o,url:l,headers:u,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}r.default=a},82215,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.PostgrestError=r.PostgrestBuilder=r.PostgrestTransformBuilder=r.PostgrestFilterBuilder=r.PostgrestQueryBuilder=r.PostgrestClient=void 0;let i=n(e.r(2259));r.PostgrestClient=i.default;let s=n(e.r(38290));r.PostgrestQueryBuilder=s.default;let o=n(e.r(14633));r.PostgrestFilterBuilder=o.default;let a=n(e.r(82191));r.PostgrestTransformBuilder=a.default;let l=n(e.r(43173));r.PostgrestBuilder=l.default;let u=n(e.r(54385));r.PostgrestError=u.default,r.default={PostgrestClient:i.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:u.default}},71058,e=>{"use strict";let t,r,n,i,s,o;var a,l,u,c,h,d,f,p,m,y,g,v,b,x,w,_,k,E,S,j,A,T,P,C,O,R,N,M=e.i(43476),D=e.i(71645);let F=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var I={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let B=(0,D.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...a},l)=>(0,D.createElement)("svg",{ref:l,...I,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:F("lucide",i),...a},[...o.map(([e,t])=>(0,D.createElement)(e,t)),...Array.isArray(s)?s:[s]])),L=(e,t)=>{let r=(0,D.forwardRef)(({className:r,...n},i)=>(0,D.createElement)(B,{ref:i,iconNode:t,className:F(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...n}));return r.displayName=`${e}`,r},U=L("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var $=e.i(57688);let z=(e,t)=>{if(0===e.length)return t.classGroupId;let r=e[0],n=t.nextPart.get(r),i=n?z(e.slice(1),n):void 0;if(i)return i;if(0===t.validators.length)return;let s=e.join("-");return t.validators.find(({validator:e})=>e(s))?.classGroupId},V=/^\[(.+)\]$/,K=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:q(t,e)).classGroupId=r;return}"function"==typeof e?W(e)?K(e(n),t,r,n):t.validators.push({validator:e,classGroupId:r}):Object.entries(e).forEach(([e,i])=>{K(i,q(t,e),r,n)})})},q=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},W=e=>e.isThemeGetter,G=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,H=e=>{if(e.length<=1)return e;let t=[],r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},Y=/\s+/;function Q(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=J(e))&&(n&&(n+=" "),n+=t);return n}let J=e=>{let t;if("string"==typeof e)return e;let r="";for(let n=0;n<e.length;n++)e[n]&&(t=J(e[n]))&&(r&&(r+=" "),r+=t);return r},X=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},Z=/^\[(?:([a-z-]+):)?(.+)\]$/i,ee=/^\d+\/\d+$/,et=new Set(["px","full","screen"]),er=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,en=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ei=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,es=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eo=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ea=e=>eu(e)||et.has(e)||ee.test(e),el=e=>e_(e,"length",ek),eu=e=>!!e&&!Number.isNaN(Number(e)),ec=e=>e_(e,"number",eu),eh=e=>!!e&&Number.isInteger(Number(e)),ed=e=>e.endsWith("%")&&eu(e.slice(0,-1)),ef=e=>Z.test(e),ep=e=>er.test(e),em=new Set(["length","size","percentage"]),ey=e=>e_(e,em,eE),eg=e=>e_(e,"position",eE),ev=new Set(["image","url"]),eb=e=>e_(e,ev,ej),ex=e=>e_(e,"",eS),ew=()=>!0,e_=(e,t,r)=>{let n=Z.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):r(n[2]))},ek=e=>en.test(e)&&!ei.test(e),eE=()=>!1,eS=e=>es.test(e),ej=e=>eo.test(e),eA=function(e,...t){let r,n,i,s=function(a){let l;return n=(r={cache:(e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=new Map,n=new Map,i=(i,s)=>{r.set(i,s),++t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(i(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):i(e,t)}}})((l=t.reduce((e,t)=>t(e),e())).cacheSize),parseClassName:(e=>{let{separator:t,experimentalParseClassName:r}=e,n=1===t.length,i=t[0],s=t.length,o=e=>{let r,o=[],a=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===a){if(c===i&&(n||e.slice(u,u+s)===t)){o.push(e.slice(l,u)),l=u+s;continue}if("/"===c){r=u;continue}}"["===c?a++:"]"===c&&a--}let u=0===o.length?e:e.substring(l),c=u.startsWith("!"),h=c?u.substring(1):u;return{modifiers:o,hasImportantModifier:c,baseClassName:h,maybePostfixModifierPosition:r&&r>l?r-l:void 0}};return r?e=>r({className:e,parseClassName:o}):o})(l),...(e=>{let t=(e=>{let{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return G(Object.entries(e.classGroups),r).forEach(([e,r])=>{K(r,n,e,t)}),n})(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),z(r,t)||(e=>{if(V.test(e)){let t=V.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}})(e)},getConflictingClassGroupIds:(e,t)=>{let i=r[e]||[];return t&&n[e]?[...i,...n[e]]:i}}})(l)}).cache.get,i=r.cache.set,s=o,o(a)};function o(e){let t=n(e);if(t)return t;let s=((e,t)=>{let{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,s=[],o=e.trim().split(Y),a="";for(let e=o.length-1;e>=0;e-=1){let t=o[e],{modifiers:l,hasImportantModifier:u,baseClassName:c,maybePostfixModifierPosition:h}=r(t),d=!!h,f=n(d?c.substring(0,h):c);if(!f){if(!d||!(f=n(c))){a=t+(a.length>0?" "+a:a);continue}d=!1}let p=H(l).join(":"),m=u?p+"!":p,y=m+f;if(s.includes(y))continue;s.push(y);let g=i(f,d);for(let e=0;e<g.length;++e){let t=g[e];s.push(m+t)}a=t+(a.length>0?" "+a:a)}return a})(e,r);return i(e,s),s}return function(){return s(Q.apply(null,arguments))}}(()=>{let e=X("colors"),t=X("spacing"),r=X("blur"),n=X("brightness"),i=X("borderColor"),s=X("borderRadius"),o=X("borderSpacing"),a=X("borderWidth"),l=X("contrast"),u=X("grayscale"),c=X("hueRotate"),h=X("invert"),d=X("gap"),f=X("gradientColorStops"),p=X("gradientColorStopPositions"),m=X("inset"),y=X("margin"),g=X("opacity"),v=X("padding"),b=X("saturate"),x=X("scale"),w=X("sepia"),_=X("skew"),k=X("space"),E=X("translate"),S=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",ef,t],T=()=>[ef,t],P=()=>["",ea,el],C=()=>["auto",eu,ef],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],R=()=>["solid","dashed","dotted","double","none"],N=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",ef],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>[eu,ef];return{cacheSize:500,separator:":",theme:{colors:[ew],spacing:[ea,el],blur:["none","",ep,ef],brightness:I(),borderColor:[e],borderRadius:["none","","full",ep,ef],borderSpacing:T(),borderWidth:P(),contrast:I(),grayscale:D(),hueRotate:I(),invert:D(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[ed,el],inset:A(),margin:A(),opacity:I(),padding:T(),saturate:I(),scale:I(),sepia:D(),skew:I(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",ef]}],container:["container"],columns:[{columns:[ep]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),ef]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",eh,ef]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ef]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",eh,ef]}],"grid-cols":[{"grid-cols":[ew]}],"col-start-end":[{col:["auto",{span:["full",eh,ef]},ef]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[ew]}],"row-start-end":[{row:["auto",{span:[eh,ef]},ef]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ef]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ef]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ef,t]}],"min-w":[{"min-w":[ef,t,"min","max","fit"]}],"max-w":[{"max-w":[ef,t,"none","full","min","max","fit","prose",{screen:[ep]},ep]}],h:[{h:[ef,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ef,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ef,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ef,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ep,el]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ec]}],"font-family":[{font:[ew]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ef]}],"line-clamp":[{"line-clamp":["none",eu,ec]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ea,ef]}],"list-image":[{"list-image":["none",ef]}],"list-style-type":[{list:["none","disc","decimal",ef]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...R(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ea,el]}],"underline-offset":[{"underline-offset":["auto",ea,ef]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ef]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ef]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),eg]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ey]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},eb]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...R(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:R()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...R()]}],"outline-offset":[{"outline-offset":[ea,ef]}],"outline-w":[{outline:[ea,el]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[ea,el]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ep,ex]}],"shadow-color":[{shadow:[ew]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...N(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":N()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ep,ef]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ef]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",ef]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",ef]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[eh,ef]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ef]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ef]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ef]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ea,el,ec]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function eT(...e){return eA(function(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}(e))&&(n&&(n+=" "),n+=t);return n}(e))}let eP={key:"/key.svg",lock:"/lock.svg",shield:"/shield.svg",upload:"/upload.svg",smartphone:"/smartphone.svg",cloud:"/cloud.svg",clock:"/clock.svg",search:"/search.svg",image:"/image.svg",folder:"/Openfolder.svg",refresh:"/RefreshCw.svg",chevronRight:"/ChevronRight.svg"};function eC({name:e,className:t,size:r=24}){return(0,M.jsx)("div",{className:eT("relative inline-block shrink-0",t),style:{width:r,height:r},children:(0,M.jsx)($.default,{src:eP[e],alt:e,fill:!0,className:"object-contain",unoptimized:!0})})}var eO=e.i(96510),eR=e.i(34673);function eN(e){let t=(0,eR.encodeBase64)(e);return t.match(/.{1,8}/g)?.join("-")||t}function eM(e){let t=e.replace(/-/g,"");return(0,eR.decodeBase64)(t)}async function eD(e,t){var r;let n,i,s=(r=new Uint8Array(await e.arrayBuffer()),n=eO.default.randomBytes(eO.default.secretbox.nonceLength),i=eO.default.secretbox(r,n,t),{ciphertext:(0,eR.encodeBase64)(i),nonce:(0,eR.encodeBase64)(n)});return{encrypted:new Blob([(0,eR.decodeBase64)(s.ciphertext)],{type:"application/octet-stream"}),nonce:s.nonce}}async function eF(e,t,r,n){var i;let s,o,a=new Uint8Array(await e.arrayBuffer()),l=(i={ciphertext:(0,eR.encodeBase64)(a),nonce:t},s=(0,eR.decodeBase64)(i.ciphertext),o=(0,eR.decodeBase64)(i.nonce),eO.default.secretbox.open(s,o,r));return l?new Blob([l],{type:n}):null}function eI(e,t){let r=(0,eR.encodeBase64)(e);localStorage.setItem("photovault_secret_key",r)}let eB=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],eL=new Set(eB),eU=(e,t,r)=>r>t?t:r<e?e:r,e$={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},ez={...e$,transform:e=>eU(0,1,e)},eV={...e$,default:1},eK=e=>Math.round(1e5*e)/1e5,eq=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,eW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,eG=(e,t)=>r=>!!("string"==typeof r&&eW.test(r)&&r.startsWith(e)||t&&null!=r&&Object.prototype.hasOwnProperty.call(r,t)),eH=(e,t,r)=>n=>{if("string"!=typeof n)return n;let[i,s,o,a]=n.match(eq);return{[e]:parseFloat(i),[t]:parseFloat(s),[r]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},eY={...e$,transform:e=>Math.round(eU(0,255,e))},eQ={test:eG("rgb","red"),parse:eH("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+eY.transform(e)+", "+eY.transform(t)+", "+eY.transform(r)+", "+eK(ez.transform(n))+")"},eJ={test:eG("#"),parse:function(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}},transform:eQ.transform},eX=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),eZ=eX("deg"),e0=eX("%"),e1=eX("px"),e5=eX("vh"),e2=eX("vw"),e3={...e0,parse:e=>e0.parse(e)/100,transform:e=>e0.transform(100*e)},e6={test:eG("hsl","hue"),parse:eH("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+e0.transform(eK(t))+", "+e0.transform(eK(r))+", "+eK(ez.transform(n))+")"},e8={test:e=>eQ.test(e)||eJ.test(e)||e6.test(e),parse:e=>eQ.test(e)?eQ.parse(e):e6.test(e)?e6.parse(e):eJ.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?eQ.transform(e):e6.transform(e),getAnimatableNone:e=>{let t=e8.parse(e);return t.alpha=0,e8.transform(t)}},e4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,e7="number",e9="color",te=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tt(e){let t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[],s=0,o=t.replace(te,e=>(e8.test(e)?(n.color.push(s),i.push(e9),r.push(e8.parse(e))):e.startsWith("var(")?(n.var.push(s),i.push("var"),r.push(e)):(n.number.push(s),i.push(e7),r.push(parseFloat(e))),++s,"${}")).split("${}");return{values:r,split:o,indexes:n,types:i}}function tr(e){return tt(e).values}function tn(e){let{split:t,types:r}=tt(e),n=t.length;return e=>{let i="";for(let s=0;s<n;s++)if(i+=t[s],void 0!==e[s]){let t=r[s];t===e7?i+=eK(e[s]):t===e9?i+=e8.transform(e[s]):i+=e[s]}return i}}let ti=e=>"number"==typeof e?0:e8.test(e)?e8.getAnimatableNone(e):e,ts={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(eq)?.length||0)+(e.match(e4)?.length||0)>0},parse:tr,createTransformer:tn,getAnimatableNone:function(e){let t=tr(e);return tn(e)(t.map(ti))}},to=new Set(["brightness","contrast","saturate","opacity"]);function ta(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[n]=r.match(eq)||[];if(!n)return e;let i=r.replace(n,""),s=+!!to.has(t);return n!==r&&(s*=100),t+"("+s+i+")"}let tl=/\b([a-z-]*)\(.*?\)/gu,tu={...ts,getAnimatableNone:e=>{let t=e.match(tl);return t?t.map(ta).join(" "):e}},tc={...e$,transform:Math.round},th={borderWidth:e1,borderTopWidth:e1,borderRightWidth:e1,borderBottomWidth:e1,borderLeftWidth:e1,borderRadius:e1,radius:e1,borderTopLeftRadius:e1,borderTopRightRadius:e1,borderBottomRightRadius:e1,borderBottomLeftRadius:e1,width:e1,maxWidth:e1,height:e1,maxHeight:e1,top:e1,right:e1,bottom:e1,left:e1,inset:e1,insetBlock:e1,insetBlockStart:e1,insetBlockEnd:e1,insetInline:e1,insetInlineStart:e1,insetInlineEnd:e1,padding:e1,paddingTop:e1,paddingRight:e1,paddingBottom:e1,paddingLeft:e1,paddingBlock:e1,paddingBlockStart:e1,paddingBlockEnd:e1,paddingInline:e1,paddingInlineStart:e1,paddingInlineEnd:e1,margin:e1,marginTop:e1,marginRight:e1,marginBottom:e1,marginLeft:e1,marginBlock:e1,marginBlockStart:e1,marginBlockEnd:e1,marginInline:e1,marginInlineStart:e1,marginInlineEnd:e1,backgroundPositionX:e1,backgroundPositionY:e1,rotate:eZ,rotateX:eZ,rotateY:eZ,rotateZ:eZ,scale:eV,scaleX:eV,scaleY:eV,scaleZ:eV,skew:eZ,skewX:eZ,skewY:eZ,distance:e1,translateX:e1,translateY:e1,translateZ:e1,x:e1,y:e1,z:e1,perspective:e1,transformPerspective:e1,opacity:ez,originX:e3,originY:e3,originZ:e1,zIndex:tc,fillOpacity:ez,strokeOpacity:ez,numOctaves:tc},td={...th,color:e8,backgroundColor:e8,outlineColor:e8,fill:e8,stroke:e8,borderColor:e8,borderTopColor:e8,borderRightColor:e8,borderBottomColor:e8,borderLeftColor:e8,filter:tu,WebkitFilter:tu},tf=e=>td[e],tp=()=>({translate:0,scale:1,origin:0,originPoint:0}),tm=()=>({x:tp(),y:tp()}),ty=()=>({min:0,max:0}),tg=()=>({x:ty(),y:ty()}),tv=e=>!!(e&&e.getVelocity),tb=new Set(["width","height","top","left","right","bottom",...eB]),tx=e=>t=>t.test(e),tw=[e$,e1,e0,eZ,e2,e5,{test:e=>"auto"===e,parse:e=>e}],t_=e=>tw.find(tx(e));var tk=e.i(47167);let tE=()=>{},tS=()=>{};tk.default;let tj=e=>t=>"string"==typeof t&&t.startsWith(e),tA=tj("--"),tT=tj("var(--"),tP=e=>!!tT(e)&&tC.test(e.split("/*")[0].trim()),tC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function tO(e){return"string"==typeof e&&e.split("/*")[0].includes("var(--")}let tR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,tN=e=>180*e/Math.PI,tM=e=>tF(tN(Math.atan2(e[1],e[0]))),tD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:tM,rotateZ:tM,skewX:e=>tN(Math.atan(e[1])),skewY:e=>tN(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},tF=e=>((e%=360)<0&&(e+=360),e),tI=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),tB=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),tL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tI,scaleY:tB,scale:e=>(tI(e)+tB(e))/2,rotateX:e=>tF(tN(Math.atan2(e[6],e[5]))),rotateY:e=>tF(tN(Math.atan2(-e[2],e[0]))),rotateZ:tM,rotate:tM,skewX:e=>tN(Math.atan(e[4])),skewY:e=>tN(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function tU(e){return+!!e.includes("scale")}function t$(e,t){let r,n;if(!e||"none"===e)return tU(t);let i=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(i)r=tL,n=i;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=tD,n=t}if(!n)return tU(t);let s=r[t],o=n[1].split(",").map(tz);return"function"==typeof s?s(o):o[s]}function tz(e){return parseFloat(e.trim())}let tV=e=>e===e$||e===e1,tK=new Set(["x","y","z"]),tq=eB.filter(e=>!tK.has(e)),tW={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>t$(t,"x"),y:(e,{transform:t})=>t$(t,"y")};tW.translateX=tW.x,tW.translateY=tW.y;let tG=e=>e,tH={},tY=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function tQ(e,t){let r=!1,n=!0,i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=tY.reduce((e,r)=>(e[r]=function(e,t){let r=new Set,n=new Set,i=!1,s=!1,o=new WeakSet,a={delta:0,timestamp:0,isProcessing:!1},l=0;function u(t){o.has(t)&&(c.schedule(t),e()),l++,t(a)}let c={schedule:(e,t=!1,s=!1)=>{let a=s&&i?r:n;return t&&o.add(e),a.has(e)||a.add(e),e},cancel:e=>{n.delete(e),o.delete(e)},process:e=>{if(a=e,i){s=!0;return}i=!0,[r,n]=[n,r],r.forEach(u),t,l=0,r.clear(),i=!1,s&&(s=!1,c.process(e))}};return c}(s,t?r:void 0),e),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:d,render:f,postRender:p}=o,m=()=>{let s=tH.useManualTiming?i.timestamp:performance.now();r=!1,tH.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(s-i.timestamp,40),1)),i.timestamp=s,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),h.process(i),d.process(i),f.process(i),p.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(m))};return{schedule:tY.reduce((t,s)=>{let a=o[s];return t[s]=(t,s=!1,o=!1)=>(!r&&(r=!0,n=!0,i.isProcessing||e(m)),a.schedule(t,s,o)),t},{}),cancel:e=>{for(let t=0;t<tY.length;t++)o[tY[t]].cancel(e)},state:i,steps:o}}let{schedule:tJ,cancel:tX,state:tZ,steps:t0}=tQ("u">typeof requestAnimationFrame?requestAnimationFrame:tG,!0),t1=new Set,t5=!1,t2=!1,t3=!1;function t6(){if(t2){let e=Array.from(t1).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{let t,n=(t=[],tq.forEach(r=>{let n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(+!!r.startsWith("scale")))}),t);n.length&&(r.set(e,n),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=r.get(e);t&&t.forEach(([t,r])=>{e.getValue(t)?.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}t2=!1,t5=!1,t1.forEach(e=>e.complete(t3)),t1.clear()}function t8(){t1.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(t2=!0)})}class t4{constructor(e,t,r,n,i,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=n,this.element=i,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(t1.add(this),t5||(t5=!0,tJ.read(t8),tJ.resolveKeyframes(t6))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:r,motionValue:n}=this;if(null===e[0]){let i=n?.get(),s=e[e.length-1];if(void 0!==i)e[0]=i;else if(r&&t){let n=r.readValue(t,s);null!=n&&(e[0]=n)}void 0===e[0]&&(e[0]=s),n&&void 0===i&&n.set(e[0])}for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),t1.delete(this)}cancel(){"scheduled"===this.state&&(t1.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function t7(e,t){let r=tf(e);return r!==tu&&(r=ts),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let t9=new Set(["auto","none","0"]);class re extends t4{constructor(e,t,r,n,i){super(e,t,r,n,i,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let r=0;r<e.length;r++){let n=e[r];if("string"==typeof n&&tP(n=n.trim())){let i=function e(t,r,n=1){tS(n<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[i,s]=function(e){let t=tR.exec(e);if(!t)return[,];let[,r,n,i]=t;return[`--${r??n}`,i]}(t);if(!i)return;let o=window.getComputedStyle(r).getPropertyValue(i);if(o){let e=o.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e)?parseFloat(e):e}return tP(s)?e(s,r,n+1):s}(n,t.current);void 0!==i&&(e[r]=i),r===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!tb.has(r)||2!==e.length)return;let[n,i]=e,s=t_(n),o=t_(i);if(tO(n)!==tO(i)&&tW[r]){this.needsMeasurement=!0;return}if(s!==o)if(tV(s)&&tV(o))for(let t=0;t<e.length;t++){let r=e[t];"string"==typeof r&&(e[t]=parseFloat(r))}else tW[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,r=[];for(let t=0;t<e.length;t++)(null===e[t]||function(e){if("number"==typeof e)return 0===e;if(null===e)return!0;return"none"===e||"0"===e||/^0[^.\s]+$/u.test(e)}(e[t]))&&r.push(t);r.length&&function(e,t,r){let n,i=0;for(;i<e.length&&!n;){let t=e[i];"string"==typeof t&&!t9.has(t)&&tt(t).values.length&&(n=e[i]),i++}if(n&&r)for(let i of t)e[i]=t7(r,n)}(e,r,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=tW[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let n=t[t.length-1];void 0!==n&&e.getValue(r,n).jump(n,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;let n=e.getValue(t);n&&n.jump(this.measuredOrigin,!1);let i=r.length-1,s=r[i];r[i]=tW[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,r])=>{e.getValue(t).set(r)}),this.resolveNoneKeyframes()}}function rt(e,t){-1===e.indexOf(t)&&e.push(t)}function rr(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class rn{constructor(){this.subscriptions=[]}add(e){return rt(this.subscriptions,e),()=>rr(this.subscriptions,e)}notify(e,t,r){let n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,r);else for(let i=0;i<n;i++){let n=this.subscriptions[i];n&&n(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let{schedule:ri}=tQ(queueMicrotask,!1);function rs(){t=void 0}let ro={now:()=>(void 0===t&&ro.set(tZ.isProcessing||tH.useManualTiming?tZ.timestamp:performance.now()),t),set:e=>{t=e,queueMicrotask(rs)}};class ra{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=ro.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ro.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new rn);let r=this.events[e].add(t);return"change"===e?()=>{r(),tJ.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return o&&o.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=ro.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let r=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),r?1e3/r*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rl(e,t){return new ra(e,t)}let ru=[...tw,e8,ts],rc={current:null},rh={current:!1},rd="u">typeof window,rf=new WeakMap;function rp(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function rm(e){return"string"==typeof e||Array.isArray(e)}let ry=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rg=["initial",...ry];function rv(e){return rp(e.animate)||rg.some(t=>rm(e[t]))}function rb(e){return!!(rv(e)||e.variants)}function rx(e){let t=[{},{}];return e?.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function rw(e,t,r,n){if("function"==typeof t){let[i,s]=rx(n);t=t(void 0!==r?r:e.custom,i,s)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[i,s]=rx(n);t=t(void 0!==r?r:e.custom,i,s)}return t}let r_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],rk={};class rE{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=t4,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=ro.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,tJ.render(this.render,!1,!0))};const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=rv(t),this.isVariantNode=rb(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(t,{},this);for(const e in c){const t=c[e];void 0!==a[e]&&tv(t)&&t.set(a[e])}}mount(e){this.current=e,rf.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(rh.current||function(){if(rh.current=!0,rd)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>rc.current=e.matches;e.addEventListener("change",t),t()}else rc.current=!1}(),this.shouldReduceMotion=rc.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),tX(this.notifyUpdate),tX(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){let r;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let n=eL.has(e);n&&this.onBindTransform&&this.onBindTransform();let i=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&tJ.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});"u">typeof window&&window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in rk){let t=rk[e];if(!t)continue;let{isEnabled:r,Feature:n}=t;if(!this.features[e]&&n&&r(this.props)&&(this.features[e]=new n(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tg()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<r_.length;t++){let r=r_[t];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);let n=e["on"+r];n&&(this.propEventSubscriptions[r]=this.on(r,n))}this.prevMotionValues=function(e,t,r){for(let n in t){let i=t[n],s=r[n];if(tv(i))e.addValue(n,i);else if(tv(s))e.addValue(n,rl(i,{owner:e}));else if(s!==i)if(e.hasValue(n)){let t=e.getValue(n);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{let t=e.getStaticValue(n);e.addValue(n,rl(void 0!==t?t:i,{owner:e}))}}for(let n in r)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=rl(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];if(null!=r){let n,i;if("string"==typeof r&&(n=r,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n)||(i=r,/^0[^.\s]+$/u.test(i))))r=parseFloat(r);else{let n;n=r,!ru.find(tx(n))&&ts.test(t)&&(r=t7(e,t))}this.setBaseTarget(e,tv(r)?r.get():r)}return tv(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let t,{initial:r}=this.props;if("string"==typeof r||"object"==typeof r){let n=rw(this.props,r,this.presenceContext?.custom);n&&(t=n[e])}if(r&&void 0!==t)return t;let n=this.getBaseTargetFromProps(this.props,e);return void 0===n||tv(n)?void 0!==this.initialValues[e]&&void 0===t?void 0:this.baseTarget[e]:n}on(e,t){return this.events[e]||(this.events[e]=new rn),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){ri.render(this.render)}}class rS extends rE{constructor(){super(...arguments),this.KeyframeResolver=re}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){let r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;tv(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function rj(e){return e.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}let rA=(e,t)=>t&&"number"==typeof e?t.transform(e):e,rT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rP=eB.length;function rC(e,t,r){let{style:n,vars:i,transformOrigin:s}=e,o=!1,a=!1;for(let e in t){let r=t[e];if(eL.has(e)){o=!0;continue}if(tA(e)){i[e]=r;continue}{let t=rA(r,th[e]);e.startsWith("origin")?(a=!0,s[e]=t):n[e]=t}}if(!t.transform&&(o||r?n.transform=function(e,t,r){let n="",i=!0;for(let s=0;s<rP;s++){let o=eB[s],a=e[o];if(void 0===a)continue;let l=!0;if("number"==typeof a)l=a===+!!o.startsWith("scale");else{let e=parseFloat(a);l=o.startsWith("scale")?1===e:0===e}if(!l||r){let e=rA(a,th[o]);if(!l){i=!1;let t=rT[o]||o;n+=`${t}(${e}) `}r&&(t[o]=e)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}(t,e.transform,r):n.transform&&(n.transform="none")),a){let{originX:e="50%",originY:t="50%",originZ:r=0}=s;n.transformOrigin=`${e} ${t} ${r}`}}let rO={offset:"stroke-dashoffset",array:"stroke-dasharray"},rR={offset:"strokeDashoffset",array:"strokeDasharray"},rN=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function rM(e,{attrX:t,attrY:r,attrScale:n,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(rC(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:h,style:d}=e;for(let e of(h.transform&&(d.transform=h.transform,delete h.transform),(d.transform||h.transformOrigin)&&(d.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),d.transform&&(d.transformBox=c?.transformBox??"fill-box",delete h.transformBox),rN))void 0!==h[e]&&(d[e]=h[e],delete h[e]);void 0!==t&&(h.x=t),void 0!==r&&(h.y=r),void 0!==n&&(h.scale=n),void 0!==i&&function(e,t,r=1,n=0,i=!0){e.pathLength=1;let s=i?rO:rR;e[s.offset]=`${-n}`,e[s.array]=`${t} ${r}`}(h,i,s,o,!1)}let rD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),rF=e=>"string"==typeof e&&"svg"===e.toLowerCase();function rI(e,{style:t,vars:r},n,i){let s,o=e.style;for(s in t)o[s]=t[s];for(s in i?.applyProjectionStyles(o,n),r)o.setProperty(s,r[s])}function rB(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let rL={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!e1.test(e))return e;else e=parseFloat(e);let r=rB(e,t.target.x),n=rB(e,t.target.y);return`${r}% ${n}%`}},rU=(e,t,r)=>e+(t-e)*r,r$={borderRadius:{...rL,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rL,borderTopRightRadius:rL,borderBottomLeftRadius:rL,borderBottomRightRadius:rL,boxShadow:{correct:(e,{treeScale:t,projectionDelta:r})=>{let n=ts.parse(e);if(n.length>5)return e;let i=ts.createTransformer(e),s=+("number"!=typeof n[0]),o=r.x.scale*t.x,a=r.y.scale*t.y;n[0+s]/=o,n[1+s]/=a;let l=rU(o,a,.5);return"number"==typeof n[2+s]&&(n[2+s]/=l),"number"==typeof n[3+s]&&(n[3+s]/=l),i(n)}}};function rz(e,{layout:t,layoutId:r}){return eL.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!r$[e]||"opacity"===e)}function rV(e,t,r){let n=e.style,i=t?.style,s={};if(!n)return s;for(let t in n)(tv(n[t])||i&&tv(i[t])||rz(t,e)||r?.getValue(t)?.liveStyle!==void 0)&&(s[t]=n[t]);return s}function rK(e,t,r){let n=rV(e,t,r);for(let r in e)(tv(e[r])||tv(t[r]))&&(n[-1!==eB.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]);return n}class rq extends rS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tg}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(eL.has(t)){let e=tf(t);return e&&e.default||0}return t=rD.has(t)?t:rj(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return rK(e,t,r)}build(e,t,r){rM(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,n){for(let r in rI(e,t,void 0,n),t.attrs)e.setAttribute(rD.has(r)?r:rj(r),t.attrs[r])}mount(e){this.isSVGTag=rF(e.tagName),super.mount(e)}}function rW({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function rG(e){return void 0===e||1===e}function rH({scale:e,scaleX:t,scaleY:r}){return!rG(e)||!rG(t)||!rG(r)}function rY(e){return rH(e)||rQ(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function rQ(e){var t,r;return(t=e.x)&&"0%"!==t||(r=e.y)&&"0%"!==r}function rJ(e,t,r,n,i){return void 0!==i&&(e=n+i*(e-n)),n+r*(e-n)+t}function rX(e,t=0,r=1,n,i){e.min=rJ(e.min,t,r,n,i),e.max=rJ(e.max,t,r,n,i)}function rZ(e,{x:t,y:r}){rX(e.x,t.translate,t.scale,t.originPoint),rX(e.y,r.translate,r.scale,r.originPoint)}function r0(e,t){e.min=e.min+t,e.max=e.max+t}function r1(e,t,r,n,i=.5){let s=rU(e.min,e.max,i);rX(e,t,r,s,n)}function r5(e,t){r1(e.x,t.x,t.scaleX,t.scale,t.originX),r1(e.y,t.y,t.scaleY,t.scale,t.originY)}function r2(e,t){return rW(function(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}class r3 extends rS{constructor(){super(...arguments),this.type="html",this.renderInstance=rI}readValueFromInstance(e,t){if(eL.has(t))return this.projection?.isProjecting?tU(t):((e,t)=>{let{transform:r="none"}=getComputedStyle(e);return t$(r,t)})(e,t);{let r=window.getComputedStyle(e),n=(tA(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof n?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:t}){return r2(e,t)}build(e,t,r){rC(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return rV(e,t,r)}}let r6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function r8(e){if("string"!=typeof e||e.includes("-"));else if(r6.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let r4=(0,D.createContext)({}),r7=(0,D.createContext)({strict:!1}),r9=(0,D.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ne=(0,D.createContext)({});function nt(e){return Array.isArray(e)?e.join(" "):e}let nr=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nn(e,t,r){for(let n in t)tv(t[n])||rz(n,r)||(e[n]=t[n])}let ni=()=>({...nr(),attrs:{}}),ns=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function no(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ns.has(e)}let na=e=>!no(e);try{a=(()=>{let e=Error("Cannot find module '@emotion/is-prop-valid'");throw e.code="MODULE_NOT_FOUND",e})().default,"function"==typeof a&&(na=e=>e.startsWith("on")?!no(e):a(e))}catch{}function nl(e){return tv(e)?e.get():e}let nu=(0,D.createContext)(null),nc=e=>(t,r)=>{let n,i=(0,D.useContext)(ne),s=(0,D.useContext)(nu),o=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,i){return{latestValues:function(e,t,r,n){let i={},s=n(e,{});for(let e in s)i[e]=nl(s[e]);let{initial:o,animate:a}=e,l=rv(e),u=rb(e);t&&u&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let c=!!r&&!1===r.initial,h=(c=c||!1===o)?a:o;if(h&&"boolean"!=typeof h&&!rp(h)){let t=Array.isArray(h)?h:[h];for(let r=0;r<t.length;r++){let n=rw(e,t[r]);if(n){let{transitionEnd:e,transition:t,...r}=n;for(let e in r){let t=r[e];if(Array.isArray(t)){let e=c?t.length-1:0;t=t[e]}null!==t&&(i[e]=t)}for(let t in e)i[t]=e[t]}}}return i}(r,n,i,e),renderState:t()}})(e,t,i,s);return r?o():(null===(n=(0,D.useRef)(null)).current&&(n.current=o()),n.current)},nh=nc({scrapeMotionValuesFromProps:rV,createRenderState:nr}),nd=nc({scrapeMotionValuesFromProps:rK,createRenderState:ni}),nf="u">typeof window,np={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nm=!1;function ny(){return!function(){if(nm)return;let e={};for(let t in np)e[t]={isEnabled:e=>np[t].some(t=>!!e[t])};rk=e,nm=!0}(),rk}let ng=Symbol.for("motionComponentSymbol"),nv="data-"+rj("framerAppearId"),nb=(0,D.createContext)({});function nx(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let nw=nf?D.useLayoutEffect:D.useEffect;function n_(e,{forwardMotionProps:t=!1,type:r}={},n,i){n&&function(e){let t=ny();for(let r in e)t[r]={...t[r],...e[r]};rk=t}(n);let s=r?"svg"===r:r8(e),o=s?nd:nh;function a(r,n){var a;let l,u,c,h={...(0,D.useContext)(r9),...r,layoutId:function({layoutId:e}){let t=(0,D.useContext)(r4).id;return t&&void 0!==e?t+"-"+e:e}(r)},{isStatic:d}=h,f=function(e){let{initial:t,animate:r}=function(e,t){if(rv(e)){let{initial:t,animate:r}=e;return{initial:!1===t||rm(t)?t:void 0,animate:rm(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,D.useContext)(ne));return(0,D.useMemo)(()=>({initial:t,animate:r}),[nt(t),nt(r)])}(r),p=o(r,d);if(!d&&nf){(0,D.useContext)(r7).strict;let t=function(e){let{drag:t,layout:r}=ny();if(!t&&!r)return{};let n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(h);l=t.MeasureLayout,f.visualElement=function(e,t,r,n,i,s){let{visualElement:o}=(0,D.useContext)(ne),a=(0,D.useContext)(r7),l=(0,D.useContext)(nu),u=(0,D.useContext)(r9).reducedMotion,c=(0,D.useRef)(null);n=n||a.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:o,props:r,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:u,isSVG:s}));let h=c.current,d=(0,D.useContext)(nb);h&&!h.projection&&i&&("html"===h.type||"svg"===h.type)&&function(e,t,r,n){let{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&nx(a),visualElement:e,animationType:"string"==typeof s?s:"both",initialPromotionConfig:n,crossfade:c,layoutScroll:l,layoutRoot:u})}(c.current,r,i,d);let f=(0,D.useRef)(!1);(0,D.useInsertionEffect)(()=>{h&&f.current&&h.update(r,l)});let p=r[nv],m=(0,D.useRef)(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return nw(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),m.current&&h.animationState&&h.animationState.animateChanges())}),(0,D.useEffect)(()=>{h&&(!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),m.current=!1),h.enteringChildren=void 0)}),h}(e,p,h,i,t.ProjectionNode,s)}return(0,M.jsxs)(ne.Provider,{value:f,children:[l&&f.visualElement?(0,M.jsx)(l,{visualElement:f.visualElement,...h}):null,function(e,t,r,{latestValues:n},i,s=!1,o){let a=(o??r8(e)?function(e,t,r,n){let i=(0,D.useMemo)(()=>{let r=ni();return rM(r,t,rF(n),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let t={};nn(t,e.style,e),i.style={...t,...i.style}}return i}:function(e,t){let r,n,i={},s=(r=e.style||{},nn(n={},r,e),Object.assign(n,function({transformTemplate:e},t){return(0,D.useMemo)(()=>{let r=nr();return rC(r,t,e),Object.assign({},r.vars,r.style)},[t])}(e,t)),n);return e.drag&&!1!==e.dragListener&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=s,i})(t,n,i,e),l=function(e,t,r){let n={};for(let i in e)("values"!==i||"object"!=typeof e.values)&&(na(i)||!0===r&&no(i)||!t&&!no(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}(t,"string"==typeof e,s),u=e!==D.Fragment?{...l,...a,ref:r}:{},{children:c}=t,h=(0,D.useMemo)(()=>tv(c)?c.get():c,[c]);return(0,D.createElement)(e,{...u,children:h})}(e,r,(a=f.visualElement,u=(0,D.useRef)(n),(0,D.useInsertionEffect)(()=>{u.current=n}),c=(0,D.useRef)(null),(0,D.useCallback)(e=>{e&&p.onMount?.(e),a&&(e?a.mount(e):a.unmount());let t=u.current;if("function"==typeof t)if(e){let r=t(e);"function"==typeof r&&(c.current=r)}else c.current?(c.current(),c.current=null):t(e);else t&&(t.current=e)},[a])),p,d,t,s)]})}a.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;let l=(0,D.forwardRef)(a);return l[ng]=e,l}class nk{constructor(e){this.isMounted=!1,this.node=e}update(){}}function nE(e,t,r){let n=e.getProps();return rw(n,t,void 0!==r?r:n.custom,e)}function nS(e,t){return e?.[t]??e?.default??e}let nj=e=>Array.isArray(e);function nA(e,t){let r=e.getValue("willChange");if(tv(r)&&r.add)return r.add(t);if(!r&&tH.WillChange){let r=new tH.WillChange("auto");e.addValue("willChange",r),r.add(t)}}let nT=e=>1e3*e,nP=(e,t)=>r=>t(e(r)),nC=(...e)=>e.reduce(nP),nO={layout:0,mainThread:0,waapi:0};function nR(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function nN(e,t){return r=>r>0?t:e}let nM=(e,t,r)=>{let n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},nD=[eJ,eQ,e6];function nF(e){let t=nD.find(t=>t.test(e));if(tE(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let r=t.parse(e);return t===e6&&(r=function({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let i=0,s=0,o=0;if(t/=100){let n=r<.5?r*(1+t):r+t-r*t,a=2*r-n;i=nR(a,n,e+1/3),s=nR(a,n,e),o=nR(a,n,e-1/3)}else i=s=o=r;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*o),alpha:n}}(r)),r}let nI=(e,t)=>{let r=nF(e),n=nF(t);if(!r||!n)return nN(e,t);let i={...r};return e=>(i.red=nM(r.red,n.red,e),i.green=nM(r.green,n.green,e),i.blue=nM(r.blue,n.blue,e),i.alpha=rU(r.alpha,n.alpha,e),eQ.transform(i))},nB=new Set(["none","hidden"]);function nL(e,t){return r=>rU(e,t,r)}function nU(e){return"number"==typeof e?nL:"string"==typeof e?tP(e)?nN:e8.test(e)?nI:nV:Array.isArray(e)?n$:"object"==typeof e?e8.test(e)?nI:nz:nN}function n$(e,t){let r=[...e],n=r.length,i=e.map((e,r)=>nU(e)(e,t[r]));return e=>{for(let t=0;t<n;t++)r[t]=i[t](e);return r}}function nz(e,t){let r={...e,...t},n={};for(let i in r)void 0!==e[i]&&void 0!==t[i]&&(n[i]=nU(e[i])(e[i],t[i]));return e=>{for(let t in n)r[t]=n[t](e);return r}}let nV=(e,t)=>{let r=ts.createTransformer(t),n=tt(e),i=tt(t);if(!(n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length))return tE(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),nN(e,t);if(nB.has(e)&&!i.values.length||nB.has(t)&&!n.values.length)return nB.has(e)?r=>r<=0?e:t:r=>r>=1?t:e;return nC(n$(function(e,t){let r=[],n={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){let s=t.types[i],o=e.indexes[s][n[s]],a=e.values[o]??0;r[i]=a,n[s]++}return r}(n,i),i.values),r)};function nK(e,t,r){return"number"==typeof e&&"number"==typeof t&&"number"==typeof r?rU(e,t,r):nU(e)(e,t)}let nq=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>tJ.update(t,e),stop:()=>tX(t),now:()=>tZ.isProcessing?tZ.timestamp:ro.now()}},nW=(e,t,r=10)=>{let n="",i=Math.max(Math.round(t/r),2);for(let t=0;t<i;t++)n+=Math.round(1e4*e(t/(i-1)))/1e4+", ";return`linear(${n.substring(0,n.length-2)})`};function nG(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}function nH(e,t,r){var n,i;let s=Math.max(t-5,0);return n=r-e(s),(i=t-s)?1e3/i*n:0}let nY=.01,nQ=2,nJ=.005,nX=.5;function nZ(e,t){return e*Math.sqrt(1-t*t)}let n0=["duration","bounce"],n1=["stiffness","damping","mass"];function n5(e,t){return t.some(t=>void 0!==e[t])}function n2(e=.3,t=.3){let r,n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:i,restDelta:s}=n,o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:o},{stiffness:u,damping:c,mass:h,duration:d,velocity:f,isResolvedFromDuration:p}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!n5(e,n1)&&n5(e,n0))if(e.visualDuration){let r=2*Math.PI/(1.2*e.visualDuration),n=r*r,i=2*eU(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:1,stiffness:n,damping:i}}else{let r=function({duration:e=800,bounce:t=.3,velocity:r=0,mass:n=1}){let i,s;tE(e<=nT(10),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-t;o=eU(.05,1,o),e=eU(.01,10,e/1e3),o<1?(i=t=>{let n=t*o,i=n*e;return .001-(n-r)/nZ(t,o)*Math.exp(-i)},s=t=>{let n=t*o*e,s=Math.pow(o,2)*Math.pow(t,2)*e,a=Math.exp(-n),l=nZ(Math.pow(t,2),o);return(n*r+r-s)*a*(-i(t)+.001>0?-1:1)/l}):(i=t=>-.001+Math.exp(-t*e)*((t-r)*e+1),s=t=>e*e*(r-t)*Math.exp(-t*e));let a=function(e,t,r){let n=r;for(let r=1;r<12;r++)n-=e(n)/t(n);return n}(i,s,5/e);if(e=nT(e),isNaN(a))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(a,2)*n;return{stiffness:t,damping:2*o*Math.sqrt(n*t),duration:e}}}(e);(t={...t,...r,mass:1}).isResolvedFromDuration=!0}return t}({...n,velocity:-((n.velocity||0)/1e3)}),m=f||0,y=c/(2*Math.sqrt(u*h)),g=a-o,v=Math.sqrt(u/h)/1e3,b=5>Math.abs(g);if(i||(i=b?nY:nQ),s||(s=b?nJ:nX),y<1){let e=nZ(v,y);r=t=>a-Math.exp(-y*v*t)*((m+y*v*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}else if(1===y)r=e=>a-Math.exp(-v*e)*(g+(m+v*g)*e);else{let e=v*Math.sqrt(y*y-1);r=t=>{let r=Math.exp(-y*v*t),n=Math.min(e*t,300);return a-r*((m+y*v*g)*Math.sinh(n)+e*g*Math.cosh(n))/e}}let x={calculatedDuration:p&&d||null,next:e=>{let t=r(e);if(p)l.done=e>=d;else{let n=0===e?m:0;y<1&&(n=0===e?nT(m):nH(r,e,t));let o=Math.abs(a-t)<=s;l.done=Math.abs(n)<=i&&o}return l.value=l.done?a:t,l},toString:()=>{let e=Math.min(nG(x),2e4),t=nW(t=>x.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return x}function n3({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){let h,d,f=e[0],p={done:!1,value:f},m=r*t,y=f+m,g=void 0===o?y:o(y);g!==y&&(m=g-f);let v=e=>-m*Math.exp(-e/n),b=e=>g+v(e),x=e=>{let t=v(e),r=b(e);p.done=Math.abs(t)<=u,p.value=p.done?g:r},w=e=>{let t;if(t=p.value,void 0!==a&&t<a||void 0!==l&&t>l){var r;h=e,d=n2({keyframes:[p.value,(r=p.value,void 0===a?l:void 0===l||Math.abs(a-r)<Math.abs(l-r)?a:l)],velocity:nH(b,e,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:c})}};return w(0),{calculatedDuration:null,next:e=>{let t=!1;return(d||void 0!==h||(t=!0,x(e),w(e)),void 0!==h&&e>=h)?d.next(e-h):(t||x(e),p)}}}n2.applyToOptions=e=>{let t=function(e,t=100,r){let n=r({...e,keyframes:[0,t]}),i=Math.min(nG(n),2e4);return{type:"keyframes",ease:e=>n.next(i*e).value/t,duration:i/1e3}}(e,100,n2);return e.ease=t.ease,e.duration=nT(t.duration),e.type="keyframes",e};let n6=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function n8(e,t,r,n){return e===t&&r===n?tG:i=>0===i||1===i?i:n6(function(e,t,r,n,i){let s,o,a=0;do(s=n6(o=t+(r-t)/2,n,i)-e)>0?r=o:t=o;while(Math.abs(s)>1e-7&&++a<12)return o}(i,0,1,e,r),t,n)}let n4=n8(.42,0,1,1),n7=n8(0,0,.58,1),n9=n8(.42,0,.58,1),ie=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,it=e=>t=>1-e(1-t),ir=n8(.33,1.53,.69,.99),ii=it(ir),is=ie(ii),io=e=>(e*=2)<1?.5*ii(e):.5*(2-Math.pow(2,-10*(e-1))),ia=e=>1-Math.sin(Math.acos(e)),il=it(ia),iu=ie(ia),ic=e=>Array.isArray(e)&&"number"==typeof e[0],ih={linear:tG,easeIn:n4,easeInOut:n9,easeOut:n7,circIn:ia,circInOut:iu,circOut:il,backIn:ii,backInOut:is,backOut:ir,anticipate:io},id=e=>{if(ic(e)){tS(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[t,r,n,i]=e;return n8(t,r,n,i)}return"string"==typeof e?(tS(void 0!==ih[e],`Invalid easing type '${e}'`,"invalid-easing-type"),ih[e]):e},ip=(e,t,r)=>{let n=t-e;return 0===n?1:(r-e)/n};function im({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){var i;let s,o=Array.isArray(n)&&"number"!=typeof n[0]?n.map(id):id(n),a={done:!1,value:t[0]},l=function(e,t,{clamp:r=!0,ease:n,mixer:i}={}){let s=e.length;if(tS(s===t.length,"Both input and output ranges must be the same length","range-length"),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];let o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());let a=function(e,t,r){let n=[],i=r||tH.mix||nK,s=e.length-1;for(let r=0;r<s;r++){let s=i(e[r],e[r+1]);t&&(s=nC(Array.isArray(t)?t[r]||tG:t,s)),n.push(s)}return n}(t,n,i),l=a.length,u=r=>{if(o&&r<e[0])return t[0];let n=0;if(l>1)for(;n<e.length-2&&!(r<e[n+1]);n++);let i=ip(e[n],e[n+1],r);return a[n](i)};return r?t=>u(eU(e[0],e[s-1],t)):u}((i=r&&r.length===t.length?r:(!function(e,t){let r=e[e.length-1];for(let n=1;n<=t;n++){let i=ip(0,t,n);e.push(rU(r,1,i))}}(s=[0],t.length-1),s),i.map(t=>t*e)),t,{ease:Array.isArray(o)?o:t.map(()=>o||n9).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(a.value=l(t),a.done=t>=e,a)}}let iy=e=>null!==e;function ig(e,{repeat:t,repeatType:r="loop"},n,i=1){let s=e.filter(iy),o=i<0||t&&"loop"!==r&&t%2==1?0:s.length-1;return o&&void 0!==n?n:s[o]}let iv={decay:n3,inertia:n3,tween:im,keyframes:im,spring:n2};function ib(e){"string"==typeof e.type&&(e.type=iv[e.type])}class ix{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}let iw=e=>e/100;class i_ extends ix{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==ro.now()&&this.tick(ro.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},nO.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){let{options:e}=this;ib(e);let{type:t=im,repeat:r=0,repeatDelay:n=0,repeatType:i,velocity:s=0}=e,{keyframes:o}=e,a=t||im;a!==im&&"number"!=typeof o[0]&&(this.mixKeyframes=nC(iw,nK(o[0],o[1])),o=[0,100]);let l=a({...e,keyframes:o});"mirror"===i&&(this.mirroredGenerator=a({...e,keyframes:[...o].reverse(),velocity:-s})),null===l.calculatedDuration&&(l.calculatedDuration=nG(l));let{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+n,this.totalDuration=this.resolvedDuration*(r+1)-n,this.generator=l}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){let{generator:r,totalDuration:n,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:a}=this;if(null===this.startTime)return r.next(0);let{delay:l=0,keyframes:u,repeat:c,repeatType:h,repeatDelay:d,type:f,onUpdate:p,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let y=this.currentTime-l*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?y<0:y>n;this.currentTime=Math.max(y,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=n);let v=this.currentTime,b=r;if(c){let e=Math.min(this.currentTime,n)/o,t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,(t=Math.min(t,c+1))%2&&("reverse"===h?(r=1-r,d&&(r-=d/o)):"mirror"===h&&(b=s)),v=eU(0,1,r)*o}let x=g?{done:!1,value:u[0]}:b.next(v);i&&(x.value=i(x.value));let{done:w}=x;g||null===a||(w=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);let _=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return _&&f!==n3&&(x.value=ig(u,this.options,m,this.speed)),p&&p(x.value),_&&this.finish(),x}then(e,t){return this.finished.then(e,t)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return this.currentTime/1e3}set time(e){e=nT(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ro.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:e=nq,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();let r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ro.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,nO.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function ik(e){let t;return()=>(void 0===t&&(t=e()),t)}let iE=ik(()=>void 0!==window.ScrollTimeline),iS={},ij=(r=ik(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),()=>iS.linearEasing??r()),iA=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,iT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:iA([0,.65,.55,1]),circOut:iA([.55,0,1,.45]),backIn:iA([.31,.01,.66,-.59]),backOut:iA([.33,1.53,.69,.99])};function iP(e){return"function"==typeof e&&"applyToOptions"in e}class iC extends ix{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:n,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:o,onComplete:a}=e;this.isPseudoElement=!!i,this.allowFlatten=s,this.options=e,tS("string"!=typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function({type:e,...t}){return iP(e)&&ij()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=function(e,t,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u){let c={[t]:r};l&&(c.offset=l);let h=function e(t,r){if(t)return"function"==typeof t?ij()?nW(t,r):"ease-out":ic(t)?iA(t):Array.isArray(t)?t.map(t=>e(t,r)||iT.easeOut):iT[t]}(a,i);Array.isArray(h)&&(c.easing=h);let d={delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"};u&&(d.pseudoElement=u);let f=e.animate(c,d);return f}(t,r,n,l,i),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){let e=ig(n,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(e):r.startsWith("--")?t.style.setProperty(r,e):t.style[r]=e,this.animation.cancel()}a?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=nT(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&iE())?(this.animation.timeline=e,tG):t(this)}}let iO={anticipate:io,backInOut:is,circInOut:iu};class iR extends iC{constructor(e){!function(e){"string"==typeof e.ease&&e.ease in iO&&(e.ease=iO[e.ease])}(e),ib(e),super(e),void 0!==e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:r,onComplete:n,element:i,...s}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);let o=new i_({...s,autoplay:!1}),a=Math.max(10,ro.now()-this.startTime),l=eU(0,10,a-10);t.setWithVelocity(o.sample(Math.max(0,a-l)).value,o.sample(a).value,l),o.stop()}}let iN=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(ts.test(e)||"0"===e)&&!e.startsWith("url("));function iM(e){e.duration=0,e.type="keyframes"}let iD=new Set(["opacity","clipPath","filter","transform"]),iF=ik(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class iI extends ix{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s="loop",keyframes:o,name:a,motionValue:l,element:u,...c}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ro.now();const h={autoplay:e,delay:t,type:r,repeat:n,repeatDelay:i,repeatType:s,name:a,motionValue:l,element:u,...c},d=u?.KeyframeResolver||t4;this.keyframeResolver=new d(o,(e,t,r)=>this.onKeyframesResolved(e,t,h,!r),a,l,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,n){this.keyframeResolver=void 0;let{name:i,type:s,velocity:o,delay:a,isHandoff:l,onUpdate:u}=r;this.resolvedAt=ro.now(),!function(e,t,r,n){let i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;let s=e[e.length-1],o=iN(i,t),a=iN(s,t);return tE(o===a,`You are trying to animate ${t} from "${i}" to "${s}". "${o?s:i}" is not an animatable value.`,"value-not-animatable"),!!o&&!!a&&(function(e){let t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||iP(r))&&n)}(e,i,s,o)&&((tH.instantAnimations||!a)&&u?.(ig(e,r,t)),e[0]=e[e.length-1],iM(r),r.repeat=0);let c={startTime:n?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},h=!l&&function(e){let{motionValue:t,name:r,repeatDelay:n,repeatType:i,damping:s,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:a,transformTemplate:l}=t.owner.getProps();return iF()&&r&&iD.has(r)&&("transform"!==r||!l)&&!a&&!n&&"mirror"!==i&&0!==s&&"inertia"!==o}(c),d=c.motionValue?.owner?.current,f=h?new iR({...c,element:d}):new i_(c);f.finished.then(()=>{this.notifyFinished()}).catch(tG),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),t3=!0,t8(),t6(),t3=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let iB={type:"spring",stiffness:500,damping:25,restSpeed:10},iL={type:"keyframes",duration:.8},iU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},i$=e=>null!==e,iz=(e,t,r,n={},i,s)=>o=>{let a=nS(n,e)||{},l=a.delay||n.delay||0,{elapsed:u=0}=n;u-=nT(l);let c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:i};!function({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}(a)&&Object.assign(c,((e,{keyframes:t})=>t.length>2?iL:eL.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:iB:iU)(e,c)),c.duration&&(c.duration=nT(c.duration)),c.repeatDelay&&(c.repeatDelay=nT(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let h=!1;if(!1!==c.type&&(0!==c.duration||c.repeatDelay)||(iM(c),0===c.delay&&(h=!0)),(tH.instantAnimations||tH.skipAnimations)&&(h=!0,iM(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,h&&!s&&void 0!==t.get()){let e=function(e,{repeat:t,repeatType:r="loop"},n){let i=e.filter(i$),s=t&&"loop"!==r&&t%2==1?0:i.length-1;return i[s]}(c.keyframes,a);if(void 0!==e)return void tJ.update(()=>{c.onUpdate(e),c.onComplete()})}return a.isSync?new i_(c):new iI(c)};function iV(e,t,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...a}=t;n&&(s=n);let l=[],u=i&&e.animationState&&e.animationState.getState()[i];for(let t in a){let n=e.getValue(t,e.latestValues[t]??null),i=a[t];if(void 0===i||u&&function({protectedKeys:e,needsAnimating:t},r){let n=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,n}(u,t))continue;let o={delay:r,...nS(s||{},t)},c=n.get();if(void 0!==c&&!n.isAnimating&&!Array.isArray(i)&&i===c&&!o.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){let r=e.props[nv];if(r){let e=window.MotionHandoffAnimation(r,t,tJ);null!==e&&(o.startTime=e,h=!0)}}nA(e,t),n.start(iz(t,n,i,e.shouldReduceMotion&&tb.has(t)?{type:!1}:o,e,h));let d=n.animation;d&&l.push(d)}return o&&Promise.all(l).then(()=>{tJ.update(()=>{o&&function(e,t){let{transitionEnd:r={},transition:n={},...i}=nE(e,t)||{};for(let t in i={...i,...r}){var s;let r=nj(s=i[t])?s[s.length-1]||0:s;e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,rl(r))}}(e,o)})}),l}function iK(e,t,r,n=0,i=1){let s=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),o=e.size,a=(o-1)*n;return"function"==typeof r?r(s,o):1===i?s*n:a-s*n}function iq(e,t,r={}){let n=nE(e,t,"exit"===r.type?e.presenceContext?.custom:void 0),{transition:i=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);let s=n?()=>Promise.all(iV(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(n=0)=>{let{delayChildren:s=0,staggerChildren:o,staggerDirection:a}=i;return function(e,t,r=0,n=0,i=0,s=1,o){let a=[];for(let l of e.variantChildren)l.notify("AnimationStart",t),a.push(iq(l,t,{...o,delay:r+("function"==typeof n?0:n)+iK(e.variantChildren,l,n,i,s)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}(e,t,n,s,o,a,r)}:()=>Promise.resolve(),{when:a}=i;if(!a)return Promise.all([s(),o(r.delay)]);{let[e,t]="beforeChildren"===a?[s,o]:[o,s];return e().then(()=>t())}}let iW=rg.length;function iG(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}let iH=[...ry].reverse(),iY=ry.length;function iQ(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iJ(){return{animate:iQ(!0),whileInView:iQ(),whileHover:iQ(),whileTap:iQ(),whileDrag:iQ(),whileFocus:iQ(),exit:iQ()}}let iX=0;function iZ(e){return[e("x"),e("y")]}let i0=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function i1(e){return i0.has(e.tagName)||!0===e.isContentEditable}function i5(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}let i2={x:!1,y:!1};function i3(e){return e.max-e.min}function i6(e,t,r,n=.5){e.origin=n,e.originPoint=rU(t.min,t.max,e.origin),e.scale=i3(r)/i3(t),e.translate=rU(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function i8(e,t,r,n){i6(e.x,t.x,r.x,n?n.originX:void 0),i6(e.y,t.y,r.y,n?n.originY:void 0)}function i4(e,t,r){e.min=r.min+t.min,e.max=e.min+i3(t)}function i7(e,t,r){e.min=t.min-r.min,e.max=e.min+i3(t)}function i9(e,t,r){i7(e.x,t.x,r.x),i7(e.y,t.y,r.y)}let se=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function st(e){return{point:{x:e.pageX,y:e.pageY}}}function sr(e,t,r,n){return i5(e,t,e=>se(e)&&r(e,st(e)),n)}let sn=({current:e})=>e?e.ownerDocument.defaultView:null,si=(e,t)=>Math.abs(e-t),ss=new Set(["auto","scroll"]);class so{constructor(e,t,{transformPagePoint:r,contextWindow:n=window,dragSnapToOrigin:i=!1,distanceThreshold:s=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{var e,t;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let r=su(this.lastMoveEventInfo,this.history),n=null!==this.startEvent,i=(e=r.offset,t={x:0,y:0},Math.sqrt(si(e.x,t.x)**2+si(e.y,t.y)**2)>=this.distanceThreshold);if(!n&&!i)return;let{point:s}=r,{timestamp:o}=tZ;this.history.push({...s,timestamp:o});let{onStart:a,onMove:l}=this.handlers;n||(a&&a(this.lastMoveEvent,r),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,r)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=sa(t,this.transformPagePoint),tJ.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:r,onSessionEnd:n,resumeAnimation:i}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&i&&i(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let s=su("pointercancel"===e.type?this.lastMoveEventInfo:sa(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,s),n&&n(e,s)},!se(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=n||window;const a=sa(st(e),this.transformPagePoint),{point:l}=a,{timestamp:u}=tZ;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=t;c&&c(e,su(a,this.history)),this.removeListeners=nC(sr(this.contextWindow,"pointermove",this.handlePointerMove),sr(this.contextWindow,"pointerup",this.handlePointerUp),sr(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let t=e.parentElement;for(;t;){let e=getComputedStyle(t);(ss.has(e.overflowX)||ss.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){let t=this.scrollPositions.get(e);if(!t)return;let r=e===window,n=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},i={x:n.x-t.x,y:n.y-t.y};(0!==i.x||0!==i.y)&&(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(e,n),tJ.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),tX(this.updatePoint)}}function sa(e,t){return t?{point:t(e.point)}:e}function sl(e,t){return{x:e.x-t.x,y:e.y-t.y}}function su({point:e},t){return{point:e,delta:sl(e,sc(t)),offset:sl(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null,i=sc(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>nT(.1)));)r--;if(!n)return{x:0,y:0};let s=(i.timestamp-n.timestamp)/1e3;if(0===s)return{x:0,y:0};let o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}(t,.1)}}function sc(e){return e[e.length-1]}function sh(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function sd(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function sf(e,t,r){return{min:sp(e,t),max:sp(e,r)}}function sp(e,t){return"number"==typeof e?e:e[t]||0}let sm=new WeakMap;class sy{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tg(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){let{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;let i=e=>{t?(this.stopAnimation(),this.snapToCursor(st(e).point)):this.pauseAnimation()},s=(e,t)=>{this.stopAnimation();let{drag:r,dragPropagation:n,onDragStart:i}=this.getProps();if(r&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(e){if("x"===e||"y"===e)if(i2[e])return null;else return i2[e]=!0,()=>{i2[e]=!1};return i2.x||i2.y?null:(i2.x=i2.y=!0,()=>{i2.x=i2.y=!1})}(r),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),iZ(e=>{let t=this.getAxisMotionValue(e).get()||0;if(e0.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let n=r.layout.layoutBox[e];n&&(t=i3(n)*(parseFloat(t)/100))}}this.originPoint[e]=t}),i&&tJ.postRender(()=>i(e,t)),nA(this.visualElement,"transform");let{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:r,dragDirectionLock:n,onDirectionLock:i,onDrag:s}=this.getProps();if(!r&&!this.openDragLock)return;let{offset:o}=t;if(n&&null===this.currentDirection){this.currentDirection=function(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(o),null!==this.currentDirection&&i&&i(this.currentDirection);return}this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),s&&s(e,t)},a=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>iZ(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new so(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:sn(this.visualElement),element:this.visualElement.current})}stop(e,t){let r=e||this.latestPointerEvent,n=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!n||!r)return;let{velocity:s}=n;this.startAnimation(s);let{onDragEnd:o}=this.getProps();o&&tJ.postRender(()=>o(r,n))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();let{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,r){let{drag:n}=this.getProps();if(!r||!sg(e,n,this.currentDirection))return;let i=this.getAxisMotionValue(e),s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:r},n){return void 0!==t&&e<t?e=n?rU(t,e,n.min):Math.max(e,t):void 0!==r&&e>r&&(e=n?rU(r,e,n.max):Math.min(e,r)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,n=this.constraints;e&&nx(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=function(e,{top:t,left:r,bottom:n,right:i}){return{x:sh(e.x,r,i),y:sh(e.y,t,n)}}(r.layoutBox,e):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:sf(e,"left","right"),y:sf(e,"top","bottom")}}(t),n!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&iZ(e=>{var t,n;let i;!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=(t=r.layoutBox[e],n=this.constraints[e],i={},void 0!==n.min&&(i.min=n.min-t.min),void 0!==n.max&&(i.max=n.max-t.min),i))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!nx(t))return!1;let n=t.current;tS(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:i}=this.visualElement;if(!i||!i.layout)return!1;let s=function(e,t,r){let n=r2(e,r),{scroll:i}=t;return i&&(r0(n.x,i.offset.x),r0(n.y,i.offset.y)),n}(n,i.root,this.visualElement.getTransformPagePoint()),o=(e=i.layout.layoutBox,{x:sd(e.x,s.x),y:sd(e.y,s.y)});if(r){let e=r(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=rW(e))}return o}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:n,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{};return Promise.all(iZ(o=>{if(!sg(o,t,this.currentDirection))return;let l=a&&a[o]||{};s&&(l={min:0,max:0});let u={type:"inertia",velocity:r?e[o]:0,bounceStiffness:n?200:1e6,bounceDamping:n?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(o,u)})).then(o)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return nA(this.visualElement,e),r.start(iz(e,r,0,t,this.visualElement,!1))}stopAnimation(){iZ(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){iZ(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){iZ(t=>{let{drag:r}=this.getProps();if(!sg(t,r,this.currentDirection))return;let{projection:n}=this.visualElement,i=this.getAxisMotionValue(t);if(n&&n.layout){let{min:r,max:s}=n.layout.layoutBox[t],o=i.get()||0;i.set(e[t]-rU(r,s,.5)+o)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!nx(t)||!r||!this.constraints)return;this.stopAnimation();let n={x:0,y:0};iZ(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){var r,i;let s,o,a,l=t.get();n[e]=(r={min:l,max:l},i=this.constraints[e],s=.5,o=i3(r),(a=i3(i))>o?s=ip(i.min,i.max-o,r.min):o>a&&(s=ip(r.min,r.max-a,i.min)),eU(0,1,s))}});let{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),iZ(t=>{if(!sg(t,e,null))return;let r=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];r.set(rU(i,s,n[t]))})}addListeners(){if(!this.visualElement.current)return;sm.set(this.visualElement,this);let e=this.visualElement.current,t=sr(e,"pointerdown",t=>{let{drag:r,dragListener:n=!0}=this.getProps(),i=t.target,s=i!==e&&i1(i);r&&n&&!s&&this.start(t)}),r=()=>{let{dragConstraints:e}=this.getProps();nx(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",r);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),tJ.read(r);let s=i5(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(iZ(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),t(),i(),o&&o()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:s=.35,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function sg(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}let sv=e=>(t,r)=>{e&&tJ.postRender(()=>e(t,r))},sb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};var sx=D;let sw=!1;class s_ extends sx.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:i}=e;i&&(t.group&&t.group.add(i),r&&r.register&&n&&r.register(i),sw&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),sb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:n,isPresent:i}=this.props,{projection:s}=r;return s&&(s.isPresent=i,sw=!0,n||e.layoutDependency!==t||void 0===t||e.isPresent!==i?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||tJ.postRender(()=>{let e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ri.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;sw=!0,n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sk(e){let[t,r]=function(e=!0){let t=(0,D.useContext)(nu);if(null===t)return[!0,null];let{isPresent:r,onExitComplete:n,register:i}=t,s=(0,D.useId)();(0,D.useEffect)(()=>{if(e)return i(s)},[e]);let o=(0,D.useCallback)(()=>e&&n&&n(s),[s,n,e]);return!r&&n?[!1,o]:[!0]}(),n=(0,sx.useContext)(r4);return(0,M.jsx)(s_,{...e,layoutGroup:n,switchLayoutGroup:(0,sx.useContext)(nb),isPresent:t,safeToRemove:r})}function sE(e,t,r,n,i){return e-=t,e=n+1/r*(e-n),void 0!==i&&(e=n+1/i*(e-n)),e}function sS(e,t,[r,n,i],s,o){!function(e,t=0,r=1,n=.5,i,s=e,o=e){if(e0.test(t)&&(t=parseFloat(t),t=rU(o.min,o.max,t/100)-o.min),"number"!=typeof t)return;let a=rU(s.min,s.max,n);e===s&&(a-=t),e.min=sE(e.min,t,r,a,i),e.max=sE(e.max,t,r,a,i)}(e,t[r],t[n],t[i],t.scale,s,o)}let sj=["x","scaleX","originX"],sA=["y","scaleY","originY"];function sT(e,t,r,n){sS(e.x,t,sj,r?r.x:void 0,n?n.x:void 0),sS(e.y,t,sA,r?r.y:void 0,n?n.y:void 0)}function sP(e,t){e.min=t.min,e.max=t.max}function sC(e,t){sP(e.x,t.x),sP(e.y,t.y)}function sO(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function sR(e){return 0===e.translate&&1===e.scale}function sN(e){return sR(e.x)&&sR(e.y)}function sM(e,t){return e.min===t.min&&e.max===t.max}function sD(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function sF(e,t){return sD(e.x,t.x)&&sD(e.y,t.y)}function sI(e){return i3(e.x)/i3(e.y)}function sB(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}let sL=["TopLeft","TopRight","BottomLeft","BottomRight"],sU=sL.length,s$=e=>"string"==typeof e?parseFloat(e):e,sz=e=>"number"==typeof e||e1.test(e);function sV(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let sK=sW(0,.5,il),sq=sW(.5,.95,tG);function sW(e,t,r){return n=>n<e?0:n>t?1:r(ip(e,t,n))}function sG(e){return"object"==typeof e&&null!==e}function sH(e){return sG(e)&&"ownerSVGElement"in e}let sY=(e,t)=>e.depth-t.depth;class sQ{constructor(){this.children=[],this.isDirty=!1}add(e){rt(this.children,e),this.isDirty=!0}remove(e){rr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sY),this.isDirty=!1,this.children.forEach(e)}}class sJ{constructor(){this.members=[]}add(e){rt(this.members,e),e.scheduleRender()}remove(e){if(rr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let e=r;e>=0;e--){let r=this.members[e];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let sX=["","X","Y","Z"],sZ=0;function s0(e,t,r,n){let{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function s1({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(e={},r=t?.()){this.id=sZ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(s3),this.nodes.forEach(ot),this.nodes.forEach(or),this.nodes.forEach(s6)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new sQ)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new rn),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=sH(t)&&!(sH(t)&&"svg"===t.tagName),this.instance=t;let{layoutId:r,layout:n,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(n||r)&&(this.isLayoutDirty=!0),e){let r,n=0,i=()=>this.root.updateBlockedByResize=!1;tJ.read(()=>{n=window.innerWidth}),e(t,()=>{let e=window.innerWidth;if(e!==n){let t,s;n=e,this.root.updateBlockedByResize=!0,r&&r(),t=ro.now(),s=({timestamp:e})=>{let r=e-t;r>=250&&(tX(s),i(r-250))},tJ.setup(s,!0),r=()=>tX(s),sb.hasAnimatedSinceResize&&(sb.hasAnimatedSinceResize=!1,this.nodes.forEach(oe))}})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||n)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:r,layout:n})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let s=this.options.transition||i.getDefaultTransition()||ol,{onLayoutAnimationStart:o,onLayoutAnimationComplete:a}=i.getProps(),l=!this.targetLayout||!sF(this.targetLayout,n),u=!t&&r;if(this.options.layoutRoot||this.resumeFrom||u||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...nS(s,"layout"),onPlay:o,onComplete:a};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,u)}else t||oe(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),tX(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(on),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:r}=t.options;if(!r)return;let n=r.props[nv];if(window.MotionHasOptimisedAnimation(n,"transform")){let{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",tJ,!(e||r))}let{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&e(i)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;let n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(s4);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(s7);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(s9),this.nodes.forEach(s5),this.nodes.forEach(s2)):this.nodes.forEach(s7),this.clearAllSnapshots();let e=ro.now();tZ.delta=eU(0,1e3/60,e-tZ.timestamp),tZ.timestamp=e,tZ.isProcessing=!0,t0.update.process(tZ),t0.preRender.process(tZ),t0.render.process(tZ),tZ.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ri.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(s8),this.sharedNodes.forEach(oi)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tJ.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tJ.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||i3(this.snapshot.measuredBox.x)||i3(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=tg(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!sN(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,s=n!==this.prevTransformTemplateValue;e&&this.instance&&(t||rY(this.latestValues)||s)&&(i(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let r=this.measurePageBox(),n=this.removeElementScroll(r);return e&&(n=this.removeTransform(n)),oh((t=n).x),oh(t.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return tg();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(of))){let{scroll:e}=this.root;e&&(r0(t.x,e.offset.x),r0(t.y,e.offset.y))}return t}removeElementScroll(e){let t=tg();if(sC(t,e),this.scroll?.wasRoot)return t;for(let r=0;r<this.path.length;r++){let n=this.path[r],{scroll:i,options:s}=n;n!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&sC(t,e),r0(t.x,i.offset.x),r0(t.y,i.offset.y))}return t}applyTransform(e,t=!1){let r=tg();sC(r,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];!t&&n.options.layoutScroll&&n.scroll&&n!==n.root&&r5(r,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),rY(n.latestValues)&&r5(r,n.latestValues)}return rY(this.latestValues)&&r5(r,this.latestValues),r}removeTransform(e){let t=tg();sC(t,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];if(!r.instance||!rY(r.latestValues))continue;rH(r.latestValues)&&r.updateSnapshot();let n=tg();sC(n,r.measurePageBox()),sT(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,n)}return rY(this.latestValues)&&sT(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tZ.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);let r=!!this.resumingFrom||this!==t;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:n,layoutId:i}=this.options;if(!this.layout||!(n||i))return;this.resolvedRelativeTargetAt=tZ.timestamp;let s=this.getClosestProjectingParent();if(s&&this.linkedParentVersion!==s.layoutVersion&&!s.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(s&&s.layout?this.createRelativeTarget(s,this.layout.layoutBox,s.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=tg(),this.targetWithTransforms=tg()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var o,a,l;this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,i4(o.x,a.x,l.x),i4(o.y,a.y,l.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sC(this.target,this.layout.layoutBox),rZ(this.target,this.targetDelta)):sC(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,s&&!!s.resumingFrom==!!this.resumingFrom&&!s.options.layoutScroll&&s.target&&1!==this.animationProgress?this.createRelativeTarget(s,this.target,s.target):this.relativeParent=this.relativeTarget=void 0)}}getClosestProjectingParent(){if(!(!this.parent||rH(this.parent.latestValues)||rQ(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,r){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tg(),this.relativeTargetOrigin=tg(),i9(this.relativeTargetOrigin,t,r),sC(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,r=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(r=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===tZ.timestamp&&(r=!1),r)return;let{layout:n,layoutId:i}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(n||i))return;sC(this.layoutCorrected,this.layout.layoutBox);let s=this.treeScale.x,o=this.treeScale.y;!function(e,t,r,n=!1){let i,s,o=r.length;if(o){t.x=t.y=1;for(let a=0;a<o;a++){s=(i=r[a]).projectionDelta;let{visualElement:o}=i.options;(!o||!o.props.style||"contents"!==o.props.style.display)&&(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&r5(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,rZ(e,s)),n&&rY(i.latestValues)&&r5(e,i.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=tg());let{target:a}=e;if(!a){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(sO(this.prevProjectionDelta.x,this.projectionDelta.x),sO(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),i8(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.treeScale.x===s&&this.treeScale.y===o&&sB(this.projectionDelta.x,this.prevProjectionDelta.x)&&sB(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tm(),this.projectionDelta=tm(),this.projectionDeltaWithTransform=tm()}setAnimationOrigin(e,t=!1){let r,n=this.snapshot,i=n?n.latestValues:{},s={...this.latestValues},o=tm();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let a=tg(),l=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),c=!u||u.members.length<=1,h=!!(l&&!c&&!0===this.options.crossfade&&!this.path.some(oa));this.animationProgress=0,this.mixTargetDelta=t=>{let n=t/1e3;if(os(o.x,e.x,n),os(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var u,d,f,p,m,y;i9(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,p=this.relativeTargetOrigin,m=a,y=n,oo(f.x,p.x,m.x,y),oo(f.y,p.y,m.y,y),r&&(u=this.relativeTarget,d=r,sM(u.x,d.x)&&sM(u.y,d.y))&&(this.isProjectionDirty=!1),r||(r=tg()),sC(r,this.relativeTarget)}l&&(this.animationValues=s,function(e,t,r,n,i,s){i?(e.opacity=rU(0,r.opacity??1,sK(n)),e.opacityExit=rU(t.opacity??1,0,sq(n))):s&&(e.opacity=rU(t.opacity??1,r.opacity??1,n));for(let i=0;i<sU;i++){let s=`border${sL[i]}Radius`,o=sV(t,s),a=sV(r,s);(void 0!==o||void 0!==a)&&(o||(o=0),a||(a=0),0===o||0===a||sz(o)===sz(a)?(e[s]=Math.max(rU(s$(o),s$(a),n),0),(e0.test(a)||e0.test(o))&&(e[s]+="%")):e[s]=a)}(t.rotate||r.rotate)&&(e.rotate=rU(t.rotate||0,r.rotate||0,n))}(s,i,this.latestValues,n,h,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(tX(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tJ.update(()=>{var t,r,n;let i;sb.hasAnimatedSinceResize=!0,nO.layout++,this.motionValue||(this.motionValue=rl(0)),this.currentAnimation=(t=this.motionValue,r=[0,1e3],n={...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{nO.layout--},onComplete:()=>{nO.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}},(i=tv(t)?t:rl(t)).start(iz("",i,r,n)),i.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:n,latestValues:i}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&od(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||tg();let t=i3(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;let n=i3(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}sC(t,r),r5(t,i),i8(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new sJ),this.sharedNodes.get(e).add(t);let r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;let n={};r.z&&s0("z",e,n,this.animationValues);for(let t=0;t<sX.length;t++)s0(`rotate${sX[t]}`,e,n,this.animationValues),s0(`skew${sX[t]}`,e,n,this.animationValues);for(let t in e.render(),n)e.setStaticValue(t,n[t]),this.animationValues&&(this.animationValues[t]=n[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility="hidden";return}let r=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=nl(t?.pointerEvents)||"",e.transform=r?r(this.latestValues,""):"none";return}let n=this.getLead();if(!this.projectionDelta||!this.layout||!n.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=nl(t?.pointerEvents)||""),this.hasProjected&&!rY(this.latestValues)&&(e.transform=r?r({},""):"none",this.hasProjected=!1);return}e.visibility="";let i=n.animationValues||n.latestValues;this.applyTransformsToTarget();let s=function(e,t,r){let n="",i=e.x.translate/t.x,s=e.y.translate/t.y,o=r?.z||0;if((i||s||o)&&(n=`translate3d(${i}px, ${s}px, ${o}px) `),(1!==t.x||1!==t.y)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){let{transformPerspective:e,rotate:t,rotateX:i,rotateY:s,skewX:o,skewY:a}=r;e&&(n=`perspective(${e}px) ${n}`),t&&(n+=`rotate(${t}deg) `),i&&(n+=`rotateX(${i}deg) `),s&&(n+=`rotateY(${s}deg) `),o&&(n+=`skewX(${o}deg) `),a&&(n+=`skewY(${a}deg) `)}let a=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==a||1!==l)&&(n+=`scale(${a}, ${l})`),n||"none"}(this.projectionDeltaWithTransform,this.treeScale,i);r&&(s=r(i,s)),e.transform=s;let{x:o,y:a}=this.projectionDelta;for(let t in e.transformOrigin=`${100*o.origin}% ${100*a.origin}% 0`,n.animationValues?e.opacity=n===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=n===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0,r$){if(void 0===i[t])continue;let{correct:r,applyTo:o,isCSSVariable:a}=r$[t],l="none"===s?i[t]:r(i[t],n);if(o){let t=o.length;for(let r=0;r<t;r++)e[o[r]]=l}else a?this.options.visualElement.renderState.vars[t]=l:e[t]=l}this.options.layoutId&&(e.pointerEvents=n===this?nl(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(s4),this.root.sharedNodes.clear()}}}function s5(e){e.updateLayout()}function s2(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){let{layoutBox:r,measuredBox:n}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;"size"===i?iZ(e=>{let n=s?t.measuredBox[e]:t.layoutBox[e],i=i3(n);n.min=r[e].min,n.max=n.min+i}):od(i,t.layoutBox,r)&&iZ(n=>{let i=s?t.measuredBox[n]:t.layoutBox[n],o=i3(r[n]);i.max=i.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+o)});let o=tm();i8(o,r,t.layoutBox);let a=tm();s?i8(a,e.applyTransform(n,!0),t.measuredBox):i8(a,r,t.layoutBox);let l=!sN(o),u=!1;if(!e.resumeFrom){let n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){let{snapshot:i,layout:s}=n;if(i&&s){let o=tg();i9(o,t.layoutBox,i.layoutBox);let a=tg();i9(a,r,s.layoutBox),sF(o,a)||(u=!0),n.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function s3(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function s6(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function s8(e){e.clearSnapshot()}function s4(e){e.clearMeasurements()}function s7(e){e.isLayoutDirty=!1}function s9(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function oe(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ot(e){e.resolveTargetDelta()}function or(e){e.calcProjection()}function on(e){e.resetSkewAndRotation()}function oi(e){e.removeLeadSnapshot()}function os(e,t,r){e.translate=rU(t.translate,0,r),e.scale=rU(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function oo(e,t,r,n){e.min=rU(t.min,r.min,n),e.max=rU(t.max,r.max,n)}function oa(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let ol={duration:.45,ease:[.4,0,.1,1]},ou=e=>"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),oc=ou("applewebkit/")&&!ou("chrome/")?Math.round:tG;function oh(e){e.min=oc(e.min),e.max=oc(e.max)}function od(e,t,r){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(sI(t)-sI(r)))}function of(e){return e!==e.root&&e.scroll?.wasRoot}let op=s1({attachResizeListener:(e,t)=>i5(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),om={current:void 0},oy=s1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!om.current){let e=new op({});e.mount(window),e.setOptions({layoutScroll:!0}),om.current=e}return om.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function og(e,t){let r=function(e,t,r){if(null==e)return[];if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document,r=(void 0)??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e).filter(e=>null!=e)}(e),n=new AbortController;return[r,{passive:!0,...t,signal:n.signal},()=>n.abort()]}function ov(e){return!("touch"===e.pointerType||i2.x||i2.y)}function ob(e,t,r){let{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===r);let i=n["onHover"+r];i&&tJ.postRender(()=>i(t,st(t)))}let ox=(e,t)=>!!t&&(e===t||ox(e,t.parentElement)),ow=new WeakSet;function o_(e){return t=>{"Enter"===t.key&&e(t)}}function ok(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function oE(e){return se(e)&&!(i2.x||i2.y)}function oS(e,t,r){let{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===r);let i=n["onTap"+("End"===r?"":r)];i&&tJ.postRender(()=>i(t,st(t)))}let oj=new WeakMap,oA=new WeakMap,oT=e=>{let t=oj.get(e.target);t&&t(e)},oP=e=>{e.forEach(oT)},oC={some:0,all:1},oO=function(e,t){if("u"<typeof Proxy)return n_;let r=new Map,n=(r,n)=>n_(r,n,e,t);return new Proxy((e,t)=>n(e,t),{get:(i,s)=>"create"===s?n:(r.has(s)||r.set(s,n_(s,void 0,e,t)),r.get(s))})}({animation:{Feature:class extends nk{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:r})=>(function(e,t,r={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t))n=Promise.all(t.map(t=>iq(e,t,r)));else if("string"==typeof t)n=iq(e,t,r);else{let i="function"==typeof t?nE(e,t,r.custom):t;n=Promise.all(iV(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})})(e,t,r))),r=iJ(),n=!0,i=t=>(r,n)=>{let i=nE(e,n,"exit"===t?e.presenceContext?.custom:void 0);if(i){let{transition:e,transitionEnd:t,...n}=i;r={...r,...n,...t}}return r};function s(s){let{props:o}=e,a=function e(t){if(!t)return;if(!t.isControllingVariants){let r=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(r.initial=t.props.initial),r}let r={};for(let e=0;e<iW;e++){let n=rg[e],i=t.props[n];(rm(i)||!1===i)&&(r[n]=i)}return r}(e.parent)||{},l=[],u=new Set,c={},h=1/0;for(let t=0;t<iY;t++){var d,f;let p=iH[t],m=r[p],y=void 0!==o[p]?o[p]:a[p],g=rm(y),v=p===s?m.isActive:null;!1===v&&(h=t);let b=y===a[p]&&y!==o[p]&&g;if(b&&n&&e.manuallyAnimateOnMount&&(b=!1),m.protectedKeys={...c},!m.isActive&&null===v||!y&&!m.prevProp||rp(y)||"boolean"==typeof y)continue;let x=(d=m.prevProp,"string"==typeof(f=y)?f!==d:!!Array.isArray(f)&&!iG(f,d)),w=x||p===s&&m.isActive&&!b&&g||t>h&&g,_=!1,k=Array.isArray(y)?y:[y],E=k.reduce(i(p),{});!1===v&&(E={});let{prevResolvedValues:S={}}=m,j={...S,...E},A=t=>{w=!0,u.has(t)&&(_=!0,u.delete(t)),m.needsAnimating[t]=!0;let r=e.getValue(t);r&&(r.liveStyle=!1)};for(let e in j){let t=E[e],r=S[e];if(!c.hasOwnProperty(e))(nj(t)&&nj(r)?iG(t,r):t===r)?void 0!==t&&u.has(e)?A(e):m.protectedKeys[e]=!0:null!=t?A(e):u.add(e)}m.prevProp=y,m.prevResolvedValues=E,m.isActive&&(c={...c,...E}),n&&e.blockInitialAnimation&&(w=!1);let T=b&&x,P=!T||_;w&&P&&l.push(...k.map(t=>{let r={type:p};if("string"==typeof t&&n&&!T&&e.manuallyAnimateOnMount&&e.parent){let{parent:n}=e,i=nE(n,t);if(n.enteringChildren&&i){let{delayChildren:t}=i.transition||{};r.delay=iK(n.enteringChildren,e,t)}}return{animation:t,options:r}}))}if(u.size){let t={};if("boolean"!=typeof o.initial){let r=nE(e,Array.isArray(o.initial)?o.initial[0]:o.initial);r&&r.transition&&(t.transition=r.transition)}u.forEach(r=>{let n=e.getBaseTarget(r),i=e.getValue(r);i&&(i.liveStyle=!0),t[r]=n??null}),l.push({animation:t})}let p=!!l.length;return n&&(!1===o.initial||o.initial===o.animate)&&!e.manuallyAnimateOnMount&&(p=!1),n=!1,p?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,n){if(r[t].isActive===n)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,n)),r[t].isActive=n;let i=s(t);for(let e in r)r[e].protectedKeys={};return i},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=iJ()}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();rp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends nk{constructor(){super(...arguments),this.id=iX++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;let n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}},inView:{Feature:class extends nk{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var e;let t;this.unmount();let{viewport:r={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:o}=r,a={root:n?n.current:void 0,rootMargin:i,threshold:"number"==typeof s?s:oC[s]},l=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,o&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),i=t?r:n;i&&i(e)};return e=this.node.current,t=function({root:e,...t}){let r=e||document;oA.has(r)||oA.set(r,{});let n=oA.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(oP,{root:e,...t})),n[i]}(a),oj.set(e,l),t.observe(e),()=>{oj.delete(e),t.unobserve(e)}}mount(){this.startObserver()}update(){if("u"<typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends nk{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[n,i,s]=og(e,r),o=e=>{let n=e.currentTarget;if(!oE(e))return;ow.add(n);let s=t(n,e),o=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),ow.has(n)&&ow.delete(n),oE(e)&&"function"==typeof s&&s(e,{success:t})},a=e=>{o(e,n===window||n===document||r.useGlobalTarget||ox(n,e.target))},l=e=>{o(e,!1)};window.addEventListener("pointerup",a,i),window.addEventListener("pointercancel",l,i)};return n.forEach(e=>{(r.useGlobalTarget?window:e).addEventListener("pointerdown",o,i),sG(e)&&"offsetHeight"in e&&(e.addEventListener("focus",e=>((e,t)=>{let r=e.currentTarget;if(!r)return;let n=o_(()=>{if(ow.has(r))return;ok(r,"down");let e=o_(()=>{ok(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>ok(r,"cancel"),t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)})(e,i)),i1(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),s}(e,(e,t)=>(oS(this.node,t,"Start"),(e,{success:t})=>oS(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends nk{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nC(i5(this.node.current,"focus",()=>this.onFocus()),i5(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends nk{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[n,i,s]=og(e,r),o=e=>{if(!ov(e))return;let{target:r}=e,n=t(r,e);if("function"!=typeof n||!r)return;let s=e=>{ov(e)&&(n(e),r.removeEventListener("pointerleave",s))};r.addEventListener("pointerleave",s,i)};return n.forEach(e=>{e.addEventListener("pointerenter",o,i)}),s}(e,(e,t)=>(ob(this.node,t,"Start"),e=>ob(this.node,e,"End"))))}unmount(){}}},pan:{Feature:class extends nk{constructor(){super(...arguments),this.removePointerDownListener=tG}onPointerDown(e){this.session=new so(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sn(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:sv(e),onStart:sv(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&tJ.postRender(()=>n(e,t))}}}mount(){this.removePointerDownListener=sr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends nk{constructor(e){super(e),this.removeGroupControls=tG,this.removeListeners=tG,this.controls=new sy(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tG}update(){let{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.endPanSession()}},ProjectionNode:oy,MeasureLayout:sk},layout:{ProjectionNode:oy,MeasureLayout:sk}},(e,t)=>t.isSVG??r8(e)?new rq(t):new r3(t,{allowProjection:e!==D.Fragment})),oR=({currentStep:e=1,onContinue:t,onBack:r,totalSteps:n=3})=>(0,M.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6 w-full",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4 relative",children:[Array.from({length:n}).map((t,r)=>{let i=r+1;return(0,M.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,M.jsx)("div",{className:eT("w-2 h-2 rounded-full relative z-10 transition-all",i<=e?"bg-[#007AFF]":"bg-[#E5E5EA]")}),i<n&&(0,M.jsx)("div",{className:eT("w-8 h-0.5 transition-all",i<e?"bg-[#007AFF]":"bg-[#E5E5EA]")})]},i)}),(0,M.jsx)(oO.div,{initial:{width:0},animate:{width:`${e/n*100}%`},className:"absolute left-0 top-1/2 -translate-y-1/2 h-1 bg-[#007AFF]/20 rounded-full",transition:{type:"spring",stiffness:300,damping:30,mass:.5}})]}),(0,M.jsxs)("p",{className:"text-sm text-[#6E6E73]",children:["Schritt ",e," von ",n]})]}),oN=L("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),oM=()=>(0,M.jsxs)("div",{className:"loader-container",children:[(0,M.jsx)("div",{className:"peeking-photo-icon",children:(0,M.jsx)(oN,{strokeWidth:1.5})}),(0,M.jsxs)("div",{className:"shield-container",children:[Array.from({length:150}).map((e,t)=>(0,M.jsx)("div",{className:"particle",style:{animationDelay:`${t%10*.1+.02*Math.floor(t/10)}s`}},t)),(0,M.jsxs)("div",{className:"shield-structure",children:[(0,M.jsx)("div",{className:"structure-line line-1"}),(0,M.jsx)("div",{className:"structure-line line-2"}),(0,M.jsx)("div",{className:"structure-line line-3"}),(0,M.jsx)("div",{className:"structure-line line-4"})]})]}),(0,M.jsx)("div",{className:"loading-text",children:"LDT..."})]});function oD(){let[e,t]=(0,D.useState)(null),[r,n]=(0,D.useState)(!1),[i,s]=(0,D.useState)(null),[o,a]=(0,D.useState)(!1);(0,D.useEffect)(()=>{let e=function(){let e=localStorage.getItem("photovault_secret_key");if(!e)return null;try{return(0,eR.decodeBase64)(e)}catch{return null}}();e&&(t(e),s(eN(e))),n(!0)},[]);let l=(0,D.useCallback)(()=>new Promise(e=>{a(!0),setTimeout(()=>{let r,n={publicKey:(r=eO.default.box.keyPair()).publicKey,secretKey:r.secretKey}.secretKey;t(n),eI(n);let i=eN(n);s(i),a(!1),e(i)},1500)}),[]);return{secretKey:e,isInitialized:r,hasKey:!!e,recoveryPhrase:i,isGeneratingKey:o,generateNewKey:l,restoreFromPhrase:(0,D.useCallback)(e=>{try{let r=eM(e);return t(r),eI(r),s(e),!0}catch{return!1}},[]),clearKey:(0,D.useCallback)(()=>{t(null),s(null),localStorage.removeItem("photovault_secret_key")},[])}}function oF({state:e,setState:t,step:r,setStep:n,onComplete:i}){let[s,o]=(0,D.useState)(!1),[a,l]=(0,D.useState)(!1),[u,c]=(0,D.useState)(!1),{isGeneratingKey:h}=oD(),{generateNewKey:d}=oD(),f=async()=>{let e=await d(),r=e?.split("-").slice(0,12)||[];t(t=>({...t,encryptionKey:e||"",backupPhrase:r})),o(!0)};return h?(0,M.jsx)(oM,{}):(0,M.jsxs)("div",{className:"min-h-screen flex flex-col px-6 pt-12 pb-8 safe-area-inset",children:[(0,M.jsx)(oR,{currentStep:s?1:r}),1===r&&!s&&(0,M.jsx)(oI,{onContinue:f,onImport:()=>{console.log("Show import dialog"),c(!0)}}),1===r&&s&&(0,M.jsx)(oB,{phrase:e.backupPhrase,confirmed:a,onConfirmChange:l,onContinue:()=>{console.log("TODO: Verify checkbox, proceed to step 2"),o(!1),l(!1),n(2)}}),2===r&&(0,M.jsx)(oL,{selectedSource:e.photoSource,onSelect:e=>{console.log("Selected photo source:",e),t(t=>({...t,photoSource:e})),n(3)}}),3===r&&(0,M.jsx)(oU,{selectedPlan:e.selectedPlan,onSelect:e=>{console.log("free"===e?"Set Free Plan":"Set Backup+ Plan"),t(t=>({...t,selectedPlan:e})),i()}}),u&&(0,M.jsx)(o$,{onClose:()=>c(!1),onSuccess:(e,r)=>{t(t=>({...t,encryptionKey:e,backupPhrase:r})),c(!1),i()}})]})}function oI({onContinue:e,onImport:t}){return(0,M.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,M.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[(0,M.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6",children:(0,M.jsx)(eC,{name:"key",size:40})}),(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-3",children:"Erstelle deinen Schlssel"}),(0,M.jsx)("p",{className:"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px] mb-6",children:"Dieser Schlssel verschlsselt alle Fotos. Speichere ihn gut:"}),(0,M.jsxs)("div",{className:"bg-[#F2F2F7] rounded-xl p-4 w-full max-w-[300px]",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,M.jsx)(eC,{name:"key",size:20}),(0,M.jsx)("span",{className:"text-[15px] text-[#1D1D1F] font-medium",children:"12-Wort Backup-Phrase"})]}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:"Wird im nchsten Schritt erstellt und angezeigt"})]})]}),(0,M.jsxs)("div",{className:"space-y-3",children:[(0,M.jsx)("button",{onClick:e,className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target",children:"Schlssel erstellen"}),(0,M.jsx)("button",{onClick:t,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Ich habe bereits einen Schlssel"})]})]})}function oB({phrase:e,confirmed:t,onConfirmChange:r,onContinue:n}){return(0,M.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsxs)("div",{className:"text-center mb-6",children:[(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2",children:"Notiere diese Wrter"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73]",children:"Speichere sie sicher ab. Du brauchst sie zur Wiederherstellung."})]}),(0,M.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-6",children:e.map((e,t)=>(0,M.jsxs)("div",{className:"bg-white rounded-lg p-3 text-center border border-[#E5E5EA]",children:[(0,M.jsx)("span",{className:"text-[11px] text-[#8E8E93] block mb-0.5",children:t+1}),(0,M.jsx)("span",{className:"text-[15px] text-[#1D1D1F] font-mono",children:e})]},t))}),(0,M.jsx)("div",{className:"bg-[#FF3B30]/10 rounded-xl p-4 mb-6",children:(0,M.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center",children:" Teile diese Wrter niemals mit anderen. Wer sie hat, kann auf deine Fotos zugreifen."})}),(0,M.jsxs)("button",{onClick:()=>r(!t),className:"w-full flex items-center gap-3 p-4 bg-white rounded-xl ios-tap-target",children:[(0,M.jsx)("div",{className:`w-6 h-6 rounded-md border-2 flex items-center justify-center ${t?"bg-[#007AFF] border-[#007AFF]":"border-[#C7C7CC]"}`,children:t&&(0,M.jsx)(U,{className:"w-4 h-4 text-white"})}),(0,M.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Ich habe die Wrter notiert"})]})]}),(0,M.jsx)("button",{onClick:n,disabled:!t,className:`w-full h-[50px] text-[17px] font-semibold rounded-xl ios-tap-target ${t?"bg-[#007AFF] text-white":"bg-[#E5E5EA] text-[#8E8E93]"}`,children:"Weiter"})]})}function oL({selectedSource:e,onSelect:t}){return(0,M.jsx)("div",{className:"flex-1 flex flex-col",children:(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsxs)("div",{className:"flex flex-col items-center text-center mb-8",children:[(0,M.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6",children:(0,M.jsx)(eC,{name:"folder",size:40})}),(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2",children:"Whle Backup-Quelle"}),(0,M.jsx)("p",{className:"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px]",children:"Wo sind deine Fotos gespeichert?"})]}),(0,M.jsx)("div",{className:"bg-[#F2F2F7] rounded-xl p-4 mb-6",children:(0,M.jsxs)("p",{className:"text-[15px] text-[#6E6E73] text-center",children:[" ",(0,M.jsx)("strong",{children:"Tipp:"}),' Die meisten Nutzer whlen "Fotos-App". Du kannst dies spter in den Einstellungen ndern.']})}),(0,M.jsx)("div",{className:"space-y-3",children:[{id:"photos-app",label:"Fotos-App",description:"Alle Fotos aus der iOS Foto-Bibliothek",details:"Empfohlen fr die meisten Nutzer"},{id:"files-app",label:"Dateien-App",description:"Fotos aus einem bestimmten Ordner",details:"Fr fortgeschrittene Nutzer"}].map(r=>(0,M.jsx)("button",{onClick:()=>t(r.id),className:`w-full p-4 rounded-xl bg-white text-left ios-tap-target transition-all ${e===r.id?"ring-2 ring-[#007AFF] shadow-lg":""}`,children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("p",{className:"text-[17px] font-medium text-[#1D1D1F]",children:r.label}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73] mt-0.5",children:r.description}),(0,M.jsx)("p",{className:"text-[13px] text-[#8E8E93] mt-1",children:r.details})]}),(0,M.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${e===r.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:e===r.id&&(0,M.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})},r.id))})]})})}function oU({selectedPlan:e,onSelect:t}){let[r,n]=(0,D.useState)(e);return(0,M.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsxs)("div",{className:"flex flex-col items-center text-center mb-6",children:[(0,M.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6",children:(0,M.jsx)(eC,{name:"cloud",size:40})}),(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2",children:"Whle Speicherplan"}),(0,M.jsx)("p",{className:"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px]",children:"Du kannst das spter jederzeit ndern"})]}),(0,M.jsx)("div",{className:"bg-[#F2F2F7] rounded-xl p-4 mb-4",children:(0,M.jsxs)("p",{className:"text-[13px] text-[#6E6E73] text-center",children:[" ",(0,M.jsx)("strong",{children:"Empfehlung:"})," Starte mit FREE und upgrade spter, wenn du mehr Speicher brauchst."]})}),(0,M.jsx)("div",{className:"space-y-3",children:[{id:"free",label:"FREE",subtitle:"Auf deinen Gerten",price:"0/Monat",features:["Unbegrenzte Fotos","Zero-Knowledge Verschlsselung","Multi-Device Sync"],description:"Perfekt fr den Start"},{id:"backup-plus",label:"BACKUP+",subtitle:"Dauerhaft im Netz",price:"2,99/Monat",features:["Alles von Free","200 GB Cloud-Backup","Schnellere Synchronisierung"],recommended:!0,description:"Maximale Sicherheit"}].map(e=>(0,M.jsxs)("button",{onClick:()=>n(e.id),className:`w-full p-4 rounded-xl bg-white text-left ios-tap-target relative transition-all ${r===e.id?"ring-2 ring-[#007AFF] shadow-lg":""}`,children:[e.recommended&&(0,M.jsx)("span",{className:"absolute -top-2 left-4 px-2 py-0.5 bg-[#30D158] text-white text-[11px] font-semibold rounded-full",children:"EMPFOHLEN"}),(0,M.jsxs)("div",{className:"flex items-start justify-between",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("p",{className:"text-[15px] font-bold text-[#007AFF] tracking-wide",children:e.label}),(0,M.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] mt-0.5",children:e.subtitle}),(0,M.jsx)("p",{className:"text-[13px] text-[#8E8E93] mt-1",children:e.description}),(0,M.jsx)("ul",{className:"mt-3 space-y-1.5",children:e.features.map(e=>(0,M.jsxs)("li",{className:"text-[15px] text-[#6E6E73] flex items-center gap-2",children:[(0,M.jsx)("span",{className:"text-[#30D158]",children:""})," ",e]},e))}),(0,M.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] mt-4",children:e.price})]}),(0,M.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${r===e.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:r===e.id&&(0,M.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})]},e.id))})]}),(0,M.jsx)("button",{onClick:()=>t(r),className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target mt-4",children:"PhotoVault starten"})]})}function o$({onClose:e,onSuccess:t}){let[r,n]=(0,D.useState)(""),[i,s]=(0,D.useState)(null),[o,a]=(0,D.useState)(!1);return(0,M.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10",children:[(0,M.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Schlssel importieren"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-6",children:"Gib deine Backup-Phrase ein (mit Bindestrichen oder Leerzeichen)"}),(0,M.jsx)("textarea",{value:r,onChange:e=>{n(e.target.value),s(null)},placeholder:"abc123XY-def456AB-ghi789CD-...",className:"w-full h-[100px] bg-[#F2F2F7] rounded-xl p-4 text-[15px] text-[#1D1D1F] font-mono resize-none mb-2"}),i&&(0,M.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center mb-4",children:i}),(0,M.jsxs)("div",{className:"space-y-3",children:[(0,M.jsx)("button",{onClick:()=>{s(null),a(!0);try{let e=r.trim().replace(/[\s\n]+/g,"-").replace(/-+/g,"-");if(!e){s("Bitte gib deinen Schlssel ein"),a(!1);return}let n=eM(e);if(!n||32!==n.length){s("Ungltiger Schlssel. Bitte berprfe die Eingabe."),a(!1);return}eI(n);let i=e.split("-").slice(0,12);console.log("Key imported successfully"),t(e,i)}catch(e){console.error("Key import error:",e),s("Ungltiger Schlssel. Bitte berprfe die Eingabe."),a(!1)}},disabled:o||!r.trim(),className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target disabled:opacity-50",children:o?"Importiere...":"Importieren"}),(0,M.jsx)("button",{onClick:e,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Abbrechen"})]})]})})}let oz=L("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),oV=L("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),oK=L("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var oq=e.i(75555),oW=e.i(40143),oG=e.i(86491),oH=e.i(15823),oY=e.i(93803),oQ=e.i(19273),oJ=e.i(80166),oX=class extends oH.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#r=(0,oY.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#n=void 0;#i=void 0;#s=void 0;#o;#a;#r;#t;#l;#u;#c;#h;#d;#f;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#n.addObserver(this),oZ(this.#n,this.options)?this.#m():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return o0(this.#n,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return o0(this.#n,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#g(),this.#v(),this.#n.removeObserver(this)}setOptions(e){let t=this.options,r=this.#n;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,oQ.resolveEnabled)(this.options.enabled,this.#n))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#b(),this.#n.setOptions(this.options),t._defaulted&&!(0,oQ.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#n,observer:this});let n=this.hasListeners();n&&o1(this.#n,r,this.options,t)&&this.#m(),this.updateResult(),n&&(this.#n!==r||(0,oQ.resolveEnabled)(this.options.enabled,this.#n)!==(0,oQ.resolveEnabled)(t.enabled,this.#n)||(0,oQ.resolveStaleTime)(this.options.staleTime,this.#n)!==(0,oQ.resolveStaleTime)(t.staleTime,this.#n))&&this.#x();let i=this.#w();n&&(this.#n!==r||(0,oQ.resolveEnabled)(this.options.enabled,this.#n)!==(0,oQ.resolveEnabled)(t.enabled,this.#n)||i!==this.#f)&&this.#_(i)}getOptimisticResult(e){var t,r;let n=this.#e.getQueryCache().build(this.#e,e),i=this.createResult(n,e);return t=this,r=i,(0,oQ.shallowEqualObjects)(t.getCurrentResult(),r)||(this.#s=i,this.#a=this.options,this.#o=this.#n.state),i}getCurrentResult(){return this.#s}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"===r&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#r.status||this.#r.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#n}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#m({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#m(e){this.#b();let t=this.#n.fetch(this.options,e);return e?.throwOnError||(t=t.catch(oQ.noop)),t}#x(){this.#g();let e=(0,oQ.resolveStaleTime)(this.options.staleTime,this.#n);if(oQ.isServer||this.#s.isStale||!(0,oQ.isValidTimeout)(e))return;let t=(0,oQ.timeUntilStale)(this.#s.dataUpdatedAt,e);this.#h=oJ.timeoutManager.setTimeout(()=>{this.#s.isStale||this.updateResult()},t+1)}#w(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#n):this.options.refetchInterval)??!1}#_(e){this.#v(),this.#f=e,!oQ.isServer&&!1!==(0,oQ.resolveEnabled)(this.options.enabled,this.#n)&&(0,oQ.isValidTimeout)(this.#f)&&0!==this.#f&&(this.#d=oJ.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||oq.focusManager.isFocused())&&this.#m()},this.#f))}#y(){this.#x(),this.#_(this.#w())}#g(){this.#h&&(oJ.timeoutManager.clearTimeout(this.#h),this.#h=void 0)}#v(){this.#d&&(oJ.timeoutManager.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){let r,n=this.#n,i=this.options,s=this.#s,o=this.#o,a=this.#a,l=e!==n?e.state:this.#i,{state:u}=e,c={...u},h=!1;if(t._optimisticResults){let r=this.hasListeners(),s=!r&&oZ(e,t),o=r&&o1(e,n,t,i);(s||o)&&(c={...c,...(0,oG.fetchState)(u.data,e.options)}),"isRestoring"===t._optimisticResults&&(c.fetchStatus="idle")}let{error:d,errorUpdatedAt:f,status:p}=c;r=c.data;let m=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===p){let e;s?.isPlaceholderData&&t.placeholderData===a?.placeholderData?(e=s.data,m=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#c?.state.data,this.#c):t.placeholderData,void 0!==e&&(p="success",r=(0,oQ.replaceData)(s?.data,e,t),h=!0)}if(t.select&&void 0!==r&&!m)if(s&&r===o?.data&&t.select===this.#l)r=this.#u;else try{this.#l=t.select,r=t.select(r),r=(0,oQ.replaceData)(s?.data,r,t),this.#u=r,this.#t=null}catch(e){this.#t=e}this.#t&&(d=this.#t,r=this.#u,f=Date.now(),p="error");let y="fetching"===c.fetchStatus,g="pending"===p,v="error"===p,b=g&&y,x=void 0!==r,w={status:p,fetchStatus:c.fetchStatus,isPending:g,isSuccess:"success"===p,isError:v,isInitialLoading:b,isLoading:b,data:r,dataUpdatedAt:c.dataUpdatedAt,error:d,errorUpdatedAt:f,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>l.dataUpdateCount||c.errorUpdateCount>l.errorUpdateCount,isFetching:y,isRefetching:y&&!g,isLoadingError:v&&!x,isPaused:"paused"===c.fetchStatus,isPlaceholderData:h,isRefetchError:v&&x,isStale:o5(e,t),refetch:this.refetch,promise:this.#r,isEnabled:!1!==(0,oQ.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=void 0!==w.data,r="error"===w.status&&!t,i=e=>{r?e.reject(w.error):t&&e.resolve(w.data)},s=()=>{i(this.#r=w.promise=(0,oY.pendingThenable)())},o=this.#r;switch(o.status){case"pending":e.queryHash===n.queryHash&&i(o);break;case"fulfilled":(r||w.data!==o.value)&&s();break;case"rejected":r&&w.error===o.reason||s()}}return w}updateResult(){let e=this.#s,t=this.createResult(this.#n,this.options);if(this.#o=this.#n.state,this.#a=this.options,void 0!==this.#o.data&&(this.#c=this.#n),(0,oQ.shallowEqualObjects)(t,e))return;this.#s=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#p.size)return!0;let n=new Set(r??this.#p);return this.options.throwOnError&&n.add("error"),Object.keys(this.#s).some(t=>this.#s[t]!==e[t]&&n.has(t))};this.#k({listeners:r()})}#b(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#n)return;let t=this.#n;this.#n=e,this.#i=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#k(e){oW.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#s)}),this.#e.getQueryCache().notify({query:this.#n,type:"observerResultsUpdated"})})}};function oZ(e,t){return!1!==(0,oQ.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&o0(e,t,t.refetchOnMount)}function o0(e,t,r){if(!1!==(0,oQ.resolveEnabled)(t.enabled,e)&&"static"!==(0,oQ.resolveStaleTime)(t.staleTime,e)){let n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&o5(e,t)}return!1}function o1(e,t,r,n){return(e!==t||!1===(0,oQ.resolveEnabled)(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&o5(e,r)}function o5(e,t){return!1!==(0,oQ.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,oQ.resolveStaleTime)(t.staleTime,e))}var o2=e.i(12598),o3=D.createContext((n=!1,{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n})),o6=D.createContext(!1);o6.Provider;var o8=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function o4(e,t){return function(e,t,r){let n,i=D.useContext(o6),s=D.useContext(o3),o=(0,o2.useQueryClient)(r),a=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(a);let l=o.getQueryCache().get(a.queryHash);if(a._optimisticResults=i?"isRestoring":"optimistic",a.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=a.staleTime;a.staleTime="function"==typeof t?(...r)=>e(t(...r)):e(t),"number"==typeof a.gcTime&&(a.gcTime=Math.max(a.gcTime,1e3))}n=l?.state.error&&"function"==typeof a.throwOnError?(0,oQ.shouldThrowError)(a.throwOnError,[l.state.error,l]):a.throwOnError,(a.suspense||a.experimental_prefetchInRender||n)&&!s.isReset()&&(a.retryOnMount=!1),D.useEffect(()=>{s.clearReset()},[s]);let u=!o.getQueryCache().get(a.queryHash),[c]=D.useState(()=>new t(o,a)),h=c.getOptimisticResult(a),d=!i&&!1!==e.subscribed;if(D.useSyncExternalStore(D.useCallback(e=>{let t=d?c.subscribe(oW.notifyManager.batchCalls(e)):oQ.noop;return c.updateResult(),t},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(a)},[a,c]),a?.suspense&&h.isPending)throw o8(a,c,s);if((({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&void 0===e.data||(0,oQ.shouldThrowError)(r,[e.error,n])))({result:h,errorResetBoundary:s,throwOnError:a.throwOnError,query:l,suspense:a.suspense}))throw h.error;if(o.getDefaultOptions().queries?._experimental_afterQuery?.(a,h),a.experimental_prefetchInRender&&!oQ.isServer&&h.isLoading&&h.isFetching&&!i){let e=u?o8(a,c,s):l?.promise;e?.catch(oQ.noop).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?h:c.trackResult(h)}(e,oX,t)}var o7=e.i(14272),o9=oH,ae=class extends o9.Subscribable{#e;#s=void 0;#E;#S;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#j()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,oQ.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#E,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,oQ.hashKey)(t.mutationKey)!==(0,oQ.hashKey)(this.options.mutationKey)?this.reset():this.#E?.state.status==="pending"&&this.#E.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#E?.removeObserver(this)}onMutationUpdate(e){this.#j(),this.#k(e)}getCurrentResult(){return this.#s}reset(){this.#E?.removeObserver(this),this.#E=void 0,this.#j(),this.#k()}mutate(e,t){return this.#S=t,this.#E?.removeObserver(this),this.#E=this.#e.getMutationCache().build(this.#e,this.options),this.#E.addObserver(this),this.#E.execute(e)}#j(){let e=this.#E?.state??(0,o7.getDefaultState)();this.#s={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#k(e){oW.notifyManager.batch(()=>{if(this.#S&&this.hasListeners()){let t=this.#s.variables,r=this.#s.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#S.onSuccess?.(e.data,t,r,n)}catch(e){Promise.reject(e)}try{this.#S.onSettled?.(e.data,null,t,r,n)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#S.onError?.(e.error,t,r,n)}catch(e){Promise.reject(e)}try{this.#S.onSettled?.(void 0,e.error,t,r,n)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#s)})})}};function at(e,t){let r=(0,o2.useQueryClient)(t),[n]=D.useState(()=>new ae(r,e));D.useEffect(()=>{n.setOptions(e)},[n,e]);let i=D.useSyncExternalStore(D.useCallback(e=>n.subscribe(oW.notifyManager.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=D.useCallback((e,t)=>{n.mutate(e,t).catch(oQ.noop)},[n]);if(i.error&&(0,oQ.shouldThrowError)(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}var ar=e.i(93560);let an=Symbol.for("Dexie"),ai=globalThis[an]||(globalThis[an]=ar.default);if(ar.default.semVer!==ai.semVer)throw Error(`Two different versions of Dexie loaded in the same app: ${ar.default.semVer} and ${ai.semVer}`);let{liveQuery:as,mergeRanges:ao,rangesOverlap:aa,RangeSet:al,cmp:au,Entity:ac,PropModification:ah,replacePrefix:ad,add:af,remove:ap,DexieYProvider:am}=ai,ay=ai,ag=new class extends ay{photos;constructor(){super("PhotoVaultDB"),this.version(1).stores({photos:"++id, cid, uploadedAt"})}};async function av(e){return await ag.photos.add(e)}async function ab(){return await ag.photos.orderBy("uploadedAt").reverse().toArray()}async function ax(e){return await ag.photos.where("cid").equals(e).first()}async function aw(e){await ag.photos.delete(e)}async function a_(){return await ag.photos.count()}class ak extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class aE extends ak{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class aS extends ak{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class aj extends ak{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}(l=_||(_={})).Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2";class aA{constructor(t,{headers:r={},customFetch:n,region:i=_.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=(t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(11737).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r,n,i,s,o;return n=this,i=void 0,s=void 0,o=function*(){try{let n,{headers:i,method:s,body:o}=t,a={},{region:l}=t;l||(l=this.region),l&&"any"!==l&&(a["x-region"]=l),o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&("u">typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",n=o):"string"==typeof o?(a["Content-Type"]="text/plain",n=o):"u">typeof FormData&&o instanceof FormData?n=o:(a["Content-Type"]="application/json",n=JSON.stringify(o)));let u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:n}).catch(e=>{throw new aE(e)}),c=u.headers.get("x-relay-error");if(c&&"true"===c)throw new aS(u);if(!u.ok)throw new aj(u);let h=(null!=(r=u.headers.get("Content-Type"))?r:"text/plain").split(";")[0].trim();return{data:"application/json"===h?yield u.json():"application/octet-stream"===h?yield u.blob():"text/event-stream"===h?u:"multipart/form-data"===h?yield u.formData():yield u.text(),error:null}}catch(e){return{data:null,error:e}}},new(s||(s=Promise))(function(e,t){function r(e){try{l(o.next(e))}catch(e){t(e)}}function a(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof s?n:new s(function(e){e(n)})).then(r,a)}l((o=o.apply(n,i||[])).next())})}}let{PostgrestClient:aT,PostgrestQueryBuilder:aP,PostgrestFilterBuilder:aC,PostgrestTransformBuilder:aO,PostgrestBuilder:aR,PostgrestError:aN}=e.i(82215).default,aM={"X-Client-Info":"realtime-js/2.11.2"};(u=k||(k={}))[u.connecting=0]="connecting",u[u.open=1]="open",u[u.closing=2]="closing",u[u.closed=3]="closed",(c=E||(E={})).closed="closed",c.errored="errored",c.joined="joined",c.joining="joining",c.leaving="leaving",(h=S||(S={})).close="phx_close",h.error="phx_error",h.join="phx_join",h.reply="phx_reply",h.leave="phx_leave",h.access_token="access_token",(j||(j={})).websocket="websocket",(d=A||(A={})).Connecting="connecting",d.Open="open",d.Closing="closing",d.Closed="closed";class aD{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):"string"==typeof e?t(JSON.parse(e)):t({})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let n=t.getUint8(1),i=t.getUint8(2),s=this.HEADER_LENGTH+2,o=r.decode(e.slice(s,s+n));s+=n;let a=r.decode(e.slice(s,s+i));return s+=i,{ref:null,topic:o,event:a,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class aF{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(f=T||(T={})).abstime="abstime",f.bool="bool",f.date="date",f.daterange="daterange",f.float4="float4",f.float8="float8",f.int2="int2",f.int4="int4",f.int4range="int4range",f.int8="int8",f.int8range="int8range",f.json="json",f.jsonb="jsonb",f.money="money",f.numeric="numeric",f.oid="oid",f.reltime="reltime",f.text="text",f.time="time",f.timestamp="timestamp",f.timestamptz="timestamptz",f.timetz="timetz",f.tsrange="tsrange",f.tstzrange="tstzrange";let aI=(e,t,r={})=>{var n;let i=null!=(n=r.skipTypes)?n:[];return Object.keys(t).reduce((r,n)=>(r[n]=aB(n,e,t,i),r),{})},aB=(e,t,r,n)=>{let i=t.find(t=>t.name===e),s=null==i?void 0:i.type,o=r[e];return s&&!n.includes(s)?aL(s,o):aU(o)},aL=(e,t)=>{if("_"===e.charAt(0))return aK(t,e.slice(1,e.length));switch(e){case T.bool:return a$(t);case T.float4:case T.float8:case T.int2:case T.int4:case T.int8:case T.numeric:case T.oid:return az(t);case T.json:case T.jsonb:return aV(t);case T.timestamp:return aq(t);case T.abstime:case T.date:case T.daterange:case T.int4range:case T.int8range:case T.money:case T.reltime:case T.text:case T.time:case T.timestamptz:case T.timetz:case T.tsrange:case T.tstzrange:default:return aU(t)}},aU=e=>e,a$=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},az=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},aV=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){console.log(`JSON parse error: ${e}`)}return e},aK=(e,t)=>{if("string"!=typeof e)return e;let r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n,i=e.slice(1,r);try{n=JSON.parse("["+i+"]")}catch(e){n=i?i.split(","):[]}return n.map(e=>aL(t,e))}return e},aq=e=>"string"==typeof e?e.replace(" ","T"):e,aW=e=>{let t=e;return(t=(t=t.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")};class aG{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null==(r=this.receivedResp)?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(p=P||(P={})).SYNC="sync",p.JOIN="join",p.LEAVE="leave";class aH{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{let{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=aH.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=aH.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{let{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=aH.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){let i=this.cloneDeep(e),s=this.transformState(t),o={},a={};return this.map(i,(e,t)=>{s[e]||(a[e]=t)}),this.map(s,(e,t)=>{let r=i[e];if(r){let n=t.map(e=>e.presence_ref),i=r.map(e=>e.presence_ref),s=t.filter(e=>0>i.indexOf(e.presence_ref)),l=r.filter(e=>0>n.indexOf(e.presence_ref));s.length>0&&(o[e]=s),l.length>0&&(a[e]=l)}else o[e]=t}),this.syncDiff(i,{joins:o,leaves:a},r,n)}static syncDiff(e,t,r,n){let{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(t,n)=>{var i;let s=null!=(i=e[t])?i:[];if(e[t]=this.cloneDeep(n),s.length>0){let r=e[t].map(e=>e.presence_ref),n=s.filter(e=>0>r.indexOf(e.presence_ref));e[t].unshift(...n)}r(t,s,n)}),this.map(s,(t,r)=>{let i=e[t];if(!i)return;let s=r.map(e=>e.presence_ref);i=i.filter(e=>0>s.indexOf(e.presence_ref)),e[t]=i,n(t,i,r),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,r)=>{let n=e[r];return"metas"in n?t[r]=n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(m=C||(C={})).ALL="*",m.INSERT="INSERT",m.UPDATE="UPDATE",m.DELETE="DELETE",(y=O||(O={})).BROADCAST="broadcast",y.PRESENCE="presence",y.POSTGRES_CHANGES="postgres_changes",y.SYSTEM="system",(g=R||(R={})).SUBSCRIBED="SUBSCRIBED",g.TIMED_OUT="TIMED_OUT",g.CLOSED="CLOSED",g.CHANNEL_ERROR="CHANNEL_ERROR";class aY{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=E.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new aG(this,S.join,this.params,this.timeout),this.rejoinTimer=new aF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=E.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=E.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=E.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=E.errored,this.rejoinTimer.scheduleTimeout())}),this._on(S.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new aH(this),this.broadcastEndpointURL=aW(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:i,presence:s,private:o}}=this.params;this._onError(t=>null==e?void 0:e(R.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(R.CLOSED));let a={},l={broadcast:i,presence:s,postgres_changes:null!=(n=null==(r=this.bindings.postgres_changes)?void 0:r.map(e=>e.filter))?n:[],private:o};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0===t){null==e||e(R.SUBSCRIBED);return}{let n=this.bindings.postgres_changes,i=null!=(r=null==n?void 0:n.length)?r:0,s=[];for(let r=0;r<i;r++){let i=n[r],{filter:{event:o,schema:a,table:l,filter:u}}=i,c=t&&t[r];if(c&&c.event===o&&c.schema===a&&c.table===l&&c.filter===u)s.push(Object.assign(Object.assign({},i),{id:c.id}));else{this.unsubscribe(),null==e||e(R.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=s,e&&e(R.SUBSCRIBED);return}}).receive("error",t=>{null==e||e(R.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(R.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,i,s;let o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null==(s=null==(i=null==(n=this.params)?void 0:n.config)?void 0:i.broadcast)?void 0:s.ack)||r("ok"),o.receive("ok",()=>r("ok")),o.receive("error",()=>r("error")),o.receive("timeout",()=>r("timed out"))});{let{event:i,payload:s}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!=(r=t.timeout)?r:this.timeout);return await (null==(n=e.body)?void 0:n.cancel()),e.ok?"ok":"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=E.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(S.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let n=new aG(this,S.leave,{},e);n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){let n=new AbortController,i=setTimeout(()=>n.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),s}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new aG(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;let s=e.toLocaleLowerCase(),{close:o,error:a,leave:l,join:u}=S;if(r&&[o,a,l,u].indexOf(s)>=0&&r!==this._joinRef())return;let c=this._onMessage(s,t,r);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null==(n=this.bindings.postgres_changes)||n.filter(e=>{var t,r,n;return(null==(t=e.filter)?void 0:t.event)==="*"||(null==(n=null==(r=e.filter)?void 0:r.event)?void 0:n.toLocaleLowerCase())===s}).map(e=>e.callback(c,r)):null==(i=this.bindings[s])||i.filter(e=>{var r,n,i,o,a,l;if(!["broadcast","presence","postgres_changes"].includes(s))return e.type.toLocaleLowerCase()===s;if("id"in e){let s=e.id,o=null==(r=e.filter)?void 0:r.event;return s&&(null==(n=t.ids)?void 0:n.includes(s))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null==(i=t.data)?void 0:i.type.toLocaleLowerCase()))}{let r=null==(a=null==(o=null==e?void 0:e.filter)?void 0:o.event)?void 0:a.toLocaleLowerCase();return"*"===r||r===(null==(l=null==t?void 0:t.event)?void 0:l.toLocaleLowerCase())}}).map(e=>{if("object"==typeof c&&"ids"in c){let e=c.data,{schema:t,table:r,commit_timestamp:n,type:i,errors:s}=e;c=Object.assign(Object.assign({},{schema:t,table:r,commit_timestamp:n,eventType:i,new:{},old:{},errors:s}),this._getPayloadRecords(e))}e.callback(c,r)})}_isClosed(){return this.state===E.closed}_isJoined(){return this.state===E.joined}_isJoining(){return this.state===E.joining}_isLeaving(){return this.state===E.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null==(n=e.type)?void 0:n.toLocaleLowerCase())===r&&aY.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(S.close,{},e)}_onError(e){this._on(S.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=E.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=aI(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=aI(e.columns,e.old_record)),t}}let aQ=()=>{},aJ="u">typeof WebSocket,aX=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aZ{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=aM,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=aQ,this.conn=null,this.sendBuffer=[],this.serializer=new aD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(11737).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},this.endPoint=`${t}/${j.websocket}`,this.httpEndpoint=aW(t),(null==r?void 0:r.transport)?this.transport=r.transport:this.transport=null,(null==r?void 0:r.params)&&(this.params=r.params),(null==r?void 0:r.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),(null==r?void 0:r.timeout)&&(this.timeout=r.timeout),(null==r?void 0:r.logger)&&(this.logger=r.logger),(null==r?void 0:r.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=null==(n=null==r?void 0:r.params)?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=(null==r?void 0:r.reconnectAfterMs)?r.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==r?void 0:r.encode)?r.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==r?void 0:r.decode)?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new aF(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==r?void 0:r.fetch),null==r?void 0:r.worker){if("u">typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.worker=(null==r?void 0:r.worker)||!1,this.workerUrl=null==r?void 0:r.workerUrl}this.accessToken=(null==r?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(aJ){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new a0(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),e.A(56555).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case k.connecting:return A.Connecting;case k.open:return A.Open;case k.closing:return A.Closing;default:return A.Closed}}isConnected(){return this.connectionState()===A.Open}channel(e,t={config:{}}){let r=new aY(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){let{topic:t,event:r,payload:n,ref:i}=e,s=()=>{this.encode(e,e=>{var t;null==(t=this.conn)||t.send(e)})};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let e=null;try{e=JSON.parse(atob(t.split(".")[1]))}catch(e){}if(e&&e.exp&&!(Math.floor(Date.now()/1e3)-e.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`);this.accessTokenValue=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(S.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),null==(e=this.conn)||e.close(1e3,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:r,payload:n,ref:i}=e;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${r} ${i&&"("+i+")"||""}`,n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(S.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([aX],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class a0{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=k.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}var a1=e.i(67034);class a5 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function a2(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class a3 extends a5{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class a6 extends a5{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}let a8=t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(11737).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},a4=e=>{if(Array.isArray(e))return e.map(e=>a4(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,r])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=a4(r)}),t};var a7=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})};let a9=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function le(t,r,n,i,s,o){return a7(this,void 0,void 0,function*(){return new Promise((a,l)=>{let u;t(n,(u={method:r,headers:(null==i?void 0:i.headers)||{}},"GET"===r?u:(u.headers=Object.assign({"Content-Type":"application/json"},null==i?void 0:i.headers),o&&(u.body=JSON.stringify(o)),Object.assign(Object.assign({},u),s)))).then(e=>{if(!e.ok)throw e;return(null==i?void 0:i.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(t=>a7(void 0,void 0,void 0,function*(){var r,n,s,o;let a=yield(r=void 0,n=void 0,s=void 0,o=function*(){return"u"<typeof Response?(yield e.A(11737)).Response:Response},new(s||(s=Promise))(function(e,t){function i(e){try{l(o.next(e))}catch(e){t(e)}}function a(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof s?r:new s(function(e){e(r)})).then(i,a)}l((o=o.apply(r,n||[])).next())}));t instanceof a&&!(null==i?void 0:i.noResolveJson)?t.json().then(e=>{l(new a3(a9(e),t.status||500))}).catch(e=>{l(new a6(a9(e),e))}):l(new a6(a9(t),t))}))})})}function lt(e,t,r,n){return a7(this,void 0,void 0,function*(){return le(e,"GET",t,r,n)})}function lr(e,t,r,n,i){return a7(this,void 0,void 0,function*(){return le(e,"POST",t,n,i,r)})}function ln(e,t,r,n,i){return a7(this,void 0,void 0,function*(){return le(e,"DELETE",t,n,i,r)})}var li=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})};let ls={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class la{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=a8(n)}uploadOrUpdate(e,t,r,n){return li(this,void 0,void 0,function*(){try{let i,s=Object.assign(Object.assign({},lo),n),o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)}),a=s.metadata;"u">typeof Blob&&r instanceof Blob?((i=new FormData).append("cacheControl",s.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",r)):"u">typeof FormData&&r instanceof FormData?((i=r).append("cacheControl",s.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=r,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==n?void 0:n.headers)&&(o=Object.assign(Object.assign({},o),n.headers));let l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:o},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{})),h=yield c.json();if(c.ok)return{data:{path:l,id:h.Id,fullPath:h.Key},error:null};return{data:null,error:h}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}upload(e,t,r){return li(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return li(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(e),s=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",t);try{let e,t=Object.assign({upsert:lo.upsert},n),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"u">typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"u">typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType);let a=yield this.fetch(o.toString(),{method:"PUT",body:e,headers:s}),l=yield a.json();if(a.ok)return{data:{path:i,fullPath:l.Key},error:null};return{data:null,error:l}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return li(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");let i=yield lr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),s=new URL(this.url+i.url),o=s.searchParams.get("token");if(!o)throw new a5("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:o},error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}update(e,t,r){return li(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return li(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}copy(e,t,r){return li(this,void 0,void 0,function*(){try{return{data:{path:(yield lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,r){return li(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield lr(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers}),s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,r){return li(this,void 0,void 0,function*(){try{let n=yield lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}download(e,t){return li(this,void 0,void 0,function*(){let r=void 0!==(null==t?void 0:t.transform),n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=n?`?${n}`:"";try{let t=this._getFinalPath(e),n=yield lt(this.fetch,`${this.url}/${r?"render/image/authenticated":"object"}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}info(e){return li(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let e=yield lt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:a4(e),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}exists(e){return li(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield function(e,t,r,n){return a7(this,void 0,void 0,function*(){return le(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(a2(e)&&e instanceof a6){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){let r=this._getFinalPath(e),n=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&n.push(i);let s=void 0!==(null==t?void 0:t.transform),o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&n.push(o);let a=n.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s?"render/image":"object"}/public/${r}${a}`)}}}remove(e){return li(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}list(e,t,r){return li(this,void 0,void 0,function*(){try{let n=Object.assign(Object.assign(Object.assign({},ls),t),{prefix:e||""});return{data:yield lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return void 0!==a1.Buffer?a1.Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}let ll={"X-Client-Info":"storage-js/2.7.1"};var lu=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})};class lc{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},ll),t),this.fetch=a8(r)}listBuckets(){return lu(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}getBucket(e){return lu(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}createBucket(e,t={public:!1}){return lu(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return lu(this,void 0,void 0,function*(){try{return{data:yield function(e,t,r,n,i){return a7(this,void 0,void 0,function*(){return le(e,"PUT",t,n,void 0,r)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}emptyBucket(e){return lu(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}deleteBucket(e){return lu(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(a2(e))return{data:null,error:e};throw e}})}}class lh extends lc{constructor(e,t={},r){super(e,t,r)}from(e){return new la(this.url,this.headers,e,this.fetch)}}let ld="";ld="u">typeof Deno?"deno":"u">typeof document?"web":"u">typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let lf={headers:{"X-Client-Info":`supabase-js-${ld}/2.48.1`}},lp={schema:"public"},lm={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ly={};var lg=e.i(6085);let lv="2.67.3",lb={"X-Client-Info":`gotrue-js/${lv}`},lx="X-Supabase-Api-Version",lw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},l_=()=>"u">typeof window&&"u">typeof document,lk={tested:!1,writable:!1},lE=()=>{if(!l_())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(lk.tested)return lk.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),lk.tested=!0,lk.writable=!0}catch(e){lk.tested=!0,lk.writable=!1}return lk.writable},lS=t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(11737).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},lj=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},lA=async(e,t)=>{let r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}},lT=async(e,t)=>{await e.removeItem(t)};class lP{constructor(){this.promise=new lP.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function lC(e){let t=e.split(".");if(3!==t.length)throw Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw Error("JWT is not valid: payload is not in base64url format");return JSON.parse(function(e){let t,r,n,i,s,o,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;for(e=e.replace("-","+").replace("_","/");c<e.length;)i=l.indexOf(e.charAt(c++)),s=l.indexOf(e.charAt(c++)),o=l.indexOf(e.charAt(c++)),a=l.indexOf(e.charAt(c++)),t=i<<2|s>>4,r=(15&s)<<4|o>>2,n=(3&o)<<6|a,u+=String.fromCharCode(t),64!=o&&0!=r&&(u+=String.fromCharCode(r)),64!=a&&0!=n&&(u+=String.fromCharCode(n));return u}(t[1]))}async function lO(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function lR(e){return("0"+e.toString(16)).substr(-2)}async function lN(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>String.fromCharCode(e)).join("")}async function lM(e){return"u">typeof crypto&&void 0!==crypto.subtle&&"u">typeof TextEncoder?btoa(await lN(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e)}async function lD(e,t,r=!1){let n=function(){let e=new Uint32Array(56);if("u"<typeof crypto){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,lR).join("")}(),i=n;r&&(i+="/PASSWORD_RECOVERY"),await lj(e,`${t}-code-verifier`,i);let s=await lM(n),o=n===s?"plain":"s256";return[s,o]}lP.promiseConstructor=Promise;let lF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class lI extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function lB(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class lL extends lI{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class lU extends lI{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class l$ extends lI{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class lz extends l${constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class lV extends l${constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lK extends l${constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class lq extends l${constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lW extends l${constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lG extends l${constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function lH(e){return lB(e)&&"AuthRetryableFetchError"===e.name}class lY extends l${constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var lQ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};let lJ=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lX=[502,503,504];async function lZ(e){var t;let r,n;if(!("object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json))throw new lG(lJ(e),0);if(lX.includes(e.status))throw new lG(lJ(e),e.status);try{r=await e.json()}catch(e){throw new lU(lJ(e),e)}let i=function(e){let t=e.headers.get(lx);if(!t||!t.match(lF))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(i&&i.getTime()>=lw["2024-01-01"].timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?n=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(n=r.error_code),n){if("weak_password"===n)throw new lY(lJ(r),e.status,(null==(t=r.weak_password)?void 0:t.reasons)||[]);else if("session_not_found"===n)throw new lz}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new lY(lJ(r),e.status,r.weak_password.reasons);throw new lL(lJ(r),e.status||500,n)}async function l0(e,t,r,n){var i;let s=Object.assign({},null==n?void 0:n.headers);s[lx]||(s[lx]=lw["2024-01-01"].name),(null==n?void 0:n.jwt)&&(s.Authorization=`Bearer ${n.jwt}`);let o=null!=(i=null==n?void 0:n.query)?i:{};(null==n?void 0:n.redirectTo)&&(o.redirect_to=n.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await l1(e,t,r+a,{headers:s,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function l1(e,t,r,n,i,s){let o,a,l=(a={method:t,headers:(null==n?void 0:n.headers)||{}},"GET"===t?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==n?void 0:n.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),i)));try{o=await e(r,Object.assign({},l))}catch(e){throw console.error(e),new lG(lJ(e),0)}if(o.ok||await lZ(o),null==n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(e){await lZ(e)}}function l5(e){var t,r,n;let i=null;(n=e).access_token&&n.refresh_token&&n.expires_in&&(i=Object.assign({},e),e.expires_at||(i.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:i,user:null!=(t=e.user)?t:e},error:null}}function l2(e){let t=l5(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function l3(e){var t;return{data:{user:null!=(t=e.user)?t:e},error:null}}function l6(e){return{data:e,error:null}}function l8(e){let{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=e;return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},user:Object.assign({},lQ(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function l4(e){return e}var l7=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class l9{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=lS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await l0(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(lB(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await l0(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:l3})}catch(e){if(lB(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,r=l7(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await l0(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:l8,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(lB(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await l0(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:l3})}catch(e){if(lB(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,r,n,i,s,o,a;try{let l={nextPage:null,lastPage:0,total:0},u=await l0(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(i=null==(n=null==e?void 0:e.perPage)?void 0:n.toString())?i:""},xform:l4});if(u.error)throw u.error;let c=await u.json(),h=null!=(s=u.headers.get("x-total-count"))?s:0,d=null!=(a=null==(o=u.headers.get("link"))?void 0:o.split(","))?a:[];return d.length>0&&(d.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(e){if(lB(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){try{return await l0(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:l3})}catch(e){if(lB(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){try{return await l0(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:l3})}catch(e){if(lB(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){try{return await l0(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:l3})}catch(e){if(lB(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){try{let{data:t,error:r}=await l0(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(e){if(lB(e))return{data:null,error:e};throw e}}async _deleteFactor(e){try{return{data:await l0(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(lB(e))return{data:null,error:e};throw e}}}let ue={getItem:e=>lE()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{lE()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{lE()&&globalThis.localStorage.removeItem(e)}};function ut(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}let ur={debug:!!(globalThis&&lE()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class un extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ui extends un{}async function us(e,t,r){ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ur.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(n){ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}if(0===t)throw ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ui(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ur.debug)try{let e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}))}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"u">typeof self&&(self.globalThis=self)}let uo={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ua(e,t,r){return await r()}class ul{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ul.nextInstanceID,ul.nextInstanceID+=1,this.instanceID>0&&l_()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},uo),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new l9({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=lS(n.fetch),this.lock=n.lock||ua,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:l_()&&(null==(t=null==globalThis?void 0:globalThis.navigator)?void 0:t.locks)?this.lock=us:this.lock=ua,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:lE()?this.storage=ue:(this.memoryStorage={},this.storage=ut(this.memoryStorage)):(this.memoryStorage={},this.storage=ut(this.memoryStorage)),l_()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null==(r=this.broadcastChannel)||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t=function(e){let t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(e){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),l_()&&this.detectSessionInUrl&&"none"!==r){let{data:n,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),lB(i)&&"AuthImplicitGrantRedirectError"===i.name){let t=null==(e=i.details)?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}let{session:s,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){if(lB(e))return{error:e};return{error:new lU("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{let{data:i,error:s}=await l0(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(r=null==(t=null==e?void 0:e.options)?void 0:t.data)?r:{},gotrue_meta_security:{captcha_token:null==(n=null==e?void 0:e.options)?void 0:n.captchaToken}},xform:l5});if(s||!i)return{data:{user:null,session:null},error:s};let o=i.session,a=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(e){if(lB(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){var t,r,n;try{let i;if("email"in e){let{email:r,password:n,options:s}=e,o=null,a=null;"pkce"===this.flowType&&([o,a]=await lD(this.storage,this.storageKey)),i=await l0(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!=(t=null==s?void 0:s.data)?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:o,code_challenge_method:a},xform:l5})}else if("phone"in e){let{phone:t,password:s,options:o}=e;i=await l0(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!=(r=null==o?void 0:o.data)?r:{},channel:null!=(n=null==o?void 0:o.channel)?n:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:l5})}else throw new lK("You must provide either an email or phone number and a password");let{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};let a=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(e){if(lB(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if("email"in e){let{email:r,password:n,options:i}=e;t=await l0(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:l2})}else if("phone"in e){let{phone:r,password:n,options:i}=e;t=await l0(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:l2})}else throw new lK("You must provide either an email or phone number and a password");let{data:r,error:n}=t;if(n)return{data:{user:null,session:null},error:n};if(!r||!r.session||!r.user)return{data:{user:null,session:null},error:new lV};return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}}catch(e){if(lB(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null==(t=e.options)?void 0:t.redirectTo,scopes:null==(r=e.options)?void 0:r.scopes,queryParams:null==(n=e.options)?void 0:n.queryParams,skipBrowserRedirect:null==(i=e.options)?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){let t=await lA(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{let{data:t,error:i}=await l0(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:l5});if(await lT(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!t||!t.session||!t.user)return{data:{user:null,session:null,redirectType:null},error:new lV};return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:i}}catch(e){if(lB(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{let{options:t,provider:r,token:n,access_token:i,nonce:s}=e,{data:o,error:a}=await l0(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:l5});if(a)return{data:{user:null,session:null},error:a};if(!o||!o.session||!o.user)return{data:{user:null,session:null},error:new lV};return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:a}}catch(e){if(lB(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,r,n,i,s;try{if("email"in e){let{email:n,options:i}=e,s=null,o=null;"pkce"===this.flowType&&([s,o]=await lD(this.storage,this.storageKey));let{error:a}=await l0(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!=(t=null==i?void 0:i.data)?t:{},create_user:null==(r=null==i?void 0:i.shouldCreateUser)||r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:o},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){let{phone:t,options:r}=e,{data:o,error:a}=await l0(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!=(n=null==r?void 0:r.data)?n:{},create_user:null==(i=null==r?void 0:r.shouldCreateUser)||i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!=(s=null==r?void 0:r.channel)?s:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new lK("You must provide either an email or phone number.")}catch(e){if(lB(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,r;try{let n,i;"options"in e&&(n=null==(t=e.options)?void 0:t.redirectTo,i=null==(r=e.options)?void 0:r.captchaToken);let{data:s,error:o}=await l0(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:l5});if(o)throw o;if(!s)throw Error("An error occurred on token verification.");let a=s.session,l=s.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(e){if(lB(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,r,n;try{let i=null,s=null;return"pkce"===this.flowType&&([i,s]=await lD(this.storage,this.storageKey)),await l0(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!=(r=null==(t=e.options)?void 0:t.redirectTo)?r:void 0}),(null==(n=null==e?void 0:e.options)?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:l6})}catch(e){if(lB(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new lz;let{error:n}=await l0(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(lB(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:n,options:i}=e,{error:s}=await l0(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){let{phone:r,type:n,options:i}=e,{data:s,error:o}=await l0(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:o}}throw new lK("You must provide either an email or phone number and a type")}catch(e){if(lB(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let e=null,t=await lA(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let r=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,n)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,n))})}return{data:{session:e},error:null}}let{session:n,error:i}=await this._callRefreshToken(e.refresh_token);if(i)return{data:{session:null},error:i};return{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{if(e)return await l0(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:l3});return await this._useSession(async e=>{var t,r,n;let{data:i,error:s}=e;if(s)throw s;return(null==(t=i.session)?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await l0(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(n=null==(r=i.session)?void 0:r.access_token)?n:void 0,xform:l3}):{data:{user:null},error:new lz}})}catch(e){if(lB(e))return lB(e)&&"AuthSessionMissingError"===e.name&&(await this._removeSession(),await lT(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new lz;let s=n.session,o=null,a=null;"pkce"===this.flowType&&null!=e.email&&([o,a]=await lD(this.storage,this.storageKey));let{data:l,error:u}=await l0(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:s.access_token,xform:l3});if(u)throw u;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(e){if(lB(e))return{data:{user:null},error:e};throw e}}_decodeJWT(e){return lC(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new lz;let t=Date.now()/1e3,r=t,n=!0,i=null,s=lC(e.access_token);if(s.exp&&(n=(r=s.exp)<=t),n){let{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};i=t}else{let{data:n,error:s}=await this._getUser(e.access_token);if(s)throw s;i={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(e){if(lB(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:n,error:i}=t;if(i)throw i;e=null!=(r=n.session)?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new lz;let{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(lB(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e,t){try{if(!l_())throw new lq("No browser detected.");if(e.error||e.error_description||e.error_code)throw new lq(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new lW("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new lq("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new lW("No code detected.");let{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;let n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:s,expires_in:o,expires_at:a,token_type:l}=e;if(!i||!o||!s||!l)throw new lq("No session defined in URL");let u=Math.round(Date.now()/1e3),c=parseInt(o),h=u+c;a&&(h=parseInt(a));let d=h-u;1e3*d<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${c}s`);let f=h-c;u-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,u):u-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,h,u);let{data:p,error:m}=await this._getUser(i);if(m)throw m;let y={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:c,expires_at:h,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(e){if(lB(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await lA(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:n,error:i}=t;if(i)return{error:i};let s=null==(r=n.session)?void 0:r.access_token;if(s){let{error:t}=await this.admin.signOut(s,e);if(t&&!(lB(t)&&"AuthApiError"===t.name&&(404===t.status||401===t.status||403===t.status)))return{error:t}}return"others"!==e&&(await this._removeSession(),await lT(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){let t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{let{data:{session:n},error:i}=t;if(i)throw i;await (null==(r=this.stateChangeEmitters.get(e))?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(t){await (null==(n=this.stateChangeEmitters.get(e))?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await lD(this.storage,this.storageKey,!0));try{return await l0(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(lB(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!=(e=t.user.identities)?e:[]},error:null}}catch(e){if(lB(e))return{data:null,error:e};throw e}}async linkIdentity(e){var t;try{let{data:r,error:n}=await this._useSession(async t=>{var r,n,i,s,o;let{data:a,error:l}=t;if(l)throw l;let u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null==(r=e.options)?void 0:r.redirectTo,scopes:null==(n=e.options)?void 0:n.scopes,queryParams:null==(i=e.options)?void 0:i.queryParams,skipBrowserRedirect:!0});return await l0(this.fetch,"GET",u,{headers:this.headers,jwt:null!=(o=null==(s=a.session)?void 0:s.access_token)?o:void 0})});if(n)throw n;return!l_()||(null==(t=e.options)?void 0:t.skipBrowserRedirect)||window.location.assign(null==r?void 0:r.url),{data:{provider:e.provider,url:null==r?void 0:r.url},error:null}}catch(t){if(lB(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;let{data:i,error:s}=t;if(s)throw s;return await l0(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!=(n=null==(r=i.session)?void 0:r.access_token)?n:void 0})})}catch(e){if(lB(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{var r,n;let i=Date.now();return await (r=async r=>(r>0&&await lO(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await l0(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:l5})),n=(e,t)=>{let r=200*Math.pow(2,e);return t&&lH(t)&&Date.now()+r-i<3e4},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{let t=await r(i);if(!n(i,null,t))return void e(t)}catch(e){if(!n(i,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),lB(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),l_()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;let t="#_recoverAndRefresh()";this._debug(t,"begin");try{let r=await lA(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),null!==r&&await this._removeSession();return}let n=Math.round(Date.now()/1e3),i=(null!=(e=r.expires_at)?e:1/0)<n+10;if(this._debug(t,`session has${i?"":" not"} expired with margin of 10s`),i){if(this.autoRefreshToken&&r.refresh_token){let{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),lH(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(e){this._debug(t,"error",e),console.error(e);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new lz;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new lP;let{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new lz;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);let n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(e){if(this._debug(n,"error",e),lB(e)){let r={session:null,error:e};return lH(e)||await this._removeSession(),null==(t=this.refreshingDeferred)||t.resolve(r),r}throw null==(r=this.refreshingDeferred)||r.reject(e),e}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){let n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let n=[],i=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(e){n.push(e)}});if(await Promise.all(i),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await lj(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await lT(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&l_()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"u">typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let n=Math.floor((1e3*r.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof un)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!l_()||!(null==window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){let[e,t]=await lD(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){let e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:n,error:i}=t;return i?{data:null,error:i}:await l0(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token})})}catch(e){if(lB(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;let{data:i,error:s}=t;if(s)return{data:null,error:s};let o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:l}=await l0(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:null==(r=null==i?void 0:i.session)?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null==(n=null==a?void 0:a.totp)?void 0:n.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(e){if(lB(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:n,error:i}=t;if(i)return{data:null,error:i};let{data:s,error:o}=await l0(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})})}catch(e){if(lB(e))return{data:null,error:e};throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:n,error:i}=t;return i?{data:null,error:i}:await l0(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token})})}catch(e){if(lB(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){let{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};let r=(null==e?void 0:e.factors)||[],n=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;let{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let s=this._decodeJWT(n.access_token),o=null;s.aal&&(o=s.aal);let a=o;return(null!=(r=null==(t=n.user.factors)?void 0:t.filter(e=>"verified"===e.status))?r:[]).length>0&&(a="aal2"),{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:s.amr||[]},error:null}}))}}ul.nextInstanceID=0;let uu=ul;class uc extends uu{constructor(e){super(e)}}let uh=new class e{constructor(e,t,r){var n,i,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw Error("supabaseUrl is required.");if(!t)throw Error("supabaseKey is required.");const o=e.replace(/\/$/,"");this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const a=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l=function(e,t){let{db:r,auth:n,realtime:i,global:s}=e,{db:o,auth:a,realtime:l,global:u}=t,c={db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s),accessToken:()=>{var e,t,r,n;return e=this,t=void 0,n=function*(){return""},new(r=void 0,r=Promise)(function(i,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})}};return e.accessToken?c.accessToken=e.accessToken:delete c.accessToken,c}(null!=r?r:{},{db:lp,realtime:ly,auth:Object.assign(Object.assign({},lm),{storageKey:a}),global:lf});this.storageKey=null!=(n=l.auth.storageKey)?n:"",this.headers=null!=(i=l.global.headers)?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(s=l.auth)?s:{},this.headers,l.global.fetch),this.fetch=((e,t,r)=>{let n,i=(n=r||("u"<typeof fetch?lg.default:fetch),(...e)=>n(...e)),s="u"<typeof Headers?lg.Headers:Headers;return(r,n)=>{var o,a,l,u;return o=void 0,a=void 0,l=void 0,u=function*(){var o;let a=null!=(o=yield t())?o:e,l=new s(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${a}`),i(r,Object.assign(Object.assign({},n),{headers:l}))},new(l||(l=Promise))(function(e,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function n(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof l?i:new l(function(e){e(i)})).then(r,n)}i((u=u.apply(o,a||[])).next())})}})(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new aT(`${o}/rest/v1`,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),l.accessToken||this._listenForAuthEvents()}get functions(){return new aA(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new lh(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t,r,n,i,s;return r=this,n=void 0,i=void 0,s=function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return null!=(t=null==(e=r.session)?void 0:e.access_token)?t:null},new(i||(i=Promise))(function(e,t){function o(e){try{l(s.next(e))}catch(e){t(e)}}function a(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof i?r:new i(function(e){e(r)})).then(o,a)}l((s=s.apply(r,n||[])).next())})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:i,flowType:s,lock:o,debug:a},l,u){let c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uc({url:this.authUrl,headers:Object.assign(Object.assign({},c),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,flowType:s,lock:o,debug:a,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new aZ(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?this.changedAccessToken=r:"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}}("https://jextayidnmtsoofugnig.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpleHRheWlkbm10c29vZnVnbmlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODM1MDAsImV4cCI6MjA4NDY1OTUwMH0.vxRq32MPWyO_znst5nFCiQ7AWJtlJeOFWMY-RlZmjrs",void 0);async function ud(e,t,r,n,i){let{data:s,error:o}=await uh.from("photos_metadata").insert([{cid:e,file_size_bytes:t,device_id:r,pinned_locally:!0,nonce:n,mime_type:i}]).select();if(o)throw console.error("Supabase Upload Error:",o),o;return s}async function uf(e){let{data:t,error:r}=await uh.from("photos_metadata").select("cid, device_id, uploaded_at, file_size_bytes, storage_path, nonce, mime_type").order("uploaded_at",{ascending:!1});if(r)throw console.error("Supabase Load Error:",r),r;return t||[]}async function up(e){let{data:t,error:r}=await uh.from("photos_metadata").select("id").eq("cid",e).single();return r&&"PGRST116"!==r.code&&console.error("Supabase Check Error:",r),!!t}let um="vault";async function uy(e,t){let{data:r,error:n}=await uh.storage.from(um).upload(e,t,{contentType:"application/octet-stream",upsert:!1});if(n)throw console.error("Supabase Storage Upload Error:",n),n;return r.path}async function ug(e){let{data:t,error:r}=await uh.storage.from(um).download(e);if(r)throw console.error("Supabase Storage Download Error:",r),r;return t}async function uv(e,t){let{error:r}=await uh.from("photos_metadata").update({storage_path:t}).eq("cid",e);if(r)throw console.error("Supabase Update Storage Path Error:",r),r}let ub="photovault_device_id";function ux(){let e=localStorage.getItem(ub);return e||(e=crypto.randomUUID(),localStorage.setItem(ub,e),console.log("Generated new device ID:",e)),e}function uw(e){let t=(0,o2.useQueryClient)(),{data:r=[],isLoading:n,error:i}=o4({queryKey:["photos"],queryFn:ab,enabled:!!e}),{data:s=0}=o4({queryKey:["photoCount"],queryFn:a_}),o=at({mutationFn:async t=>{if(!e)throw Error("No encryption key");let{encrypted:r,nonce:n}=await eD(t,e),i=`cid_${Date.now()}_${Math.random().toString(36).slice(2)}`,s={cid:i,nonce:n,fileName:t.name,mimeType:t.type,fileSize:t.size,uploadedAt:new Date,encryptedBlob:r};await av(s);let o=ux();try{await ud(i,t.size,o,n,t.type),console.log("Photo metadata synced to cloud:",i)}catch(e){console.error("Cloud metadata sync failed (photo saved locally):",e)}try{let e=`${o}/${i}`;await uy(e,r),await uv(i,e),console.log("Photo blob uploaded to storage:",e)}catch(e){console.error("Storage upload failed (photo saved locally):",e)}return s},onSuccess:()=>{t.invalidateQueries({queryKey:["photos"]}),t.invalidateQueries({queryKey:["photoCount"]})}}),a=at({mutationFn:async e=>{await aw(e)},onSuccess:()=>{t.invalidateQueries({queryKey:["photos"]}),t.invalidateQueries({queryKey:["photoCount"]})}}),l=(0,D.useCallback)(async t=>{if(!e||!t.encryptedBlob)return null;let r=await eF(t.encryptedBlob,t.nonce,e,t.mimeType);return r?URL.createObjectURL(r):null},[e]);return{photos:r,photoCount:s,isLoading:n,error:i,uploadPhoto:o.mutate,deletePhoto:a.mutate,decryptPhoto:l,isUploading:o.isPending}}var u_=Object.defineProperty,uk=Object.getOwnPropertySymbols,uE=Object.prototype.hasOwnProperty,uS=Object.prototype.propertyIsEnumerable,uj=(e,t,r)=>t in e?u_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uA=(e,t)=>{for(var r in t||(t={}))uE.call(t,r)&&uj(e,r,t[r]);if(uk)for(var r of uk(t))uS.call(t,r)&&uj(e,r,t[r]);return e},uT=(e,t)=>{var r={};for(var n in e)uE.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&uk)for(var n of uk(e))0>t.indexOf(n)&&uS.call(e,n)&&(r[n]=e[n]);return r};(e=>{let t=class t{constructor(e,r,n,s){if(this.version=e,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version value out of range");if(s<-1||s>7)throw RangeError("Mask value out of range");this.size=4*e+17;let o=[];for(let e=0;e<this.size;e++)o.push(!1);for(let e=0;e<this.size;e++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();const a=this.addEccAndInterleave(n);if(this.drawCodewords(a),-1==s){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const r=this.getPenaltyScore();r<e&&(s=t,e=r),this.applyMask(t)}}i(0<=s&&s<=7),this.mask=s,this.applyMask(s),this.drawFormatBits(s),this.isFunction=[]}static encodeText(r,n){let i=e.QrSegment.makeSegments(r);return t.encodeSegments(i,n)}static encodeBinary(r,n){let i=e.QrSegment.makeBytes(r);return t.encodeSegments([i],n)}static encodeSegments(e,n,s=1,a=40,l=-1,u=!0){let c,h;if(!(t.MIN_VERSION<=s&&s<=a&&a<=t.MAX_VERSION)||l<-1||l>7)throw RangeError("Invalid value");for(c=s;;c++){let r=8*t.getNumDataCodewords(c,n),i=o.getTotalBits(e,c);if(i<=r){h=i;break}if(c>=a)throw RangeError("Data too long")}for(let e of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])u&&h<=8*t.getNumDataCodewords(c,e)&&(n=e);let d=[];for(let t of e)for(let e of(r(t.mode.modeBits,4,d),r(t.numChars,t.mode.numCharCountBits(c),d),t.getData()))d.push(e);i(d.length==h);let f=8*t.getNumDataCodewords(c,n);i(d.length<=f),r(0,Math.min(4,f-d.length),d),r(0,(8-d.length%8)%8,d),i(d.length%8==0);for(let e=236;d.length<f;e^=253)r(e,8,d);let p=[];for(;8*p.length<d.length;)p.push(0);return d.forEach((e,t)=>p[t>>>3]|=e<<7-(7&t)),new t(c,n,p,l)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let e=this.getAlignmentPatternPositions(),t=e.length;for(let r=0;r<t;r++)for(let n=0;n<t;n++)(0!=r||0!=n)&&(0!=r||n!=t-1)&&(r!=t-1||0!=n)&&this.drawAlignmentPattern(e[r],e[n]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){let t=this.errorCorrectionLevel.formatBits<<3|e,r=t;for(let e=0;e<10;e++)r=r<<1^(r>>>9)*1335;let s=(t<<10|r)^21522;i(s>>>15==0);for(let e=0;e<=5;e++)this.setFunctionModule(8,e,n(s,e));this.setFunctionModule(8,7,n(s,6)),this.setFunctionModule(8,8,n(s,7)),this.setFunctionModule(7,8,n(s,8));for(let e=9;e<15;e++)this.setFunctionModule(14-e,8,n(s,e));for(let e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,n(s,e));for(let e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,n(s,e));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;let t=this.version<<12|e;i(t>>>18==0);for(let e=0;e<18;e++){let r=n(t,e),i=this.size-11+e%3,s=Math.floor(e/3);this.setFunctionModule(i,s,r),this.setFunctionModule(s,i,r)}}drawFinderPattern(e,t){for(let r=-4;r<=4;r++)for(let n=-4;n<=4;n++){let i=Math.max(Math.abs(n),Math.abs(r)),s=e+n,o=t+r;0<=s&&s<this.size&&0<=o&&o<this.size&&this.setFunctionModule(s,o,2!=i&&4!=i)}}drawAlignmentPattern(e,t){for(let r=-2;r<=2;r++)for(let n=-2;n<=2;n++)this.setFunctionModule(e+n,t+r,1!=Math.max(Math.abs(n),Math.abs(r)))}setFunctionModule(e,t,r){this.modules[t][e]=r,this.isFunction[t][e]=!0}addEccAndInterleave(e){let r=this.version,n=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(r,n))throw RangeError("Invalid argument");let s=t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][r],o=t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][r],a=Math.floor(t.getNumRawDataModules(r)/8),l=s-a%s,u=Math.floor(a/s),c=[],h=t.reedSolomonComputeDivisor(o);for(let r=0,n=0;r<s;r++){let i=e.slice(n,n+u-o+(r<l?0:1));n+=i.length;let s=t.reedSolomonComputeRemainder(i,h);r<l&&i.push(0),c.push(i.concat(s))}let d=[];for(let e=0;e<c[0].length;e++)c.forEach((t,r)=>{(e!=u-o||r>=l)&&d.push(t[e])});return i(d.length==a),d}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let r=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let i=0;i<this.size;i++)for(let s=0;s<2;s++){let o=t-s,a=(t+1&2)==0?this.size-1-i:i;!this.isFunction[a][o]&&r<8*e.length&&(this.modules[a][o]=n(e[r>>>3],7-(7&r)),r++)}}i(r==8*e.length)}applyMask(e){if(e<0||e>7)throw RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let r=0;r<this.size;r++){let n;switch(e){case 0:n=(r+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+t)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:n=r*t%2+r*t%3==0;break;case 6:n=(r*t%2+r*t%3)%2==0;break;case 7:n=((r+t)%2+r*t%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[t][r]&&n&&(this.modules[t][r]=!this.modules[t][r])}}getPenaltyScore(){let e=0;for(let r=0;r<this.size;r++){let n=!1,i=0,s=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[r][o]==n?5==++i?e+=t.PENALTY_N1:i>5&&e++:(this.finderPenaltyAddHistory(i,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[r][o],i=1);e+=this.finderPenaltyTerminateAndCount(n,i,s)*t.PENALTY_N3}for(let r=0;r<this.size;r++){let n=!1,i=0,s=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[o][r]==n?5==++i?e+=t.PENALTY_N1:i>5&&e++:(this.finderPenaltyAddHistory(i,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[o][r],i=1);e+=this.finderPenaltyTerminateAndCount(n,i,s)*t.PENALTY_N3}for(let r=0;r<this.size-1;r++)for(let n=0;n<this.size-1;n++){let i=this.modules[r][n];i==this.modules[r][n+1]&&i==this.modules[r+1][n]&&i==this.modules[r+1][n+1]&&(e+=t.PENALTY_N2)}let r=0;for(let e of this.modules)r=e.reduce((e,t)=>e+ +!!t,r);let n=this.size*this.size,s=Math.ceil(Math.abs(20*r-10*n)/n)-1;return i(0<=s&&s<=9),i(0<=(e+=s*t.PENALTY_N4)&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{let e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),r=[6];for(let n=this.size-7;r.length<e;n-=t)r.splice(1,0,n);return r}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version number out of range");let r=(16*e+128)*e+64;if(e>=2){let t=Math.floor(e/7)+2;r-=(25*t-10)*t-55,e>=7&&(r-=36)}return i(208<=r&&r<=29648),r}static getNumDataCodewords(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw RangeError("Degree out of range");let r=[];for(let t=0;t<e-1;t++)r.push(0);r.push(1);let n=1;for(let i=0;i<e;i++){for(let e=0;e<r.length;e++)r[e]=t.reedSolomonMultiply(r[e],n),e+1<r.length&&(r[e]^=r[e+1]);n=t.reedSolomonMultiply(n,2)}return r}static reedSolomonComputeRemainder(e,r){let n=r.map(e=>0);for(let i of e){let e=i^n.shift();n.push(0),r.forEach((r,i)=>n[i]^=t.reedSolomonMultiply(r,e))}return n}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw RangeError("Byte out of range");let r=0;for(let n=7;n>=0;n--)r=r<<1^(r>>>7)*285^(t>>>n&1)*e;return i(r>>>8==0),r}finderPenaltyCountPatterns(e){let t=e[1];i(t<=3*this.size);let r=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(r&&e[0]>=4*t&&e[6]>=t?1:0)+(r&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,r){return e&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function r(e,t,r){if(t<0||t>31||e>>>t!=0)throw RangeError("Value out of range");for(let n=t-1;n>=0;n--)r.push(e>>>n&1)}function n(e,t){return(e>>>t&1)!=0}function i(e){if(!e)throw Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;let s=class e{constructor(e,t,r){if(this.mode=e,this.numChars=t,this.bitData=r,t<0)throw RangeError("Invalid argument");this.bitData=r.slice()}static makeBytes(t){let n=[];for(let e of t)r(e,8,n);return new e(e.Mode.BYTE,t.length,n)}static makeNumeric(t){if(!e.isNumeric(t))throw RangeError("String contains non-numeric characters");let n=[];for(let e=0;e<t.length;){let i=Math.min(t.length-e,3);r(parseInt(t.substring(e,e+i),10),3*i+1,n),e+=i}return new e(e.Mode.NUMERIC,t.length,n)}static makeAlphanumeric(t){let n;if(!e.isAlphanumeric(t))throw RangeError("String contains unencodable characters in alphanumeric mode");let i=[];for(n=0;n+2<=t.length;n+=2){let s=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));r(s+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),11,i)}return n<t.length&&r(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,i),new e(e.Mode.ALPHANUMERIC,t.length,i)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let n=[];if(t<0)throw RangeError("ECI assignment value out of range");if(t<128)r(t,8,n);else if(t<16384)r(2,2,n),r(t,14,n);else if(t<1e6)r(6,3,n),r(t,21,n);else throw RangeError("ECI assignment value out of range");return new e(e.Mode.ECI,0,n)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let r=0;for(let n of e){let e=n.mode.numCharCountBits(t);if(n.numChars>=1<<e)return 1/0;r+=4+e+n.bitData.length}return r}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let r=0;r<e.length;r++)"%"!=e.charAt(r)?t.push(e.charCodeAt(r)):(t.push(parseInt(e.substring(r+1,r+3),16)),r+=2);return t}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;e.QrSegment=s})(N||(N={})),b=(v=N||(N={})).QrCode||(v.QrCode={}),(i=class{constructor(e,t){this.ordinal=e,this.formatBits=t}}).LOW=new i(0,1),i.MEDIUM=new i(1,0),i.QUARTILE=new i(2,3),i.HIGH=new i(3,2),b.Ecc=i,w=(x=N||(N={})).QrSegment||(x.QrSegment={}),(s=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}).NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),w.Mode=s;var uP=N,uC={L:uP.QrCode.Ecc.LOW,M:uP.QrCode.Ecc.MEDIUM,Q:uP.QrCode.Ecc.QUARTILE,H:uP.QrCode.Ecc.HIGH},uO="#FFFFFF",uR="#000000";function uN(e,t=0){let r=[];return e.forEach(function(e,n){let i=null;e.forEach(function(s,o){if(!s&&null!==i){r.push(`M${i+t} ${n+t}h${o-i}v1H${i+t}z`),i=null;return}if(o===e.length-1){if(!s)return;null===i?r.push(`M${o+t},${n+t} h1v1H${o+t}z`):r.push(`M${i+t},${n+t} h${o+1-i}v1H${i+t}z`);return}s&&null===i&&(i=o)})}),r.join("")}function uM(e,t){return e.slice().map((e,r)=>r<t.y||r>=t.y+t.h?e:e.map((e,r)=>(r<t.x||r>=t.x+t.w)&&e))}function uD({value:e,level:t,minVersion:r,includeMargin:n,marginSize:i,imageSettings:s,size:o,boostLevel:a}){let l=D.default.useMemo(()=>{let n=(Array.isArray(e)?e:[e]).reduce((e,t)=>(e.push(...uP.QrSegment.makeSegments(t)),e),[]);return uP.QrCode.encodeSegments(n,uC[t],r,void 0,void 0,a)},[e,t,r,a]),{cells:u,margin:c,numCells:h,calculatedImageSettings:d}=D.default.useMemo(()=>{let e=l.getModules(),t=null!=i?Math.max(Math.floor(i),0):4*!!n,r=e.length+2*t,a=function(e,t,r,n){if(null==n)return null;let i=e.length+2*r,s=Math.floor(.1*t),o=i/t,a=(n.width||s)*o,l=(n.height||s)*o,u=null==n.x?e.length/2-a/2:n.x*o,c=null==n.y?e.length/2-l/2:n.y*o,h=null==n.opacity?1:n.opacity,d=null;if(n.excavate){let e=Math.floor(u),t=Math.floor(c),r=Math.ceil(a+u-e),n=Math.ceil(l+c-t);d={x:e,y:t,w:r,h:n}}return{x:u,y:c,h:l,w:a,excavation:d,opacity:h,crossOrigin:n.crossOrigin}}(e,o,t,s);return{cells:e,margin:t,numCells:r,calculatedImageSettings:a}},[l,o,s,n,i]);return{qrcode:l,margin:c,cells:u,numCells:h,calculatedImageSettings:d}}var uF=function(){try{new Path2D().addPath(new Path2D)}catch(e){return!1}return!0}();D.default.forwardRef(function(e,t){let{value:r,size:n=128,level:i="L",bgColor:s=uO,fgColor:o=uR,includeMargin:a=!1,minVersion:l=1,boostLevel:u,marginSize:c,imageSettings:h}=e,d=uT(e,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:f}=d,p=uT(d,["style"]),m=null==h?void 0:h.src,y=D.default.useRef(null),g=D.default.useRef(null),v=D.default.useCallback(e=>{y.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[t]),[b,x]=D.default.useState(!1),{margin:w,cells:_,numCells:k,calculatedImageSettings:E}=uD({value:r,level:i,minVersion:l,boostLevel:u,includeMargin:a,marginSize:c,imageSettings:h,size:n});D.default.useEffect(()=>{if(null!=y.current){let e=y.current,t=e.getContext("2d");if(!t)return;let r=_,i=g.current,a=null!=E&&null!==i&&i.complete&&0!==i.naturalHeight&&0!==i.naturalWidth;a&&null!=E.excavation&&(r=uM(_,E.excavation));let l=window.devicePixelRatio||1;e.height=e.width=n*l;let u=n/k*l;t.scale(u,u),t.fillStyle=s,t.fillRect(0,0,k,k),t.fillStyle=o,uF?t.fill(new Path2D(uN(r,w))):_.forEach(function(e,r){e.forEach(function(e,n){e&&t.fillRect(n+w,r+w,1,1)})}),E&&(t.globalAlpha=E.opacity),a&&t.drawImage(i,E.x+w,E.y+w,E.w,E.h)}}),D.default.useEffect(()=>{x(!1)},[m]);let S=uA({height:n,width:n},f),j=null;return null!=m&&(j=D.default.createElement("img",{src:m,key:m,style:{display:"none"},onLoad:()=>{x(!0)},ref:g,crossOrigin:null==E?void 0:E.crossOrigin})),D.default.createElement(D.default.Fragment,null,D.default.createElement("canvas",uA({style:S,height:n,width:n,ref:v,role:"img"},p)),j)}).displayName="QRCodeCanvas";var uI=D.default.forwardRef(function(e,t){let{value:r,size:n=128,level:i="L",bgColor:s=uO,fgColor:o=uR,includeMargin:a=!1,minVersion:l=1,boostLevel:u,title:c,marginSize:h,imageSettings:d}=e,f=uT(e,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:p,cells:m,numCells:y,calculatedImageSettings:g}=uD({value:r,level:i,minVersion:l,boostLevel:u,includeMargin:a,marginSize:h,imageSettings:d,size:n}),v=m,b=null;null!=d&&null!=g&&(null!=g.excavation&&(v=uM(m,g.excavation)),b=D.default.createElement("image",{href:d.src,height:g.h,width:g.w,x:g.x+p,y:g.y+p,preserveAspectRatio:"none",opacity:g.opacity,crossOrigin:g.crossOrigin}));let x=uN(v,p);return D.default.createElement("svg",uA({height:n,width:n,viewBox:`0 0 ${y} ${y}`,ref:t,role:"img"},f),!!c&&D.default.createElement("title",null,c),D.default.createElement("path",{fill:s,d:`M0,0 h${y}v${y}H0z`,shapeRendering:"crispEdges"}),D.default.createElement("path",{fill:o,d:x,shapeRendering:"crispEdges"}),b)});uI.displayName="QRCodeSVG";let uB=L("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),uL=L("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),uU=L("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),u$=L("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);function uz({isOpen:e,onClose:t}){let[r,n]=(0,D.useState)("show"),[i,s]=(0,D.useState)(""),[o,a]=(0,D.useState)(!1),[l,u]=(0,D.useState)(null),[c,h]=(0,D.useState)(!1),{recoveryPhrase:d,restoreFromPhrase:f}=oD(),p=async()=>{if(d)try{await navigator.clipboard.writeText(d),a(!0),setTimeout(()=>a(!1),2e3)}catch{console.error("Failed to copy to clipboard")}};return e?(0,M.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[380px] rounded-2xl overflow-hidden",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-[#E5E5EA]",children:[(0,M.jsx)("h2",{className:"sf-pro-display text-[17px] font-semibold text-[#1D1D1F]",children:"Gert verbinden"}),(0,M.jsx)("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full bg-[#F2F2F7]",children:(0,M.jsx)(uB,{className:"w-4 h-4 text-[#6E6E73]"})})]}),(0,M.jsxs)("div",{className:"flex border-b border-[#E5E5EA]",children:[(0,M.jsxs)("button",{onClick:()=>n("show"),className:`flex-1 py-3 text-[15px] font-medium flex items-center justify-center gap-2 ${"show"===r?"text-[#007AFF] border-b-2 border-[#007AFF]":"text-[#6E6E73]"}`,children:[(0,M.jsx)(u$,{className:"w-4 h-4"}),"Schlssel zeigen"]}),(0,M.jsxs)("button",{onClick:()=>n("input"),className:`flex-1 py-3 text-[15px] font-medium flex items-center justify-center gap-2 ${"input"===r?"text-[#007AFF] border-b-2 border-[#007AFF]":"text-[#6E6E73]"}`,children:[(0,M.jsx)(uU,{className:"w-4 h-4"}),"Schlssel eingeben"]})]}),(0,M.jsx)("div",{className:"p-5",children:"show"===r?(0,M.jsxs)("div",{className:"flex flex-col items-center",children:[(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mb-4",children:"Scanne diesen QR-Code mit deinem anderen Gert oder kopiere den Schlssel."}),d&&(0,M.jsx)("div",{className:"bg-white p-4 rounded-xl border border-[#E5E5EA] mb-4",children:(0,M.jsx)(uI,{value:d,size:180,level:"M",includeMargin:!1})}),(0,M.jsxs)("div",{className:"w-full bg-[#F2F2F7] rounded-xl p-3 mb-4",children:[(0,M.jsx)("p",{className:"text-[11px] text-[#6E6E73] mb-1",children:"Dein Schlssel:"}),(0,M.jsx)("p",{className:"text-[13px] font-mono text-[#1D1D1F] break-all leading-relaxed",children:d||"Kein Schlssel verfgbar"})]}),(0,M.jsx)("button",{onClick:p,disabled:!d,className:"w-full h-[44px] bg-[#007AFF] text-white text-[15px] font-semibold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:o?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(U,{className:"w-4 h-4"}),"Kopiert!"]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(uL,{className:"w-4 h-4"}),"Schlssel kopieren"]})})]}):(0,M.jsxs)("div",{className:"flex flex-col",children:[(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mb-4",children:"Gib den Schlssel von deinem anderen Gert ein, um deine Fotos zu synchronisieren."}),(0,M.jsx)("textarea",{value:i,onChange:e=>{s(e.target.value),u(null)},placeholder:"Schlssel hier eingeben...",className:"w-full h-[100px] bg-[#F2F2F7] rounded-xl p-3 text-[14px] font-mono text-[#1D1D1F] resize-none mb-3 placeholder:text-[#C7C7CC]"}),l&&(0,M.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center mb-3",children:l}),c&&(0,M.jsx)("p",{className:"text-[13px] text-[#30D158] text-center mb-3",children:"Schlssel erfolgreich importiert!"}),(0,M.jsxs)("button",{onClick:()=>{(u(null),i.trim())?f(i.trim())?(h(!0),s(""),setTimeout(()=>{h(!1),t()},1500)):u("Ungltiger Schlssel. Bitte berprfe die Eingabe."):u("Bitte gib einen Schlssel ein")},disabled:!i.trim()||c,className:"w-full h-[44px] bg-[#30D158] text-white text-[15px] font-semibold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,M.jsx)(uU,{className:"w-4 h-4"}),"Gert verbinden"]}),(0,M.jsx)("p",{className:"text-[11px] text-[#FF9500] text-center mt-4",children:"Achtung: Dies berschreibt deinen aktuellen Schlssel. Stelle sicher, dass du ihn gesichert hast."})]})})]})}):null}function uV({state:e,setState:t}){let[r,n]=(0,D.useState)(null),[i,s]=(0,D.useState)(!1),[o,a]=(0,D.useState)(!1),[l,u]=(0,D.useState)(!1),[c,h]=(0,D.useState)({current:0,total:0}),{secretKey:d}=oD(),{photoCount:f}=uw(d),p=f>0?f:e.photosCount,m=async()=>{if(!l){u(!0),console.log("Starting backup to Supabase Storage...");try{let e=(await ab()).filter(e=>e.encryptedBlob);h({current:0,total:e.length});let r=0,n=ux();for(let t of e)if(t.encryptedBlob){if(!await up(t.cid)){console.log(`Skipping ${t.cid} - not in metadata table`);continue}try{let i=`${n}/${t.cid}`;await uy(i,t.encryptedBlob),await uv(t.cid,i),r++,h({current:r,total:e.length}),console.log(`Uploaded ${r}/${e.length}: ${t.cid}`)}catch(e){console.error(`Failed to upload ${t.cid}:`,e)}}t(e=>({...e,lastBackup:"Gerade eben"})),console.log(`Backup complete: ${r} photos uploaded`)}catch(e){console.error("Backup failed:",e)}finally{u(!1),h({current:0,total:0})}}};return(0,M.jsxs)("div",{className:"h-full flex flex-col px-5 pt-6 pb-4 overflow-y-auto",children:[(0,M.jsxs)("header",{className:"mb-6",children:[(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] text-[#1D1D1F]",children:"Backup"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73] mt-1",children:"Verschlsseltes Photo-Backup"})]}),(0,M.jsx)("button",{onClick:()=>{console.log("TODO: Toggle backup with confirmation dialog"),s(!0)},className:"w-full bg-white rounded-xl p-5 mb-3 ios-tap-target",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsx)("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${e.backupActive?"bg-[#30D158]/10":"bg-[#E5E5EA]"}`,children:(0,M.jsx)(eC,{name:"shield",size:28})}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsxs)("p",{className:"text-[17px] font-semibold text-[#1D1D1F]",children:["Backup ",e.backupActive?"Aktiv":"Aus"]}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73]",children:e.backupActive?"Deine Fotos werden geschtzt":"Tippe zum Aktivieren"})]})]}),(0,M.jsx)("div",{className:`w-[51px] h-[31px] rounded-full p-[2px] ${e.backupActive?"bg-[#30D158]":"bg-[#E5E5EA]"}`,children:(0,M.jsx)("div",{className:`w-[27px] h-[27px] rounded-full bg-white shadow-sm ${e.backupActive?"ml-auto":""}`})})]})}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-2 mb-6",children:"Automatisch neue Fotos sichern"}),(0,M.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[(0,M.jsx)(uK,{icon:(0,M.jsx)(eC,{name:"image",size:20}),value:p.toLocaleString(),label:"Fotos gesichert",tooltip:"Lokal auf deinen Gerten gespeichert",showTooltip:"photos"===r,onTap:()=>n("photos"===r?null:"photos")}),(0,M.jsx)(uK,{icon:(0,M.jsx)(eC,{name:"clock",size:20}),value:e.lastBackup,label:"Letztes Backup",tooltip:"Automatisches Backup alle 6 Stunden",showTooltip:"lastBackup"===r,onTap:()=>n("lastBackup"===r?null:"lastBackup")}),(0,M.jsx)(uK,{icon:(0,M.jsx)(eC,{name:"shield",size:20}),value:`${e.permanence}%`,label:"Dauerhaft",tooltip:"Fotos sind auf mehreren Gerten gesichert",showTooltip:"permanence"===r,onTap:()=>n("permanence"===r?null:"permanence")})]}),(0,M.jsx)("button",{onClick:m,disabled:l,className:`w-full h-[50px] text-[17px] font-semibold rounded-xl mb-3 ios-tap-target ${e.backupActive?"bg-[#007AFF] text-white":"bg-[#30D158] text-white"} disabled:opacity-70`,children:l?(0,M.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,M.jsx)(oK,{className:"w-5 h-5 animate-spin"}),c.total>0?`${c.current}/${c.total} hochladen...`:"Vorbereiten..."]}):e.backupActive?"Jetzt sichern":"Backup aktivieren"}),(0,M.jsxs)("button",{onClick:()=>a(!0),className:"w-full h-[50px] text-[17px] font-semibold rounded-xl mb-4 ios-tap-target bg-[#F2F2F7] text-[#007AFF] flex items-center justify-center gap-2",children:[(0,M.jsx)(oV,{className:"w-5 h-5"}),"Gert verbinden"]}),(0,M.jsx)("div",{className:"mt-auto pt-4",children:(0,M.jsxs)("p",{className:"text-[15px] text-[#8E8E93] text-center leading-relaxed",children:["Deine Fotos sind verschlsselt.",(0,M.jsx)("br",{}),"Niemand kann sie sehen."]})}),i&&(0,M.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-8",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[270px] rounded-2xl overflow-hidden",children:[(0,M.jsxs)("div",{className:"p-4 text-center",children:[(0,M.jsx)("h3",{className:"sf-pro-display text-[17px] text-[#1D1D1F] mb-1",children:e.backupActive?"Backup deaktivieren?":"Backup aktivieren?"}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] leading-relaxed",children:e.backupActive?"Neue Fotos werden nicht mehr automatisch gesichert.":"Neue Fotos werden automatisch verschlsselt und gesichert."})]}),(0,M.jsxs)("div",{className:"border-t border-[#E5E5EA]",children:[(0,M.jsx)("button",{onClick:()=>s(!1),className:"w-full py-3 text-[17px] text-[#007AFF] border-b border-[#E5E5EA] ios-tap-target",children:"Abbrechen"}),(0,M.jsx)("button",{onClick:()=>{let r=!e.backupActive;console.log(r?"Activate Backup":"Deactivate Backup"),t(e=>({...e,backupActive:r})),s(!1)},className:`w-full py-3 text-[17px] font-semibold ios-tap-target ${e.backupActive?"text-[#FF3B30]":"text-[#30D158]"}`,children:e.backupActive?"Deaktivieren":"Aktivieren"})]})]})}),(0,M.jsx)(uz,{isOpen:o,onClose:()=>a(!1)})]})}function uK({icon:e,value:t,label:r,tooltip:n,showTooltip:i,onTap:s}){return(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsxs)("button",{onClick:s,className:"w-full bg-white rounded-xl p-4 text-center ios-tap-target",children:[(0,M.jsxs)("div",{className:"flex justify-center mb-2 relative",children:[e,(0,M.jsx)(oz,{className:"w-3 h-3 text-[#C7C7CC] absolute -right-1 -top-1"})]}),(0,M.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] truncate",children:t}),(0,M.jsx)("p",{className:"text-[11px] text-[#6E6E73]",children:r})]}),i&&(0,M.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-[180px] bg-[#1D1D1F] text-white text-[13px] p-3 rounded-lg z-10 text-center",children:[n,(0,M.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-[#1D1D1F]"})]})]})}let uq=L("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function uW({state:e,setState:t,onRestartOnboarding:r}){let[n,i]=(0,D.useState)(!1),[s,o]=(0,D.useState)(!1),[a,l]=(0,D.useState)(!1),[u,c]=(0,D.useState)(!1),[h,d]=(0,D.useState)(!1),[f,p]=(0,D.useState)(!1),[m,y]=(0,D.useState)([]),[g,v]=(0,D.useState)(!1),{recoveryPhrase:b,generateNewKey:x,clearKey:w}=oD(),_=ux();(0,D.useEffect)(()=>{(async()=>{try{let{data:e,error:t}=await uh.from("devices").select("*").order("created_at",{ascending:!1});if(t)return void console.error("Error fetching devices:",t);y(e||[])}catch(e){console.error("Failed to fetch devices:",e)}})()},[]);let k=b?.split("-").slice(0,12)||[],E=async()=>{console.log("Generate New Encryption Key"),console.log("Clear Existing Backup Data"),w();let e=await x();if(e){let r=e.split("-").slice(0,12);t(t=>({...t,encryptionKey:e,backupPhrase:r,photosCount:0}))}l(!1)};if(n){let e=m.map(e=>({id:e.id,name:e.device_name||"Unbekanntes Gert",lastActive:e.id===_?"Aktiv":function(e){if(!e)return"Unbekannt";let t=new Date(e),r=new Date().getTime()-t.getTime(),n=Math.floor(r/6e4),i=Math.floor(r/36e5),s=Math.floor(r/864e5);return n<1?"Gerade eben":n<60?`vor ${n} Min.`:i<24?`vor ${i} Std.`:s<7?`vor ${s} Tagen`:t.toLocaleDateString("de-DE")}(e.created_at),syncing:!1}));return 0===e.length&&e.push({id:_,name:"Dieses Gert",lastActive:"Aktiv",syncing:!1}),(0,M.jsx)(uH,{devices:e,onBack:()=>i(!1),onAddDevice:()=>{console.log("Show QR code or key import")}})}return(0,M.jsxs)("div",{className:"h-full flex flex-col pb-4 overflow-y-auto",children:[(0,M.jsx)("header",{className:"px-5 pt-6 pb-4 bg-[#F2F2F7]",children:(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] text-[#1D1D1F]",children:"Einstellungen"})}),(0,M.jsxs)("div",{className:"flex-1 px-5",children:[(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Backup"}),(0,M.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,M.jsx)(uG,{label:"Automatisches Backup",description:"Neue Fotos automatisch sichern",enabled:e.autoBackupEnabled,onToggle:()=>{let r=!e.autoBackupEnabled;console.log("Update Auto-Backup Preference:",r),t(e=>({...e,autoBackupEnabled:r}))}}),(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsx)(uG,{label:"Hintergrund-Backup",description:"Weiter sichern wenn App geschlossen",enabled:e.backgroundBackupEnabled,onToggle:()=>{let r=!e.backgroundBackupEnabled;console.log("Update Background Preference:",r),t(e=>({...e,backgroundBackupEnabled:r}))}}),(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsxs)("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)(eC,{name:"folder",size:24}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsx)("span",{className:"text-[17px] text-[#1D1D1F] block",children:"Backup-Quelle"}),(0,M.jsx)("span",{className:"text-[13px] text-[#6E6E73]",children:"photos-app"===e.photoSource?"Fotos-App":"Dateien-App"})]})]}),(0,M.jsx)(eC,{name:"chevronRight",size:16})]})]})]}),(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Speicher"}),(0,M.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,M.jsxs)("div",{className:"p-4",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,M.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Aktueller Plan"}),(0,M.jsx)("span",{className:"text-[15px] font-semibold text-[#007AFF]",children:"free"===e.selectedPlan?"Free":"Backup+"})]}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:"free"===e.selectedPlan?"Fotos auf deinen Gerten":"200 GB Cloud-Backup"})]}),(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsx)("div",{className:"p-4",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsx)("span",{className:"text-[15px] text-[#6E6E73]",children:"Verwendet"}),(0,M.jsxs)("span",{className:"text-[15px] text-[#1D1D1F]",children:[e.photosCount.toLocaleString()," Fotos (nur lokal)"]})]})}),(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsxs)("button",{onClick:()=>p(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsx)("span",{className:"text-[17px] text-[#007AFF]",children:"free"===e.selectedPlan?"Upgrade zu Backup+":"Plan verwalten"}),(0,M.jsx)(eC,{name:"chevronRight",size:16})]})]})]}),(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Gerte"}),(0,M.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:(0,M.jsxs)("button",{onClick:()=>{console.log("Fetch Device List"),i(!0)},className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)(eC,{name:"smartphone",size:24}),(0,M.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Verbundene Gerte"})]}),(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)("span",{className:"text-[15px] text-[#6E6E73]",children:m.length||1}),(0,M.jsx)(eC,{name:"chevronRight",size:16})]})]})})]}),(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Sicherheit"}),(0,M.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,M.jsxs)("button",{onClick:()=>o(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Backup-Phrase anzeigen"}),(0,M.jsx)(eC,{name:"chevronRight",size:16})]}),(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsxs)("button",{onClick:()=>l(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsx)("span",{className:"text-[17px] text-[#FF3B30]",children:"Neuen Schlssel erstellen"}),(0,M.jsx)(eC,{name:"chevronRight",size:16})]})]}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-4 mt-2",children:"Teile diese Wrter niemals mit anderen."})]}),(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Setup"}),(0,M.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:(0,M.jsxs)("button",{onClick:()=>{console.log("TODO: Navigate to onboarding screen 1"),r()},className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)(eC,{name:"refresh",size:24}),(0,M.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Onboarding wiederholen"})]}),(0,M.jsx)(eC,{name:"chevronRight",size:16})]})}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-4 mt-2",children:"Schlssel, Quelle und Plan neu einrichten"})]})]}),s&&(0,M.jsx)(uJ,{title:"Sicherheitshinweis",message:"Deine Backup-Phrase gibt vollen Zugriff auf deine verschlsselten Fotos. Nur an einem privaten Ort anzeigen.",confirmLabel:"Phrase anzeigen",confirmDestructive:!1,onConfirm:()=>{console.log("Display Backup Phrase"),o(!1),c(!0)},onCancel:()=>o(!1)}),u&&(0,M.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10",children:[(0,M.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Deine Backup-Phrase"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-4",children:"Notiere diese Wrter und bewahre sie sicher auf."}),k.length>0?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:k.map((e,t)=>(0,M.jsxs)("div",{className:"bg-[#F2F2F7] rounded-lg p-2 text-center",children:[(0,M.jsx)("span",{className:"text-[11px] text-[#8E8E93] block",children:t+1}),(0,M.jsx)("span",{className:"text-[14px] text-[#1D1D1F] font-mono",children:e})]},t))}),(0,M.jsxs)("div",{className:"bg-[#F2F2F7] rounded-xl p-3 mb-4",children:[(0,M.jsx)("p",{className:"text-[11px] text-[#6E6E73] mb-1",children:"Vollstndiger Schlssel:"}),(0,M.jsx)("p",{className:"text-[12px] font-mono text-[#1D1D1F] break-all",children:b})]})]}):(0,M.jsx)("div",{className:"bg-[#FF9500]/10 rounded-xl p-4 mb-4",children:(0,M.jsx)("p",{className:"text-[13px] text-[#FF9500] text-center",children:"Kein Schlssel gefunden. Bitte erstelle einen neuen Schlssel."})}),(0,M.jsx)("div",{className:"bg-[#FF3B30]/10 rounded-xl p-3 mb-4",children:(0,M.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center",children:" Teile diese Wrter niemals mit anderen"})}),(0,M.jsx)("button",{onClick:()=>c(!1),className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target",children:"Fertig"})]})}),a&&(0,M.jsx)(uJ,{title:"Datenverlust-Warnung",message:"Das Erstellen eines neuen Schlssels lscht alle vorhandenen Backup-Daten permanent. Diese Aktion kann nicht rckgngig gemacht werden.",confirmLabel:"Neuen Schlssel erstellen",confirmDestructive:!0,onConfirm:E,onCancel:()=>l(!1)}),h&&(0,M.jsx)(uY,{currentSource:e.photoSource,onSelect:e=>{console.log("TODO: Update backup source preference:",e),t(t=>({...t,photoSource:e})),d(!1)},onClose:()=>d(!1)}),f&&(0,M.jsx)(uQ,{currentPlan:e.selectedPlan,onSelect:e=>{console.log("TODO: Show plan selection modal",e),t(t=>({...t,selectedPlan:e})),p(!1)},onClose:()=>p(!1)})]})}function uG({label:e,description:t,enabled:r,onToggle:n}){return(0,M.jsxs)("button",{onClick:n,className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsx)("p",{className:"text-[17px] text-[#1D1D1F]",children:e}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] mt-0.5",children:t})]}),(0,M.jsx)("div",{className:`w-[51px] h-[31px] rounded-full p-[2px] shrink-0 ${r?"bg-[#30D158]":"bg-[#E5E5EA]"}`,children:(0,M.jsx)("div",{className:`w-[27px] h-[27px] rounded-full bg-white shadow-sm ${r?"ml-auto":""}`})})]})}function uH({devices:e,onBack:t,onAddDevice:r}){return(0,M.jsxs)("div",{className:"h-full flex flex-col pb-4 overflow-y-auto",children:[(0,M.jsxs)("header",{className:"px-5 pt-6 pb-4 bg-[#F2F2F7]",children:[(0,M.jsx)("button",{onClick:t,className:"text-[#007AFF] text-[17px] ios-tap-target mb-2",children:" Zurck"}),(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] text-[#1D1D1F]",children:"Gerte"})]}),(0,M.jsxs)("div",{className:"flex-1 px-5",children:[(0,M.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:e.map((e,t)=>(0,M.jsxs)("div",{children:[t>0&&(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsxs)("div",{className:"flex items-center gap-3 p-4",children:[(0,M.jsx)(eC,{name:"smartphone",size:32}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("p",{className:"text-[17px] text-[#1D1D1F]",children:e.name}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:e.lastActive})]}),e.syncing?(0,M.jsx)(oK,{className:"w-5 h-5 text-[#007AFF] animate-spin"}):"Aktiv"===e.lastActive?(0,M.jsxs)("div",{className:"flex items-center gap-1",children:[(0,M.jsx)(U,{className:"w-4 h-4 text-[#30D158]"}),(0,M.jsx)("span",{className:"text-[13px] text-[#30D158] font-medium",children:"Dieses Gert"})]}):null]})]},e.id))}),(0,M.jsxs)("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 mt-6 p-4 bg-white rounded-xl ios-tap-target",children:[(0,M.jsx)(uq,{className:"w-5 h-5 text-[#007AFF]"}),(0,M.jsx)("span",{className:"text-[17px] text-[#007AFF]",children:"Neues Gert verbinden"})]}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mt-3",children:"Scanne den QR-Code oder gib deine Backup-Phrase ein"})]})]})}function uY({currentSource:e,onSelect:t,onClose:r}){return(0,M.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10",children:[(0,M.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Backup-Quelle"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-6",children:"Wo sind deine Fotos gespeichert?"}),(0,M.jsx)("div",{className:"space-y-3 mb-6",children:[{id:"photos-app",label:"Fotos-App",description:"Alle Fotos aus der iOS Foto-Bibliothek"},{id:"files-app",label:"Dateien-App",description:"Fotos aus einem bestimmten Ordner"}].map(r=>(0,M.jsx)("button",{onClick:()=>t(r.id),className:`w-full p-4 rounded-xl bg-[#F2F2F7] text-left ios-tap-target ${e===r.id?"ring-2 ring-[#007AFF]":""}`,children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("p",{className:"text-[17px] font-medium text-[#1D1D1F]",children:r.label}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] mt-0.5",children:r.description})]}),(0,M.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${e===r.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:e===r.id&&(0,M.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})},r.id))}),(0,M.jsx)("button",{onClick:r,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Abbrechen"})]})})}function uQ({currentPlan:e,onSelect:t,onClose:r}){return(0,M.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10 max-h-[80vh] overflow-y-auto",children:[(0,M.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Speicherplan"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-6",children:"Du kannst jederzeit wechseln"}),(0,M.jsx)("div",{className:"space-y-3 mb-6",children:[{id:"free",label:"FREE",subtitle:"Auf deinen Gerten",price:"0/Monat",features:["Unbegrenzte Fotos","Zero-Knowledge Verschlsselung","Multi-Device Sync"]},{id:"backup-plus",label:"BACKUP+",subtitle:"Dauerhaft im Netz",price:"2,99/Monat",features:["Alles von Free","200 GB Cloud-Backup","Schnellere Synchronisierung"]}].map(r=>(0,M.jsx)("button",{onClick:()=>t(r.id),className:`w-full p-4 rounded-xl bg-[#F2F2F7] text-left ios-tap-target ${e===r.id?"ring-2 ring-[#007AFF]":""}`,children:(0,M.jsxs)("div",{className:"flex items-start justify-between",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("p",{className:"text-[13px] font-bold text-[#007AFF] tracking-wide",children:r.label}),(0,M.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] mt-0.5",children:r.subtitle}),(0,M.jsx)("ul",{className:"mt-2 space-y-1",children:r.features.map(e=>(0,M.jsxs)("li",{className:"text-[13px] text-[#6E6E73] flex items-center gap-2",children:[(0,M.jsx)("span",{className:"text-[#30D158]",children:""})," ",e]},e))}),(0,M.jsx)("p",{className:"text-[15px] font-semibold text-[#1D1D1F] mt-3",children:r.price})]}),(0,M.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${e===r.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:e===r.id&&(0,M.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})},r.id))}),(0,M.jsx)("button",{onClick:r,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Abbrechen"})]})})}function uJ({title:e,message:t,confirmLabel:r,confirmDestructive:n,onConfirm:i,onCancel:s}){return(0,M.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-8",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[270px] rounded-2xl overflow-hidden",children:[(0,M.jsxs)("div",{className:"p-4 text-center",children:[(0,M.jsx)("h3",{className:"sf-pro-display text-[17px] text-[#1D1D1F] mb-1",children:e}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] leading-relaxed",children:t})]}),(0,M.jsxs)("div",{className:"border-t border-[#E5E5EA]",children:[(0,M.jsx)("button",{onClick:s,className:"w-full py-3 text-[17px] text-[#007AFF] border-b border-[#E5E5EA] ios-tap-target",children:"Abbrechen"}),(0,M.jsx)("button",{onClick:i,className:`w-full py-3 text-[17px] font-semibold ios-tap-target ${n?"text-[#FF3B30]":"text-[#007AFF]"}`,children:r})]})]})})}let uX=L("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),uZ=L("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]),u0=e=>{let t={};return e.forEach(e=>{t[e.date]||(t[e.date]=[]),t[e.date].push(e)}),Object.entries(t).map(([e,t])=>({date:e,photos:t,label:u1(e)}))},u1=e=>{let t=new Date(e),r=new Date,n=new Date(r);return(n.setDate(n.getDate()-1),e===r.toISOString().split("T")[0])?"Heute":e===n.toISOString().split("T")[0]?"Gestern":t.toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long"})};function u5({photosCount:e}){var t;let r,n,i,[s,o]=(0,D.useState)(""),[a,l]=(0,D.useState)(!1),[u,c]=(0,D.useState)(!1),[h,d]=(0,D.useState)(null),[f,p]=(0,D.useState)(!1),[m,y]=(0,D.useState)(new Set),[g,v]=(0,D.useState)(null),[b,x]=(0,D.useState)(null),w=(0,D.useRef)(null),{secretKey:_,hasKey:k}=oD(),{photos:E,uploadPhoto:S,deletePhoto:j,decryptPhoto:A,isUploading:T}=uw(_),{remoteCIDs:P,remoteCIDsFromOtherDevices:C,isConnected:O,deviceId:R,refresh:N}=function(e={}){let{onNewPhoto:t,onPhotoDeleted:r,onPhotoDownloaded:n,enabled:i=!0,secretKey:s}=e,[o,a]=(0,D.useState)([]),[l,u]=(0,D.useState)(!1),[c,h]=(0,D.useState)(null),[d,f]=(0,D.useState)(!1),p=ux(),m=(0,D.useCallback)(async e=>{if(!s||!e.storage_path)return!1;try{let t=await ax(e.cid);if(t?.encryptedBlob)return console.log("Photo already exists locally:",e.cid),!1;console.log("Fetching missing photo from storage:",e.cid),f(!0);let r=await ug(e.storage_path);return await av({cid:e.cid,nonce:e.nonce||"",fileName:`synced_${e.cid}`,mimeType:e.mime_type||"image/jpeg",fileSize:e.file_size_bytes||0,uploadedAt:new Date(e.uploaded_at),encryptedBlob:r}),console.log("Photo downloaded and saved locally:",e.cid),n?.(e.cid),!0}catch(e){return console.error("Failed to fetch missing content:",e),!1}finally{f(!1)}},[s,n]),y=(0,D.useCallback)(async()=>{try{let e=(await uf(p)).map(e=>({cid:e.cid,device_id:e.device_id,uploaded_at:e.uploaded_at,file_size_bytes:e.file_size_bytes,storage_path:e.storage_path||null,nonce:e.nonce||null,mime_type:e.mime_type||null,isFromOtherDevice:e.device_id!==p}));return a(e),h(null),e}catch(e){return console.error("Failed to load remote CIDs:",e),h(e),[]}},[p]);(0,D.useEffect)(()=>{if(!i)return;let e=null;return(async()=>{await y(),e=uh.channel("photos_metadata_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"photos_metadata"},e=>{let r=e.new,n={cid:r.cid,device_id:r.device_id,uploaded_at:r.uploaded_at,file_size_bytes:r.file_size_bytes,storage_path:r.storage_path,nonce:r.nonce,mime_type:r.mime_type,isFromOtherDevice:r.device_id!==p};n.isFromOtherDevice&&(console.log("New photo received from another device:",n.cid),t?.(n),n.storage_path&&m(n)),a(e=>e.some(e=>e.cid===n.cid)?e:[n,...e])}).on("postgres_changes",{event:"DELETE",schema:"public",table:"photos_metadata"},e=>{let t=e.old;r?.(t.cid),a(e=>e.filter(e=>e.cid!==t.cid))}).subscribe(e=>{console.log("Realtime subscription status:",e),u("SUBSCRIBED"===e)})})(),()=>{e&&uh.removeChannel(e)}},[i,p,t,r,y,m]);let g=(0,D.useCallback)(async()=>y(),[y]),v=o.filter(e=>e.isFromOtherDevice);return{remoteCIDs:o,remoteCIDsFromOtherDevices:v,isConnected:l,isSyncing:d,lastSyncError:c,refresh:g,fetchMissingContent:m,deviceId:p}}({onNewPhoto:(0,D.useCallback)(e=>{console.log("New photo from device:",e.device_id),x(`Neues Foto von anderem Ger\xe4t empfangen`),setTimeout(()=>x(null),3e3)},[]),enabled:!0}),F=E.length>0?E.map(e=>({id:e.id?.toString()||e.cid,cid:e.cid,placeholderUrl:"",category:"photo",date:e.uploadedAt.toISOString().split("T")[0],metadata:e})):(t=Math.min(e,50),r=["nature","architecture","travel","food","animals","city","landscape","portrait","ocean","forest"],n=new Date,Array.from({length:t},(e,t)=>{let i=new Date(n);return i.setDate(i.getDate()-Math.floor(t/3)),{id:`photo-${t}`,cid:`Qm${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}`,placeholderUrl:`https://picsum.photos/seed/${t+100}/400/400`,category:r[t%r.length],date:i.toISOString().split("T")[0],metadata:void 0}}));u0(F);let I=u0(F.filter(e=>(!h||e.category===h)&&(!s||!!e.category.includes(s.toLowerCase())))),B=()=>{w.current&&(clearTimeout(w.current),w.current=null)};return(0,M.jsxs)("div",{className:"flex flex-col h-full bg-[#F2F2F7]",children:[(0,M.jsx)("header",{className:"h-[60px] bg-white border-b border-[#E5E5EA] px-4 flex items-center justify-between shrink-0",children:a?(0,M.jsxs)("div",{className:"flex-1 flex items-center gap-3",children:[(0,M.jsxs)("div",{className:"flex-1 bg-[#E5E5EA] rounded-lg px-3 py-2 flex items-center gap-2",children:[(0,M.jsx)(eC,{name:"search",size:16}),(0,M.jsx)("input",{type:"text",placeholder:"Suchen...",value:s,onChange:e=>o(e.target.value),className:"flex-1 bg-transparent text-[15px] text-[#1D1D1F] outline-none",autoFocus:!0})]}),(0,M.jsx)("button",{onClick:()=>{l(!1),o("")},className:"text-[17px] text-[#007AFF] ios-tap-target",children:"Abbrechen"})]}):f?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("button",{onClick:()=>{p(!1),y(new Set)},className:"text-[17px] text-[#007AFF] ios-tap-target",children:"Abbrechen"}),(0,M.jsxs)("span",{className:"sf-pro-display text-[17px] text-[#1D1D1F]",children:[m.size," ausgewhlt"]}),(0,M.jsx)("button",{onClick:()=>{console.log("TODO: Delete selected photos",Array.from(m))},className:"text-[17px] text-[#FF3B30] ios-tap-target",children:"Lschen"})]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)(eC,{name:"lock",size:20}),(0,M.jsx)("h1",{className:"sf-pro-display text-[20px] text-[#1D1D1F]",children:"Galerie"}),O?(0,M.jsx)(eC,{name:"cloud",size:16}):(0,M.jsx)(uZ,{className:"w-4 h-4 text-[#8E8E93]"})]}),(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsxs)("label",{className:"ios-tap-target cursor-pointer",children:[(0,M.jsx)("div",{className:T?"animate-pulse opacity-50":"",children:(0,M.jsx)(eC,{name:"upload",size:24})}),(0,M.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{Array.from(e.target.files||[]).forEach(e=>S(e))},className:"hidden",disabled:T})]}),(0,M.jsx)("button",{onClick:()=>l(!0),className:"ios-tap-target",children:(0,M.jsx)(eC,{name:"search",size:24})}),(0,M.jsx)("button",{onClick:()=>c(!u),className:"ios-tap-target",children:(0,M.jsx)(uX,{className:`w-6 h-6 ${h?"text-[#30D158]":"text-[#007AFF]"}`})})]})]})}),u&&(0,M.jsx)("div",{className:"bg-white border-b border-[#E5E5EA] px-4 py-3 shrink-0",children:(0,M.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-1 -mx-1 px-1",children:[(0,M.jsx)("button",{onClick:()=>d(null),className:`px-4 py-1.5 rounded-full text-[15px] whitespace-nowrap shrink-0 ${null===h?"bg-[#007AFF] text-white":"bg-[#E5E5EA] text-[#1D1D1F]"}`,children:"Alle"}),[{id:"nature",label:"Natur"},{id:"architecture",label:"Architektur"},{id:"travel",label:"Reisen"},{id:"food",label:"Essen"},{id:"animals",label:"Tiere"},{id:"city",label:"Stadt"},{id:"landscape",label:"Landschaft"}].map(e=>(0,M.jsx)("button",{onClick:()=>d(e.id),className:`px-4 py-1.5 rounded-full text-[15px] whitespace-nowrap shrink-0 ${h===e.id?"bg-[#007AFF] text-white":"bg-[#E5E5EA] text-[#1D1D1F]"}`,children:e.label},e.id))]})}),(0,M.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[I.map(e=>(0,M.jsxs)("div",{className:"mb-2",children:[(0,M.jsx)("div",{className:"sticky top-0 bg-[#F2F2F7]/95 backdrop-blur-sm px-3 py-2 z-10",children:(0,M.jsx)("p",{className:"text-[13px] font-semibold text-[#6E6E73]",children:e.label})}),(0,M.jsx)("div",{className:"grid grid-cols-3 gap-[2px] px-[2px]",children:e.photos.map(e=>{let t=void 0!==e.metadata;return(0,M.jsxs)("button",{onClick:()=>{var t,r;return t=e.id,r=e.cid,void(f?y(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r}):(console.log("TODO: Show full photo from IPFS CID:",r),v(t)))},onTouchStart:()=>{var t;return t=e.id,void(w.current=setTimeout(()=>{p(!0),y(new Set([t]))},500))},onTouchEnd:B,onTouchCancel:B,onContextMenu:t=>{t.preventDefault(),p(!0),y(new Set([e.id]))},className:"relative aspect-square overflow-hidden bg-[#E5E5EA]",children:[t?(0,M.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-[#E5E5EA] to-[#C7C7CC]",children:(0,M.jsx)(eC,{name:"lock",size:32})}):e.placeholderUrl?(0,M.jsx)("img",{src:e.placeholderUrl,alt:"",className:"w-full h-full object-cover",loading:"lazy"}):null,f&&(0,M.jsx)("div",{className:"absolute inset-0 bg-black/20",children:(0,M.jsx)("div",{className:`absolute top-2 right-2 w-6 h-6 rounded-full border-2 flex items-center justify-center ${m.has(e.id)?"bg-[#007AFF] border-[#007AFF]":"border-white bg-black/30"}`,children:m.has(e.id)&&(0,M.jsx)(U,{className:"w-4 h-4 text-white"})})})]},e.id)})})]},e.date)),(0,M.jsxs)("div",{className:"text-center py-6 px-4",children:[(0,M.jsx)("p",{className:"text-[13px] text-[#8E8E93]",children:"Lange drcken zum Auswhlen  Tippen zum ffnen"}),(0,M.jsxs)("p",{className:"text-[11px] text-[#C7C7CC] mt-1",children:[F.length," Fotos lokal  ",P.length," in der Cloud"]}),C.length>0&&(0,M.jsxs)("p",{className:"text-[11px] text-[#007AFF] mt-1 flex items-center justify-center gap-1",children:[(0,M.jsx)(eC,{name:"smartphone",size:12}),C.length," von anderen Gerten"]})]})]}),b&&(0,M.jsxs)("div",{className:"fixed top-[70px] left-1/2 -translate-x-1/2 bg-[#1D1D1F] text-white px-4 py-2 rounded-full text-[13px] flex items-center gap-2 z-50 animate-pulse",children:[(0,M.jsx)(eC,{name:"cloud",size:16}),b]}),g&&(0,M.jsxs)("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[(0,M.jsxs)("header",{className:"h-[60px] flex items-center justify-between px-4 bg-black/80",children:[(0,M.jsx)("button",{onClick:()=>v(null),className:"ios-tap-target",children:(0,M.jsx)(uB,{className:"w-6 h-6 text-white"})}),(0,M.jsxs)("span",{className:"text-[17px] text-white",children:["Foto ",F.findIndex(e=>e.id===g)+1," von"," ",F.length]}),(0,M.jsx)("div",{className:"w-10"})]}),(0,M.jsx)("div",{className:"flex-1 flex items-center justify-center p-4",children:(i=F.find(e=>e.id===g))?i.metadata?(0,M.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,M.jsx)(eC,{name:"lock",size:64}),(0,M.jsx)("p",{className:"text-white/80 text-center",children:"Entschlsselung wird implementiert..."})]}):i.placeholderUrl?(0,M.jsx)("img",{src:i.placeholderUrl,alt:"",className:"max-w-full max-h-full object-contain rounded-lg"}):null:null}),(0,M.jsx)("footer",{className:"h-[80px] flex items-center justify-center bg-black/80",children:(0,M.jsxs)("div",{className:"flex items-center gap-2 text-[13px] text-white/60",children:[(0,M.jsx)(eC,{name:"lock",size:16}),(0,M.jsx)("span",{children:"Ende-zu-Ende verschlsselt"})]})})]})]})}let u2=L("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u3={isOnboarded:!1,backupActive:!1,selectedPlan:"free",autoBackupEnabled:!0,backgroundBackupEnabled:!1,photosCount:0,lastBackup:"Noch nie",permanence:0,encryptionKey:"",backupPhrase:[],devices:[],photoSource:"photos-app"};function u6(){let[e,t]=(0,D.useState)(u3),[r,n]=(0,D.useState)("onboarding"),[i,s]=(0,D.useState)(1),[o,a]=(0,D.useState)(!0);return((0,D.useEffect)(()=>{let e=setTimeout(()=>{"true"===localStorage.getItem("photovault_onboarded")&&(t(e=>({...e,isOnboarded:!0})),n("gallery")),a(!1)},2e3);return()=>clearTimeout(e)},[]),o)?(0,M.jsx)(oM,{}):"onboarding"===r?(0,M.jsx)("div",{className:"min-h-screen ios-bg-gray",children:(0,M.jsx)("div",{className:"max-w-[428px] mx-auto min-h-screen bg-[#F2F2F7]",children:(0,M.jsx)(oF,{state:e,setState:t,step:i,setStep:s,onComplete:()=>{localStorage.setItem("photovault_onboarded","true"),t(e=>({...e,isOnboarded:!0})),n("gallery"),console.log("Onboarding completed with state:",e)}})})}):(0,M.jsx)("div",{className:"min-h-screen ios-bg-gray",children:(0,M.jsxs)("div",{className:"max-w-[428px] mx-auto min-h-screen bg-[#F2F2F7] flex flex-col",children:[(0,M.jsxs)("div",{className:"flex-1 overflow-hidden pb-[80px]",children:["gallery"===r&&(0,M.jsx)(u5,{photosCount:e.photosCount}),"dashboard"===r&&(0,M.jsx)(uV,{state:e,setState:t}),"settings"===r&&(0,M.jsx)(uW,{state:e,setState:t,onRestartOnboarding:()=>{console.log("TODO: Navigate to onboarding screen 1"),localStorage.removeItem("photovault_onboarded"),t(e=>({...e,isOnboarded:!1})),s(1),n("onboarding")}})]}),(0,M.jsx)(u8,{currentScreen:r,onNavigate:e=>{n(e)}})]})})}function u8({currentScreen:e,onNavigate:t}){return(0,M.jsxs)("nav",{className:"fixed bottom-0 left-0 right-0 h-[80px] bg-white border-t border-[#E5E5EA] flex items-start justify-around pt-2 pb-6 max-w-[428px] mx-auto",children:[(0,M.jsxs)("button",{onClick:()=>t("gallery"),className:"flex flex-col items-center gap-1 ios-tap-target px-4",children:[(0,M.jsx)(eC,{name:"image",size:24}),(0,M.jsx)("span",{className:`text-[10px] ${"gallery"===e?"text-[#007AFF]":"text-[#6E6E73]"}`,children:"Galerie"})]}),(0,M.jsxs)("button",{onClick:()=>t("dashboard"),className:"flex flex-col items-center gap-1 ios-tap-target px-4",children:[(0,M.jsx)(eC,{name:"shield",size:24}),(0,M.jsx)("span",{className:`text-[10px] ${"dashboard"===e?"text-[#007AFF]":"text-[#6E6E73]"}`,children:"Backup"})]}),(0,M.jsxs)("button",{onClick:()=>t("settings"),className:"flex flex-col items-center gap-1 ios-tap-target px-4",children:[(0,M.jsx)(u2,{className:`w-6 h-6 ${"settings"===e?"text-[#007AFF]":"text-[#6E6E73]"}`}),(0,M.jsx)("span",{className:`text-[10px] ${"settings"===e?"text-[#007AFF]":"text-[#6E6E73]"}`,children:"Einstellungen"})]})]})}e.s(["PhotoVaultApp",()=>u6],71058)}]);