module.exports=[33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},92434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},68063,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getDeploymentId:function(){return f},getDeploymentIdQueryOrEmptyString:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(){return!1}function g(){return""}},4987,(a,b,c)=>{"use strict";function d({widthInt:a,heightInt:b,blurWidth:c,blurHeight:d,blurDataURL:e,objectFit:f}){let g=c?40*c:a,h=d?40*d:b,i=g&&h?`viewBox='0 0 ${g} ${h}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${i}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${i?"none":"contain"===f?"xMidYMid":"cover"===f?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${e}'/%3E%3C/svg%3E`}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getImageBlurSvg",{enumerable:!0,get:function(){return d}})},345,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={VALID_LOADERS:function(){return f},imageConfigDefault:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=["default","imgix","cloudinary","akamai","custom"],g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},94915,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getImgProps",{enumerable:!0,get:function(){return j}}),a.r(92434);let d=a.r(68063),e=a.r(4987),f=a.r(345),g=["-moz-initial","fill","none","scale-down",void 0];function h(a){return void 0!==a.default}function i(a){return void 0===a?a:"number"==typeof a?Number.isFinite(a)?a:NaN:"string"==typeof a&&/^[0-9]+$/.test(a)?parseInt(a,10):NaN}function j({src:a,sizes:b,unoptimized:c=!1,priority:j=!1,preload:k=!1,loading:l,className:m,quality:n,width:o,height:p,fill:q=!1,style:r,overrideSrc:s,onLoad:t,onLoadingComplete:u,placeholder:v="empty",blurDataURL:w,fetchPriority:x,decoding:y="async",layout:z,objectFit:A,objectPosition:B,lazyBoundary:C,lazyRoot:D,...E},F){var G;let H,I,J,{imgConf:K,showAltText:L,blurComplete:M,defaultLoader:N}=F,O=K||f.imageConfigDefault;if("allSizes"in O)H=O;else{let a=[...O.deviceSizes,...O.imageSizes].sort((a,b)=>a-b),b=O.deviceSizes.sort((a,b)=>a-b),c=O.qualities?.sort((a,b)=>a-b);H={...O,allSizes:a,deviceSizes:b,qualities:c}}if(void 0===N)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let P=E.loader||N;delete E.loader,delete E.srcSet;let Q="__next_img_default"in P;if(Q){if("custom"===H.loader)throw Object.defineProperty(Error(`Image with src "${a}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let a=P;P=b=>{let{config:c,...d}=b;return a(d)}}if(z){"fill"===z&&(q=!0);let a={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[z];a&&(r={...r,...a});let c={responsive:"100vw",fill:"100vw"}[z];c&&!b&&(b=c)}let R="",S=i(o),T=i(p);if((G=a)&&"object"==typeof G&&(h(G)||void 0!==G.src)){let b=h(a)?a.default:a;if(!b.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(b)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!b.height||!b.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(b)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(I=b.blurWidth,J=b.blurHeight,w=w||b.blurDataURL,R=b.src,!q)if(S||T){if(S&&!T){let a=S/b.width;T=Math.round(b.height*a)}else if(!S&&T){let a=T/b.height;S=Math.round(b.width*a)}}else S=b.width,T=b.height}let U=!j&&!k&&("lazy"===l||void 0===l);(!(a="string"==typeof a?a:R)||a.startsWith("data:")||a.startsWith("blob:"))&&(c=!0,U=!1),H.unoptimized&&(c=!0),Q&&!H.dangerouslyAllowSVG&&a.split("?",1)[0].endsWith(".svg")&&(c=!0);let V=i(n),W=Object.assign(q?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:A,objectPosition:B}:{},L?{}:{color:"transparent"},r),X=M||"empty"===v?null:"blur"===v?`url("data:image/svg+xml;charset=utf-8,${(0,e.getImageBlurSvg)({widthInt:S,heightInt:T,blurWidth:I,blurHeight:J,blurDataURL:w||"",objectFit:W.objectFit})}")`:`url("${v}")`,Y=g.includes(W.objectFit)?"fill"===W.objectFit?"100% 100%":"cover":W.objectFit,Z=X?{backgroundSize:Y,backgroundPosition:W.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:X}:{},$=function({config:a,src:b,unoptimized:c,width:e,quality:f,sizes:g,loader:h}){if(c){let a=(0,d.getDeploymentId)();if(b.startsWith("/")&&!b.startsWith("//")&&a){let c=b.includes("?")?"&":"?";b=`${b}${c}dpl=${a}`}return{src:b,srcSet:void 0,sizes:void 0}}let{widths:i,kind:j}=function({deviceSizes:a,allSizes:b},c,d){if(d){let c=/(^|\s)(1?\d?\d)vw/g,e=[];for(let a;a=c.exec(d);)e.push(parseInt(a[2]));if(e.length){let c=.01*Math.min(...e);return{widths:b.filter(b=>b>=a[0]*c),kind:"w"}}return{widths:b,kind:"w"}}return"number"!=typeof c?{widths:a,kind:"w"}:{widths:[...new Set([c,2*c].map(a=>b.find(b=>b>=a)||b[b.length-1]))],kind:"x"}}(a,e,g),k=i.length-1;return{sizes:g||"w"!==j?g:"100vw",srcSet:i.map((c,d)=>`${h({config:a,src:b,quality:f,width:c})} ${"w"===j?c:d+1}${j}`).join(", "),src:h({config:a,src:b,quality:f,width:i[k]})}}({config:H,src:a,unoptimized:c,width:S,quality:V,sizes:b,loader:P}),_=U?"lazy":l;return{props:{...E,loading:_,fetchPriority:x,width:S,height:T,decoding:y,className:m,style:{...W,...Z},sizes:$.sizes,srcSet:$.srcSet,src:s||$.src},meta:{unoptimized:c,preload:k||j,placeholder:v,fill:q}}}},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},94613,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return f}});let d=a.r(72131),e=()=>{};function f(a){let{headManager:b,reduceComponentsToState:c}=a;function f(){if(b&&b.mountedInstances){let a=d.Children.toArray(Array.from(b.mountedInstances).filter(Boolean));b.updateHead(c(a))}}return b?.mountedInstances?.add(a.children),f(),e(()=>(b?.mountedInstances?.add(a.children),()=>{b?.mountedInstances?.delete(a.children)})),e(()=>(b&&(b._pendingUpdate=f),()=>{b&&(b._pendingUpdate=f)})),null}},92966,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HeadManagerContext},58018,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return p},defaultHead:function(){return l}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(46058),h=a.r(87924),i=g._(a.r(72131)),j=f._(a.r(94613)),k=a.r(92966);function l(){return[(0,h.jsx)("meta",{charSet:"utf-8"},"charset"),(0,h.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function m(a,b){return"string"==typeof b||"number"==typeof b?a:b.type===i.default.Fragment?a.concat(i.default.Children.toArray(b.props.children).reduce((a,b)=>"string"==typeof b||"number"==typeof b?a:a.concat(b),[])):a.concat(b)}a.r(92434);let n=["name","httpEquiv","charSet","itemProp"];function o(a){let b,c,d,e;return a.reduce(m,[]).reverse().concat(l().reverse()).filter((b=new Set,c=new Set,d=new Set,e={},a=>{let f=!0,g=!1;if(a.key&&"number"!=typeof a.key&&a.key.indexOf("$")>0){g=!0;let c=a.key.slice(a.key.indexOf("$")+1);b.has(c)?f=!1:b.add(c)}switch(a.type){case"title":case"base":c.has(a.type)?f=!1:c.add(a.type);break;case"meta":for(let b=0,c=n.length;b<c;b++){let c=n[b];if(a.props.hasOwnProperty(c))if("charSet"===c)d.has(c)?f=!1:d.add(c);else{let b=a.props[c],d=e[c]||new Set;("name"!==c||!g)&&d.has(b)?f=!1:(d.add(b),e[c]=d)}}}return f})).reverse().map((a,b)=>{let c=a.key||b;return i.default.cloneElement(a,{key:c})})}let p=function({children:a}){let b=(0,i.useContext)(k.HeadManagerContext);return(0,h.jsx)(j.default,{reduceComponentsToState:o,headManager:b,children:a})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},4486,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ImageConfigContext},53773,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.RouterContext},35444,(a,b,c)=>{"use strict";function d(a,b){let c=a||75;return b?.qualities?.length?b.qualities.reduce((a,b)=>Math.abs(b-c)<Math.abs(a-c)?b:a,0):c}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findClosestQuality",{enumerable:!0,get:function(){return d}})},2305,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return g}});let d=a.r(35444),e=a.r(68063);function f({config:a,src:b,width:c,quality:f}){if(b.startsWith("/")&&b.includes("?")&&a.localPatterns?.length===1&&"**"===a.localPatterns[0].pathname&&""===a.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${b}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let g=(0,d.findClosestQuality)(f,a),h=(0,e.getDeploymentId)();return`${a.path}?url=${encodeURIComponent(b)}&w=${c}&q=${g}${b.startsWith("/")&&h?`&dpl=${h}`:""}`}f.__next_img_default=!0;let g=f},8591,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(72131);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},67161,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"Image",{enumerable:!0,get:function(){return u}});let d=a.r(33354),e=a.r(46058),f=a.r(87924),g=e._(a.r(72131)),h=d._(a.r(35112)),i=d._(a.r(58018)),j=a.r(94915),k=a.r(345),l=a.r(4486);a.r(92434);let m=a.r(53773),n=d._(a.r(2305)),o=a.r(8591),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function q(a,b,c,d,e,f,g){let h=a?.src;a&&a["data-loaded-src"]!==h&&(a["data-loaded-src"]=h,("decode"in a?a.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(a.parentElement&&a.isConnected){if("empty"!==b&&e(!0),c?.current){let b=new Event("load");Object.defineProperty(b,"target",{writable:!1,value:a});let d=!1,e=!1;c.current({...b,nativeEvent:b,currentTarget:a,target:a,isDefaultPrevented:()=>d,isPropagationStopped:()=>e,persist:()=>{},preventDefault:()=>{d=!0,b.preventDefault()},stopPropagation:()=>{e=!0,b.stopPropagation()}})}d?.current&&d.current(a)}}))}function r(a){return g.use?{fetchPriority:a}:{fetchpriority:a}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let s=(0,g.forwardRef)(({src:a,srcSet:b,sizes:c,height:d,width:e,decoding:h,className:i,style:j,fetchPriority:k,placeholder:l,loading:m,unoptimized:n,fill:p,onLoadRef:s,onLoadingCompleteRef:t,setBlurComplete:u,setShowAltText:v,sizesInput:w,onLoad:x,onError:y,...z},A)=>{let B=(0,g.useCallback)(a=>{a&&(y&&(a.src=a.src),a.complete&&q(a,l,s,t,u,n,w))},[a,l,s,t,u,y,n,w]),C=(0,o.useMergedRef)(A,B);return(0,f.jsx)("img",{...z,...r(k),loading:m,width:e,height:d,decoding:h,"data-nimg":p?"fill":"1",className:i,style:j,sizes:c,srcSet:b,src:a,ref:C,onLoad:a=>{q(a.currentTarget,l,s,t,u,n,w)},onError:a=>{v(!0),"empty"!==l&&u(!0),y&&y(a)}})});function t({isAppRouter:a,imgAttributes:b}){let c={as:"image",imageSrcSet:b.srcSet,imageSizes:b.sizes,crossOrigin:b.crossOrigin,referrerPolicy:b.referrerPolicy,...r(b.fetchPriority)};return a&&h.default.preload?(h.default.preload(b.src,c),null):(0,f.jsx)(i.default,{children:(0,f.jsx)("link",{rel:"preload",href:b.srcSet?void 0:b.src,...c},"__nimg-"+b.src+b.srcSet+b.sizes)})}let u=(0,g.forwardRef)((a,b)=>{let c=(0,g.useContext)(m.RouterContext),d=(0,g.useContext)(l.ImageConfigContext),e=(0,g.useMemo)(()=>{let a=p||d||k.imageConfigDefault,b=[...a.deviceSizes,...a.imageSizes].sort((a,b)=>a-b),c=a.deviceSizes.sort((a,b)=>a-b),e=a.qualities?.sort((a,b)=>a-b);return{...a,allSizes:b,deviceSizes:c,qualities:e,localPatterns:d?.localPatterns}},[d]),{onLoad:h,onLoadingComplete:i}=a,o=(0,g.useRef)(h);(0,g.useEffect)(()=>{o.current=h},[h]);let q=(0,g.useRef)(i);(0,g.useEffect)(()=>{q.current=i},[i]);let[r,u]=(0,g.useState)(!1),[v,w]=(0,g.useState)(!1),{props:x,meta:y}=(0,j.getImgProps)(a,{defaultLoader:n.default,imgConf:e,blurComplete:r,showAltText:v});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s,{...x,unoptimized:y.unoptimized,placeholder:y.placeholder,fill:y.fill,onLoadRef:o,onLoadingCompleteRef:q,setBlurComplete:u,setShowAltText:w,sizesInput:a.sizes,ref:b}),y.preload?(0,f.jsx)(t,{isAppRouter:!c,imgAttributes:x}):null]})});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},33095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(94915),h=a.r(67161),i=f._(a.r(2305));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},71987,(a,b,c)=>{b.exports=a.r(33095)},72124,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}},56592,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(23952)),f=d(a.r(72124));c.default=class{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:"u"<typeof fetch?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,b){return this.headers=Object.assign({},this.headers),this.headers[a]=b,this}then(a,b){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let c=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var b,c,d;let e=null,g=null,h=null,i=a.status,j=a.statusText;if(a.ok){if("HEAD"!==this.method){let b=await a.text();""===b||(g="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?b:JSON.parse(b))}let d=null==(b=this.headers.Prefer)?void 0:b.match(/count=(exact|planned|estimated)/),f=null==(c=a.headers.get("content-range"))?void 0:c.split("/");d&&f&&f.length>1&&(h=parseInt(f[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(g)&&(g.length>1?(e={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,h=null,i=406,j="Not Acceptable"):g=1===g.length?g[0]:null)}else{let b=await a.text();try{e=JSON.parse(b),Array.isArray(e)&&404===a.status&&(g=[],e=null,i=200,j="OK")}catch(c){404===a.status&&""===b?(i=204,j="No Content"):e={message:b}}if(e&&this.isMaybeSingle&&(null==(d=null==e?void 0:e.details)?void 0:d.includes("0 rows"))&&(e=null,i=200,j="OK"),e&&this.shouldThrowOnError)throw new f.default(e)}return{error:e,data:g,count:h,status:i,statusText:j}});return this.shouldThrowOnError||(c=c.catch(a=>{var b,c,d;return{error:{message:`${null!=(b=null==a?void 0:a.name)?b:"FetchError"}: ${null==a?void 0:a.message}`,details:`${null!=(c=null==a?void 0:a.stack)?c:""}`,hint:"",code:`${null!=(d=null==a?void 0:a.code)?d:""}`},data:null,count:null,status:0,statusText:""}})),c.then(a,b)}}},98564,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(56592));class f extends e.default{select(a){let b=!1,c=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!b?"":('"'===a&&(b=!b),a)).join("");return this.url.searchParams.set("select",c),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:b=!0,nullsFirst:c,foreignTable:d,referencedTable:e=d}={}){let f=e?`${e}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${a}.${b?"asc":"desc"}${void 0===c?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:b,referencedTable:c=b}={}){let d=void 0===c?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,b,{foreignTable:c,referencedTable:d=c}={}){let e=void 0===d?"offset":`${d}.offset`,f=void 0===d?"limit":`${d}.limit`;return this.url.searchParams.set(e,`${a}`),this.url.searchParams.set(f,`${b-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:b=!1,settings:c=!1,buffers:d=!1,wal:e=!1,format:f="text"}={}){var g;let h=[a?"analyze":null,b?"verbose":null,c?"settings":null,d?"buffers":null,e?"wal":null].filter(Boolean).join("|"),i=null!=(g=this.headers.Accept)?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${i}"; options=${h};`,this}rollback(){var a;return(null!=(a=this.headers.Prefer)?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}c.default=f},19001,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(98564));class f extends e.default{eq(a,b){return this.url.searchParams.append(a,`eq.${b}`),this}neq(a,b){return this.url.searchParams.append(a,`neq.${b}`),this}gt(a,b){return this.url.searchParams.append(a,`gt.${b}`),this}gte(a,b){return this.url.searchParams.append(a,`gte.${b}`),this}lt(a,b){return this.url.searchParams.append(a,`lt.${b}`),this}lte(a,b){return this.url.searchParams.append(a,`lte.${b}`),this}like(a,b){return this.url.searchParams.append(a,`like.${b}`),this}likeAllOf(a,b){return this.url.searchParams.append(a,`like(all).{${b.join(",")}}`),this}likeAnyOf(a,b){return this.url.searchParams.append(a,`like(any).{${b.join(",")}}`),this}ilike(a,b){return this.url.searchParams.append(a,`ilike.${b}`),this}ilikeAllOf(a,b){return this.url.searchParams.append(a,`ilike(all).{${b.join(",")}}`),this}ilikeAnyOf(a,b){return this.url.searchParams.append(a,`ilike(any).{${b.join(",")}}`),this}is(a,b){return this.url.searchParams.append(a,`is.${b}`),this}in(a,b){let c=Array.from(new Set(b)).map(a=>"string"==typeof a&&RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cs.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cs.{${b.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(b)}`),this}containedBy(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cd.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cd.{${b.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(b)}`),this}rangeGt(a,b){return this.url.searchParams.append(a,`sr.${b}`),this}rangeGte(a,b){return this.url.searchParams.append(a,`nxl.${b}`),this}rangeLt(a,b){return this.url.searchParams.append(a,`sl.${b}`),this}rangeLte(a,b){return this.url.searchParams.append(a,`nxr.${b}`),this}rangeAdjacent(a,b){return this.url.searchParams.append(a,`adj.${b}`),this}overlaps(a,b){return"string"==typeof b?this.url.searchParams.append(a,`ov.${b}`):this.url.searchParams.append(a,`ov.{${b.join(",")}}`),this}textSearch(a,b,{config:c,type:d}={}){let e="";"plain"===d?e="pl":"phrase"===d?e="ph":"websearch"===d&&(e="w");let f=void 0===c?"":`(${c})`;return this.url.searchParams.append(a,`${e}fts${f}.${b}`),this}match(a){return Object.entries(a).forEach(([a,b])=>{this.url.searchParams.append(a,`eq.${b}`)}),this}not(a,b,c){return this.url.searchParams.append(a,`not.${b}.${c}`),this}or(a,{foreignTable:b,referencedTable:c=b}={}){let d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,b,c){return this.url.searchParams.append(a,`${b}.${c}`),this}}c.default=f},3619,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(19001));c.default=class{constructor(a,{headers:b={},schema:c,fetch:d}){this.url=a,this.headers=b,this.schema=c,this.fetch=d}select(a,{head:b=!1,count:c}={}){let d=!1,f=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!d?"":('"'===a&&(d=!d),a)).join("");return this.url.searchParams.set("select",f),c&&(this.headers.Prefer=`count=${c}`),new e.default({method:b?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:b,defaultToNull:c=!0}={}){let d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),b&&d.push(`count=${b}`),c||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:b,ignoreDuplicates:c=!1,count:d,defaultToNull:f=!0}={}){let g=[`resolution=${c?"ignore":"merge"}-duplicates`];if(void 0!==b&&this.url.searchParams.set("on_conflict",b),this.headers.Prefer&&g.push(this.headers.Prefer),d&&g.push(`count=${d}`),f||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:b}={}){let c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),b&&c.push(`count=${b}`),this.headers.Prefer=c.join(","),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){let b=[];return a&&b.push(`count=${a}`),this.headers.Prefer&&b.unshift(this.headers.Prefer),this.headers.Prefer=b.join(","),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},84589,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.version=void 0,c.version="0.0.0-automated"},37418,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_HEADERS=void 0;let d=a.r(84589);c.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${d.version}`}},27749,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(3619)),f=d(a.r(19001)),g=a.r(37418);class h{constructor(a,{headers:b={},schema:c,fetch:d}={}){this.url=a,this.headers=Object.assign(Object.assign({},g.DEFAULT_HEADERS),b),this.schemaName=c,this.fetch=d}from(a){let b=new URL(`${this.url}/${a}`);return new e.default(b,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new h(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,b={},{head:c=!1,get:d=!1,count:e}={}){let g,h,i=new URL(`${this.url}/rpc/${a}`);c||d?(g=c?"HEAD":"GET",Object.entries(b).filter(([a,b])=>void 0!==b).map(([a,b])=>[a,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([a,b])=>{i.searchParams.append(a,b)})):(g="POST",h=b);let j=Object.assign({},this.headers);return e&&(j.Prefer=`count=${e}`),new f.default({method:g,url:i,headers:j,schema:this.schemaName,body:h,fetch:this.fetch,allowEmpty:!1})}}c.default=h},79614,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.PostgrestError=c.PostgrestBuilder=c.PostgrestTransformBuilder=c.PostgrestFilterBuilder=c.PostgrestQueryBuilder=c.PostgrestClient=void 0;let e=d(a.r(27749));c.PostgrestClient=e.default;let f=d(a.r(3619));c.PostgrestQueryBuilder=f.default;let g=d(a.r(19001));c.PostgrestFilterBuilder=g.default;let h=d(a.r(98564));c.PostgrestTransformBuilder=h.default;let i=d(a.r(56592));c.PostgrestBuilder=i.default;let j=d(a.r(72124));c.PostgrestError=j.default,c.default={PostgrestClient:e.default,PostgrestQueryBuilder:f.default,PostgrestFilterBuilder:g.default,PostgrestTransformBuilder:h.default,PostgrestBuilder:i.default,PostgrestError:j.default}},23605,a=>{"use strict";let b,c,d,e,f,g,h,i,j;var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M=a.i(87924),N=a.i(72131);let O=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var P={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let Q=(0,N.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:g,...h},i)=>(0,N.createElement)("svg",{ref:i,...P,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:O("lucide",e),...h},[...g.map(([a,b])=>(0,N.createElement)(a,b)),...Array.isArray(f)?f:[f]])),R=(a,b)=>{let c=(0,N.forwardRef)(({className:c,...d},e)=>(0,N.createElement)(Q,{ref:e,iconNode:b,className:O(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,c),...d}));return c.displayName=`${a}`,c},S=R("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var T=a.i(71987);let U=(a,b)=>{if(0===a.length)return b.classGroupId;let c=a[0],d=b.nextPart.get(c),e=d?U(a.slice(1),d):void 0;if(e)return e;if(0===b.validators.length)return;let f=a.join("-");return b.validators.find(({validator:a})=>a(f))?.classGroupId},V=/^\[(.+)\]$/,W=(a,b,c,d)=>{a.forEach(a=>{if("string"==typeof a){(""===a?b:X(b,a)).classGroupId=c;return}"function"==typeof a?Y(a)?W(a(d),b,c,d):b.validators.push({validator:a,classGroupId:c}):Object.entries(a).forEach(([a,e])=>{W(e,X(b,a),c,d)})})},X=(a,b)=>{let c=a;return b.split("-").forEach(a=>{c.nextPart.has(a)||c.nextPart.set(a,{nextPart:new Map,validators:[]}),c=c.nextPart.get(a)}),c},Y=a=>a.isThemeGetter,Z=(a,b)=>b?a.map(([a,c])=>[a,c.map(a=>"string"==typeof a?b+a:"object"==typeof a?Object.fromEntries(Object.entries(a).map(([a,c])=>[b+a,c])):a)]):a,$=a=>{if(a.length<=1)return a;let b=[],c=[];return a.forEach(a=>{"["===a[0]?(b.push(...c.sort(),a),c=[]):c.push(a)}),b.push(...c.sort()),b},_=/\s+/;function aa(){let a,b,c=0,d="";for(;c<arguments.length;)(a=arguments[c++])&&(b=ab(a))&&(d&&(d+=" "),d+=b);return d}let ab=a=>{let b;if("string"==typeof a)return a;let c="";for(let d=0;d<a.length;d++)a[d]&&(b=ab(a[d]))&&(c&&(c+=" "),c+=b);return c},ac=a=>{let b=b=>b[a]||[];return b.isThemeGetter=!0,b},ad=/^\[(?:([a-z-]+):)?(.+)\]$/i,ae=/^\d+\/\d+$/,af=new Set(["px","full","screen"]),ag=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ah=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ai=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,aj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ak=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,al=a=>an(a)||af.has(a)||ae.test(a),am=a=>aA(a,"length",aB),an=a=>!!a&&!Number.isNaN(Number(a)),ao=a=>aA(a,"number",an),ap=a=>!!a&&Number.isInteger(Number(a)),aq=a=>a.endsWith("%")&&an(a.slice(0,-1)),ar=a=>ad.test(a),as=a=>ag.test(a),at=new Set(["length","size","percentage"]),au=a=>aA(a,at,aC),av=a=>aA(a,"position",aC),aw=new Set(["image","url"]),ax=a=>aA(a,aw,aE),ay=a=>aA(a,"",aD),az=()=>!0,aA=(a,b,c)=>{let d=ad.exec(a);return!!d&&(d[1]?"string"==typeof b?d[1]===b:b.has(d[1]):c(d[2]))},aB=a=>ah.test(a)&&!ai.test(a),aC=()=>!1,aD=a=>aj.test(a),aE=a=>ak.test(a),aF=function(a,...b){let c,d,e,f=function(h){let i;return d=(c={cache:(a=>{if(a<1)return{get:()=>void 0,set:()=>{}};let b=0,c=new Map,d=new Map,e=(e,f)=>{c.set(e,f),++b>a&&(b=0,d=c,c=new Map)};return{get(a){let b=c.get(a);return void 0!==b?b:void 0!==(b=d.get(a))?(e(a,b),b):void 0},set(a,b){c.has(a)?c.set(a,b):e(a,b)}}})((i=b.reduce((a,b)=>b(a),a())).cacheSize),parseClassName:(a=>{let{separator:b,experimentalParseClassName:c}=a,d=1===b.length,e=b[0],f=b.length,g=a=>{let c,g=[],h=0,i=0;for(let j=0;j<a.length;j++){let k=a[j];if(0===h){if(k===e&&(d||a.slice(j,j+f)===b)){g.push(a.slice(i,j)),i=j+f;continue}if("/"===k){c=j;continue}}"["===k?h++:"]"===k&&h--}let j=0===g.length?a:a.substring(i),k=j.startsWith("!"),l=k?j.substring(1):j;return{modifiers:g,hasImportantModifier:k,baseClassName:l,maybePostfixModifierPosition:c&&c>i?c-i:void 0}};return c?a=>c({className:a,parseClassName:g}):g})(i),...(a=>{let b=(a=>{let{theme:b,prefix:c}=a,d={nextPart:new Map,validators:[]};return Z(Object.entries(a.classGroups),c).forEach(([a,c])=>{W(c,d,a,b)}),d})(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;return{getClassGroupId:a=>{let c=a.split("-");return""===c[0]&&1!==c.length&&c.shift(),U(c,b)||(a=>{if(V.test(a)){let b=V.exec(a)[1],c=b?.substring(0,b.indexOf(":"));if(c)return"arbitrary.."+c}})(a)},getConflictingClassGroupIds:(a,b)=>{let e=c[a]||[];return b&&d[a]?[...e,...d[a]]:e}}})(i)}).cache.get,e=c.cache.set,f=g,g(h)};function g(a){let b=d(a);if(b)return b;let f=((a,b)=>{let{parseClassName:c,getClassGroupId:d,getConflictingClassGroupIds:e}=b,f=[],g=a.trim().split(_),h="";for(let a=g.length-1;a>=0;a-=1){let b=g[a],{modifiers:i,hasImportantModifier:j,baseClassName:k,maybePostfixModifierPosition:l}=c(b),m=!!l,n=d(m?k.substring(0,l):k);if(!n){if(!m||!(n=d(k))){h=b+(h.length>0?" "+h:h);continue}m=!1}let o=$(i).join(":"),p=j?o+"!":o,q=p+n;if(f.includes(q))continue;f.push(q);let r=e(n,m);for(let a=0;a<r.length;++a){let b=r[a];f.push(p+b)}h=b+(h.length>0?" "+h:h)}return h})(a,c);return e(a,f),f}return function(){return f(aa.apply(null,arguments))}}(()=>{let a=ac("colors"),b=ac("spacing"),c=ac("blur"),d=ac("brightness"),e=ac("borderColor"),f=ac("borderRadius"),g=ac("borderSpacing"),h=ac("borderWidth"),i=ac("contrast"),j=ac("grayscale"),k=ac("hueRotate"),l=ac("invert"),m=ac("gap"),n=ac("gradientColorStops"),o=ac("gradientColorStopPositions"),p=ac("inset"),q=ac("margin"),r=ac("opacity"),s=ac("padding"),t=ac("saturate"),u=ac("scale"),v=ac("sepia"),w=ac("skew"),x=ac("space"),y=ac("translate"),z=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",ar,b],C=()=>[ar,b],D=()=>["",al,am],E=()=>["auto",an,ar],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",ar],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[an,ar];return{cacheSize:500,separator:":",theme:{colors:[az],spacing:[al,am],blur:["none","",as,ar],brightness:L(),borderColor:[a],borderRadius:["none","","full",as,ar],borderSpacing:C(),borderWidth:D(),contrast:L(),grayscale:J(),hueRotate:L(),invert:J(),gap:C(),gradientColorStops:[a],gradientColorStopPositions:[aq,am],inset:B(),margin:B(),opacity:L(),padding:C(),saturate:L(),scale:L(),sepia:J(),skew:L(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",ar]}],container:["container"],columns:[{columns:[as]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),ar]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ap,ar]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ar]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",ap,ar]}],"grid-cols":[{"grid-cols":[az]}],"col-start-end":[{col:["auto",{span:["full",ap,ar]},ar]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[az]}],"row-start-end":[{row:["auto",{span:[ap,ar]},ar]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ar]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ar]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[s]}],px:[{px:[s]}],py:[{py:[s]}],ps:[{ps:[s]}],pe:[{pe:[s]}],pt:[{pt:[s]}],pr:[{pr:[s]}],pb:[{pb:[s]}],pl:[{pl:[s]}],m:[{m:[q]}],mx:[{mx:[q]}],my:[{my:[q]}],ms:[{ms:[q]}],me:[{me:[q]}],mt:[{mt:[q]}],mr:[{mr:[q]}],mb:[{mb:[q]}],ml:[{ml:[q]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ar,b]}],"min-w":[{"min-w":[ar,b,"min","max","fit"]}],"max-w":[{"max-w":[ar,b,"none","full","min","max","fit","prose",{screen:[as]},as]}],h:[{h:[ar,b,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ar,b,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ar,b,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ar,b,"auto","min","max","fit"]}],"font-size":[{text:["base",as,am]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ao]}],"font-family":[{font:[az]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ar]}],"line-clamp":[{"line-clamp":["none",an,ao]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",al,ar]}],"list-image":[{"list-image":["none",ar]}],"list-style-type":[{list:["none","disc","decimal",ar]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[a]}],"placeholder-opacity":[{"placeholder-opacity":[r]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[a]}],"text-opacity":[{"text-opacity":[r]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",al,am]}],"underline-offset":[{"underline-offset":["auto",al,ar]}],"text-decoration-color":[{decoration:[a]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ar]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ar]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[r]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),av]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",au]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ax]}],"bg-color":[{bg:[a]}],"gradient-from-pos":[{from:[o]}],"gradient-via-pos":[{via:[o]}],"gradient-to-pos":[{to:[o]}],"gradient-from":[{from:[n]}],"gradient-via":[{via:[n]}],"gradient-to":[{to:[n]}],rounded:[{rounded:[f]}],"rounded-s":[{"rounded-s":[f]}],"rounded-e":[{"rounded-e":[f]}],"rounded-t":[{"rounded-t":[f]}],"rounded-r":[{"rounded-r":[f]}],"rounded-b":[{"rounded-b":[f]}],"rounded-l":[{"rounded-l":[f]}],"rounded-ss":[{"rounded-ss":[f]}],"rounded-se":[{"rounded-se":[f]}],"rounded-ee":[{"rounded-ee":[f]}],"rounded-es":[{"rounded-es":[f]}],"rounded-tl":[{"rounded-tl":[f]}],"rounded-tr":[{"rounded-tr":[f]}],"rounded-br":[{"rounded-br":[f]}],"rounded-bl":[{"rounded-bl":[f]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[r]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[r]}],"divide-style":[{divide:G()}],"border-color":[{border:[e]}],"border-color-x":[{"border-x":[e]}],"border-color-y":[{"border-y":[e]}],"border-color-s":[{"border-s":[e]}],"border-color-e":[{"border-e":[e]}],"border-color-t":[{"border-t":[e]}],"border-color-r":[{"border-r":[e]}],"border-color-b":[{"border-b":[e]}],"border-color-l":[{"border-l":[e]}],"divide-color":[{divide:[e]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[al,ar]}],"outline-w":[{outline:[al,am]}],"outline-color":[{outline:[a]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[a]}],"ring-opacity":[{"ring-opacity":[r]}],"ring-offset-w":[{"ring-offset":[al,am]}],"ring-offset-color":[{"ring-offset":[a]}],shadow:[{shadow:["","inner","none",as,ay]}],"shadow-color":[{shadow:[az]}],opacity:[{opacity:[r]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[c]}],brightness:[{brightness:[d]}],contrast:[{contrast:[i]}],"drop-shadow":[{"drop-shadow":["","none",as,ar]}],grayscale:[{grayscale:[j]}],"hue-rotate":[{"hue-rotate":[k]}],invert:[{invert:[l]}],saturate:[{saturate:[t]}],sepia:[{sepia:[v]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[c]}],"backdrop-brightness":[{"backdrop-brightness":[d]}],"backdrop-contrast":[{"backdrop-contrast":[i]}],"backdrop-grayscale":[{"backdrop-grayscale":[j]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[k]}],"backdrop-invert":[{"backdrop-invert":[l]}],"backdrop-opacity":[{"backdrop-opacity":[r]}],"backdrop-saturate":[{"backdrop-saturate":[t]}],"backdrop-sepia":[{"backdrop-sepia":[v]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[g]}],"border-spacing-x":[{"border-spacing-x":[g]}],"border-spacing-y":[{"border-spacing-y":[g]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ar]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",ar]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",ar]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[u]}],"scale-x":[{"scale-x":[u]}],"scale-y":[{"scale-y":[u]}],rotate:[{rotate:[ap,ar]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ar]}],accent:[{accent:["auto",a]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ar]}],"caret-color":[{caret:[a]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ar]}],fill:[{fill:[a,"none"]}],"stroke-w":[{stroke:[al,am,ao]}],stroke:[{stroke:[a,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}),aG={key:"/key.svg",lock:"/lock.svg",shield:"/shield.svg",upload:"/upload.svg",smartphone:"/smartphone.svg",cloud:"/cloud.svg",clock:"/clock.svg",search:"/search.svg",image:"/image.svg",folder:"/Openfolder.svg",refresh:"/RefreshCw.svg",chevronRight:"/ChevronRight.svg"};function aH({name:a,className:b,size:c=24}){return(0,M.jsx)("div",{className:function(...a){return aF(function(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}(a))}("relative inline-block shrink-0",b),style:{width:c,height:c},children:(0,M.jsx)(T.default,{src:aG[a],alt:a,fill:!0,className:"object-contain",unoptimized:!0})})}let aI=R("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),aJ=()=>(0,M.jsxs)("div",{className:"loader-container",children:[(0,M.jsx)("div",{className:"peeking-photo-icon",children:(0,M.jsx)(aI,{strokeWidth:1.5})}),(0,M.jsxs)("div",{className:"shield-container",children:[Array.from({length:150}).map((a,b)=>(0,M.jsx)("div",{className:"particle",style:{animationDelay:`${b%10*.1+.02*Math.floor(b/10)}s`}},b)),(0,M.jsxs)("div",{className:"shield-structure",children:[(0,M.jsx)("div",{className:"structure-line line-1"}),(0,M.jsx)("div",{className:"structure-line line-2"}),(0,M.jsx)("div",{className:"structure-line line-3"}),(0,M.jsx)("div",{className:"structure-line line-4"})]})]}),(0,M.jsx)("div",{className:"loading-text",children:"LDT..."})]}),aK=R("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),aL=R("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),aM=R("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),aN=R("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),aO=R("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),aP=R("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),aQ=Object.create(null),aR=a=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(a?aQ:globalThis),aS=new Proxy(aQ,{get:(a,b)=>aR()[b]??aQ[b],has:(a,b)=>b in aR()||b in aQ,set:(a,b,c)=>(aR(!0)[b]=c,!0),deleteProperty(a,b){if(!b)return!1;let c=aR(!0);return delete c[b],!0},ownKeys:()=>Object.keys(aR(!0))});function aT(a,b){return"u">typeof process&&process.env?process.env[a]??b:"u">typeof Deno?Deno.env.get(a)??b:"u">typeof Bun?Bun.env[a]??b:b}"u">typeof process&&process.env,Object.freeze({get BETTER_AUTH_SECRET(){return aT("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return aT("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return aT("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return aT("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return aT("NODE_ENV","development")},get PACKAGE_VERSION(){return aT("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return aT("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}});let aU={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},aV=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),aW=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/],aX="\x1b[0m",aY="\x1b[31m",aZ="\x1b[32m",a$="\x1b[33m",a_="\x1b[34m",a0="\x1b[35m",a1=["debug","info","success","warn","error"],a2={info:a_,success:aZ,warn:a$,error:aY,debug:a0};function a3(a,b,c){function d(c,d){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:d,constr:g,traits:new Set},enumerable:!1}),c._zod.traits.has(a))return;c._zod.traits.add(a),b(c,d);let e=g.prototype,f=Object.keys(e);for(let a=0;a<f.length;a++){let b=f[a];b in c||(c[b]=e[b].bind(c))}}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}b=k?.disabled!==!0,c=k?.level??"error",d=k?.disableColors!==void 0?!k.disableColors:1!==function(){if(void 0!==aT("FORCE_COLOR"))switch(aT("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==aT("NODE_DISABLE_COLORS")&&""!==aT("NODE_DISABLE_COLORS")||void 0!==aT("NO_COLOR")&&""!==aT("NO_COLOR")||"dumb"===aT("TERM"))return 1;if(aT("TMUX"))return 24;if("TF_BUILD"in aS&&"AGENT_NAME"in aS)return 4;if("CI"in aS){for(let{0:a,1:b}of aV)if(a in aS)return b;return"codeship"===aT("CI_NAME")?8:1}if("TEAMCITY_VERSION"in aS)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(aT("TEAMCITY_VERSION"))?4:1;switch(aT("TERM_PROGRAM")){case"iTerm.app":if(!aT("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec(aT("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===aT("COLORTERM")||"24bit"===aT("COLORTERM"))return 24;if(aT("TERM")){if(null!==/truecolor/.exec(aT("TERM")))return 24;if(null!==/^xterm-256/.exec(aT("TERM")))return 8;let a=aT("TERM").toLowerCase();if(aU[a])return aU[a];if(aW.some(b=>null!==b.exec(a)))return 4}return aT("COLORTERM")?4:1}(),Object.fromEntries(a1.map(a=>[a,(...[e,...f])=>((a,e,f=[])=>{let g;if(!b||!(a1.indexOf(a)>=a1.indexOf(c)))return;let h=(g=new Date().toISOString(),d?`\x1b[2m${g}${aX} ${a2[a]}${a.toUpperCase()}${aX} \x1b[1m[Better Auth]:${aX} ${e}`:`${g} ${a.toUpperCase()} [Better Auth]: ${e}`);k&&"function"==typeof k.log?k.log("success"===a?"info":a,e,...f):"error"===a?console.error(h,...f):"warn"===a?console.warn(h,...f):console.log(h,...f)})(a,e,f)])),Object.freeze({status:"aborted"}),Symbol("zod_brand");class a4 extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class a5 extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}let a6={};function a7(a){return a&&Object.assign(a6,a),a6}function a8(a){return a}function a9(a){return a}function ba(a){}function bb(a){throw Error("Unexpected value in exhaustive check")}function bc(a){}function bd(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}function be(a,b="|"){return a.map(a=>bH(a)).join(b)}function bf(a,b){return"bigint"==typeof b?b.toString():b}function bg(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function bh(a){return null==a}function bi(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}function bj(a,b){let c=(a.toString().split(".")[1]||"").length,d=b.toString(),e=(d.split(".")[1]||"").length;if(0===e&&/\d?e-\d?/.test(d)){let a=d.match(/\d?e-(\d?)/);a?.[1]&&(e=Number.parseInt(a[1]))}let f=c>e?c:e;return Number.parseInt(a.toFixed(f).replace(".",""))%Number.parseInt(b.toFixed(f).replace(".",""))/10**f}let bk=Symbol("evaluating");function bl(a,b,c){let d;Object.defineProperty(a,b,{get(){if(d!==bk)return void 0===d&&(d=bk,d=c()),d},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function bm(a){return Object.create(Object.getPrototypeOf(a),Object.getOwnPropertyDescriptors(a))}function bn(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function bo(...a){let b={};for(let c of a)Object.assign(b,Object.getOwnPropertyDescriptors(c));return Object.defineProperties({},b)}function bp(a){return bo(a._zod.def)}function bq(a,b){return b?b.reduce((a,b)=>a?.[b],a):a}function br(a){let b=Object.keys(a);return Promise.all(b.map(b=>a[b])).then(a=>{let c={};for(let d=0;d<b.length;d++)c[b[d]]=a[d];return c})}function bs(a=10){let b="abcdefghijklmnopqrstuvwxyz",c="";for(let d=0;d<a;d++)c+=b[Math.floor(Math.random()*b.length)];return c}function bt(a){return JSON.stringify(a)}function bu(a){return a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}let bv="captureStackTrace"in Error?Error.captureStackTrace:(...a)=>{};function bw(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let bx=bg(()=>{if("u">typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function by(a){if(!1===bw(a))return!1;let b=a.constructor;if(void 0===b||"function"!=typeof b)return!0;let c=b.prototype;return!1!==bw(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}function bz(a){return by(a)?{...a}:Array.isArray(a)?[...a]:a}function bA(a){let b=0;for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b++;return b}let bB=new Set(["string","number","symbol"]),bC=new Set(["string","number","bigint","boolean","symbol","undefined"]);function bD(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function bE(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function bF(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function bG(a){let b;return new Proxy({},{get:(c,d,e)=>(b??(b=a()),Reflect.get(b,d,e)),set:(c,d,e,f)=>(b??(b=a()),Reflect.set(b,d,e,f)),has:(c,d)=>(b??(b=a()),Reflect.has(b,d)),deleteProperty:(c,d)=>(b??(b=a()),Reflect.deleteProperty(b,d)),ownKeys:c=>(b??(b=a()),Reflect.ownKeys(b)),getOwnPropertyDescriptor:(c,d)=>(b??(b=a()),Reflect.getOwnPropertyDescriptor(b,d)),defineProperty:(c,d,e)=>(b??(b=a()),Reflect.defineProperty(b,d,e))})}function bH(a){return"bigint"==typeof a?a.toString()+"n":"string"==typeof a?`"${a}"`:`${a}`}function bI(a){return Object.keys(a).filter(b=>"optional"===a[b]._zod.optin&&"optional"===a[b]._zod.optout)}let bJ={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},bK={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function bL(a,b){let c=a._zod.def,d=c.checks;if(d&&d.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let e=bo(a._zod.def,{get shape(){let a={};for(let d in b){if(!(d in c.shape))throw Error(`Unrecognized key: "${d}"`);b[d]&&(a[d]=c.shape[d])}return bn(this,"shape",a),a},checks:[]});return bE(a,e)}function bM(a,b){let c=a._zod.def,d=c.checks;if(d&&d.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let e=bo(a._zod.def,{get shape(){let d={...a._zod.def.shape};for(let a in b){if(!(a in c.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete d[a]}return bn(this,"shape",d),d},checks:[]});return bE(a,e)}function bN(a,b){if(!by(b))throw Error("Invalid input to extend: expected a plain object");let c=a._zod.def.checks;if(c&&c.length>0){let c=a._zod.def.shape;for(let a in b)if(void 0!==Object.getOwnPropertyDescriptor(c,a))throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let d=bo(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return bn(this,"shape",c),c}});return bE(a,d)}function bO(a,b){if(!by(b))throw Error("Invalid input to safeExtend: expected a plain object");let c=bo(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return bn(this,"shape",c),c}});return bE(a,c)}function bP(a,b){let c=bo(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return bn(this,"shape",c),c},get catchall(){return b._zod.def.catchall},checks:[]});return bE(a,c)}function bQ(a,b,c){let d=b._zod.def.checks;if(d&&d.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let e=bo(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return bn(this,"shape",e),e},checks:[]});return bE(b,e)}function bR(a,b,c){let d=bo(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return bn(this,"shape",e),e}});return bE(b,d)}function bS(a,b=0){if(!0===a.aborted)return!0;for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function bT(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function bU(a){return"string"==typeof a?a:a?.message}function bV(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=bU(a.inst?._zod.def?.error?.(a))??bU(b?.error?.(a))??bU(c.customError?.(a))??bU(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function bW(a){return a instanceof Set?"set":a instanceof Map?"map":a instanceof File?"file":"unknown"}function bX(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function bY(a){let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"nan":"number";case"object":if(null===a)return"null";if(Array.isArray(a))return"array";if(a&&Object.getPrototypeOf(a)!==Object.prototype&&"constructor"in a&&a.constructor)return a.constructor.name}return b}function bZ(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}function b$(a){return Object.entries(a).filter(([a,b])=>Number.isNaN(Number.parseInt(a,10))).map(a=>a[1])}function b_(a){let b=atob(a),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}function b0(a){let b="";for(let c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return btoa(b)}function b1(a){let b=a.replace(/-/g,"+").replace(/_/g,"/"),c="=".repeat((4-b.length%4)%4);return b_(b+c)}function b2(a){return b0(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function b3(a){let b=a.replace(/^0x/,"");if(b.length%2!=0)throw Error("Invalid hex string length");let c=new Uint8Array(b.length/2);for(let a=0;a<b.length;a+=2)c[a/2]=Number.parseInt(b.slice(a,a+2),16);return c}function b4(a){return Array.from(a).map(a=>a.toString(16).padStart(2,"0")).join("")}class b5{constructor(...a){}}a.s(["BIGINT_FORMAT_RANGES",0,bK,"Class",()=>b5,"NUMBER_FORMAT_RANGES",0,bJ,"aborted",()=>bS,"allowsEval",0,bx,"assert",()=>bc,"assertEqual",()=>a8,"assertIs",()=>ba,"assertNever",()=>bb,"assertNotEqual",()=>a9,"assignProp",()=>bn,"base64ToUint8Array",()=>b_,"base64urlToUint8Array",()=>b1,"cached",()=>bg,"captureStackTrace",0,bv,"cleanEnum",()=>b$,"cleanRegex",()=>bi,"clone",()=>bE,"cloneDef",()=>bp,"createTransparentProxy",()=>bG,"defineLazy",()=>bl,"esc",()=>bt,"escapeRegex",()=>bD,"extend",()=>bN,"finalizeIssue",()=>bV,"floatSafeRemainder",()=>bj,"getElementAtPath",()=>bq,"getEnumValues",()=>bd,"getLengthableOrigin",()=>bX,"getParsedType",0,a=>{let b=typeof a;switch(b){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(a)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return"promise";if("u">typeof Map&&a instanceof Map)return"map";if("u">typeof Set&&a instanceof Set)return"set";if("u">typeof Date&&a instanceof Date)return"date";if("u">typeof File&&a instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${b}`)}},"getSizableOrigin",()=>bW,"hexToUint8Array",()=>b3,"isObject",()=>bw,"isPlainObject",()=>by,"issue",()=>bZ,"joinValues",()=>be,"jsonStringifyReplacer",()=>bf,"merge",()=>bP,"mergeDefs",()=>bo,"normalizeParams",()=>bF,"nullish",()=>bh,"numKeys",()=>bA,"objectClone",()=>bm,"omit",()=>bM,"optionalKeys",()=>bI,"parsedType",()=>bY,"partial",()=>bQ,"pick",()=>bL,"prefixIssues",()=>bT,"primitiveTypes",0,bC,"promiseAllObject",()=>br,"propertyKeyTypes",0,bB,"randomString",()=>bs,"required",()=>bR,"safeExtend",()=>bO,"shallowClone",()=>bz,"slugify",()=>bu,"stringifyPrimitive",()=>bH,"uint8ArrayToBase64",()=>b0,"uint8ArrayToBase64url",()=>b2,"uint8ArrayToHex",()=>b4,"unwrapMessage",()=>bU],66446);let b6=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),a.message=JSON.stringify(b,bf,2),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},b7=a3("$ZodError",b6),b8=a3("$ZodError",b6,{Parent:Error}),b9=a=>(b,c,d,e)=>{let f=d?Object.assign(d,{async:!1}):{async:!1},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise)throw new a4;if(g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>bV(a,f,a7())));throw bv(b,e?.callee),b}return g.value},ca=b9(b8),cb=a=>async(b,c,d,e)=>{let f=d?Object.assign(d,{async:!0}):{async:!0},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise&&(g=await g),g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>bV(a,f,a7())));throw bv(b,e?.callee),b}return g.value},cc=cb(b8),cd=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new a4;return f.issues.length?{success:!1,error:new(a??b7)(f.issues.map(a=>bV(a,e,a7())))}:{success:!0,data:f.value}},ce=cd(b8),cf=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>bV(a,e,a7())))}:{success:!0,data:f.value}},cg=cf(b8),ch=/^[cC][^\s-]{8,}$/,ci=/^[0-9a-z]+$/,cj=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ck=/^[0-9a-vA-V]{20}$/,cl=/^[A-Za-z0-9]{27}$/,cm=/^[a-zA-Z0-9_-]{21}$/,cn=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,co=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,cp=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,cq=cp(4),cr=cp(6),cs=cp(7),ct=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,cu=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u;function cv(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let cw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cx=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,cy=a=>{let b=bD(a??":");return RegExp(`^(?:[0-9A-F]{2}${b}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${b}){5}[0-9a-f]{2}$`)},cz=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cB=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,cC=/^[A-Za-z0-9_-]*$/,cD=/^\+[1-9]\d{6,14}$/,cE="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",cF=RegExp(`^${cE}$`);function cG(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}function cH(a){return RegExp(`^${cG(a)}$`)}function cI(a){let b=cG({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${cE}T(?:${d})$`)}let cJ=a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)},cK=/^-?\d+n?$/,cL=/^-?\d+$/,cM=/^-?\d+(?:\.\d+)?$/,cN=/^(?:true|false)$/i,cO=/^null$/i,cP=/^undefined$/i,cQ=/^[^A-Z]*$/,cR=/^[^a-z]*$/;function cS(a,b){return RegExp(`^[A-Za-z0-9+/]{${a}}${b}$`)}function cT(a){return RegExp(`^[A-Za-z0-9_-]{${a}}$`)}let cU=cS(22,"=="),cV=cT(22),cW=cS(27,"="),cX=cT(27),cY=cS(43,"="),cZ=cT(43),c$=cS(64,""),c_=cT(64),c0=cS(86,"=="),c1=cT(86);a.s(["base64",0,cB,"base64url",0,cC,"bigint",0,cK,"boolean",0,cN,"browserEmail",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"cidrv4",0,cz,"cidrv6",0,cA,"cuid",0,ch,"cuid2",0,ci,"date",0,cF,"datetime",()=>cI,"domain",0,/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,"duration",0,cn,"e164",0,cD,"email",0,ct,"emoji",()=>cv,"extendedDuration",0,/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,"guid",0,co,"hex",0,/^[0-9a-fA-F]*$/,"hostname",0,/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,"html5Email",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"idnEmail",0,cu,"integer",0,cL,"ipv4",0,cw,"ipv6",0,cx,"ksuid",0,cl,"lowercase",0,cQ,"mac",0,cy,"md5_base64",0,cU,"md5_base64url",0,cV,"md5_hex",0,/^[0-9a-fA-F]{32}$/,"nanoid",0,cm,"null",()=>cO,"number",0,cM,"rfc5322Email",0,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"sha1_base64",0,cW,"sha1_base64url",0,cX,"sha1_hex",0,/^[0-9a-fA-F]{40}$/,"sha256_base64",0,cY,"sha256_base64url",0,cZ,"sha256_hex",0,/^[0-9a-fA-F]{64}$/,"sha384_base64",0,c$,"sha384_base64url",0,c_,"sha384_hex",0,/^[0-9a-fA-F]{96}$/,"sha512_base64",0,c0,"sha512_base64url",0,c1,"sha512_hex",0,/^[0-9a-fA-F]{128}$/,"string",0,cJ,"time",()=>cH,"ulid",0,cj,"undefined",()=>cP,"unicodeEmail",0,cu,"uppercase",0,cR,"uuid",0,cp,"uuid4",0,cq,"uuid6",0,cr,"uuid7",0,cs,"xid",0,ck],45976);let c2=a3("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),c3={number:"number",bigint:"bigint",object:"date"},c4=a3("$ZodCheckLessThan",(a,b)=>{c2.init(a,b);let c=c3[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:"object"==typeof b.value?b.value.getTime():b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),c5=a3("$ZodCheckGreaterThan",(a,b)=>{c2.init(a,b);let c=c3[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:"object"==typeof b.value?b.value.getTime():b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),c6=a3("$ZodCheckMultipleOf",(a,b)=>{c2.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===bj(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),c7=a3("$ZodCheckNumberFormat",(a,b)=>{c2.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=bJ[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=cL)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",continue:!1,input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,inclusive:!0,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,inclusive:!0,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inclusive:!0,inst:a,continue:!b.abort})}}),c8=a3("$ZodCheckBigIntFormat",(a,b)=>{c2.init(a,b);let[c,d]=bK[b.format];a._zod.onattach.push(a=>{let e=a._zod.bag;e.format=b.format,e.minimum=c,e.maximum=d}),a._zod.check=e=>{let f=e.value;f<c&&e.issues.push({origin:"bigint",input:f,code:"too_small",minimum:c,inclusive:!0,inst:a,continue:!b.abort}),f>d&&e.issues.push({origin:"bigint",input:f,code:"too_big",maximum:d,inclusive:!0,inst:a,continue:!b.abort})}}),c9=a3("$ZodCheckMaxSize",(a,b)=>{var c;c2.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bh(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;d.size<=b.maximum||c.issues.push({origin:bW(d),code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),da=a3("$ZodCheckMinSize",(a,b)=>{var c;c2.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bh(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;d.size>=b.minimum||c.issues.push({origin:bW(d),code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),db=a3("$ZodCheckSizeEquals",(a,b)=>{var c;c2.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bh(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.size,c.maximum=b.size,c.size=b.size}),a._zod.check=c=>{let d=c.value,e=d.size;if(e===b.size)return;let f=e>b.size;c.issues.push({origin:bW(d),...f?{code:"too_big",maximum:b.size}:{code:"too_small",minimum:b.size},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),dc=a3("$ZodCheckMaxLength",(a,b)=>{var c;c2.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bh(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=bX(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),dd=a3("$ZodCheckMinLength",(a,b)=>{var c;c2.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bh(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=bX(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),de=a3("$ZodCheckLengthEquals",(a,b)=>{var c;c2.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bh(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=bX(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),df=a3("$ZodCheckStringFormat",(a,b)=>{var c,d;c2.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),dg=a3("$ZodCheckRegex",(a,b)=>{df.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),dh=a3("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=cQ),df.init(a,b)}),di=a3("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=cR),df.init(a,b)}),dj=a3("$ZodCheckIncludes",(a,b)=>{c2.init(a,b);let c=bD(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),dk=a3("$ZodCheckStartsWith",(a,b)=>{c2.init(a,b);let c=RegExp(`^${bD(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),dl=a3("$ZodCheckEndsWith",(a,b)=>{c2.init(a,b);let c=RegExp(`.*${bD(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}});(a,b)=>{c2.init(a,b);let c=new Set(b.mime);a._zod.onattach.push(a=>{a._zod.bag.mime=b.mime}),a._zod.check=d=>{c.has(d.value.type)||d.issues.push({code:"invalid_value",values:b.mime,input:d.value.type,inst:a,continue:!b.abort})}};let dm=a3("$ZodCheckOverwrite",(a,b)=>{c2.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});class dn{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}let dp={major:4,minor:3,patch:5},dq=a3("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=dp;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=bS(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new a4;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=bS(a,b)))});else{if(a.issues.length===b)continue;e||(e=bS(a,b))}}return d?d.then(()=>a):a},c=(c,e,f)=>{if(bS(c))return c.aborted=!0,c;let g=b(e,d,f);if(g instanceof Promise){if(!1===f.async)throw new a4;return g.then(b=>a._zod.parse(b,f))}return a._zod.parse(g,f)};a._zod.run=(e,f)=>{if(f.skipChecks)return a._zod.parse(e,f);if("backward"===f.direction){let b=a._zod.parse({value:e.value,issues:[]},{...f,skipChecks:!0});return b instanceof Promise?b.then(a=>c(a,e,f)):c(b,e,f)}let g=a._zod.parse(e,f);if(g instanceof Promise){if(!1===f.async)throw new a4;return g.then(a=>b(a,d,f))}return b(g,d,f)}}bl(a,"~standard",()=>({validate:b=>{try{let c=ce(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return cg(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}))}),dr=a3("$ZodString",(a,b)=>{dq.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??cJ(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),ds=a3("$ZodStringFormat",(a,b)=>{df.init(a,b),dr.init(a,b)}),dt=a3("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=co),ds.init(a,b)}),du=a3("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=cp(a))}else b.pattern??(b.pattern=cp());ds.init(a,b)}),dv=a3("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=ct),ds.init(a,b)}),dw=a3("$ZodURL",(a,b)=>{ds.init(a,b),a._zod.check=c=>{try{let d=c.value.trim(),e=new URL(d);b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:b.hostname.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),b.normalize?c.value=e.href:c.value=d;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),dx=a3("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=cv()),ds.init(a,b)}),dy=a3("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=cm),ds.init(a,b)}),dz=a3("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=ch),ds.init(a,b)}),dA=a3("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=ci),ds.init(a,b)}),dB=a3("$ZodULID",(a,b)=>{b.pattern??(b.pattern=cj),ds.init(a,b)}),dC=a3("$ZodXID",(a,b)=>{b.pattern??(b.pattern=ck),ds.init(a,b)}),dD=a3("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=cl),ds.init(a,b)}),dE=a3("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=cI(b)),ds.init(a,b)}),dF=a3("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=cF),ds.init(a,b)}),dG=a3("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=cH(b)),ds.init(a,b)}),dH=a3("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=cn),ds.init(a,b)}),dI=a3("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=cw),ds.init(a,b),a._zod.bag.format="ipv4"}),dJ=a3("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=cx),ds.init(a,b),a._zod.bag.format="ipv6",a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),dK=a3("$ZodMAC",(a,b)=>{b.pattern??(b.pattern=cy(b.delimiter)),ds.init(a,b),a._zod.bag.format="mac"}),dL=a3("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=cz),ds.init(a,b)}),dM=a3("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=cA),ds.init(a,b),a._zod.check=c=>{let d=c.value.split("/");try{if(2!==d.length)throw Error();let[a,b]=d;if(!b)throw Error();let c=Number(b);if(`${c}`!==b||c<0||c>128)throw Error();new URL(`http://[${a}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function dN(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}let dO=a3("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=cB),ds.init(a,b),a._zod.bag.contentEncoding="base64",a._zod.check=c=>{dN(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}});function dP(a){if(!cC.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return dN(b.padEnd(4*Math.ceil(b.length/4),"="))}let dQ=a3("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=cC),ds.init(a,b),a._zod.bag.contentEncoding="base64url",a._zod.check=c=>{dP(c.value)||c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),dR=a3("$ZodE164",(a,b)=>{b.pattern??(b.pattern=cD),ds.init(a,b)});function dS(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}let dT=a3("$ZodJWT",(a,b)=>{ds.init(a,b),a._zod.check=c=>{dS(c.value,b.alg)||c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),dU=a3("$ZodCustomStringFormat",(a,b)=>{ds.init(a,b),a._zod.check=c=>{b.fn(c.value)||c.issues.push({code:"invalid_format",format:b.format,input:c.value,inst:a,continue:!b.abort})}}),dV=a3("$ZodNumber",(a,b)=>{dq.init(a,b),a._zod.pattern=a._zod.bag.pattern??cM,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),dW=a3("$ZodNumberFormat",(a,b)=>{c7.init(a,b),dV.init(a,b)}),dX=a3("$ZodBoolean",(a,b)=>{dq.init(a,b),a._zod.pattern=cN,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),dY=a3("$ZodBigInt",(a,b)=>{dq.init(a,b),a._zod.pattern=cK,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=BigInt(c.value)}catch(a){}return"bigint"==typeof c.value||c.issues.push({expected:"bigint",code:"invalid_type",input:c.value,inst:a}),c}}),dZ=a3("$ZodBigIntFormat",(a,b)=>{c8.init(a,b),dY.init(a,b)}),d$=a3("$ZodSymbol",(a,b)=>{dq.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return"symbol"==typeof d||b.issues.push({expected:"symbol",code:"invalid_type",input:d,inst:a}),b}}),d_=a3("$ZodUndefined",(a,b)=>{dq.init(a,b),a._zod.pattern=cP,a._zod.values=new Set([void 0]),a._zod.optin="optional",a._zod.optout="optional",a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"undefined",code:"invalid_type",input:d,inst:a}),b}}),d0=a3("$ZodNull",(a,b)=>{dq.init(a,b),a._zod.pattern=cO,a._zod.values=new Set([null]),a._zod.parse=(b,c)=>{let d=b.value;return null===d||b.issues.push({expected:"null",code:"invalid_type",input:d,inst:a}),b}}),d1=a3("$ZodAny",(a,b)=>{dq.init(a,b),a._zod.parse=a=>a}),d2=a3("$ZodUnknown",(a,b)=>{dq.init(a,b),a._zod.parse=a=>a}),d3=a3("$ZodNever",(a,b)=>{dq.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)}),d4=a3("$ZodVoid",(a,b)=>{dq.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"void",code:"invalid_type",input:d,inst:a}),b}}),d5=a3("$ZodDate",(a,b)=>{dq.init(a,b),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=new Date(c.value)}catch(a){}let e=c.value,f=e instanceof Date;return f&&!Number.isNaN(e.getTime())||c.issues.push({expected:"date",code:"invalid_type",input:e,...f?{received:"Invalid Date"}:{},inst:a}),c}});function d6(a,b,c){a.issues.length&&b.issues.push(...bT(c,a.issues)),b.value[c]=a.value}let d7=a3("$ZodArray",(a,b)=>{dq.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>d6(b,c,a))):d6(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function d8(a,b,c,d,e){if(a.issues.length){if(e&&!(c in d))return;b.issues.push(...bT(c,a.issues))}void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}function d9(a){let b=Object.keys(a.shape);for(let c of b)if(!a.shape?.[c]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${c}": expected a Zod schema`);let c=bI(a.shape);return{...a,keys:b,keySet:new Set(b),numKeys:b.length,optionalKeys:new Set(c)}}function ea(a,b,c,d,e,f){let g=[],h=e.keySet,i=e.catchall._zod,j=i.def.type,k="optional"===i.optout;for(let e in b){if(h.has(e))continue;if("never"===j){g.push(e);continue}let f=i.run({value:b[e],issues:[]},d);f instanceof Promise?a.push(f.then(a=>d8(a,c,e,b,k))):d8(f,c,e,b,k)}return(g.length&&c.issues.push({code:"unrecognized_keys",keys:g,input:b,inst:f}),a.length)?Promise.all(a).then(()=>c):c}let eb=a3("$ZodObject",(a,b)=>{let c;dq.init(a,b);let d=Object.getOwnPropertyDescriptor(b,"shape");if(!d?.get){let a=b.shape;Object.defineProperty(b,"shape",{get:()=>{let c={...a};return Object.defineProperty(b,"shape",{value:c}),c}})}let e=bg(()=>d9(b));bl(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=b.catchall;a._zod.parse=(b,d)=>{c??(c=e.value);let g=b.value;if(!bw(g))return b.issues.push({expected:"object",code:"invalid_type",input:g,inst:a}),b;b.value={};let h=[],i=c.shape;for(let a of c.keys){let c=i[a],e="optional"===c._zod.optout,f=c._zod.run({value:g[a],issues:[]},d);f instanceof Promise?h.push(f.then(c=>d8(c,b,a,g,e))):d8(f,b,a,g,e)}return f?ea(h,g,b,d,e.value,a):h.length?Promise.all(h).then(()=>b):b}}),ec=a3("$ZodObjectJIT",(a,b)=>{let c,d;eb.init(a,b);let e=a._zod.parse,f=bg(()=>d9(b)),g=!a6.jitless,h=g&&bx.value,i=b.catchall;a._zod.parse=(j,k)=>{d??(d=f.value);let l=j.value;return bw(l)?g&&h&&k?.async===!1&&!0!==k.jitless?(c||(c=(a=>{let b=new dn(["shape","payload","ctx"]),c=f.value,d=a=>{let b=bt(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let e=Object.create(null),g=0;for(let a of c.keys)e[a]=`key_${g++}`;for(let f of(b.write("const newResult = {};"),c.keys)){let c=e[f],g=bt(f),h=a[f],i=h?._zod?.optout==="optional";b.write(`const ${c} = ${d(f)};`),i?b.write(`
        if (${c}.issues.length) {
          if (${g} in input) {
            payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${g}, ...iss.path] : [${g}]
            })));
          }
        }
        
        if (${c}.value === undefined) {
          if (${g} in input) {
            newResult[${g}] = undefined;
          }
        } else {
          newResult[${g}] = ${c}.value;
        }
        
      `):b.write(`
        if (${c}.issues.length) {
          payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${g}, ...iss.path] : [${g}]
          })));
        }
        
        if (${c}.value === undefined) {
          if (${g} in input) {
            newResult[${g}] = undefined;
          }
        } else {
          newResult[${g}] = ${c}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),j=c(j,k),i)?ea([],l,j,k,d,a):j:e(j,k):(j.issues.push({expected:"object",code:"invalid_type",input:l,inst:a}),j)}});function ed(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;let e=a.filter(a=>!bS(a));return 1===e.length?(b.value=e[0].value,e[0]):(b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>bV(a,d,a7())))}),b)}let ee=a3("$ZodUnion",(a,b)=>{dq.init(a,b),bl(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),bl(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),bl(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),bl(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>bi(a.source)).join("|")})$`)}});let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);if(b instanceof Promise)h.push(b),g=!0;else{if(0===b.issues.length)return b;h.push(b)}}return g?Promise.all(h).then(b=>ed(b,e,a,f)):ed(h,e,a,f)}});function ef(a,b,c,d){let e=a.filter(a=>0===a.issues.length);return 1===e.length?b.value=e[0].value:0===e.length?b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>bV(a,d,a7())))}):b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:[],inclusive:!1}),b}let eg=a3("$ZodXor",(a,b)=>{ee.init(a,b),b.inclusive=!1;let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);b instanceof Promise?(h.push(b),g=!0):h.push(b)}return g?Promise.all(h).then(b=>ef(b,e,a,f)):ef(h,e,a,f)}}),eh=a3("$ZodDiscriminatedUnion",(a,b)=>{b.inclusive=!1,ee.init(a,b);let c=a._zod.parse;bl(a._zod,"propValues",()=>{let a={};for(let c of b.options){let d=c._zod.propValues;if(!d||0===Object.keys(d).length)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(c)}"`);for(let[b,c]of Object.entries(d))for(let d of(a[b]||(a[b]=new Set),c))a[b].add(d)}return a});let d=bg(()=>{let a=b.options,c=new Map;for(let d of a){let a=d._zod.propValues?.[b.discriminator];if(!a||0===a.size)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(d)}"`);for(let b of a){if(c.has(b))throw Error(`Duplicate discriminator value "${String(b)}"`);c.set(b,d)}}return c});a._zod.parse=(e,f)=>{let g=e.value;if(!bw(g))return e.issues.push({code:"invalid_type",expected:"object",input:g,inst:a}),e;let h=d.value.get(g?.[b.discriminator]);return h?h._zod.run(e,f):b.unionFallback?c(e,f):(e.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:b.discriminator,input:g,path:[b.discriminator],inst:a}),e)}}),ei=a3("$ZodIntersection",(a,b)=>{dq.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>ej(a,b,c)):ej(a,e,f)}});function ej(a,b,c){let d,e=new Map;for(let c of b.issues)if("unrecognized_keys"===c.code)for(let a of(d??(d=c),c.keys))e.has(a)||e.set(a,{}),e.get(a).l=!0;else a.issues.push(c);for(let b of c.issues)if("unrecognized_keys"===b.code)for(let a of b.keys)e.has(a)||e.set(a,{}),e.get(a).r=!0;else a.issues.push(b);let f=[...e].filter(([,a])=>a.l&&a.r).map(([a])=>a);if(f.length&&d&&a.issues.push({...d,keys:f}),bS(a))return a;let g=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(by(b)&&by(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!g.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(g.mergeErrorPath)}`);return a.value=g.data,a}let ek=a3("$ZodTuple",(a,b)=>{dq.init(a,b);let c=b.items;a._zod.parse=(d,e)=>{let f=d.value;if(!Array.isArray(f))return d.issues.push({input:f,inst:a,expected:"tuple",code:"invalid_type"}),d;d.value=[];let g=[],h=[...c].reverse().findIndex(a=>"optional"!==a._zod.optin),i=-1===h?0:c.length-h;if(!b.rest){let b=f.length>c.length,e=f.length<i-1;if(b||e)return d.issues.push({...b?{code:"too_big",maximum:c.length,inclusive:!0}:{code:"too_small",minimum:c.length},input:f,inst:a,origin:"array"}),d}let j=-1;for(let a of c){if(++j>=f.length&&j>=i)continue;let b=a._zod.run({value:f[j],issues:[]},e);b instanceof Promise?g.push(b.then(a=>el(a,d,j))):el(b,d,j)}if(b.rest)for(let a of f.slice(c.length)){j++;let c=b.rest._zod.run({value:a,issues:[]},e);c instanceof Promise?g.push(c.then(a=>el(a,d,j))):el(c,d,j)}return g.length?Promise.all(g).then(()=>d):d}});function el(a,b,c){a.issues.length&&b.issues.push(...bT(c,a.issues)),b.value[c]=a.value}let em=a3("$ZodRecord",(a,b)=>{dq.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!by(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[],g=b.keyType._zod.values;if(g){let h;c.value={};let i=new Set;for(let a of g)if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){i.add("number"==typeof a?a.toString():a);let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...bT(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...bT(a,g.issues)),c.value[a]=g.value)}for(let a in e)i.has(a)||(h=h??[]).push(a);h&&h.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:h})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let h=b.keyType._zod.run({value:g,issues:[]},d);if(h instanceof Promise)throw Error("Async schemas not supported in object keys currently");if("string"==typeof g&&cM.test(g)&&h.issues.length&&h.issues.some(a=>"invalid_type"===a.code&&"number"===a.expected)){let a=b.keyType._zod.run({value:Number(g),issues:[]},d);if(a instanceof Promise)throw Error("Async schemas not supported in object keys currently");0===a.issues.length&&(h=a)}if(h.issues.length){"loose"===b.mode?c.value[g]=e[g]:c.issues.push({code:"invalid_key",origin:"record",issues:h.issues.map(a=>bV(a,d,a7())),input:g,path:[g],inst:a});continue}let i=b.valueType._zod.run({value:e[g],issues:[]},d);i instanceof Promise?f.push(i.then(a=>{a.issues.length&&c.issues.push(...bT(g,a.issues)),c.value[h.value]=a.value})):(i.issues.length&&c.issues.push(...bT(g,i.issues)),c.value[h.value]=i.value)}return f.length?Promise.all(f).then(()=>c):c}}),en=a3("$ZodMap",(a,b)=>{dq.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Map))return c.issues.push({expected:"map",code:"invalid_type",input:e,inst:a}),c;let f=[];for(let[g,h]of(c.value=new Map,e)){let i=b.keyType._zod.run({value:g,issues:[]},d),j=b.valueType._zod.run({value:h,issues:[]},d);i instanceof Promise||j instanceof Promise?f.push(Promise.all([i,j]).then(([b,f])=>{eo(b,f,c,g,e,a,d)})):eo(i,j,c,g,e,a,d)}return f.length?Promise.all(f).then(()=>c):c}});function eo(a,b,c,d,e,f,g){a.issues.length&&(bB.has(typeof d)?c.issues.push(...bT(d,a.issues)):c.issues.push({code:"invalid_key",origin:"map",input:e,inst:f,issues:a.issues.map(a=>bV(a,g,a7()))})),b.issues.length&&(bB.has(typeof d)?c.issues.push(...bT(d,b.issues)):c.issues.push({origin:"map",code:"invalid_element",input:e,inst:f,key:d,issues:b.issues.map(a=>bV(a,g,a7()))})),c.value.set(a.value,b.value)}let ep=a3("$ZodSet",(a,b)=>{dq.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Set))return c.issues.push({input:e,inst:a,expected:"set",code:"invalid_type"}),c;let f=[];for(let a of(c.value=new Set,e)){let e=b.valueType._zod.run({value:a,issues:[]},d);e instanceof Promise?f.push(e.then(a=>eq(a,c))):eq(e,c)}return f.length?Promise.all(f).then(()=>c):c}});function eq(a,b){a.issues.length&&b.issues.push(...a.issues),b.value.add(a.value)}let er=a3("$ZodEnum",(a,b)=>{dq.init(a,b);let c=bd(b.entries),d=new Set(c);a._zod.values=d,a._zod.pattern=RegExp(`^(${c.filter(a=>bB.has(typeof a)).map(a=>"string"==typeof a?bD(a):a.toString()).join("|")})$`),a._zod.parse=(b,e)=>{let f=b.value;return d.has(f)||b.issues.push({code:"invalid_value",values:c,input:f,inst:a}),b}}),es=a3("$ZodLiteral",(a,b)=>{if(dq.init(a,b),0===b.values.length)throw Error("Cannot create literal schema with no valid values");let c=new Set(b.values);a._zod.values=c,a._zod.pattern=RegExp(`^(${b.values.map(a=>"string"==typeof a?bD(a):a?bD(a.toString()):String(a)).join("|")})$`),a._zod.parse=(d,e)=>{let f=d.value;return c.has(f)||d.issues.push({code:"invalid_value",values:b.values,input:f,inst:a}),d}}),et=a3("$ZodFile",(a,b)=>{dq.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return d instanceof File||b.issues.push({expected:"file",code:"invalid_type",input:d,inst:a}),b}}),eu=a3("$ZodTransform",(a,b)=>{dq.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new a5(a.constructor.name);let e=b.transform(c.value,c);if(d.async)return(e instanceof Promise?e:Promise.resolve(e)).then(a=>(c.value=a,c));if(e instanceof Promise)throw new a4;return c.value=e,c}});function ev(a,b){return a.issues.length&&void 0===b?{issues:[],value:void 0}:a}let ew=a3("$ZodOptional",(a,b)=>{dq.init(a,b),a._zod.optin="optional",a._zod.optout="optional",bl(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),bl(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${bi(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>{if("optional"===b.innerType._zod.optin){let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>ev(b,a.value)):ev(d,a.value)}return void 0===a.value?a:b.innerType._zod.run(a,c)}}),ex=a3("$ZodExactOptional",(a,b)=>{ew.init(a,b),bl(a._zod,"values",()=>b.innerType._zod.values),bl(a._zod,"pattern",()=>b.innerType._zod.pattern),a._zod.parse=(a,c)=>b.innerType._zod.run(a,c)}),ey=a3("$ZodNullable",(a,b)=>{dq.init(a,b),bl(a._zod,"optin",()=>b.innerType._zod.optin),bl(a._zod,"optout",()=>b.innerType._zod.optout),bl(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${bi(a.source)}|null)$`):void 0}),bl(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),ez=a3("$ZodDefault",(a,b)=>{dq.init(a,b),a._zod.optin="optional",bl(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>eA(a,b)):eA(d,b)}});function eA(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let eB=a3("$ZodPrefault",(a,b)=>{dq.init(a,b),a._zod.optin="optional",bl(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>("backward"===c.direction||void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),eC=a3("$ZodNonOptional",(a,b)=>{dq.init(a,b),bl(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>eD(b,a)):eD(e,a)}});function eD(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}let eE=a3("$ZodSuccess",(a,b)=>{dq.init(a,b),a._zod.parse=(a,c)=>{if("backward"===c.direction)throw new a5("ZodSuccess");let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>(a.value=0===b.issues.length,a)):(a.value=0===d.issues.length,a)}}),eF=a3("$ZodCatch",(a,b)=>{dq.init(a,b),bl(a._zod,"optin",()=>b.innerType._zod.optin),bl(a._zod,"optout",()=>b.innerType._zod.optout),bl(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>bV(a,c,a7()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>bV(a,c,a7()))},input:a.value}),a.issues=[]),a)}}),eG=a3("$ZodNaN",(a,b)=>{dq.init(a,b),a._zod.parse=(b,c)=>("number"==typeof b.value&&Number.isNaN(b.value)||b.issues.push({input:b.value,inst:a,expected:"nan",code:"invalid_type"}),b)}),eH=a3("$ZodPipe",(a,b)=>{dq.init(a,b),bl(a._zod,"values",()=>b.in._zod.values),bl(a._zod,"optin",()=>b.in._zod.optin),bl(a._zod,"optout",()=>b.out._zod.optout),bl(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("backward"===c.direction){let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>eI(a,b.in,c)):eI(d,b.in,c)}let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>eI(a,b.out,c)):eI(d,b.out,c)}});function eI(a,b,c){return a.issues.length?(a.aborted=!0,a):b._zod.run({value:a.value,issues:a.issues},c)}let eJ=a3("$ZodCodec",(a,b)=>{dq.init(a,b),bl(a._zod,"values",()=>b.in._zod.values),bl(a._zod,"optin",()=>b.in._zod.optin),bl(a._zod,"optout",()=>b.out._zod.optout),bl(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("forward"===(c.direction||"forward")){let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>eK(a,b,c)):eK(d,b,c)}{let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>eK(a,b,c)):eK(d,b,c)}}});function eK(a,b,c){if(a.issues.length)return a.aborted=!0,a;if("forward"===(c.direction||"forward")){let d=b.transform(a.value,a);return d instanceof Promise?d.then(d=>eL(a,d,b.out,c)):eL(a,d,b.out,c)}{let d=b.reverseTransform(a.value,a);return d instanceof Promise?d.then(d=>eL(a,d,b.in,c)):eL(a,d,b.in,c)}}function eL(a,b,c,d){return a.issues.length?(a.aborted=!0,a):c._zod.run({value:b,issues:a.issues},d)}let eM=a3("$ZodReadonly",(a,b)=>{dq.init(a,b),bl(a._zod,"propValues",()=>b.innerType._zod.propValues),bl(a._zod,"values",()=>b.innerType._zod.values),bl(a._zod,"optin",()=>b.innerType?._zod?.optin),bl(a._zod,"optout",()=>b.innerType?._zod?.optout),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(eN):eN(d)}});function eN(a){return a.value=Object.freeze(a.value),a}let eO=a3("$ZodTemplateLiteral",(a,b)=>{dq.init(a,b);let c=[];for(let a of b.parts)if("object"==typeof a&&null!==a){if(!a._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...a._zod.traits].shift()}`);let b=a._zod.pattern instanceof RegExp?a._zod.pattern.source:a._zod.pattern;if(!b)throw Error(`Invalid template literal part: ${a._zod.traits}`);let d=+!!b.startsWith("^"),e=b.endsWith("$")?b.length-1:b.length;c.push(b.slice(d,e))}else if(null===a||bC.has(typeof a))c.push(bD(`${a}`));else throw Error(`Invalid template literal part: ${a}`);a._zod.pattern=RegExp(`^${c.join("")}$`),a._zod.parse=(c,d)=>("string"!=typeof c.value?c.issues.push({input:c.value,inst:a,expected:"string",code:"invalid_type"}):(a._zod.pattern.lastIndex=0,a._zod.pattern.test(c.value)||c.issues.push({input:c.value,inst:a,code:"invalid_format",format:b.format??"template_literal",pattern:a._zod.pattern.source})),c)}),eP=a3("$ZodFunction",(a,b)=>(dq.init(a,b),a._def=b,a._zod.def=b,a.implement=b=>{if("function"!=typeof b)throw Error("implement() must be called with a function");return function(...c){let d=Reflect.apply(b,this,a._def.input?ca(a._def.input,c):c);return a._def.output?ca(a._def.output,d):d}},a.implementAsync=b=>{if("function"!=typeof b)throw Error("implementAsync() must be called with a function");return async function(...c){let d=a._def.input?await cc(a._def.input,c):c,e=await Reflect.apply(b,this,d);return a._def.output?await cc(a._def.output,e):e}},a._zod.parse=(b,c)=>("function"!=typeof b.value?b.issues.push({code:"invalid_type",expected:"function",input:b.value,inst:a}):a._def.output&&"promise"===a._def.output._zod.def.type?b.value=a.implementAsync(b.value):b.value=a.implement(b.value),b),a.input=(...b)=>{let c=a.constructor;return new c(Array.isArray(b[0])?{type:"function",input:new ek({type:"tuple",items:b[0],rest:b[1]}),output:a._def.output}:{type:"function",input:b[0],output:a._def.output})},a.output=b=>new a.constructor({type:"function",input:a._def.input,output:b}),a)),eQ=a3("$ZodPromise",(a,b)=>{dq.init(a,b),a._zod.parse=(a,c)=>Promise.resolve(a.value).then(a=>b.innerType._zod.run({value:a,issues:[]},c))}),eR=a3("$ZodLazy",(a,b)=>{dq.init(a,b),bl(a._zod,"innerType",()=>b.getter()),bl(a._zod,"pattern",()=>a._zod.innerType?._zod?.pattern),bl(a._zod,"propValues",()=>a._zod.innerType?._zod?.propValues),bl(a._zod,"optin",()=>a._zod.innerType?._zod?.optin??void 0),bl(a._zod,"optout",()=>a._zod.innerType?._zod?.optout??void 0),a._zod.parse=(b,c)=>a._zod.innerType._zod.run(b,c)}),eS=a3("$ZodCustom",(a,b)=>{c2.init(a,b),dq.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>eT(b,c,d,a));eT(e,c,d,a)}});function eT(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(bZ(a))}}a.s(["$ZodAny",0,d1,"$ZodArray",0,d7,"$ZodBase64",0,dO,"$ZodBase64URL",0,dQ,"$ZodBigInt",0,dY,"$ZodBigIntFormat",0,dZ,"$ZodBoolean",0,dX,"$ZodCIDRv4",0,dL,"$ZodCIDRv6",0,dM,"$ZodCUID",0,dz,"$ZodCUID2",0,dA,"$ZodCatch",0,eF,"$ZodCodec",0,eJ,"$ZodCustom",0,eS,"$ZodCustomStringFormat",0,dU,"$ZodDate",0,d5,"$ZodDefault",0,ez,"$ZodDiscriminatedUnion",0,eh,"$ZodE164",0,dR,"$ZodEmail",0,dv,"$ZodEmoji",0,dx,"$ZodEnum",0,er,"$ZodExactOptional",0,ex,"$ZodFile",0,et,"$ZodFunction",0,eP,"$ZodGUID",0,dt,"$ZodIPv4",0,dI,"$ZodIPv6",0,dJ,"$ZodISODate",0,dF,"$ZodISODateTime",0,dE,"$ZodISODuration",0,dH,"$ZodISOTime",0,dG,"$ZodIntersection",0,ei,"$ZodJWT",0,dT,"$ZodKSUID",0,dD,"$ZodLazy",0,eR,"$ZodLiteral",0,es,"$ZodMAC",0,dK,"$ZodMap",0,en,"$ZodNaN",0,eG,"$ZodNanoID",0,dy,"$ZodNever",0,d3,"$ZodNonOptional",0,eC,"$ZodNull",0,d0,"$ZodNullable",0,ey,"$ZodNumber",0,dV,"$ZodNumberFormat",0,dW,"$ZodObject",0,eb,"$ZodObjectJIT",0,ec,"$ZodOptional",0,ew,"$ZodPipe",0,eH,"$ZodPrefault",0,eB,"$ZodPromise",0,eQ,"$ZodReadonly",0,eM,"$ZodRecord",0,em,"$ZodSet",0,ep,"$ZodString",0,dr,"$ZodStringFormat",0,ds,"$ZodSuccess",0,eE,"$ZodSymbol",0,d$,"$ZodTemplateLiteral",0,eO,"$ZodTransform",0,eu,"$ZodTuple",0,ek,"$ZodType",0,dq,"$ZodULID",0,dB,"$ZodURL",0,dw,"$ZodUUID",0,du,"$ZodUndefined",0,d_,"$ZodUnion",0,ee,"$ZodUnknown",0,d2,"$ZodVoid",0,d4,"$ZodXID",0,dC,"$ZodXor",0,eg,"isValidBase64",()=>dN,"isValidBase64URL",()=>dP,"isValidJWT",()=>dS],26766),Symbol("ZodOutput"),Symbol("ZodInput");(z=globalThis).__zod_globalRegistry??(z.__zod_globalRegistry=new class a{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...b){let c=b[0];return this._map.set(a,c),c&&"object"==typeof c&&"id"in c&&this._idmap.set(c.id,a),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};delete c.id;let d={...c,...this._map.get(a)};return Object.keys(d).length?d:void 0}return this._map.get(a)}has(a){return this._map.has(a)}});let eU=globalThis.__zod_globalRegistry;function eV(a,b){return new c4({check:"less_than",...bF(b),value:a,inclusive:!1})}function eW(a,b){return new c4({check:"less_than",...bF(b),value:a,inclusive:!0})}function eX(a,b){return new c5({check:"greater_than",...bF(b),value:a,inclusive:!1})}function eY(a,b){return new c5({check:"greater_than",...bF(b),value:a,inclusive:!0})}function eZ(a,b){return new c6({check:"multiple_of",...bF(b),value:a})}function e$(a,b){return new dc({check:"max_length",...bF(b),maximum:a})}function e_(a,b){return new dd({check:"min_length",...bF(b),minimum:a})}function e0(a,b){return new de({check:"length_equals",...bF(b),length:a})}function e1(a){return new dm({check:"overwrite",tx:a})}function e2(a){let b=a?.target??"draft-2020-12";return"draft-4"===b&&(b="draft-04"),"draft-7"===b&&(b="draft-07"),{processors:a.processors??{},metadataRegistry:a?.metadata??eU,target:b,unrepresentable:a?.unrepresentable??"throw",override:a?.override??(()=>{}),io:a?.io??"output",counter:0,seen:new Map,cycles:a?.cycles??"ref",reused:a?.reused??"inline",external:a?.external??void 0}}function e3(a,b,c={path:[],schemaPath:[]}){var d;let e=a._zod.def,f=b.seen.get(a);if(f)return f.count++,c.schemaPath.includes(a)&&(f.cycle=c.path),f.schema;let g={schema:{},count:1,cycle:void 0,path:c.path};b.seen.set(a,g);let h=a._zod.toJSONSchema?.();if(h)g.schema=h;else{let d={...c,schemaPath:[...c.schemaPath,a],path:c.path};if(a._zod.processJSONSchema)a._zod.processJSONSchema(b,g.schema,d);else{let c=g.schema,f=b.processors[e.type];if(!f)throw Error(`[toJSONSchema]: Non-representable type encountered: ${e.type}`);f(a,b,c,d)}let f=a._zod.parent;f&&(g.ref||(g.ref=f),e3(f,b,d),b.seen.get(f).isParent=!0)}let i=b.metadataRegistry.get(a);return i&&Object.assign(g.schema,i),"input"===b.io&&function a(b,c){let d=c??{seen:new Set};if(d.seen.has(b))return!1;d.seen.add(b);let e=b._zod.def;if("transform"===e.type)return!0;if("array"===e.type)return a(e.element,d);if("set"===e.type)return a(e.valueType,d);if("lazy"===e.type)return a(e.getter(),d);if("promise"===e.type||"optional"===e.type||"nonoptional"===e.type||"nullable"===e.type||"readonly"===e.type||"default"===e.type||"prefault"===e.type)return a(e.innerType,d);if("intersection"===e.type)return a(e.left,d)||a(e.right,d);if("record"===e.type||"map"===e.type)return a(e.keyType,d)||a(e.valueType,d);if("pipe"===e.type)return a(e.in,d)||a(e.out,d);if("object"===e.type){for(let b in e.shape)if(a(e.shape[b],d))return!0;return!1}if("union"===e.type){for(let b of e.options)if(a(b,d))return!0;return!1}if("tuple"===e.type){for(let b of e.items)if(a(b,d))return!0;if(e.rest&&a(e.rest,d))return!0}return!1}(a)&&(delete g.schema.examples,delete g.schema.default),"input"===b.io&&g.schema._prefault&&((d=g.schema).default??(d.default=g.schema._prefault)),delete g.schema._prefault,b.seen.get(a).schema}function e4(a,b){let c=a.seen.get(b);if(!c)throw Error("Unprocessed schema. This is a bug in Zod.");let d=new Map;for(let b of a.seen.entries()){let c=a.metadataRegistry.get(b[0])?.id;if(c){let a=d.get(c);if(a&&a!==b[0])throw Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);d.set(c,b[0])}}let e=b=>{if(b[1].schema.$ref)return;let d=b[1],{ref:e,defId:f}=(b=>{let d="draft-2020-12"===a.target?"$defs":"definitions";if(a.external){let c=a.external.registry.get(b[0])?.id,e=a.external.uri??(a=>a);if(c)return{ref:e(c)};let f=b[1].defId??b[1].schema.id??`schema${a.counter++}`;return b[1].defId=f,{defId:f,ref:`${e("__shared")}#/${d}/${f}`}}if(b[1]===c)return{ref:"#"};let e=`#/${d}/`,f=b[1].schema.id??`__schema${a.counter++}`;return{defId:f,ref:e+f}})(b);d.def={...d.schema},f&&(d.defId=f);let g=d.schema;for(let a in g)delete g[a];g.$ref=e};if("throw"===a.cycles)for(let b of a.seen.entries()){let a=b[1];if(a.cycle)throw Error(`Cycle detected: #/${a.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let c of a.seen.entries()){let d=c[1];if(b===c[0]){e(c);continue}if(a.external){let d=a.external.registry.get(c[0])?.id;if(b!==c[0]&&d){e(c);continue}}if(a.metadataRegistry.get(c[0])?.id||d.cycle||d.count>1&&"ref"===a.reused){e(c);continue}}}function e5(a,b){let c=a.seen.get(b);if(!c)throw Error("Unprocessed schema. This is a bug in Zod.");let d=b=>{let c=a.seen.get(b);if(null===c.ref)return;let e=c.def??c.schema,f={...e},g=c.ref;if(c.ref=null,g){d(g);let c=a.seen.get(g),h=c.schema;if(h.$ref&&("draft-07"===a.target||"draft-04"===a.target||"openapi-3.0"===a.target)?(e.allOf=e.allOf??[],e.allOf.push(h)):Object.assign(e,h),Object.assign(e,f),b._zod.parent===g)for(let a in e)"$ref"!==a&&"allOf"!==a&&(a in f||delete e[a]);if(h.$ref)for(let a in e)"$ref"!==a&&"allOf"!==a&&a in c.def&&JSON.stringify(e[a])===JSON.stringify(c.def[a])&&delete e[a]}let h=b._zod.parent;if(h&&h!==g){d(h);let b=a.seen.get(h);if(b?.schema.$ref&&(e.$ref=b.schema.$ref,b.def))for(let a in e)"$ref"!==a&&"allOf"!==a&&a in b.def&&JSON.stringify(e[a])===JSON.stringify(b.def[a])&&delete e[a]}a.override({zodSchema:b,jsonSchema:e,path:c.path??[]})};for(let b of[...a.seen.entries()].reverse())d(b[0]);let e={};if("draft-2020-12"===a.target?e.$schema="https://json-schema.org/draft/2020-12/schema":"draft-07"===a.target?e.$schema="http://json-schema.org/draft-07/schema#":"draft-04"===a.target?e.$schema="http://json-schema.org/draft-04/schema#":a.target,a.external?.uri){let c=a.external.registry.get(b)?.id;if(!c)throw Error("Schema is missing an `id` property");e.$id=a.external.uri(c)}Object.assign(e,c.def??c.schema);let f=a.external?.defs??{};for(let b of a.seen.entries()){let a=b[1];a.def&&a.defId&&(f[a.defId]=a.def)}a.external||Object.keys(f).length>0&&("draft-2020-12"===a.target?e.$defs=f:e.definitions=f);try{let c=JSON.parse(JSON.stringify(e));return Object.defineProperty(c,"~standard",{value:{...b["~standard"],jsonSchema:{input:e6(b,"input",a.processors),output:e6(b,"output",a.processors)}},enumerable:!1,writable:!1}),c}catch(a){throw Error("Error converting schema to JSON.")}}let e6=(a,b,c={})=>d=>{let{libraryOptions:e,target:f}=d??{},g=e2({...e??{},target:f,io:b,processors:c});return e3(a,g),e4(g,a),e5(g,a)},e7={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},e8=(a,b,c,d)=>{let e=a._zod.def;e3(e.innerType,b,d),b.seen.get(a).ref=e.innerType};a.i(26766),a.i(45976);var e9=a.i(66446),e9=e9;(a,b)=>{dE.init(a,b),fp.init(a,b)},(a,b)=>{dH.init(a,b),fp.init(a,b)};let fa=a3("ZodError",(a,b)=>{b7.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>(function(a,b=a=>a.message){let c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code&&e.errors.length)e.errors.map(a=>d({issues:a}));else if("invalid_key"===e.code)d({issues:e.issues});else if("invalid_element"===e.code)d({issues:e.issues});else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(a),c})(a,b)},flatten:{value:b=>(function(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}})(a,b)},addIssue:{value:b=>{a.issues.push(b),a.message=JSON.stringify(a.issues,bf,2)}},addIssues:{value:b=>{a.issues.push(...b),a.message=JSON.stringify(a.issues,bf,2)}},isEmpty:{get:()=>0===a.issues.length}})},{Parent:Error}),fb=b9(fa),fc=cb(fa),fd=cd(fa),fe=cf(fa),ff=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return b9(fa)(a,b,d)},fg=(a,b,c)=>b9(fa)(a,b,c),fh=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return cb(fa)(a,b,d)},fi=async(a,b,c)=>cb(fa)(a,b,c),fj=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return cd(fa)(a,b,d)},fk=(a,b,c)=>cd(fa)(a,b,c),fl=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return cf(fa)(a,b,d)},fm=async(a,b,c)=>cf(fa)(a,b,c),fn=a3("ZodType",(a,b)=>(dq.init(a,b),Object.assign(a["~standard"],{jsonSchema:{input:e6(a,"input"),output:e6(a,"output")}}),a.toJSONSchema=((a,b={})=>c=>{let d=e2({...c,processors:b});return e3(a,d),e4(d,a),e5(d,a)})(a,{}),a.def=b,a.type=b.type,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone(e9.mergeDefs(b,{checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),{parent:!0}),a.with=a.check,a.clone=(b,c)=>bE(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>fb(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>fd(a,b,c),a.parseAsync=async(b,c)=>fc(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>fe(a,b,c),a.spa=a.safeParseAsync,a.encode=(b,c)=>ff(a,b,c),a.decode=(b,c)=>fg(a,b,c),a.encodeAsync=async(b,c)=>fh(a,b,c),a.decodeAsync=async(b,c)=>fi(a,b,c),a.safeEncode=(b,c)=>fj(a,b,c),a.safeDecode=(b,c)=>fk(a,b,c),a.safeEncodeAsync=async(b,c)=>fl(a,b,c),a.safeDecodeAsync=async(b,c)=>fm(a,b,c),a.refine=(b,c)=>a.check(function(a,b={}){return new fK({type:"custom",check:"custom",fn:a,...bF(b)})}(b,c)),a.superRefine=b=>a.check(function(a){var b;let c,d;return b=b=>(b.addIssue=a=>{"string"==typeof a?b.issues.push(bZ(a,b.value,c._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=b.value),a.inst??(a.inst=c),a.continue??(a.continue=!c._zod.def.abort),b.issues.push(bZ(a)))},a(b.value,b)),(d=new c2({check:"custom",...bF(void 0)}))._zod.check=b,c=d}(b)),a.overwrite=b=>a.check(e1(b)),a.optional=()=>fz(a),a.exactOptional=()=>new fA({type:"optional",innerType:a}),a.nullable=()=>fC(a),a.nullish=()=>fz(fC(a)),a.nonoptional=b=>{var c,d;return c=a,d=b,new fF({type:"nonoptional",innerType:c,...e9.normalizeParams(d)})},a.array=()=>(function(a,b){return new ft({type:"array",element:a,...bF(void 0)})})(a),a.or=b=>new fu({type:"union",options:[a,b],...e9.normalizeParams(void 0)}),a.and=b=>new fv({type:"intersection",left:a,right:b}),a.transform=b=>fI(a,new fx({type:"transform",transform:b})),a.default=b=>{var c,d;return c=a,d=b,new fD({type:"default",innerType:c,get defaultValue(){return"function"==typeof d?d():e9.shallowClone(d)}})},a.prefault=b=>{var c,d;return c=a,d=b,new fE({type:"prefault",innerType:c,get defaultValue(){return"function"==typeof d?d():e9.shallowClone(d)}})},a.catch=b=>{var c;return new fG({type:"catch",innerType:a,catchValue:"function"==typeof(c=b)?c:()=>c})},a.pipe=b=>fI(a,b),a.readonly=()=>new fJ({type:"readonly",innerType:a}),a.describe=b=>{let c=a.clone();return eU.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>eU.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return eU.get(a);let c=a.clone();return eU.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a.apply=b=>b(a),a)),fo=a3("_ZodString",(a,b)=>{dr.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{c.type="string";let{minimum:e,maximum:f,format:g,patterns:h,contentEncoding:i}=a._zod.bag;if("number"==typeof e&&(c.minLength=e),"number"==typeof f&&(c.maxLength=f),g&&(c.format=e7[g]??g,""===c.format&&delete c.format,"time"===g&&delete c.format),i&&(c.contentEncoding=i),h&&h.size>0){let a=[...h];1===a.length?c.pattern=a[0].source:a.length>1&&(c.allOf=[...a.map(a=>({..."draft-07"===b.target||"draft-04"===b.target||"openapi-3.0"===b.target?{type:"string"}:{},pattern:a.source}))])}})(a,b,c,0);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(function(a,b){return new dg({check:"string_format",format:"regex",...bF(b),pattern:a})}(...b)),a.includes=(...b)=>a.check(function(a,b){return new dj({check:"string_format",format:"includes",...bF(b),includes:a})}(...b)),a.startsWith=(...b)=>a.check(function(a,b){return new dk({check:"string_format",format:"starts_with",...bF(b),prefix:a})}(...b)),a.endsWith=(...b)=>a.check(function(a,b){return new dl({check:"string_format",format:"ends_with",...bF(b),suffix:a})}(...b)),a.min=(...b)=>a.check(e_(...b)),a.max=(...b)=>a.check(e$(...b)),a.length=(...b)=>a.check(e0(...b)),a.nonempty=(...b)=>a.check(e_(1,...b)),a.lowercase=b=>a.check(new dh({check:"string_format",format:"lowercase",...bF(b)})),a.uppercase=b=>a.check(new di({check:"string_format",format:"uppercase",...bF(b)})),a.trim=()=>a.check(e1(a=>a.trim())),a.normalize=(...b)=>a.check(function(a){return e1(b=>b.normalize(a))}(...b)),a.toLowerCase=()=>a.check(e1(a=>a.toLowerCase())),a.toUpperCase=()=>a.check(e1(a=>a.toUpperCase())),a.slugify=()=>a.check(e1(a=>bu(a)))}),fp=a3("ZodStringFormat",(a,b)=>{ds.init(a,b),fo.init(a,b)}),fq=((a,b)=>{dv.init(a,b),fp.init(a,b)},a3("ZodNumber",(a,b)=>{dV.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let{minimum:e,maximum:f,format:g,multipleOf:h,exclusiveMaximum:i,exclusiveMinimum:j}=a._zod.bag;"string"==typeof g&&g.includes("int")?c.type="integer":c.type="number","number"==typeof j&&("draft-04"===b.target||"openapi-3.0"===b.target?(c.minimum=j,c.exclusiveMinimum=!0):c.exclusiveMinimum=j),"number"==typeof e&&(c.minimum=e,"number"==typeof j&&"draft-04"!==b.target&&(j>=e?delete c.minimum:delete c.exclusiveMinimum)),"number"==typeof i&&("draft-04"===b.target||"openapi-3.0"===b.target?(c.maximum=i,c.exclusiveMaximum=!0):c.exclusiveMaximum=i),"number"==typeof f&&(c.maximum=f,"number"==typeof i&&"draft-04"!==b.target&&(i<=f?delete c.maximum:delete c.exclusiveMaximum)),"number"==typeof h&&(c.multipleOf=h)})(a,b,c,0),a.gt=(b,c)=>a.check(eX(b,c)),a.gte=(b,c)=>a.check(eY(b,c)),a.min=(b,c)=>a.check(eY(b,c)),a.lt=(b,c)=>a.check(eV(b,c)),a.lte=(b,c)=>a.check(eW(b,c)),a.max=(b,c)=>a.check(eW(b,c)),a.int=b=>a.check(fs(b)),a.safe=b=>a.check(fs(b)),a.positive=b=>a.check(eX(0,b)),a.nonnegative=b=>a.check(eY(0,b)),a.negative=b=>a.check(eV(0,b)),a.nonpositive=b=>a.check(eW(0,b)),a.multipleOf=(b,c)=>a.check(eZ(b,c)),a.step=(b,c)=>a.check(eZ(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null})),fr=a3("ZodNumberFormat",(a,b)=>{dW.init(a,b),fq.init(a,b)});function fs(a){return new fr({type:"number",check:"number_format",abort:!1,format:"safeint",...bF(a)})}(a,b)=>{dY.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema")})(0,a,0,0),a.gte=(b,c)=>a.check(eY(b,c)),a.min=(b,c)=>a.check(eY(b,c)),a.gt=(b,c)=>a.check(eX(b,c)),a.gte=(b,c)=>a.check(eY(b,c)),a.min=(b,c)=>a.check(eY(b,c)),a.lt=(b,c)=>a.check(eV(b,c)),a.lte=(b,c)=>a.check(eW(b,c)),a.max=(b,c)=>a.check(eW(b,c)),a.positive=b=>a.check(eX(BigInt(0),b)),a.negative=b=>a.check(eV(BigInt(0),b)),a.nonpositive=b=>a.check(eW(BigInt(0),b)),a.nonnegative=b=>a.check(eY(BigInt(0),b)),a.multipleOf=(b,c)=>a.check(eZ(b,c));let c=a._zod.bag;a.minValue=c.minimum??null,a.maxValue=c.maximum??null,a.format=c.format??null};(a,b)=>{d2.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(a,b,c)=>{}};(a,b)=>{d3.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(a,b,c)=>{b.not={}}};let ft=a3("ZodArray",(a,b)=>{d7.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def,{minimum:f,maximum:g}=a._zod.bag;"number"==typeof f&&(c.minItems=f),"number"==typeof g&&(c.maxItems=g),c.type="array",c.items=e3(e.element,b,{...d,path:[...d.path,"items"]})})(a,b,c,d),a.element=b.element,a.min=(b,c)=>a.check(e_(b,c)),a.nonempty=b=>a.check(e_(1,b)),a.max=(b,c)=>a.check(e$(b,c)),a.length=(b,c)=>a.check(e0(b,c)),a.unwrap=()=>a.element}),fu=a3("ZodUnion",(a,b)=>{ee.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>{var e,f,g,h;let i,j,k;return e=a,f=b,g=c,h=d,j=!1===(i=e._zod.def).inclusive,k=i.options.map((a,b)=>e3(a,f,{...h,path:[...h.path,j?"oneOf":"anyOf",b]})),void(j?g.oneOf=k:g.anyOf=k)},a.options=b.options}),fv=a3("ZodIntersection",(a,b)=>{ei.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>{let e,f,g,h;return f=e3((e=a._zod.def).left,b,{...d,path:[...d.path,"allOf",0]}),g=e3(e.right,b,{...d,path:[...d.path,"allOf",1]}),void(c.allOf=[...(h=a=>"allOf"in a&&1===Object.keys(a).length)(f)?f.allOf:[f],...h(g)?g.allOf:[g]])}}),fw=a3("ZodEnum",(a,b)=>{er.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>{let e;(e=bd(a._zod.def.entries)).every(a=>"number"==typeof a)&&(c.type="number"),e.every(a=>"string"==typeof a)&&(c.type="string"),c.enum=e},a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new fw({...b,checks:[],...e9.normalizeParams(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new fw({...b,checks:[],...e9.normalizeParams(d),entries:e})}}),fx=a3("ZodTransform",(a,b)=>{eu.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema")})(0,a,0,0),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new a5(a.constructor.name);c.addIssue=d=>{"string"==typeof d?c.issues.push(e9.issue(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),c.issues.push(e9.issue(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}}),fy=a3("ZodOptional",(a,b)=>{ew.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>e8(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function fz(a){return new fy({type:"optional",innerType:a})}let fA=a3("ZodExactOptional",(a,b)=>{ex.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>e8(a,b,c,d),a.unwrap=()=>a._zod.def.innerType}),fB=a3("ZodNullable",(a,b)=>{ey.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>{let e,f,g;return f=e3((e=a._zod.def).innerType,b,d),g=b.seen.get(a),void("openapi-3.0"===b.target?(g.ref=e.innerType,c.nullable=!0):c.anyOf=[f,{type:"null"}])},a.unwrap=()=>a._zod.def.innerType});function fC(a){return new fB({type:"nullable",innerType:a})}let fD=a3("ZodDefault",(a,b)=>{ez.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>{let e;e3((e=a._zod.def).innerType,b,d),b.seen.get(a).ref=e.innerType,c.default=JSON.parse(JSON.stringify(e.defaultValue))},a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap}),fE=a3("ZodPrefault",(a,b)=>{eB.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>{let e;e3((e=a._zod.def).innerType,b,d),b.seen.get(a).ref=e.innerType,"input"===b.io&&(c._prefault=JSON.parse(JSON.stringify(e.defaultValue)))},a.unwrap=()=>a._zod.def.innerType}),fF=a3("ZodNonOptional",(a,b)=>{eC.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>{let e;e3((e=a._zod.def).innerType,b,d),b.seen.get(a).ref=e.innerType},a.unwrap=()=>a._zod.def.innerType}),fG=a3("ZodCatch",(a,b)=>{eF.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e,f=a._zod.def;e3(f.innerType,b,d),b.seen.get(a).ref=f.innerType;try{e=f.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}c.default=e})(a,b,c,d),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap}),fH=a3("ZodPipe",(a,b)=>{eH.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>{let e,f;return e=a._zod.def,void(e3(f="input"===b.io?"transform"===e.in._zod.def.type?e.out:e.in:e.out,b,d),b.seen.get(a).ref=f)},a.in=b.in,a.out=b.out});function fI(a,b){return new fH({type:"pipe",in:a,out:b})}let fJ=a3("ZodReadonly",(a,b)=>{eM.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(b,c,d)=>{let e;e3((e=a._zod.def).innerType,b,d),b.seen.get(a).ref=e.innerType,c.readOnly=!0},a.unwrap=()=>a._zod.def.innerType}),fK=a3("ZodCustom",(a,b)=>{eS.init(a,b),fn.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")})(0,a,0,0)});var fL=class extends Error{constructor(a,b){super(a,b),this.name="BetterAuthError",this.message=a,this.stack=""}};function fM(a,b="/api/auth"){try{let b=new URL(a);if("http:"!==b.protocol&&"https:"!==b.protocol)throw new fL(`Invalid base URL: ${a}. URL must include 'http://' or 'https://'`)}catch(b){if(b instanceof fL)throw b;throw new fL(`Invalid base URL: ${a}. Please provide a valid base URL.`,{cause:b})}if(function(a){try{return"/"!==(new URL(a).pathname.replace(/\/+$/,"")||"/")}catch{throw new fL(`Invalid base URL: ${a}. Please provide a valid base URL.`)}}(a))return a;let c=a.replace(/\/+$/,"");return b&&"/"!==b?(b=b.startsWith("/")?b:`/${b}`,`${c}${b}`):c}let fN={id:"redirect",name:"Redirect",hooks:{onSuccess(a){a.data?.url&&a.data?.redirect}}},fO={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},fP=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,fQ={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0},fR=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/,fS=[],fT=0,fU=0,fV=a=>{let b=[],c={get:()=>(c.lc||c.listen(()=>{})(),c.value),lc:0,listen:a=>(c.lc=b.push(a),()=>{for(let b=fT+4;b<fS.length;)fS[b]===a?fS.splice(b,4):b+=4;let d=b.indexOf(a);~d&&(b.splice(d,1),--c.lc||c.off())}),notify(a,d){fU++;let e=!fS.length;for(let e of b)fS.push(e,c.value,a,d);if(e){for(fT=0;fT<fS.length;fT+=4)fS[fT](fS[fT+1],fS[fT+2],fS[fT+3]);fS.length=0}},off(){},set(a){let b=c.value;b!==a&&(c.value=a,c.notify(b))},subscribe(a){let b=c.listen(a);return a(c.value),b},value:a};return c},fW=()=>!0,fX=Symbol.for("better-auth:broadcast-channel");var fY=class{listeners=new Set;name;constructor(a="better-auth.message"){this.name=a}subscribe(a){return this.listeners.add(a),()=>{this.listeners.delete(a)}}post(a){}setup(){return()=>{}}};function fZ(a="better-auth.message"){return globalThis[fX]||(globalThis[fX]=new fY(a)),globalThis[fX]}let f$=Symbol.for("better-auth:focus-manager");var f_=class{listeners=new Set;subscribe(a){return this.listeners.add(a),()=>{this.listeners.delete(a)}}setFocused(a){this.listeners.forEach(b=>b(a))}setup(){return()=>{}}};function f0(){return globalThis[f$]||(globalThis[f$]=new f_),globalThis[f$]}let f1=Symbol.for("better-auth:online-manager");var f2=class{listeners=new Set;isOnline="u"<typeof navigator||navigator.onLine;subscribe(a){return this.listeners.add(a),()=>{this.listeners.delete(a)}}setOnline(a){this.isOnline=a,this.listeners.forEach(b=>b(a))}setup(){return()=>{}}};function f3(){return globalThis[f1]||(globalThis[f1]=new f2),globalThis[f1]}let f4=()=>Math.floor(Date.now()/1e3);function f5(a){if(null===a||"object"!=typeof a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.iterator in a)&&(!(Symbol.toStringTag in a)||"[object Module]"===Object.prototype.toString.call(a))}function f6(a){return(...b)=>b.reduce((b,c)=>(function a(b,c,d=".",e){if(!f5(c))return a(b,{},d,e);let f=Object.assign({},c);for(let c in b){if("__proto__"===c||"constructor"===c)continue;let g=b[c];null!=g&&(e&&e(f,c,g,d)||(Array.isArray(g)&&Array.isArray(f[c])?f[c]=[...g,...f[c]]:f5(g)&&f5(f[c])?f[c]=a(g,f[c],(d?`${d}.`:"")+c.toString(),e):f[c]=g))}return f})(b,c,"",a),{})}let f7=f6();f6((a,b,c)=>{if(void 0!==a[b]&&"function"==typeof c)return a[b]=c(a[b]),!0}),f6((a,b,c)=>{if(Array.isArray(a[b])&&"function"==typeof c)return a[b]=c(a[b]),!0});var f8=Object.defineProperty,f9=Object.defineProperties,ga=Object.getOwnPropertyDescriptors,gb=Object.getOwnPropertySymbols,gc=Object.prototype.hasOwnProperty,gd=Object.prototype.propertyIsEnumerable,ge=(a,b,c)=>b in a?f8(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,gf=(a,b)=>{for(var c in b||(b={}))gc.call(b,c)&&ge(a,c,b[c]);if(gb)for(var c of gb(b))gd.call(b,c)&&ge(a,c,b[c]);return a},gg=(a,b)=>f9(a,ga(b)),gh=class extends Error{constructor(a,b,c){super(b||a.toString(),{cause:c}),this.status=a,this.statusText=b,this.error=c,Error.captureStackTrace(this,this.constructor)}},gi=async(a,b)=>{var c,d,e,f,g,h;let i=b||{},j={onRequest:[null==b?void 0:b.onRequest],onResponse:[null==b?void 0:b.onResponse],onSuccess:[null==b?void 0:b.onSuccess],onError:[null==b?void 0:b.onError],onRetry:[null==b?void 0:b.onRetry]};if(!b||!(null==b?void 0:b.plugins))return{url:a,options:i,hooks:j};for(let k of(null==b?void 0:b.plugins)||[]){if(k.init){let d=await (null==(c=k.init)?void 0:c.call(k,a.toString(),b));i=d.options||i,a=d.url}j.onRequest.push(null==(d=k.hooks)?void 0:d.onRequest),j.onResponse.push(null==(e=k.hooks)?void 0:e.onResponse),j.onSuccess.push(null==(f=k.hooks)?void 0:f.onSuccess),j.onError.push(null==(g=k.hooks)?void 0:g.onError),j.onRetry.push(null==(h=k.hooks)?void 0:h.onRetry)}return{url:a,options:i,hooks:j}},gj=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(){return this.options.delay}},gk=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(a){return Math.min(this.options.maxDelay,this.options.baseDelay*2**a)}},gl=async a=>{let b={},c=async a=>"function"==typeof a?await a():a;if(null==a?void 0:a.auth){if("Bearer"===a.auth.type){let d=await c(a.auth.token);if(!d)return b;b.authorization=`Bearer ${d}`}else if("Basic"===a.auth.type){let[d,e]=await Promise.all([c(a.auth.username),c(a.auth.password)]);if(!d||!e)return b;b.authorization=`Basic ${btoa(`${d}:${e}`)}`}else if("Custom"===a.auth.type){let[d,e]=await Promise.all([c(a.auth.prefix),c(a.auth.value)]);if(!e)return b;b.authorization=`${null!=d?d:""} ${e}`}}return b},gm=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function gn(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!a.buffer&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}function go(a){try{return JSON.parse(a)}catch(b){return a}}async function gp(a){let b=new Headers(null==a?void 0:a.headers);for(let[c,d]of Object.entries(await gl(a)||{}))b.set(c,d);if(!b.has("content-type")){let c=gn(null==a?void 0:a.body)?"application/json":null;c&&b.set("content-type",c)}return b}var gq=class a extends Error{constructor(b,c){super(c||JSON.stringify(b,null,2)),this.issues=b,Object.setPrototypeOf(this,a.prototype)}};async function gr(a,b){let c=await a["~standard"].validate(b);if(c.issues)throw new gq(c.issues);return c.value}var gs=["get","post","put","patch","delete"],gt=async(a,b)=>{var c,d,e,f,g,h,i,j;let k,{hooks:l,url:m,options:n}=await gi(a,b),o=function(a){if(null==a?void 0:a.customFetchImpl)return a.customFetchImpl;if("u">typeof globalThis&&"function"==typeof globalThis.fetch)return globalThis.fetch;throw Error("No fetch implementation found")}(n),p=new AbortController,q=null!=(c=n.signal)?c:p.signal,r=function(a,b){let{baseURL:c,params:d,query:e}=b||{query:{},params:{},baseURL:""},f=a.startsWith("http")?a.split("/").slice(0,3).join("/"):c||"";if(a.startsWith("@")){let b=a.toString().split("@")[1].split("/")[0];gs.includes(b)&&(a=a.replace(`@${b}/`,"/"))}f.endsWith("/")||(f+="/");let[g,h]=a.replace(f,"").split("?"),i=new URLSearchParams(h);for(let[a,b]of Object.entries(e||{})){let c;if(null!=b){if("string"==typeof b)c=b;else if(Array.isArray(b)){for(let c of b)i.append(a,c);continue}else c=JSON.stringify(b);i.set(a,c)}}if(d)if(Array.isArray(d))for(let[a,b]of g.split("/").filter(a=>a.startsWith(":")).entries()){let c=d[a];g=g.replace(b,c)}else for(let[a,b]of Object.entries(d))g=g.replace(`:${a}`,String(b));(g=g.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(g=g.slice(1));let j=i.toString();return(j=j.length>0?`?${j}`.replace(/\+/g,"%20"):"",f.startsWith("http"))?new URL(`${g}${j}`,f):`${f}${g}${j}`}(m,n),s=function(a){if(!(null==a?void 0:a.body))return null;let b=new Headers(null==a?void 0:a.headers);if(gn(a.body)&&!b.has("content-type")){for(let[b,c]of Object.entries(null==a?void 0:a.body))c instanceof Date&&(a.body[b]=c.toISOString());return JSON.stringify(a.body)}return b.has("content-type")&&"application/x-www-form-urlencoded"===b.get("content-type")&&gn(a.body)?new URLSearchParams(a.body).toString():a.body}(n),t=await gp(n),u=function(a,b){var c;if(null==b?void 0:b.method)return b.method.toUpperCase();if(a.startsWith("@")){let d=null==(c=a.split("@")[1])?void 0:c.split("/")[0];return gs.includes(d)?d.toUpperCase():(null==b?void 0:b.body)?"POST":"GET"}return(null==b?void 0:b.body)?"POST":"GET"}(m,n),v=gg(gf({},n),{url:r,headers:t,body:s,method:u,signal:q});for(let a of l.onRequest)if(a){let b=await a(v);"object"==typeof b&&null!==b&&(v=b)}("pipeTo"in v&&"function"==typeof v.pipeTo||"function"==typeof(null==(d=null==b?void 0:b.body)?void 0:d.pipe))&&!("duplex"in v)&&(v.duplex="half");let{clearTimeout:w}=(!(null==n?void 0:n.signal)&&(null==n?void 0:n.timeout)&&(k=setTimeout(()=>null==p?void 0:p.abort(),null==n?void 0:n.timeout)),{abortTimeout:k,clearTimeout:()=>{k&&clearTimeout(k)}}),x=await o(v.url,v);w();let y={response:x,request:v};for(let a of l.onResponse)if(a){let c=await a(gg(gf({},y),{response:(null==(e=null==b?void 0:b.hookOptions)?void 0:e.cloneResponse)?x.clone():x}));c instanceof Response?x=c:"object"==typeof c&&null!==c&&(x=c.response)}if(x.ok){if("HEAD"===v.method)return{data:"",error:null};let a=function(a){let b=a.headers.get("content-type"),c=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!b)return"json";let d=b.split(";").shift()||"";return gm.test(d)?"json":c.has(d)||d.startsWith("text/")?"text":"blob"}(x),c={data:null,response:x,request:v};if("json"===a||"text"===a){let a=await x.text(),b=null!=(f=v.jsonParser)?f:go;c.data=await b(a)}else c.data=await x[a]();for(let a of((null==v?void 0:v.output)&&v.output&&!v.disableValidation&&(c.data=await gr(v.output,c.data)),l.onSuccess))a&&await a(gg(gf({},c),{response:(null==(g=null==b?void 0:b.hookOptions)?void 0:g.cloneResponse)?x.clone():x}));return(null==b?void 0:b.throw)?c.data:{data:c.data,error:null}}let z=null!=(h=null==b?void 0:b.jsonParser)?h:go,A=await x.text(),B=function(a){try{return JSON.parse(a),!0}catch(a){return!1}}(A),C=B?await z(A):null,D={response:x,responseText:A,request:v,error:gg(gf({},C),{status:x.status,statusText:x.statusText})};for(let a of l.onError)a&&await a(gg(gf({},D),{response:(null==(i=null==b?void 0:b.hookOptions)?void 0:i.cloneResponse)?x.clone():x}));if(null==b?void 0:b.retry){let c=function(a){if("number"==typeof a)return new gj({type:"linear",attempts:a,delay:1e3});switch(a.type){case"linear":return new gj(a);case"exponential":return new gk(a);default:throw Error("Invalid retry strategy")}}(b.retry),d=null!=(j=b.retryAttempt)?j:0;if(await c.shouldAttemptRetry(d,x)){for(let a of l.onRetry)a&&await a(y);let e=c.getDelay(d);return await new Promise(a=>setTimeout(a,e)),await gt(a,gg(gf({},b),{retryAttempt:d+1}))}}if(null==b?void 0:b.throw)throw new gh(x.status,x.statusText,B?C:A);return{data:null,error:gg(gf({},C),{status:x.status,statusText:x.statusText})}};let{signIn:gu,signUp:gv,signOut:gw,useSession:gx,getSession:gy}=function(a){var b;let{pluginPathMethods:c,pluginsActions:d,pluginsAtoms:e,$fetch:f,$store:g,atomListeners:h}=((a,b)=>{var c,d,e,f;let g,h,i="credentials"in Request.prototype,j=function(a,b,c,d,e){if(a)return fM(a,b);if(!1!==d){let a=aS.BETTER_AUTH_URL||aS.NEXT_PUBLIC_BETTER_AUTH_URL||aS.PUBLIC_BETTER_AUTH_URL||aS.NUXT_PUBLIC_BETTER_AUTH_URL||aS.NUXT_PUBLIC_AUTH_URL||("/"!==aS.BASE_URL?aS.BASE_URL:void 0);if(a)return fM(a,b)}c?.headers.get("x-forwarded-host"),c?.headers.get("x-forwarded-proto");if(c){let a=function(a){try{let b=new URL(a);return"null"===b.origin?null:b.origin}catch{return null}}(c.url);if(!a)throw new fL("Could not get origin from request. Please provide a valid base URL.");return fM(a,b)}}(a?.baseURL,a?.basePath,void 0,b)??"/api/auth",k=a?.plugins?.flatMap(a=>a.fetchPlugins).filter(a=>void 0!==a)||[],l={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:a?.fetchOptions?.onSuccess,onError:a?.fetchOptions?.onError,onRequest:a?.fetchOptions?.onRequest,onResponse:a?.fetchOptions?.onResponse}},{onSuccess:m,onError:n,onRequest:o,onResponse:p,...q}=a?.fetchOptions||{},r=(c={baseURL:j,...i?{credentials:"include"}:{},method:"GET",jsonParser:a=>a?function(a,b={strict:!0}){return function(a,b={}){let{strict:c=!1,warnings:d=!1,reviver:e,parseDates:f=!0}=b;if("string"!=typeof a)return a;let g=a.trim();if(g.length>0&&'"'===g[0]&&g.endsWith('"')&&!g.slice(1,-1).includes('"'))return g.slice(1,-1);let h=g.toLowerCase();if(h.length<=9&&h in fQ)return fQ[h];if(!fP.test(g)){if(c)throw SyntaxError("[better-json] Invalid JSON");return a}if(Object.entries(fO).some(([a,b])=>{let c=b.test(g);return c&&d&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${a} pattern`),c})&&c)throw Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(g,(a,b)=>{if("__proto__"===a||"constructor"===a&&b&&"object"==typeof b&&"prototype"in b){d&&console.warn(`[better-json] Dropping "${a}" key to prevent prototype pollution`);return}if(f&&"string"==typeof b){let a=function(a){let b=fR.exec(a);if(!b)return null;let[,c,d,e,f,g,h,i,j,k,l]=b,m=new Date(Date.UTC(parseInt(c,10),parseInt(d,10)-1,parseInt(e,10),parseInt(f,10),parseInt(g,10),parseInt(h,10),i?parseInt(i.padEnd(3,"0"),10):0));if(j){let a=(60*parseInt(k,10)+parseInt(l,10))*("+"===j?-1:1);m.setUTCMinutes(m.getUTCMinutes()+a)}return m instanceof Date&&!isNaN(m.getTime())?m:null}(b);if(a)return a}return e?e(a,b):b})}catch(b){if(c)throw b;return a}}(a,b)}(a,{strict:!1}):null,customFetchImpl:fetch,...q,plugins:[l,...q.plugins||[],...a?.disableDefaultFetchPlugins?[]:[fN],...k]},async function(a,b){let d,e=gg(gf(gf({},c),b),{plugins:[...(null==c?void 0:c.plugins)||[],(d=c||{},{id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(a,b){var c,e,f,g;let h=(null==(e=null==(c=d.plugins)?void 0:c.find(b=>{var c;return null!=(c=b.schema)&&!!c.config&&(a.startsWith(b.schema.config.baseURL||"")||a.startsWith(b.schema.config.prefix||""))}))?void 0:e.schema)||d.schema;if(h){let c=a;(null==(f=h.config)?void 0:f.prefix)&&c.startsWith(h.config.prefix)&&(c=c.replace(h.config.prefix,""),h.config.baseURL&&(a=a.replace(h.config.prefix,h.config.baseURL))),(null==(g=h.config)?void 0:g.baseURL)&&c.startsWith(h.config.baseURL)&&(c=c.replace(h.config.baseURL,""));let d=h.schema[c];if(d){let c=gg(gf({},b),{method:d.method,output:d.output});return(null==b?void 0:b.disableValidation)||(c=gg(gf({},c),{body:d.input?await gr(d.input,null==b?void 0:b.body):null==b?void 0:b.body,params:d.params?await gr(d.params,null==b?void 0:b.params):null==b?void 0:b.params,query:d.query?await gr(d.query,null==b?void 0:b.query):null==b?void 0:b.query})),{url:a,options:c}}}return{url:a,options:b}}}),...(null==b?void 0:b.plugins)||[]]});if(null==c?void 0:c.catchAllError)try{return await gt(a,e)}catch(a){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:a}}}return await gt(a,e)}),{$sessionSignal:s,session:t}=(h=((a,b,c,d)=>{let e=fV({data:null,error:null,isPending:!0,isRefetching:!1,refetch:a=>f(a)}),f=async a=>new Promise(f=>{let g="function"==typeof d?d({data:e.get().data,error:e.get().error,isPending:e.get().isPending}):d;c(b,{...g,query:{...g?.query,...a?.query},async onSuccess(a){e.set({data:a.data,error:null,isPending:!1,isRefetching:!1,refetch:e.value.refetch}),await g?.onSuccess?.(a)},async onError(a){let{request:b}=a,c="number"==typeof b.retry?b.retry:b.retry?.attempts,d=b.retryAttempt||0;c&&d<c||(e.set({error:a.error,data:null,isPending:!1,isRefetching:!1,refetch:e.value.refetch}),await g?.onError?.(a))},async onRequest(a){let b=e.get();e.set({isPending:null===b.data,data:b.data,error:null,isRefetching:!0,refetch:e.value.refetch}),await g?.onRequest?.(a)}}).catch(a=>{e.set({error:a,data:null,isPending:!1,isRefetching:!1,refetch:e.value.refetch})}).finally(()=>{f(void 0)})});for(let b of a=Array.isArray(a)?a:[a])b.subscribe(async()=>{if(fW())return});return e})(g=fV(!1),"/get-session",r,{method:"GET"}),d=()=>{let b=function(a){let{sessionAtom:b,sessionSignal:c,$fetch:d,options:e={}}=a,f=e.sessionOptions?.refetchInterval??0,g=e.sessionOptions?.refetchOnWindowFocus??!0,h=e.sessionOptions?.refetchWhenOffline??!1,i={lastSync:0,lastSessionRequest:0,cachedSession:void 0},j=a=>{if(!(h||f3().isOnline))return;if(a?.event==="storage"){i.lastSync=f4(),c.set(!c.get());return}let e=b.get();if(a?.event==="poll"){i.lastSessionRequest=f4(),d("/get-session").then(a=>{a.error?b.set({...e,data:null,error:a.error}):b.set({...e,data:a.data,error:null}),i.lastSync=f4(),c.set(!c.get())}).catch(()=>{});return}if(a?.event==="visibilitychange"){if(f4()-i.lastSessionRequest<5)return;i.lastSessionRequest=f4()}(e?.data===null||e?.data===void 0||a?.event==="visibilitychange")&&(i.lastSync=f4(),c.set(!c.get()))};return{init:()=>{f&&f>0&&(i.pollInterval=setInterval(()=>{b.get()?.data&&j({event:"poll"})},1e3*f)),i.unsubscribeBroadcast=fZ().subscribe(()=>{j({event:"storage"})}),g&&(i.unsubscribeFocus=f0().subscribe(()=>{j({event:"visibilitychange"})})),i.unsubscribeOnline=f3().subscribe(a=>{a&&j({event:"visibilitychange"})}),fZ().setup(),f0().setup(),f3().setup()},cleanup:()=>{i.pollInterval&&(clearInterval(i.pollInterval),i.pollInterval=void 0),i.unsubscribeBroadcast&&(i.unsubscribeBroadcast(),i.unsubscribeBroadcast=void 0),i.unsubscribeFocus&&(i.unsubscribeFocus(),i.unsubscribeFocus=void 0),i.unsubscribeOnline&&(i.unsubscribeOnline(),i.unsubscribeOnline=void 0),i.lastSync=0,i.lastSessionRequest=0,i.cachedSession=void 0},triggerRefetch:j,broadcastSessionUpdate:a=>{fZ().post({event:"session",data:{trigger:a},clientId:Math.random().toString(36).substring(7)})}}}({sessionAtom:h,sessionSignal:g,$fetch:r,options:a});return b.init(),()=>{b.cleanup()}},e=a=>{let b=d(a);b&&h.events[6].push(b)},f=a=>{let b=h.listen;h.listen=(...c)=>(h.lc||h.active||(h.active=!0,a()),b(...c));let c=h.off;return h.events[6]=[],h.off=()=>{c(),setTimeout(()=>{if(h.active&&!h.lc){for(let a of(h.active=!1,h.events[6]))a();h.events[6]=[]}},1e3)},()=>{h.listen=b,h.off=c}},h.events=h.events||{},h.events[15]||(h.events[15]=f(a=>{h.events[5].reduceRight((a,b)=>(b(a),a),{shared:{},...a})})),h.events[5]=h.events[5]||[],h.events[5].push(e),{session:h,$sessionSignal:g}),u=a?.plugins||[],v={},w={$sessionSignal:s,session:t},x={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"},y=[{signal:"$sessionSignal",matcher:a=>"/sign-out"===a||"/update-user"===a||"/sign-up/email"===a||"/sign-in/email"===a||"/delete-user"===a||"/verify-email"===a||"/revoke-sessions"===a||"/revoke-session"===a||"/change-email"===a}];for(let a of u)a.getAtoms&&Object.assign(w,a.getAtoms?.(r)),a.pathMethods&&Object.assign(x,a.pathMethods),a.atomListeners&&y.push(...a.atomListeners);let z={notify:a=>{w[a].set(!w[a].get())},listen:(a,b)=>{w[a].subscribe(b)},atoms:w};for(let b of u)b.getActions&&(v=f7(b.getActions?.(r,z,a)??{},v));return{get baseURL(){return j},pluginsActions:v,pluginsAtoms:w,pluginPathMethods:x,atomListeners:y,$fetch:r,$store:z}})(a),i={};for(let[a,b]of Object.entries(e))i[function(a){return`use${a.charAt(0).toUpperCase()+a.slice(1)}`}(a)]=()=>(function(a,b={}){let c=(0,N.useRef)(a.get()),{keys:d,deps:e=[a,d]}=b,f=(0,N.useCallback)(b=>{let e=a=>{c.current!==a&&(c.current=a,b())};if(e(a.value),d?.length){let b;return b=new Set(d).add(void 0),a.listen((a,c,d)=>{b.has(d)&&e(a,c,d)})}return a.listen(e)},e),g=()=>c.current;return(0,N.useSyncExternalStore)(f,g,g)})(b);return b={...d,...i,$fetch:f,$store:g},function a(d=[]){return new Proxy(function(){},{get(c,e){var f;if("string"!=typeof e||"then"===e||"catch"===e||"finally"===e)return;let g=[...d,e],h=b;for(let a of g)if(h&&"object"==typeof h&&a in h)h=h[a];else{h=void 0;break}return"function"==typeof h?h:"object"==typeof(f=h)&&null!==f&&"get"in f&&"function"==typeof f.get&&"lc"in f&&"number"==typeof f.lc?h:a(g)},apply:async(a,b,g)=>{let i="/"+d.map(a=>a.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`)).join("/"),j=g[0]||{},k=g[1]||{},{query:l,fetchOptions:m,...n}=j,o={...k,...m},p=function(a,b,c){let d=b[a],{fetchOptions:e,query:f,...g}=c||{};return d||(e?.method?e.method:g&&Object.keys(g).length>0?"POST":"GET")}(i,c,j);return await f(i,{...o,body:"GET"===p?void 0:{...n,...o?.body||{}},query:l||o?.query,method:p,async onSuccess(a){if(await o?.onSuccess?.(a),!h||o.disableSignal)return;let b=h.filter(a=>a.matcher(i));if(!b.length)return;let c=new Set;for(let a of b){let b=e[a.signal];if(!b)return;if(c.has(a.signal))continue;c.add(a.signal);let d=b.get();setTimeout(()=>{b.set(!d)},10)}}})}})}()}({baseURL:"https://photovault-mu.vercel.app"});function gz({onSuccess:a}){let[b,c]=(0,N.useState)("welcome"),[d,e]=(0,N.useState)(""),[f,g]=(0,N.useState)(""),[h,i]=(0,N.useState)(""),[j,k]=(0,N.useState)(!1),[l,m]=(0,N.useState)(!1),[n,o]=(0,N.useState)(null),p=async()=>{if(!d||!f)return void o("Bitte E-Mail und Passwort eingeben");m(!0),o(null);try{let b=await gu.email({email:d,password:f});if(b.error)return void o(b.error.message||"Anmeldung fehlgeschlagen");b.data?.user&&a({id:b.data.user.id,email:b.data.user.email,vaultKeyHash:b.data.user.vault_key_hash||null})}catch(a){console.error("Login error:",a),o("Ein Fehler ist aufgetreten. Bitte versuche es erneut.")}finally{m(!1)}},q=async()=>{if(!d||!f||!h)return void o("Bitte alle Felder ausfuellen");if(f.length<8)return void o("Passwort muss mindestens 8 Zeichen haben");m(!0),o(null);try{let b=await gv.email({email:d,password:f,name:h});if(b.error)return void o(b.error.message||"Registrierung fehlgeschlagen");b.data?.user&&a({id:b.data.user.id,email:b.data.user.email,vaultKeyHash:null})}catch(a){console.error("Signup error:",a),o("Ein Fehler ist aufgetreten. Bitte versuche es erneut.")}finally{m(!1)}};return"welcome"===b?(0,M.jsxs)("div",{className:"min-h-screen flex flex-col px-6 pt-16 pb-8 safe-area-inset bg-[#F2F2F7]",children:[(0,M.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[(0,M.jsx)("div",{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-[#007AFF] to-[#5856D6] flex items-center justify-center mb-8 shadow-lg",children:(0,M.jsx)(aH,{name:"shield",size:48,className:"text-white"})}),(0,M.jsx)("h1",{className:"sf-pro-display text-[34px] font-bold leading-tight text-[#1D1D1F] mb-3",children:"PhotoVault"}),(0,M.jsx)("p",{className:"text-[17px] leading-relaxed text-[#6E6E73] max-w-[280px] mb-8",children:"Sichere deine Fotos mit Zero-Knowledge Verschluesselung"}),(0,M.jsxs)("div",{className:"w-full max-w-[320px] space-y-3 mb-12",children:[(0,M.jsx)(gA,{icon:"lock",text:"Ende-zu-Ende verschluesselt"}),(0,M.jsx)(gA,{icon:"smartphone",text:"Multi-Device Sync"}),(0,M.jsx)(gA,{icon:"cloud",text:"Dezentrales IPFS Backup"})]})]}),(0,M.jsxs)("div",{className:"space-y-3",children:[(0,M.jsxs)("button",{onClick:()=>c("signup"),className:"w-full h-[54px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-2xl ios-tap-target flex items-center justify-center gap-2 shadow-lg shadow-[#007AFF]/25",children:["Konto erstellen",(0,M.jsx)(aO,{className:"w-5 h-5"})]}),(0,M.jsx)("button",{onClick:()=>c("login"),className:"w-full h-[50px] text-[#007AFF] text-[17px] font-medium ios-tap-target",children:"Ich habe bereits ein Konto"})]})]}):(0,M.jsxs)("div",{className:"min-h-screen flex flex-col px-6 pt-12 pb-8 safe-area-inset bg-[#F2F2F7]",children:[(0,M.jsx)("button",{onClick:()=>c("welcome"),className:"self-start text-[#007AFF] text-[17px] mb-8 ios-tap-target",children:"Zurueck"}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] font-bold text-[#1D1D1F] mb-2",children:"login"===b?"Willkommen zurueck":"Konto erstellen"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73] mb-8",children:"login"===b?"Melde dich an, um auf deinen Vault zuzugreifen":"Erstelle ein Konto, um deinen Vault zu sichern"}),(0,M.jsxs)("div",{className:"space-y-4",children:["signup"===b&&(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsx)("input",{type:"text",value:h,onChange:a=>i(a.target.value),placeholder:"Name",className:"w-full h-[54px] bg-white rounded-xl px-4 pl-12 text-[17px] text-[#1D1D1F] placeholder:text-[#8E8E93] border border-[#E5E5EA] focus:border-[#007AFF] focus:outline-none transition-colors"}),(0,M.jsx)(aP,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#8E8E93]"})]}),(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsx)("input",{type:"email",value:d,onChange:a=>e(a.target.value),placeholder:"E-Mail",autoComplete:"email",className:"w-full h-[54px] bg-white rounded-xl px-4 pl-12 text-[17px] text-[#1D1D1F] placeholder:text-[#8E8E93] border border-[#E5E5EA] focus:border-[#007AFF] focus:outline-none transition-colors"}),(0,M.jsx)(aK,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#8E8E93]"})]}),(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsx)("input",{type:j?"text":"password",value:f,onChange:a=>g(a.target.value),placeholder:"Passwort",autoComplete:"login"===b?"current-password":"new-password",className:"w-full h-[54px] bg-white rounded-xl px-4 pl-12 pr-12 text-[17px] text-[#1D1D1F] placeholder:text-[#8E8E93] border border-[#E5E5EA] focus:border-[#007AFF] focus:outline-none transition-colors"}),(0,M.jsx)(aL,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#8E8E93]"}),(0,M.jsx)("button",{type:"button",onClick:()=>k(!j),className:"absolute right-4 top-1/2 -translate-y-1/2 text-[#8E8E93] ios-tap-target",children:j?(0,M.jsx)(aN,{className:"w-5 h-5"}):(0,M.jsx)(aM,{className:"w-5 h-5"})})]}),"signup"===b&&(0,M.jsx)("p",{className:"text-[13px] text-[#8E8E93]",children:"Mindestens 8 Zeichen"}),n&&(0,M.jsx)("div",{className:"bg-[#FF3B30]/10 rounded-xl p-3",children:(0,M.jsx)("p",{className:"text-[14px] text-[#FF3B30] text-center",children:n})})]})]}),(0,M.jsxs)("div",{className:"space-y-3",children:[(0,M.jsx)("button",{onClick:"login"===b?p:q,disabled:l,className:"w-full h-[54px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-2xl ios-tap-target disabled:opacity-50 flex items-center justify-center",children:l?(0,M.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"login"===b?"Anmelden":"Registrieren"}),(0,M.jsx)("button",{onClick:()=>c("login"===b?"signup":"login"),className:"w-full h-[44px] text-[#007AFF] text-[15px] ios-tap-target",children:"login"===b?"Noch kein Konto? Registrieren":"Bereits ein Konto? Anmelden"})]})]})}function gA({icon:a,text:b}){return(0,M.jsxs)("div",{className:"flex items-center gap-3 bg-white/80 backdrop-blur-sm rounded-xl p-3",children:[(0,M.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#007AFF]/10 flex items-center justify-center",children:(0,M.jsx)(aH,{name:a,size:18,className:"text-[#007AFF]"})}),(0,M.jsx)("span",{className:"text-[15px] text-[#1D1D1F]",children:b})]})}let gB=R("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var gC=a.i(55331);function gD({userEmail:a,expectedKeyHash:b,onUnlock:c,onCreateNewVault:d,onLogout:e}){let[f,g]=(0,N.useState)(""),[h,i]=(0,N.useState)(!1),[j,k]=(0,N.useState)(null),l=async()=>{if(!f.trim())return void k("Bitte gib deine Recovery-Phrase ein");i(!0),k(null);try{let a=f.trim().replace(/[\s\n]+/g,"-").replace(/-+/g,"-"),d=(0,gC.recoveryPhraseToKey)(a);if(!d||32!==d.length){k("Ungueltige Recovery-Phrase"),i(!1);return}let e=await (0,gC.getUserKeyHash)(d);if(b&&e!==b){k("Diese Recovery-Phrase gehoert nicht zu diesem Konto. Bitte ueberpruefe deine Eingabe."),i(!1);return}(0,gC.saveKeyToStorage)(d),c(d,e)}catch(a){console.error("Unlock error:",a),k("Ungueltige Recovery-Phrase. Bitte ueberpruefe deine Eingabe.")}finally{i(!1)}};return(0,M.jsxs)("div",{className:"min-h-screen flex flex-col px-6 pt-12 pb-8 safe-area-inset bg-[#F2F2F7]",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,M.jsxs)("div",{className:"text-[13px] text-[#6E6E73]",children:["Angemeldet als",(0,M.jsx)("br",{}),(0,M.jsx)("span",{className:"text-[#1D1D1F] font-medium",children:a})]}),(0,M.jsx)("button",{onClick:e,className:"text-[#FF3B30] text-[15px] ios-tap-target",children:"Abmelden"})]}),(0,M.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,M.jsxs)("div",{className:"flex flex-col items-center text-center mb-8",children:[(0,M.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6",children:(0,M.jsx)(aH,{name:"lock",size:40})}),(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] font-bold text-[#1D1D1F] mb-2",children:"Vault entsperren"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73] max-w-[300px]",children:b?"Gib deine Recovery-Phrase ein, um auf deine verschluesselten Fotos zuzugreifen":"Du hast noch keinen Vault. Erstelle einen neuen oder stelle einen bestehenden wieder her."})]}),(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("label",{className:"text-[13px] text-[#6E6E73] mb-2 block",children:"Recovery-Phrase (12 Woerter)"}),(0,M.jsx)("textarea",{value:f,onChange:a=>{g(a.target.value),k(null)},placeholder:"abc123XY-def456AB-ghi789CD-...",className:"w-full h-[120px] bg-white rounded-xl p-4 text-[15px] text-[#1D1D1F] font-mono resize-none border border-[#E5E5EA] focus:border-[#007AFF] focus:outline-none transition-colors"}),(0,M.jsx)("p",{className:"text-[12px] text-[#8E8E93] mt-2",children:"Mit Bindestrichen oder Leerzeichen getrennt"})]}),j&&(0,M.jsx)("div",{className:"bg-[#FF3B30]/10 rounded-xl p-3 mb-6",children:(0,M.jsx)("p",{className:"text-[14px] text-[#FF3B30] text-center",children:j})}),(0,M.jsx)("div",{className:"bg-[#007AFF]/5 rounded-xl p-4 mb-6",children:(0,M.jsxs)("div",{className:"flex items-start gap-3",children:[(0,M.jsx)(gB,{className:"w-5 h-5 text-[#007AFF] mt-0.5 flex-shrink-0"}),(0,M.jsxs)("div",{children:[(0,M.jsx)("p",{className:"text-[13px] text-[#1D1D1F] font-medium mb-1",children:"Warum brauche ich die Phrase?"}),(0,M.jsx)("p",{className:"text-[12px] text-[#6E6E73]",children:"Deine Fotos sind lokal verschluesselt. Nur mit der Recovery-Phrase kannst du sie entschluesseln. Wir speichern sie niemals."})]})]})})]}),(0,M.jsxs)("div",{className:"space-y-3",children:[(0,M.jsx)("button",{onClick:l,disabled:h||!f.trim(),className:"w-full h-[54px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-2xl ios-tap-target disabled:opacity-50 flex items-center justify-center",children:h?(0,M.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Vault entsperren"}),!b&&(0,M.jsx)("button",{onClick:d,className:"w-full h-[50px] text-[#007AFF] text-[17px] ios-tap-target",children:"Neuen Vault erstellen"})]})]})}let gE=R("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),gF=R("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),gG=R("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function gH(){let[a,b]=(0,N.useState)(null),[c,d]=(0,N.useState)(!1),[e,f]=(0,N.useState)(null),[g,h]=(0,N.useState)(!1),[i,j]=(0,N.useState)(null);(0,N.useEffect)(()=>{(async()=>{let a=(0,gC.loadKeyFromStorage)();a&&(b(a),f((0,gC.keyToRecoveryPhrase)(a)),j(await (0,gC.getUserKeyHash)(a))),d(!0)})()},[]);let k=(0,N.useCallback)(()=>new Promise(a=>{h(!0),setTimeout(async()=>{let c=(0,gC.generateKeyPair)().secretKey;b(c),(0,gC.saveKeyToStorage)(c);let d=(0,gC.keyToRecoveryPhrase)(c);f(d),j(await (0,gC.getUserKeyHash)(c)),h(!1),a(d)},1500)}),[]);return{secretKey:a,isInitialized:c,hasKey:!!a,recoveryPhrase:e,userKeyHash:i,isGeneratingKey:g,generateNewKey:k,restoreFromPhrase:(0,N.useCallback)(a=>{try{let c=(0,gC.recoveryPhraseToKey)(a);return b(c),(0,gC.saveKeyToStorage)(c),f(a),!0}catch{return!1}},[]),clearKey:(0,N.useCallback)(()=>{b(null),f(null),(0,gC.clearKeyFromStorage)()},[])}}function gI({userId:a,onComplete:b,onBack:c}){let[d,e]=(0,N.useState)("intro"),[f,g]=(0,N.useState)(!1),[h,i]=(0,N.useState)(!1),{isGeneratingKey:j,generateNewKey:k,recoveryPhrase:l,userKeyHash:m}=gH(),n=async()=>{e("generating");try{await k(),e("phrase")}catch(a){console.error("Failed to generate key:",a),e("intro")}},o=async()=>{l&&(await navigator.clipboard.writeText(l),i(!0),setTimeout(()=>i(!1),2e3))},p=l?.split("-").slice(0,12)||[];return"generating"===d||j?(0,M.jsx)(aJ,{}):"intro"===d?(0,M.jsxs)("div",{className:"min-h-screen flex flex-col px-6 pt-12 pb-8 safe-area-inset bg-[#F2F2F7]",children:[(0,M.jsx)("button",{onClick:c,className:"self-start text-[#007AFF] text-[17px] mb-8 ios-tap-target",children:"Zurueck"}),(0,M.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[(0,M.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6",children:(0,M.jsx)(aH,{name:"key",size:40})}),(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] font-bold text-[#1D1D1F] mb-3",children:"Erstelle deinen Vault"}),(0,M.jsx)("p",{className:"text-[17px] text-[#6E6E73] max-w-[300px] mb-8",children:"Dein persoenlicher Verschluesselungsschluessel schuetzt alle deine Fotos"}),(0,M.jsxs)("div",{className:"w-full max-w-[320px] space-y-3 mb-8",children:[(0,M.jsxs)("div",{className:"bg-white rounded-xl p-4 flex items-start gap-3",children:[(0,M.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#30D158]/10 flex items-center justify-center flex-shrink-0",children:(0,M.jsx)(gG,{className:"w-5 h-5 text-[#30D158]"})}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsx)("p",{className:"text-[15px] text-[#1D1D1F] font-medium",children:"Zero-Knowledge"}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:"Nur du kannst deine Fotos entschluesseln"})]})]}),(0,M.jsxs)("div",{className:"bg-white rounded-xl p-4 flex items-start gap-3",children:[(0,M.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#30D158]/10 flex items-center justify-center flex-shrink-0",children:(0,M.jsx)(gG,{className:"w-5 h-5 text-[#30D158]"})}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsx)("p",{className:"text-[15px] text-[#1D1D1F] font-medium",children:"Recovery-Phrase"}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:"12 Woerter zum Wiederherstellen auf neuen Geraeten"})]})]}),(0,M.jsxs)("div",{className:"bg-white rounded-xl p-4 flex items-start gap-3",children:[(0,M.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#30D158]/10 flex items-center justify-center flex-shrink-0",children:(0,M.jsx)(gG,{className:"w-5 h-5 text-[#30D158]"})}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsx)("p",{className:"text-[15px] text-[#1D1D1F] font-medium",children:"Multi-Device"}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:"Synchronisiere bis zu 3 Geraete"})]})]})]})]}),(0,M.jsx)("button",{onClick:n,className:"w-full h-[54px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-2xl ios-tap-target shadow-lg shadow-[#007AFF]/25",children:"Vault erstellen"})]}):"phrase"===d?(0,M.jsxs)("div",{className:"min-h-screen flex flex-col px-6 pt-12 pb-8 safe-area-inset bg-[#F2F2F7]",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsxs)("div",{className:"text-center mb-6",children:[(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] font-bold text-[#1D1D1F] mb-2",children:"Deine Recovery-Phrase"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73]",children:"Notiere diese Woerter sicher. Du brauchst sie zur Wiederherstellung."})]}),(0,M.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:p.map((a,b)=>(0,M.jsxs)("div",{className:"bg-white rounded-lg p-3 text-center border border-[#E5E5EA]",children:[(0,M.jsx)("span",{className:"text-[11px] text-[#8E8E93] block mb-0.5",children:b+1}),(0,M.jsx)("span",{className:"text-[14px] text-[#1D1D1F] font-mono break-all",children:a})]},b))}),(0,M.jsx)("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 py-3 text-[#007AFF] text-[15px] ios-tap-target mb-4",children:h?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(gE,{className:"w-5 h-5"}),"Kopiert!"]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(gF,{className:"w-5 h-5"}),"Phrase kopieren"]})}),(0,M.jsx)("div",{className:"bg-[#FF3B30]/10 rounded-xl p-4 mb-6",children:(0,M.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center",children:"Teile diese Woerter niemals mit anderen. Wer sie hat, kann auf deine Fotos zugreifen."})}),(0,M.jsxs)("button",{onClick:()=>g(!f),className:"w-full flex items-center gap-3 p-4 bg-white rounded-xl ios-tap-target",children:[(0,M.jsx)("div",{className:`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-colors ${f?"bg-[#007AFF] border-[#007AFF]":"border-[#C7C7CC]"}`,children:f&&(0,M.jsx)(gE,{className:"w-4 h-4 text-white"})}),(0,M.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Ich habe die Woerter sicher gespeichert"})]})]}),(0,M.jsx)("button",{onClick:()=>{m&&b(m)},disabled:!f,className:`w-full h-[54px] text-[17px] font-semibold rounded-2xl ios-tap-target transition-colors ${f?"bg-[#007AFF] text-white shadow-lg shadow-[#007AFF]/25":"bg-[#E5E5EA] text-[#8E8E93]"}`,children:"Weiter"})]}):null}let gJ=R("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),gK=R("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),gL=R("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);class gM extends Error{constructor(a,b="FunctionsError",c){super(a),this.name=b,this.context=c}}class gN extends gM{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class gO extends gM{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class gP extends gM{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}(l=A||(A={})).Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2";class gQ{constructor(b,{headers:c={},customFetch:d,region:e=A.Any}={}){this.url=b,this.headers=c,this.region=e,this.fetch=(b=>{let c;return c=b||("u"<typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)})(d)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a,b={}){var c,d,e,f,g;return d=this,e=void 0,f=void 0,g=function*(){try{let d,{headers:e,method:f,body:g}=b,h={},{region:i}=b;i||(i=this.region),i&&"any"!==i&&(h["x-region"]=i),g&&(e&&!Object.prototype.hasOwnProperty.call(e,"Content-Type")||!e)&&("u">typeof Blob&&g instanceof Blob||g instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",d=g):"string"==typeof g?(h["Content-Type"]="text/plain",d=g):"u">typeof FormData&&g instanceof FormData?d=g:(h["Content-Type"]="application/json",d=JSON.stringify(g)));let j=yield this.fetch(`${this.url}/${a}`,{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),e),body:d}).catch(a=>{throw new gN(a)}),k=j.headers.get("x-relay-error");if(k&&"true"===k)throw new gO(j);if(!j.ok)throw new gP(j);let l=(null!=(c=j.headers.get("Content-Type"))?c:"text/plain").split(";")[0].trim();return{data:"application/json"===l?yield j.json():"application/octet-stream"===l?yield j.blob():"text/event-stream"===l?j:"multipart/form-data"===l?yield j.formData():yield j.text(),error:null}}catch(a){return{data:null,error:a}}},new(f||(f=Promise))(function(a,b){function c(a){try{i(g.next(a))}catch(a){b(a)}}function h(a){try{i(g.throw(a))}catch(a){b(a)}}function i(b){var d;b.done?a(b.value):((d=b.value)instanceof f?d:new f(function(a){a(d)})).then(c,h)}i((g=g.apply(d,e||[])).next())})}}let{PostgrestClient:gR,PostgrestQueryBuilder:gS,PostgrestFilterBuilder:gT,PostgrestTransformBuilder:gU,PostgrestBuilder:gV,PostgrestError:gW}=a.i(79614).default,gX={"X-Client-Info":"realtime-js/2.11.2"};(m=B||(B={}))[m.connecting=0]="connecting",m[m.open=1]="open",m[m.closing=2]="closing",m[m.closed=3]="closed",(n=C||(C={})).closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",(o=D||(D={})).close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token",(E||(E={})).websocket="websocket",(p=F||(F={})).Connecting="connecting",p.Open="open",p.Closing="closing",p.Closed="closed";class gY{constructor(){this.HEADER_LENGTH=1}decode(a,b){return a.constructor===ArrayBuffer?b(this._binaryDecode(a)):"string"==typeof a?b(JSON.parse(a)):b({})}_binaryDecode(a){let b=new DataView(a),c=new TextDecoder;return this._decodeBroadcast(a,b,c)}_decodeBroadcast(a,b,c){let d=b.getUint8(1),e=b.getUint8(2),f=this.HEADER_LENGTH+2,g=c.decode(a.slice(f,f+d));f+=d;let h=c.decode(a.slice(f,f+e));return f+=e,{ref:null,topic:g,event:h,payload:JSON.parse(c.decode(a.slice(f,a.byteLength)))}}}class gZ{constructor(a,b){this.callback=a,this.timerCalc=b,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=b}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(q=G||(G={})).abstime="abstime",q.bool="bool",q.date="date",q.daterange="daterange",q.float4="float4",q.float8="float8",q.int2="int2",q.int4="int4",q.int4range="int4range",q.int8="int8",q.int8range="int8range",q.json="json",q.jsonb="jsonb",q.money="money",q.numeric="numeric",q.oid="oid",q.reltime="reltime",q.text="text",q.time="time",q.timestamp="timestamp",q.timestamptz="timestamptz",q.timetz="timetz",q.tsrange="tsrange",q.tstzrange="tstzrange";let g$=(a,b,c={})=>{var d;let e=null!=(d=c.skipTypes)?d:[];return Object.keys(b).reduce((c,d)=>(c[d]=g_(d,a,b,e),c),{})},g_=(a,b,c,d)=>{let e=b.find(b=>b.name===a),f=null==e?void 0:e.type,g=c[a];return f&&!d.includes(f)?g0(f,g):g1(g)},g0=(a,b)=>{if("_"===a.charAt(0))return g5(b,a.slice(1,a.length));switch(a){case G.bool:return g2(b);case G.float4:case G.float8:case G.int2:case G.int4:case G.int8:case G.numeric:case G.oid:return g3(b);case G.json:case G.jsonb:return g4(b);case G.timestamp:return g6(b);case G.abstime:case G.date:case G.daterange:case G.int4range:case G.int8range:case G.money:case G.reltime:case G.text:case G.time:case G.timestamptz:case G.timetz:case G.tsrange:case G.tstzrange:default:return g1(b)}},g1=a=>a,g2=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},g3=a=>{if("string"==typeof a){let b=parseFloat(a);if(!Number.isNaN(b))return b}return a},g4=a=>{if("string"==typeof a)try{return JSON.parse(a)}catch(a){console.log(`JSON parse error: ${a}`)}return a},g5=(a,b)=>{if("string"!=typeof a)return a;let c=a.length-1,d=a[c];if("{"===a[0]&&"}"===d){let d,e=a.slice(1,c);try{d=JSON.parse("["+e+"]")}catch(a){d=e?e.split(","):[]}return d.map(a=>g0(b,a))}return a},g6=a=>"string"==typeof a?a.replace(" ","T"):a,g7=a=>{let b=a;return(b=(b=b.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")};class g8{constructor(a,b,c={},d=1e4){this.channel=a,this.event=b,this.payload=c,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,b){var c;return this._hasReceived(a)&&b(null==(c=this.receivedResp)?void 0:c.response),this.recHooks.push({status:a,callback:b}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let a=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,b){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:b})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:b}){this.recHooks.filter(b=>b.status===a).forEach(a=>a.callback(b))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}(r=H||(H={})).SYNC="sync",r.JOIN="join",r.LEAVE="leave";class g9{constructor(a,b){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=(null==b?void 0:b.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=g9.syncState(this.state,a,b,c),this.pendingDiffs.forEach(a=>{this.state=g9.syncDiff(this.state,a,b,c)}),this.pendingDiffs=[],d()}),this.channel._on(c.diff,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=g9.syncDiff(this.state,a,b,c),d())}),this.onJoin((a,b,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:b,newPresences:c})}),this.onLeave((a,b,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:b,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,b,c,d){let e=this.cloneDeep(a),f=this.transformState(b),g={},h={};return this.map(e,(a,b)=>{f[a]||(h[a]=b)}),this.map(f,(a,b)=>{let c=e[a];if(c){let d=b.map(a=>a.presence_ref),e=c.map(a=>a.presence_ref),f=b.filter(a=>0>e.indexOf(a.presence_ref)),i=c.filter(a=>0>d.indexOf(a.presence_ref));f.length>0&&(g[a]=f),i.length>0&&(h[a]=i)}else g[a]=b}),this.syncDiff(e,{joins:g,leaves:h},c,d)}static syncDiff(a,b,c,d){let{joins:e,leaves:f}={joins:this.transformState(b.joins),leaves:this.transformState(b.leaves)};return c||(c=()=>{}),d||(d=()=>{}),this.map(e,(b,d)=>{var e;let f=null!=(e=a[b])?e:[];if(a[b]=this.cloneDeep(d),f.length>0){let c=a[b].map(a=>a.presence_ref),d=f.filter(a=>0>c.indexOf(a.presence_ref));a[b].unshift(...d)}c(b,f,d)}),this.map(f,(b,c)=>{let e=a[b];if(!e)return;let f=c.map(a=>a.presence_ref);e=e.filter(a=>0>f.indexOf(a.presence_ref)),a[b]=e,d(b,e,c),0===e.length&&delete a[b]}),a}static map(a,b){return Object.getOwnPropertyNames(a).map(c=>b(c,a[c]))}static transformState(a){return Object.getOwnPropertyNames(a=this.cloneDeep(a)).reduce((b,c)=>{let d=a[c];return"metas"in d?b[c]=d.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):b[c]=d,b},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(s=I||(I={})).ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE",(t=J||(J={})).BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system",(u=K||(K={})).SUBSCRIBED="SUBSCRIBED",u.TIMED_OUT="TIMED_OUT",u.CLOSED="CLOSED",u.CHANNEL_ERROR="CHANNEL_ERROR";class ha{constructor(a,b={config:{}},c){this.topic=a,this.params=b,this.socket=c,this.bindings={},this.state=C.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},b.config),this.timeout=this.socket.timeout,this.joinPush=new g8(this,D.join,this.params,this.timeout),this.rejoinTimer=new gZ(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=C.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=C.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=C.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=C.errored,this.rejoinTimer.scheduleTimeout())}),this._on(D.reply,{},(a,b)=>{this._trigger(this._replyEventName(b),a)}),this.presence=new g9(this),this.broadcastEndpointURL=g7(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(a,b=this.timeout){var c,d;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:e,presence:f,private:g}}=this.params;this._onError(b=>null==a?void 0:a(K.CHANNEL_ERROR,b)),this._onClose(()=>null==a?void 0:a(K.CLOSED));let h={},i={broadcast:e,presence:f,postgres_changes:null!=(d=null==(c=this.bindings.postgres_changes)?void 0:c.map(a=>a.filter))?d:[],private:g};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:i},h)),this.joinedOnce=!0,this._rejoin(b),this.joinPush.receive("ok",async({postgres_changes:b})=>{var c;if(this.socket.setAuth(),void 0===b){null==a||a(K.SUBSCRIBED);return}{let d=this.bindings.postgres_changes,e=null!=(c=null==d?void 0:d.length)?c:0,f=[];for(let c=0;c<e;c++){let e=d[c],{filter:{event:g,schema:h,table:i,filter:j}}=e,k=b&&b[c];if(k&&k.event===g&&k.schema===h&&k.table===i&&k.filter===j)f.push(Object.assign(Object.assign({},e),{id:k.id}));else{this.unsubscribe(),null==a||a(K.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,a&&a(K.SUBSCRIBED);return}}).receive("error",b=>{null==a||a(K.CHANNEL_ERROR,Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{null==a||a(K.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,b={}){return await this.send({type:"presence",event:"track",payload:a},b.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,b,c){return this._on(a,b,c)}async send(a,b={}){var c,d;if(this._canPush()||"broadcast"!==a.type)return new Promise(c=>{var d,e,f;let g=this._push(a.type,a,b.timeout||this.timeout);"broadcast"!==a.type||(null==(f=null==(e=null==(d=this.params)?void 0:d.config)?void 0:e.broadcast)?void 0:f.ack)||c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))});{let{event:e,payload:f}=a,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:f,private:this.private}]})};try{let a=await this._fetchWithTimeout(this.broadcastEndpointURL,g,null!=(c=b.timeout)?c:this.timeout);return await (null==(d=a.body)?void 0:d.cancel()),a.ok?"ok":"error"}catch(a){if("AbortError"===a.name)return"timed out";return"error"}}}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=C.leaving;let b=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(D.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(c=>{let d=new g8(this,D.leave,{},a);d.receive("ok",()=>{b(),c("ok")}).receive("timeout",()=>{b(),c("timed out")}).receive("error",()=>{c("error")}),d.send(),this._canPush()||d.trigger("ok",{})})}async _fetchWithTimeout(a,b,c){let d=new AbortController,e=setTimeout(()=>d.abort(),c),f=await this.socket.fetch(a,Object.assign(Object.assign({},b),{signal:d.signal}));return clearTimeout(e),f}_push(a,b,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new g8(this,a,b,c);return this._canPush()?d.send():(d.startTimeout(),this.pushBuffer.push(d)),d}_onMessage(a,b,c){return b}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,b,c){var d,e;let f=a.toLocaleLowerCase(),{close:g,error:h,leave:i,join:j}=D;if(c&&[g,h,i,j].indexOf(f)>=0&&c!==this._joinRef())return;let k=this._onMessage(f,b,c);if(b&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?null==(d=this.bindings.postgres_changes)||d.filter(a=>{var b,c,d;return(null==(b=a.filter)?void 0:b.event)==="*"||(null==(d=null==(c=a.filter)?void 0:c.event)?void 0:d.toLocaleLowerCase())===f}).map(a=>a.callback(k,c)):null==(e=this.bindings[f])||e.filter(a=>{var c,d,e,g,h,i;if(!["broadcast","presence","postgres_changes"].includes(f))return a.type.toLocaleLowerCase()===f;if("id"in a){let f=a.id,g=null==(c=a.filter)?void 0:c.event;return f&&(null==(d=b.ids)?void 0:d.includes(f))&&("*"===g||(null==g?void 0:g.toLocaleLowerCase())===(null==(e=b.data)?void 0:e.type.toLocaleLowerCase()))}{let c=null==(h=null==(g=null==a?void 0:a.filter)?void 0:g.event)?void 0:h.toLocaleLowerCase();return"*"===c||c===(null==(i=null==b?void 0:b.event)?void 0:i.toLocaleLowerCase())}}).map(a=>{if("object"==typeof k&&"ids"in k){let a=k.data,{schema:b,table:c,commit_timestamp:d,type:e,errors:f}=a;k=Object.assign(Object.assign({},{schema:b,table:c,commit_timestamp:d,eventType:e,new:{},old:{},errors:f}),this._getPayloadRecords(a))}a.callback(k,c)})}_isClosed(){return this.state===C.closed}_isJoined(){return this.state===C.joined}_isJoining(){return this.state===C.joining}_isLeaving(){return this.state===C.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,b,c){let d=a.toLocaleLowerCase(),e={type:d,filter:b,callback:c};return this.bindings[d]?this.bindings[d].push(e):this.bindings[d]=[e],this}_off(a,b){let c=a.toLocaleLowerCase();return this.bindings[c]=this.bindings[c].filter(a=>{var d;return!((null==(d=a.type)?void 0:d.toLocaleLowerCase())===c&&ha.isEqual(a.filter,b))}),this}static isEqual(a,b){if(Object.keys(a).length!==Object.keys(b).length)return!1;for(let c in a)if(a[c]!==b[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(D.close,{},a)}_onError(a){this._on(D.error,{},b=>a(b))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=C.joining,this.joinPush.resend(a))}_getPayloadRecords(a){let b={new:{},old:{}};return("INSERT"===a.type||"UPDATE"===a.type)&&(b.new=g$(a.columns,a.record)),("UPDATE"===a.type||"DELETE"===a.type)&&(b.old=g$(a.columns,a.old_record)),b}}let hb=()=>{},hc="u">typeof WebSocket,hd=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class he{constructor(b,c){var d;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=gX,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=hb,this.conn=null,this.sendBuffer=[],this.serializer=new gY,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=b=>{let c;return c=b||("u"<typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)},this.endPoint=`${b}/${E.websocket}`,this.httpEndpoint=g7(b),(null==c?void 0:c.transport)?this.transport=c.transport:this.transport=null,(null==c?void 0:c.params)&&(this.params=c.params),(null==c?void 0:c.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),c.headers)),(null==c?void 0:c.timeout)&&(this.timeout=c.timeout),(null==c?void 0:c.logger)&&(this.logger=c.logger),(null==c?void 0:c.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=c.heartbeatIntervalMs);const e=null==(d=null==c?void 0:c.params)?void 0:d.apikey;e&&(this.accessTokenValue=e,this.apiKey=e),this.reconnectAfterMs=(null==c?void 0:c.reconnectAfterMs)?c.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=(null==c?void 0:c.encode)?c.encode:(a,b)=>b(JSON.stringify(a)),this.decode=(null==c?void 0:c.decode)?c.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new gZ(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==c?void 0:c.fetch),(null==c?void 0:c.worker)&&(this.worker=(null==c?void 0:c.worker)||!1,this.workerUrl=null==c?void 0:c.workerUrl),this.accessToken=(null==c?void 0:c.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(hc){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new hf(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),a.A(12079).then(({default:a})=>{this.conn=new a(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(a,b){this.conn&&(this.conn.onclose=function(){},a?this.conn.close(a,null!=b?b:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(a){let b=await a.unsubscribe();return 0===this.channels.length&&this.disconnect(),b}async removeAllChannels(){let a=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.disconnect(),a}log(a,b,c){this.logger(a,b,c)}connectionState(){switch(this.conn&&this.conn.readyState){case B.connecting:return F.Connecting;case B.open:return F.Open;case B.closing:return F.Closing;default:return F.Closed}}isConnected(){return this.connectionState()===F.Open}channel(a,b={config:{}}){let c=new ha(`realtime:${a}`,b,this);return this.channels.push(c),c}push(a){let{topic:b,event:c,payload:d,ref:e}=a,f=()=>{this.encode(a,a=>{var b;null==(b=this.conn)||b.send(a)})};this.log("push",`${b} ${c} (${e})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){let b=a||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(b){let a=null;try{a=JSON.parse(atob(b.split(".")[1]))}catch(a){}if(a&&a.exp&&!(Math.floor(Date.now()/1e3)-a.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`);this.accessTokenValue=b,this.channels.forEach(a=>{b&&a.updateJoinPayload({access_token:b}),a.joinedOnce&&a._isJoined()&&a._push(D.access_token,{access_token:b})})}}async sendHeartbeat(){var a;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),null==(a=this.conn)||a.close(1e3,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let b=this.channels.find(b=>b.topic===a&&(b._isJoined()||b._isJoining()));b&&(this.log("transport",`leaving duplicate topic "${a}"`),b.unsubscribe())}_remove(a){this.channels=this.channels.filter(b=>b._joinRef()!==a._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_onConnMessage(a){this.decode(a.data,a=>{let{topic:b,event:c,payload:d,ref:e}=a;e&&e===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${d.status||""} ${b} ${c} ${e&&"("+e+")"||""}`,d),this.channels.filter(a=>a._isMember(b)).forEach(a=>a._trigger(c,d,e)),this.stateChangeCallbacks.message.forEach(b=>b(a))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{"keepAlive"===a.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach(a=>a())}_onConnClose(a){this.log("transport","close",a),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(b=>b(a))}_onConnError(a){this.log("transport",a.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(b=>b(a))}_triggerChanError(){this.channels.forEach(a=>a._trigger(D.error))}_appendParams(a,b){if(0===Object.keys(b).length)return a;let c=a.match(/\?/)?"&":"?",d=new URLSearchParams(b);return`${a}${c}${d}`}_workerObjectUrl(a){let b;if(a)b=a;else{let a=new Blob([hd],{type:"application/javascript"});b=URL.createObjectURL(a)}return b}}class hf{constructor(a,b,c){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=B.connecting,this.send=()=>{},this.url=null,this.url=a,this.close=c.close}}class hg extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function hh(a){return"object"==typeof a&&null!==a&&"__isStorageError"in a}class hi extends hg{constructor(a,b){super(a),this.name="StorageApiError",this.status=b}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class hj extends hg{constructor(a,b){super(a),this.name="StorageUnknownError",this.originalError=b}}let hk=b=>{let c;return c=b||("u"<typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)},hl=a=>{if(Array.isArray(a))return a.map(a=>hl(a));if("function"==typeof a||a!==Object(a))return a;let b={};return Object.entries(a).forEach(([a,c])=>{b[a.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""))]=hl(c)}),b};var hm=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};let hn=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a);function ho(b,c,d,e,f,g){return hm(this,void 0,void 0,function*(){return new Promise((h,i)=>{let j;b(d,(j={method:c,headers:(null==e?void 0:e.headers)||{}},"GET"===c?j:(j.headers=Object.assign({"Content-Type":"application/json"},null==e?void 0:e.headers),g&&(j.body=JSON.stringify(g)),Object.assign(Object.assign({},j),f)))).then(a=>{if(!a.ok)throw a;return(null==e?void 0:e.noResolveJson)?a:a.json()}).then(a=>h(a)).catch(b=>hm(void 0,void 0,void 0,function*(){var c,d,f,g;let h=yield(c=void 0,d=void 0,f=void 0,g=function*(){return"u"<typeof Response?(yield a.A(59789)).Response:Response},new(f||(f=Promise))(function(a,b){function e(a){try{i(g.next(a))}catch(a){b(a)}}function h(a){try{i(g.throw(a))}catch(a){b(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof f?c:new f(function(a){a(c)})).then(e,h)}i((g=g.apply(c,d||[])).next())}));b instanceof h&&!(null==e?void 0:e.noResolveJson)?b.json().then(a=>{i(new hi(hn(a),b.status||500))}).catch(a=>{i(new hj(hn(a),a))}):i(new hj(hn(b),b))}))})})}function hp(a,b,c,d){return hm(this,void 0,void 0,function*(){return ho(a,"GET",b,c,d)})}function hq(a,b,c,d,e){return hm(this,void 0,void 0,function*(){return ho(a,"POST",b,d,e,c)})}function hr(a,b,c,d,e){return hm(this,void 0,void 0,function*(){return ho(a,"DELETE",b,d,e,c)})}var hs=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};let ht={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hv{constructor(a,b={},c,d){this.url=a,this.headers=b,this.bucketId=c,this.fetch=hk(d)}uploadOrUpdate(a,b,c,d){return hs(this,void 0,void 0,function*(){try{let e,f=Object.assign(Object.assign({},hu),d),g=Object.assign(Object.assign({},this.headers),"POST"===a&&{"x-upsert":String(f.upsert)}),h=f.metadata;"u">typeof Blob&&c instanceof Blob?((e=new FormData).append("cacheControl",f.cacheControl),h&&e.append("metadata",this.encodeMetadata(h)),e.append("",c)):"u">typeof FormData&&c instanceof FormData?((e=c).append("cacheControl",f.cacheControl),h&&e.append("metadata",this.encodeMetadata(h))):(e=c,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,h&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),(null==d?void 0:d.headers)&&(g=Object.assign(Object.assign({},g),d.headers));let i=this._removeEmptyFolders(b),j=this._getFinalPath(i),k=yield this.fetch(`${this.url}/object/${j}`,Object.assign({method:a,body:e,headers:g},(null==f?void 0:f.duplex)?{duplex:f.duplex}:{})),l=yield k.json();if(k.ok)return{data:{path:i,id:l.Id,fullPath:l.Key},error:null};return{data:null,error:l}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}upload(a,b,c){return hs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,b,c)})}uploadToSignedUrl(a,b,c,d){return hs(this,void 0,void 0,function*(){let e=this._removeEmptyFolders(a),f=this._getFinalPath(e),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",b);try{let a,b=Object.assign({upsert:hu.upsert},d),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(b.upsert)});"u">typeof Blob&&c instanceof Blob?((a=new FormData).append("cacheControl",b.cacheControl),a.append("",c)):"u">typeof FormData&&c instanceof FormData?(a=c).append("cacheControl",b.cacheControl):(a=c,f["cache-control"]=`max-age=${b.cacheControl}`,f["content-type"]=b.contentType);let h=yield this.fetch(g.toString(),{method:"PUT",body:a,headers:f}),i=yield h.json();if(h.ok)return{data:{path:e,fullPath:i.Key},error:null};return{data:null,error:i}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(a,b){return hs(this,void 0,void 0,function*(){try{let c=this._getFinalPath(a),d=Object.assign({},this.headers);(null==b?void 0:b.upsert)&&(d["x-upsert"]="true");let e=yield hq(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:d}),f=new URL(this.url+e.url),g=f.searchParams.get("token");if(!g)throw new hg("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:g},error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}update(a,b,c){return hs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,b,c)})}move(a,b,c){return hs(this,void 0,void 0,function*(){try{return{data:yield hq(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}copy(a,b,c){return hs(this,void 0,void 0,function*(){try{return{data:{path:(yield hq(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}createSignedUrl(a,b,c){return hs(this,void 0,void 0,function*(){try{let d=this._getFinalPath(a),e=yield hq(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:b},(null==c?void 0:c.transform)?{transform:c.transform}:{}),{headers:this.headers}),f=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:e={signedUrl:encodeURI(`${this.url}${e.signedURL}${f}`)},error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}createSignedUrls(a,b,c){return hs(this,void 0,void 0,function*(){try{let d=yield hq(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:b,paths:a},{headers:this.headers}),e=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:d.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${e}`):null})),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}download(a,b){return hs(this,void 0,void 0,function*(){let c=void 0!==(null==b?void 0:b.transform),d=this.transformOptsToQueryString((null==b?void 0:b.transform)||{}),e=d?`?${d}`:"";try{let b=this._getFinalPath(a),d=yield hp(this.fetch,`${this.url}/${c?"render/image/authenticated":"object"}/${b}${e}`,{headers:this.headers,noResolveJson:!0});return{data:yield d.blob(),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}info(a){return hs(this,void 0,void 0,function*(){let b=this._getFinalPath(a);try{let a=yield hp(this.fetch,`${this.url}/object/info/${b}`,{headers:this.headers});return{data:hl(a),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}exists(a){return hs(this,void 0,void 0,function*(){let b=this._getFinalPath(a);try{return yield function(a,b,c,d){return hm(this,void 0,void 0,function*(){return ho(a,"HEAD",b,Object.assign(Object.assign({},c),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${b}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(hh(a)&&a instanceof hj){let b=a.originalError;if([400,404].includes(null==b?void 0:b.status))return{data:!1,error:a}}throw a}})}getPublicUrl(a,b){let c=this._getFinalPath(a),d=[],e=(null==b?void 0:b.download)?`download=${!0===b.download?"":b.download}`:"";""!==e&&d.push(e);let f=void 0!==(null==b?void 0:b.transform),g=this.transformOptsToQueryString((null==b?void 0:b.transform)||{});""!==g&&d.push(g);let h=d.join("&");return""!==h&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${f?"render/image":"object"}/public/${c}${h}`)}}}remove(a){return hs(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}list(a,b,c){return hs(this,void 0,void 0,function*(){try{let d=Object.assign(Object.assign(Object.assign({},ht),b),{prefix:a||""});return{data:yield hq(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},c),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return"u">typeof Buffer?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){let b=[];return a.width&&b.push(`width=${a.width}`),a.height&&b.push(`height=${a.height}`),a.resize&&b.push(`resize=${a.resize}`),a.format&&b.push(`format=${a.format}`),a.quality&&b.push(`quality=${a.quality}`),b.join("&")}}let hw={"X-Client-Info":"storage-js/2.7.1"};var hx=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};class hy{constructor(a,b={},c){this.url=a,this.headers=Object.assign(Object.assign({},hw),b),this.fetch=hk(c)}listBuckets(){return hx(this,void 0,void 0,function*(){try{return{data:yield hp(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}getBucket(a){return hx(this,void 0,void 0,function*(){try{return{data:yield hp(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}createBucket(a,b={public:!1}){return hx(this,void 0,void 0,function*(){try{return{data:yield hq(this.fetch,`${this.url}/bucket`,{id:a,name:a,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}updateBucket(a,b){return hx(this,void 0,void 0,function*(){try{return{data:yield function(a,b,c,d,e){return hm(this,void 0,void 0,function*(){return ho(a,"PUT",b,d,void 0,c)})}(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}emptyBucket(a){return hx(this,void 0,void 0,function*(){try{return{data:yield hq(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}deleteBucket(a){return hx(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(a){if(hh(a))return{data:null,error:a};throw a}})}}class hz extends hy{constructor(a,b={},c){super(a,b,c)}from(a){return new hv(this.url,this.headers,a,this.fetch)}}let hA="";hA="u">typeof Deno?"deno":"u">typeof document?"web":"u">typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let hB={headers:{"X-Client-Info":`supabase-js-${hA}/2.48.1`}},hC={schema:"public"},hD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hE={};var hF=a.i(23952);let hG="2.67.3",hH={"X-Client-Info":`gotrue-js/${hG}`},hI="X-Supabase-Api-Version",hJ={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hK=b=>{let c;return c=b||("u"<typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)},hL=async(a,b,c)=>{await a.setItem(b,JSON.stringify(c))},hM=async(a,b)=>{let c=await a.getItem(b);if(!c)return null;try{return JSON.parse(c)}catch(a){return c}},hN=async(a,b)=>{await a.removeItem(b)};class hO{constructor(){this.promise=new hO.promiseConstructor((a,b)=>{this.resolve=a,this.reject=b})}}function hP(a){let b=a.split(".");if(3!==b.length)throw Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(b[1]))throw Error("JWT is not valid: payload is not in base64url format");return JSON.parse(function(a){let b,c,d,e,f,g,h,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j="",k=0;for(a=a.replace("-","+").replace("_","/");k<a.length;)e=i.indexOf(a.charAt(k++)),f=i.indexOf(a.charAt(k++)),g=i.indexOf(a.charAt(k++)),h=i.indexOf(a.charAt(k++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,j+=String.fromCharCode(b),64!=g&&0!=c&&(j+=String.fromCharCode(c)),64!=h&&0!=d&&(j+=String.fromCharCode(d));return j}(b[1]))}async function hQ(a){return await new Promise(b=>{setTimeout(()=>b(null),a)})}function hR(a){return("0"+a.toString(16)).substr(-2)}async function hS(a){let b=new TextEncoder().encode(a);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>String.fromCharCode(a)).join("")}async function hT(a){return"u">typeof crypto&&void 0!==crypto.subtle&&"u">typeof TextEncoder?btoa(await hS(a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a)}async function hU(a,b,c=!1){let d=function(){let a=new Uint32Array(56);if("u"<typeof crypto){let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",b=a.length,c="";for(let d=0;d<56;d++)c+=a.charAt(Math.floor(Math.random()*b));return c}return crypto.getRandomValues(a),Array.from(a,hR).join("")}(),e=d;c&&(e+="/PASSWORD_RECOVERY"),await hL(a,`${b}-code-verifier`,e);let f=await hT(d),g=d===f?"plain":"s256";return[f,g]}hO.promiseConstructor=Promise;let hV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class hW extends Error{constructor(a,b,c){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=b,this.code=c}}function hX(a){return"object"==typeof a&&null!==a&&"__isAuthError"in a}class hY extends hW{constructor(a,b,c){super(a,b,c),this.name="AuthApiError",this.status=b,this.code=c}}class hZ extends hW{constructor(a,b){super(a),this.name="AuthUnknownError",this.originalError=b}}class h$ extends hW{constructor(a,b,c,d){super(a,c,d),this.name=b,this.status=c}}class h_ extends h${constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class h0 extends h${constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class h1 extends h${constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class h2 extends h${constructor(a,b=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=b}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class h3 extends h${constructor(a,b){super(a,"AuthRetryableFetchError",b,void 0)}}function h4(a){return hX(a)&&"AuthRetryableFetchError"===a.name}class h5 extends h${constructor(a,b,c){super(a,"AuthWeakPasswordError",b,"weak_password"),this.reasons=c}}var h6=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};let h7=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),h8=[502,503,504];async function h9(a){var b;let c,d;if(!("object"==typeof a&&null!==a&&"status"in a&&"ok"in a&&"json"in a&&"function"==typeof a.json))throw new h3(h7(a),0);if(h8.includes(a.status))throw new h3(h7(a),a.status);try{c=await a.json()}catch(a){throw new hZ(h7(a),a)}let e=function(a){let b=a.headers.get(hI);if(!b||!b.match(hV))return null;try{return new Date(`${b}T00:00:00.0Z`)}catch(a){return null}}(a);if(e&&e.getTime()>=hJ["2024-01-01"].timestamp&&"object"==typeof c&&c&&"string"==typeof c.code?d=c.code:"object"==typeof c&&c&&"string"==typeof c.error_code&&(d=c.error_code),d){if("weak_password"===d)throw new h5(h7(c),a.status,(null==(b=c.weak_password)?void 0:b.reasons)||[]);else if("session_not_found"===d)throw new h_}else if("object"==typeof c&&c&&"object"==typeof c.weak_password&&c.weak_password&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0))throw new h5(h7(c),a.status,c.weak_password.reasons);throw new hY(h7(c),a.status||500,d)}async function ia(a,b,c,d){var e;let f=Object.assign({},null==d?void 0:d.headers);f[hI]||(f[hI]=hJ["2024-01-01"].name),(null==d?void 0:d.jwt)&&(f.Authorization=`Bearer ${d.jwt}`);let g=null!=(e=null==d?void 0:d.query)?e:{};(null==d?void 0:d.redirectTo)&&(g.redirect_to=d.redirectTo);let h=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",i=await ib(a,b,c+h,{headers:f,noResolveJson:null==d?void 0:d.noResolveJson},{},null==d?void 0:d.body);return(null==d?void 0:d.xform)?null==d?void 0:d.xform(i):{data:Object.assign({},i),error:null}}async function ib(a,b,c,d,e,f){let g,h,i=(h={method:b,headers:(null==d?void 0:d.headers)||{}},"GET"===b?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==d?void 0:d.headers),h.body=JSON.stringify(f),Object.assign(Object.assign({},h),e)));try{g=await a(c,Object.assign({},i))}catch(a){throw console.error(a),new h3(h7(a),0)}if(g.ok||await h9(g),null==d?void 0:d.noResolveJson)return g;try{return await g.json()}catch(a){await h9(a)}}function ic(a){var b,c,d;let e=null;(d=a).access_token&&d.refresh_token&&d.expires_in&&(e=Object.assign({},a),a.expires_at||(e.expires_at=(c=a.expires_in,Math.round(Date.now()/1e3)+c)));return{data:{session:e,user:null!=(b=a.user)?b:a},error:null}}function id(a){let b=ic(a);return!b.error&&a.weak_password&&"object"==typeof a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&"string"==typeof a.weak_password.message&&a.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0)&&(b.data.weak_password=a.weak_password),b}function ie(a){var b;return{data:{user:null!=(b=a.user)?b:a},error:null}}function ig(a){return{data:a,error:null}}function ih(a){let{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f}=a;return{data:{properties:{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f},user:Object.assign({},h6(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function ii(a){return a}var ij=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};class ik{constructor({url:a="",headers:b={},fetch:c}){this.url=a,this.headers=b,this.fetch=hK(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(a,b="global"){try{return await ia(this.fetch,"POST",`${this.url}/logout?scope=${b}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(a){if(hX(a))return{data:null,error:a};throw a}}async inviteUserByEmail(a,b={}){try{return await ia(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:b.data},headers:this.headers,redirectTo:b.redirectTo,xform:ie})}catch(a){if(hX(a))return{data:{user:null},error:a};throw a}}async generateLink(a){try{let{options:b}=a,c=ij(a,["options"]),d=Object.assign(Object.assign({},c),b);return"newEmail"in c&&(d.new_email=null==c?void 0:c.newEmail,delete d.newEmail),await ia(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:ih,redirectTo:null==b?void 0:b.redirectTo})}catch(a){if(hX(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(a){try{return await ia(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:ie})}catch(a){if(hX(a))return{data:{user:null},error:a};throw a}}async listUsers(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await ia(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:ii});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(hX(a))return{data:{users:[]},error:a};throw a}}async getUserById(a){try{return await ia(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:ie})}catch(a){if(hX(a))return{data:{user:null},error:a};throw a}}async updateUserById(a,b){try{return await ia(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:b,headers:this.headers,xform:ie})}catch(a){if(hX(a))return{data:{user:null},error:a};throw a}}async deleteUser(a,b=!1){try{return await ia(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:b},xform:ie})}catch(a){if(hX(a))return{data:{user:null},error:a};throw a}}async _listFactors(a){try{let{data:b,error:c}=await ia(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:b,error:c}}catch(a){if(hX(a))return{data:null,error:a};throw a}}async _deleteFactor(a){try{return{data:await ia(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(a){if(hX(a))return{data:null,error:a};throw a}}}let il={getItem:a=>null,setItem:(a,b)=>{},removeItem:a=>{}};function im(a={}){return{getItem:b=>a[b]||null,setItem:(b,c)=>{a[b]=c},removeItem:b=>{delete a[b]}}}globalThis;class io extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(a){"u">typeof self&&(self.globalThis=self)}let ip={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hH,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function iq(a,b,c){return await c()}class ir{constructor(a){this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ir.nextInstanceID,ir.nextInstanceID+=1,this.instanceID;const b=Object.assign(Object.assign({},ip),a);this.logDebugMessages=!!b.debug,"function"==typeof b.debug&&(this.logger=b.debug),this.persistSession=b.persistSession,this.storageKey=b.storageKey,this.autoRefreshToken=b.autoRefreshToken,this.admin=new ik({url:b.url,headers:b.headers,fetch:b.fetch}),this.url=b.url,this.headers=b.headers,this.fetch=hK(b.fetch),this.lock=b.lock||iq,this.detectSessionInUrl=b.detectSessionInUrl,this.flowType=b.flowType,this.hasCustomAuthorizationHeader=b.hasCustomAuthorizationHeader,b.lock?this.lock=b.lock:this.lock=iq,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?b.storage?this.storage=b.storage:(this.memoryStorage={},this.storage=im(this.memoryStorage)):(this.memoryStorage={},this.storage=im(this.memoryStorage)),this.initialize()}_debug(...a){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hG}) ${new Date().toISOString()}`,...a),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){try{let a=function(a){let b={},c=new URL(a);if(c.hash&&"#"===c.hash[0])try{new URLSearchParams(c.hash.substring(1)).forEach((a,c)=>{b[c]=a})}catch(a){}return c.searchParams.forEach((a,c)=>{b[c]=a}),b}(window.location.href);return this._isImplicitGrantCallback(a)||await this._isPKCECallback(a),await this._recoverAndRefresh(),{error:null}}catch(a){if(hX(a))return{error:a};return{error:new hZ("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var b,c,d;try{let{data:e,error:f}=await ia(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(c=null==(b=null==a?void 0:a.options)?void 0:b.data)?c:{},gotrue_meta_security:{captcha_token:null==(d=null==a?void 0:a.options)?void 0:d.captchaToken}},xform:ic});if(f||!e)return{data:{user:null,session:null},error:f};let g=e.session,h=e.user;return e.session&&(await this._saveSession(e.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:h,session:g},error:null}}catch(a){if(hX(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(a){var b,c,d;try{let e;if("email"in a){let{email:c,password:d,options:f}=a,g=null,h=null;"pkce"===this.flowType&&([g,h]=await hU(this.storage,this.storageKey)),e=await ia(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==f?void 0:f.emailRedirectTo,body:{email:c,password:d,data:null!=(b=null==f?void 0:f.data)?b:{},gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken},code_challenge:g,code_challenge_method:h},xform:ic})}else if("phone"in a){let{phone:b,password:f,options:g}=a;e=await ia(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:f,data:null!=(c=null==g?void 0:g.data)?c:{},channel:null!=(d=null==g?void 0:g.channel)?d:"sms",gotrue_meta_security:{captcha_token:null==g?void 0:g.captchaToken}},xform:ic})}else throw new h1("You must provide either an email or phone number and a password");let{data:f,error:g}=e;if(g||!f)return{data:{user:null,session:null},error:g};let h=f.session,i=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:i,session:h},error:null}}catch(a){if(hX(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(a){try{let b;if("email"in a){let{email:c,password:d,options:e}=a;b=await ia(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:id})}else if("phone"in a){let{phone:c,password:d,options:e}=a;b=await ia(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:id})}else throw new h1("You must provide either an email or phone number and a password");let{data:c,error:d}=b;if(d)return{data:{user:null,session:null},error:d};if(!c||!c.session||!c.user)return{data:{user:null,session:null},error:new h0};return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:d}}catch(a){if(hX(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(a){var b,c,d,e;return await this._handleProviderSignIn(a.provider,{redirectTo:null==(b=a.options)?void 0:b.redirectTo,scopes:null==(c=a.options)?void 0:c.scopes,queryParams:null==(d=a.options)?void 0:d.queryParams,skipBrowserRedirect:null==(e=a.options)?void 0:e.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async _exchangeCodeForSession(a){let b=await hM(this.storage,`${this.storageKey}-code-verifier`),[c,d]=(null!=b?b:"").split("/");try{let{data:b,error:e}=await ia(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:c},xform:ic});if(await hN(this.storage,`${this.storageKey}-code-verifier`),e)throw e;if(!b||!b.session||!b.user)return{data:{user:null,session:null,redirectType:null},error:new h0};return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign(Object.assign({},b),{redirectType:null!=d?d:null}),error:e}}catch(a){if(hX(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(a){try{let{options:b,provider:c,token:d,access_token:e,nonce:f}=a,{data:g,error:h}=await ia(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:d,access_token:e,nonce:f,gotrue_meta_security:{captcha_token:null==b?void 0:b.captchaToken}},xform:ic});if(h)return{data:{user:null,session:null},error:h};if(!g||!g.session||!g.user)return{data:{user:null,session:null},error:new h0};return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:h}}catch(a){if(hX(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(a){var b,c,d,e,f;try{if("email"in a){let{email:d,options:e}=a,f=null,g=null;"pkce"===this.flowType&&([f,g]=await hU(this.storage,this.storageKey));let{error:h}=await ia(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:null!=(b=null==e?void 0:e.data)?b:{},create_user:null==(c=null==e?void 0:e.shouldCreateUser)||c,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:null==e?void 0:e.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in a){let{phone:b,options:c}=a,{data:g,error:h}=await ia(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:null!=(d=null==c?void 0:c.data)?d:{},create_user:null==(e=null==c?void 0:c.shouldCreateUser)||e,gotrue_meta_security:{captcha_token:null==c?void 0:c.captchaToken},channel:null!=(f=null==c?void 0:c.channel)?f:"sms"}});return{data:{user:null,session:null,messageId:null==g?void 0:g.message_id},error:h}}throw new h1("You must provide either an email or phone number.")}catch(a){if(hX(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(a){var b,c;try{let d,e;"options"in a&&(d=null==(b=a.options)?void 0:b.redirectTo,e=null==(c=a.options)?void 0:c.captchaToken);let{data:f,error:g}=await ia(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:e}}),redirectTo:d,xform:ic});if(g)throw g;if(!f)throw Error("An error occurred on token verification.");let h=f.session,i=f.user;return(null==h?void 0:h.access_token)&&(await this._saveSession(h),await this._notifyAllSubscribers("recovery"==a.type?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:i,session:h},error:null}}catch(a){if(hX(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(a){var b,c,d;try{let e=null,f=null;return"pkce"===this.flowType&&([e,f]=await hU(this.storage,this.storageKey)),await ia(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:null!=(c=null==(b=a.options)?void 0:b.redirectTo)?c:void 0}),(null==(d=null==a?void 0:a.options)?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:e,code_challenge_method:f}),headers:this.headers,xform:ig})}catch(a){if(hX(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{let{data:{session:b},error:c}=a;if(c)throw c;if(!b)throw new h_;let{error:d}=await ia(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:b.access_token});return{data:{user:null,session:null},error:d}})}catch(a){if(hX(a))return{data:{user:null,session:null},error:a};throw a}}async resend(a){try{let b=`${this.url}/resend`;if("email"in a){let{email:c,type:d,options:e}=a,{error:f}=await ia(this.fetch,"POST",b,{headers:this.headers,body:{email:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},redirectTo:null==e?void 0:e.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in a){let{phone:c,type:d,options:e}=a,{data:f,error:g}=await ia(this.fetch,"POST",b,{headers:this.headers,body:{phone:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}}});return{data:{user:null,session:null,messageId:null==f?void 0:f.message_id},error:g}}throw new h1("You must provide either an email or phone number and a type")}catch(a){if(hX(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(a,b){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){let a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await a,await b()))();return this.pendingInLock.push((async()=>{try{await c}catch(a){}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let a=b();for(this.pendingInLock.push((async()=>{try{await a}catch(a){}})()),await a;this.pendingInLock.length;){let a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{let b=await this.__loadSession();return await a(b)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let a=null,b=await hM(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",b),null!==b&&(this._isValidSession(b)?a=b:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};let c=!!a.expires_at&&a.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",a.expires_at),!c){if(this.storage.isServer){let b=this.suppressGetSessionWarning;a=new Proxy(a,{get:(a,c,d)=>(b||"user"!==c||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),b=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,c,d))})}return{data:{session:a},error:null}}let{session:d,error:e}=await this._callRefreshToken(a.refresh_token);if(e)return{data:{session:null},error:e};return{data:{session:d},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{if(a)return await ia(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:ie});return await this._useSession(async a=>{var b,c,d;let{data:e,error:f}=a;if(f)throw f;return(null==(b=e.session)?void 0:b.access_token)||this.hasCustomAuthorizationHeader?await ia(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0,xform:ie}):{data:{user:null},error:new h_}})}catch(a){if(hX(a))return hX(a)&&"AuthSessionMissingError"===a.name&&(await this._removeSession(),await hN(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(a,b={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,b))}async _updateUser(a,b={}){try{return await this._useSession(async c=>{let{data:d,error:e}=c;if(e)throw e;if(!d.session)throw new h_;let f=d.session,g=null,h=null;"pkce"===this.flowType&&null!=a.email&&([g,h]=await hU(this.storage,this.storageKey));let{data:i,error:j}=await ia(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==b?void 0:b.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:h}),jwt:f.access_token,xform:ie});if(j)throw j;return f.user=i.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(a){if(hX(a))return{data:{user:null},error:a};throw a}}_decodeJWT(a){return hP(a)}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new h_;let b=Date.now()/1e3,c=b,d=!0,e=null,f=hP(a.access_token);if(f.exp&&(d=(c=f.exp)<=b),d){let{session:b,error:c}=await this._callRefreshToken(a.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!b)return{data:{user:null,session:null},error:null};e=b}else{let{data:d,error:f}=await this._getUser(a.access_token);if(f)throw f;e={access_token:a.access_token,refresh_token:a.refresh_token,user:d.user,token_type:"bearer",expires_in:c-b,expires_at:c},await this._saveSession(e),await this._notifyAllSubscribers("SIGNED_IN",e)}return{data:{user:e.user,session:e},error:null}}catch(a){if(hX(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async b=>{var c;if(!a){let{data:d,error:e}=b;if(e)throw e;a=null!=(c=d.session)?c:void 0}if(!(null==a?void 0:a.refresh_token))throw new h_;let{session:d,error:e}=await this._callRefreshToken(a.refresh_token);return e?{data:{user:null,session:null},error:e}:d?{data:{user:d.user,session:d},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(hX(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(a,b){try{throw new h2("No browser detected.")}catch(a){if(hX(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){let b=await hM(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&b)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return{error:e};let f=null==(c=d.session)?void 0:c.access_token;if(f){let{error:b}=await this.admin.signOut(f,a);if(b&&!(hX(b)&&"AuthApiError"===b.name&&(404===b.status||401===b.status||403===b.status)))return{error:b}}return"others"!==a&&(await this._removeSession(),await hN(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(a){let b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){let b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)}),c={id:b,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",b),this.stateChangeEmitters.delete(b)}};return this._debug("#onAuthStateChange()","registered callback with id",b),this.stateChangeEmitters.set(b,c),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(b)})})(),{data:{subscription:c}}}async _emitInitialSession(a){return await this._useSession(async b=>{var c,d;try{let{data:{session:d},error:e}=b;if(e)throw e;await (null==(c=this.stateChangeEmitters.get(a))?void 0:c.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",a,"session",d)}catch(b){await (null==(d=this.stateChangeEmitters.get(a))?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",b),console.error(b)}})}async resetPasswordForEmail(a,b={}){let c=null,d=null;"pkce"===this.flowType&&([c,d]=await hU(this.storage,this.storageKey,!0));try{return await ia(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:c,code_challenge_method:d,gotrue_meta_security:{captcha_token:b.captchaToken}},headers:this.headers,redirectTo:b.redirectTo})}catch(a){if(hX(a))return{data:null,error:a};throw a}}async getUserIdentities(){var a;try{let{data:b,error:c}=await this.getUser();if(c)throw c;return{data:{identities:null!=(a=b.user.identities)?a:[]},error:null}}catch(a){if(hX(a))return{data:null,error:a};throw a}}async linkIdentity(a){try{let{data:b,error:c}=await this._useSession(async b=>{var c,d,e,f,g;let{data:h,error:i}=b;if(i)throw i;let j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:null==(c=a.options)?void 0:c.redirectTo,scopes:null==(d=a.options)?void 0:d.scopes,queryParams:null==(e=a.options)?void 0:e.queryParams,skipBrowserRedirect:!0});return await ia(this.fetch,"GET",j,{headers:this.headers,jwt:null!=(g=null==(f=h.session)?void 0:f.access_token)?g:void 0})});if(c)throw c;return{data:{provider:a.provider,url:null==b?void 0:b.url},error:null}}catch(b){if(hX(b))return{data:{provider:a.provider,url:null},error:b};throw b}}async unlinkIdentity(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)throw f;return await ia(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0})})}catch(a){if(hX(a))return{data:null,error:a};throw a}}async _refreshAccessToken(a){let b=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(b,"begin");try{var c,d;let e=Date.now();return await (c=async c=>(c>0&&await hQ(200*Math.pow(2,c-1)),this._debug(b,"refreshing attempt",c),await ia(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:ic})),d=(a,b)=>{let c=200*Math.pow(2,a);return b&&h4(b)&&Date.now()+c-e<3e4},new Promise((a,b)=>{(async()=>{for(let e=0;e<1/0;e++)try{let b=await c(e);if(!d(e,null,b))return void a(b)}catch(a){if(!d(e,a))return void b(a)}})()}))}catch(a){if(this._debug(b,"error",a),hX(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(b,"end")}}_isValidSession(a){return"object"==typeof a&&null!==a&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,b){let c=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:b.redirectTo,scopes:b.scopes,queryParams:b.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",b,"url",c),{data:{provider:a,url:c},error:null}}async _recoverAndRefresh(){var a;let b="#_recoverAndRefresh()";this._debug(b,"begin");try{let c=await hM(this.storage,this.storageKey);if(this._debug(b,"session from storage",c),!this._isValidSession(c)){this._debug(b,"session is not valid"),null!==c&&await this._removeSession();return}let d=Math.round(Date.now()/1e3),e=(null!=(a=c.expires_at)?a:1/0)<d+10;if(this._debug(b,`session has${e?"":" not"} expired with margin of 10s`),e){if(this.autoRefreshToken&&c.refresh_token){let{error:a}=await this._callRefreshToken(c.refresh_token);a&&(console.error(a),h4(a)||(this._debug(b,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(a){this._debug(b,"error",a),console.error(a);return}finally{this._debug(b,"end")}}async _callRefreshToken(a){var b,c;if(!a)throw new h_;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let d=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new hO;let{data:b,error:c}=await this._refreshAccessToken(a);if(c)throw c;if(!b.session)throw new h_;await this._saveSession(b.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",b.session);let d={session:b.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(d,"error",a),hX(a)){let c={session:null,error:a};return h4(a)||await this._removeSession(),null==(b=this.refreshingDeferred)||b.resolve(c),c}throw null==(c=this.refreshingDeferred)||c.reject(a),a}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(a,b,c=!0){let d=`#_notifyAllSubscribers(${a})`;this._debug(d,"begin",b,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:a,session:b});let d=[],e=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(a,b)}catch(a){d.push(a)}});if(await Promise.all(e),d.length>0){for(let a=0;a<d.length;a+=1)console.error(d[a]);throw d[0]}}finally{this._debug(d,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await hL(this.storage,this.storageKey,a)}async _removeSession(){this._debug("#_removeSession()"),await hN(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()"),this.visibilityChangedCallback,this.visibilityChangedCallback=null}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let a=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=a,a&&"object"==typeof a&&"function"==typeof a.unref?a.unref():"u">typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let a=Date.now();try{return await this._useSession(async b=>{let{data:{session:c}}=b;if(!c||!c.refresh_token||!c.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let d=Math.floor((1e3*c.expires_at-a)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),d<=3&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof io)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){return this._debug("#_handleVisibilityChange()"),this.autoRefreshToken&&this.startAutoRefresh(),!1}async _onVisibilityChanged(a){let b=`#_onVisibilityChanged(${a})`;this._debug(b,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(b,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,b,c){let d=[`provider=${encodeURIComponent(b)}`];if((null==c?void 0:c.redirectTo)&&d.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),(null==c?void 0:c.scopes)&&d.push(`scopes=${encodeURIComponent(c.scopes)}`),"pkce"===this.flowType){let[a,b]=await hU(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(b)}`});d.push(c.toString())}if(null==c?void 0:c.queryParams){let a=new URLSearchParams(c.queryParams);d.push(a.toString())}return(null==c?void 0:c.skipBrowserRedirect)&&d.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${a}?${d.join("&")}`}async _unenroll(a){try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;return e?{data:null,error:e}:await ia(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token})})}catch(a){if(hX(a))return{data:null,error:a};throw a}}async _enroll(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)return{data:null,error:f};let g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},"phone"===a.factorType?{phone:a.phone}:{issuer:a.issuer}),{data:h,error:i}=await ia(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:null==(c=null==e?void 0:e.session)?void 0:c.access_token});return i?{data:null,error:i}:("totp"===a.factorType&&(null==(d=null==h?void 0:h.totp)?void 0:d.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(a){if(hX(a))return{data:null,error:a};throw a}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return{data:null,error:e};let{data:f,error:g}=await ia(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:{code:a.code,challenge_id:a.challengeId},headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:g})})}catch(a){if(hX(a))return{data:null,error:a};throw a}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;return e?{data:null,error:e}:await ia(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:{channel:a.channel},headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token})})}catch(a){if(hX(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(a){let{data:b,error:c}=await this._challenge({factorId:a.factorId});return c?{data:null,error:c}:await this._verify({factorId:a.factorId,challengeId:b.id,code:a.code})}async _listFactors(){let{data:{user:a},error:b}=await this.getUser();if(b)return{data:null,error:b};let c=(null==a?void 0:a.factors)||[],d=c.filter(a=>"totp"===a.factor_type&&"verified"===a.status),e=c.filter(a=>"phone"===a.factor_type&&"verified"===a.status);return{data:{all:c,totp:d,phone:e},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async a=>{var b,c;let{data:{session:d},error:e}=a;if(e)return{data:null,error:e};if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let f=this._decodeJWT(d.access_token),g=null;f.aal&&(g=f.aal);let h=g;return(null!=(c=null==(b=d.user.factors)?void 0:b.filter(a=>"verified"===a.status))?c:[]).length>0&&(h="aal2"),{data:{currentLevel:g,nextLevel:h,currentAuthenticationMethods:f.amr||[]},error:null}}))}}ir.nextInstanceID=0;let is=ir;class it extends is{constructor(a){super(a)}}let iu=new class a{constructor(a,b,c){var d,e,f;if(this.supabaseUrl=a,this.supabaseKey=b,!a)throw Error("supabaseUrl is required.");if(!b)throw Error("supabaseKey is required.");const g=a.replace(/\/$/,"");this.realtimeUrl=`${g}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${g}/auth/v1`,this.storageUrl=`${g}/storage/v1`,this.functionsUrl=`${g}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,i=function(a,b){let{db:c,auth:d,realtime:e,global:f}=a,{db:g,auth:h,realtime:i,global:j}=b,k={db:Object.assign(Object.assign({},g),c),auth:Object.assign(Object.assign({},h),d),realtime:Object.assign(Object.assign({},i),e),global:Object.assign(Object.assign({},j),f),accessToken:()=>{var a,b,c,d;return a=this,b=void 0,d=function*(){return""},new(c=void 0,c=Promise)(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}};return a.accessToken?k.accessToken=a.accessToken:delete k.accessToken,k}(null!=c?c:{},{db:hC,realtime:hE,auth:Object.assign(Object.assign({},hD),{storageKey:h}),global:hB});this.storageKey=null!=(d=i.auth.storageKey)?d:"",this.headers=null!=(e=i.global.headers)?e:{},i.accessToken?(this.accessToken=i.accessToken,this.auth=new Proxy({},{get:(a,b)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(f=i.auth)?f:{},this.headers,i.global.fetch),this.fetch=((a,b,c)=>{let d,e=(d=c||("u"<typeof fetch?hF.default:fetch),(...a)=>d(...a)),f="u"<typeof Headers?hF.Headers:Headers;return(c,d)=>{var g,h,i,j;return g=void 0,h=void 0,i=void 0,j=function*(){var g;let h=null!=(g=yield b())?g:a,i=new f(null==d?void 0:d.headers);return i.has("apikey")||i.set("apikey",a),i.has("Authorization")||i.set("Authorization",`Bearer ${h}`),e(c,Object.assign(Object.assign({},d),{headers:i}))},new(i||(i=Promise))(function(a,b){function c(a){try{e(j.next(a))}catch(a){b(a)}}function d(a){try{e(j.throw(a))}catch(a){b(a)}}function e(b){var e;b.done?a(b.value):((e=b.value)instanceof i?e:new i(function(a){a(e)})).then(c,d)}e((j=j.apply(g,h||[])).next())})}})(b,this._getAccessToken.bind(this),i.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},i.realtime)),this.rest=new gR(`${g}/rest/v1`,{headers:this.headers,schema:i.db.schema,fetch:this.fetch}),i.accessToken||this._listenForAuthEvents()}get functions(){return new gQ(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new hz(this.storageUrl,this.headers,this.fetch)}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,b={},c={}){return this.rest.rpc(a,b,c)}channel(a,b={config:{}}){return this.realtime.channel(a,b)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var a,b,c,d,e,f;return c=this,d=void 0,e=void 0,f=function*(){if(this.accessToken)return yield this.accessToken();let{data:c}=yield this.auth.getSession();return null!=(b=null==(a=c.session)?void 0:a.access_token)?b:null},new(e||(e=Promise))(function(a,b){function g(a){try{i(f.next(a))}catch(a){b(a)}}function h(a){try{i(f.throw(a))}catch(a){b(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof e?c:new e(function(a){a(c)})).then(g,h)}i((f=f.apply(c,d||[])).next())})}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,storageKey:e,flowType:f,lock:g,debug:h},i,j){let k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new it({url:this.authUrl,headers:Object.assign(Object.assign({},k),i),storageKey:e,autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,flowType:f,lock:g,debug:h,fetch:j,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(a){return new he(this.realtimeUrl,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},null==a?void 0:a.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,b)=>{this._handleTokenChanged(a,"CLIENT",null==b?void 0:b.access_token)})}_handleTokenChanged(a,b,c){("TOKEN_REFRESHED"===a||"SIGNED_IN"===a)&&this.changedAccessToken!==c?this.changedAccessToken=c:"SIGNED_OUT"===a&&(this.realtime.setAuth(),"STORAGE"==b&&this.auth.signOut(),this.changedAccessToken=void 0)}}("https://jextayidnmtsoofugnig.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpleHRheWlkbm10c29vZnVnbmlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODM1MDAsImV4cCI6MjA4NDY1OTUwMH0.vxRq32MPWyO_znst5nFCiQ7AWJtlJeOFWMY-RlZmjrs",void 0);async function iv(a,b,c,d,e,f){console.log("[Supabase] Uploading metadata:",{cid:a,deviceId:c,mimeType:e,fileSize:b,hasUserKeyHash:!!f});let{data:g,error:h}=await iu.from("photos_metadata").insert([{cid:a,file_size_bytes:b,device_id:c,nonce:d,mime_type:e,user_key_hash:f}]).select();if(h)throw console.error("[Supabase] Metadata Upload Error:",{code:h.code,message:h.message,details:h.details,hint:h.hint}),h;return console.log("[Supabase] Metadata uploaded successfully:",g?.[0]?.id),g}async function iw(a,b){if(!b)return console.error("loadCIDsFromSupabase: userKeyHash is required"),[];let{data:c,error:d}=await iu.from("photos_metadata").select("cid, device_id, uploaded_at, file_size_bytes, nonce, mime_type").eq("user_key_hash",b).order("uploaded_at",{ascending:!1});if(d)throw console.error("Supabase Load Error:",d),d;return c||[]}async function ix(a,b){if(!b)return!1;let{data:c,error:d}=await iu.from("photos_metadata").select("id").eq("cid",a).eq("user_key_hash",b).single();return d&&"PGRST116"!==d.code&&console.error("Supabase Check Error:",d),!!c}async function iy(a,b,c,d,e){if(!d||0===d.length)throw console.error("registerDevice: userKeyHash is required"),Error("userKeyHash is required for device registration");let{error:f}=await iu.from("devices").upsert({id:a,device_name:b,device_type:c,user_key_hash:d,user_id:e},{onConflict:"id"});if(f){if(f.message?.includes("Device limit exceeded"))throw Error("DEVICE_LIMIT_EXCEEDED");throw console.error("Supabase Device Upsert Error:",f),f}return!0}async function iz(a){let{data:b,error:c}=await iu.from("devices").select("*").eq("user_key_hash",a).order("created_at",{ascending:!1});if(c)throw console.error("Supabase Get Devices Error:",c),c;return b||[]}var iA=a.i(44077);let iB="red-able-bug-554.mypinata.cloud";async function iC(a,b,c){return new Promise((d,e)=>{let f=new XMLHttpRequest;f.open("POST","https://api.pinata.cloud/pinning/pinFileToIPFS"),f.setRequestHeader("Authorization","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiJlYTcxMDdjNi0yMGE0LTQ5Y2ItODAyYy1kMmRhOWM2Nzk4NjUiLCJlbWFpbCI6ImVpbmFyQGJsYWNrLWtuaWdodC5kZXYiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicGluX3BvbGljeSI6eyJyZWdpb25zIjpbeyJkZXNpcmVkUmVwbGljYXRpb25Db3VudCI6MSwiaWQiOiJGUkExIn0seyJkZXNpcmVkUmVwbGljYXRpb25Db3VudCI6MSwiaWQiOiJOWUMxIn1dLCJ2ZXJzaW9uIjoxfSwibWZhX2VuYWJsZWQiOmZhbHNlLCJzdGF0dXMiOiJBQ1RJVkUifSwiYXV0aGVudGljYXRpb25UeXBlIjoic2NvcGVkS2V5Iiwic2NvcGVkS2V5S2V5IjoiNjkyYjcyYTBlOTk2NDhmNjQ4NjgiLCJzY29wZWRLZXlTZWNyZXQiOiJmMmM3ZDUwMWE3NjhiMWI3NTI3ODExODAyZTg1YzJlNmUyZDc5ZjA0YTM1ZTA4ZjNmYWJiYmRiMmFlMGMzMmUwIiwiZXhwIjoxODAwNjgxOTMzfQ.g47clgfFIHt9Bw-pjvytmuMPO8FSXgAsSfhcXaP-YII"),f.upload.onprogress=a=>{a.lengthComputable&&c&&c(Math.round(a.loaded/a.total*100))},f.onload=()=>{if(f.status>=200&&f.status<300)try{let a=JSON.parse(f.responseText);d(a.IpfsHash)}catch(a){e(Error("Failed to parse Pinata response"))}else e(Error(`IPFS upload failed: ${f.status}`))},f.onerror=()=>e(Error("Network error during IPFS upload"));let g=new FormData;g.append("file",a,b||"encrypted-photo.bin");let h=JSON.stringify({name:b||"photovault-encrypted",keyvalues:{app:"photovault",type:"encrypted-photo"}});g.append("pinataMetadata",h);let i=JSON.stringify({cidVersion:1});g.append("pinataOptions",i),f.send(g)})}async function iD(a){let b=iB.startsWith("http")?iB:iB.includes(".")?`https://${iB}`:`https://${iB}.mypinata.cloud`,c=[()=>{let c=new URL(`${b}/ipfs/${a}`);return c.searchParams.set("pinataGatewayToken","q1z_4lRpNW9NNmISiMudoy79QVUJ_7-V6s5CDJvEM-CadXIF_WIWW5Xizui72HvA"),c.toString()},()=>`https://cloudflare-ipfs.com/ipfs/${a}`],d=new AbortController;try{console.log(`[IPFS] Downloading CID: ${a}`);let b=c.map(async(a,b)=>{let c=a();console.log(`[IPFS] Trying gateway ${b+1}: ${c.substring(0,60)}...`);let e=await fetch(c,{signal:d.signal,mode:"cors",credentials:"omit",redirect:"error"});if(!e.ok)throw console.warn(`[IPFS] Gateway ${b+1} failed with status: ${e.status}`),Error(`Gateway failed: ${e.status}`);return console.log(`[IPFS] Gateway ${b+1} succeeded`),e.blob()}),e=await Promise.any(b);return d.abort(),console.log(`[IPFS] Download complete, size: ${e.size} bytes`),e}catch(b){throw d.abort(),console.error("[IPFS] All gateways failed:",b),Error(`IPFS download failed for CID: ${a}. Check network/CORS.`)}}let iE=async(a,b,c)=>{try{console.log("Uploading to IPFS...",{size:a.size,fileName:b});let d=await iC(a,b,c);return console.log("IPFS upload successful:",d),d}catch(a){throw console.error("Remote Storage Upload failed:",a),a}},iF=async a=>{try{console.log("Downloading from IPFS:",a);let b=await iD(a);return console.log("IPFS download successful:",{cid:a,size:b.size}),b}catch(a){throw console.error("Remote Storage Download failed:",a),a}};function iG(a){return a.startsWith("Qm")||a.startsWith("bafy")||a.startsWith("bafk")}var iH=a.i(87210);let iI=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},iJ=a=>{let b=a?iI(a):iI,c=a=>(function(a,b=a=>a){let c=N.default.useSyncExternalStore(a.subscribe,N.default.useCallback(()=>b(a.getState()),[a,b]),N.default.useCallback(()=>b(a.getInitialState()),[a,b]));return N.default.useDebugValue(c),c})(b,a);return Object.assign(c,b),c};function iK(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var d;let e=a=>null===a?null:JSON.parse(a,null==b?void 0:b.reviver),f=null!=(d=c.getItem(a))?d:null;return f instanceof Promise?f.then(e):e(f)},setItem:(a,d)=>c.setItem(a,JSON.stringify(d,null==b?void 0:b.replacer)),removeItem:a=>c.removeItem(a)}}let iL=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>iL(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>iL(b)(a)}}},iM={getItem:()=>null,setItem:()=>{},removeItem:()=>{}},iN=(e?iJ(e):iJ)((f=a=>({backupActive:!1,autoBackupEnabled:!0,backgroundBackupEnabled:!1,selectedPlan:"free",lastBackup:"Noch nie",permanence:0,setBackupActive:b=>a({backupActive:b}),setAutoBackupEnabled:b=>a({autoBackupEnabled:b}),setBackgroundBackupEnabled:b=>a({backgroundBackupEnabled:b}),setSelectedPlan:b=>a({selectedPlan:b}),setLastBackup:b=>a({lastBackup:b}),setPermanence:b=>a({permanence:b})}),g={name:"photovault-settings",storage:iK(()=>iM)},(a,b,c)=>{let d,e={storage:iK(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...g},h=!1,i=0,j=new Set,k=new Set,l=e.storage;if(!l)return f((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${e.name}', the given storage is currently unavailable.`),a(...b)},b,c);let m=()=>{let a=e.partialize({...b()});return l.setItem(e.name,{state:a,version:e.version})},n=c.setState;c.setState=(a,b)=>(n(a,b),m());let o=f((...b)=>(a(...b),m()),b,c);c.getInitialState=()=>o;let p=()=>{var c,f;if(!l)return;let g=++i;h=!1,j.forEach(a=>{var c;return a(null!=(c=b())?c:o)});let n=(null==(f=e.onRehydrateStorage)?void 0:f.call(e,null!=(c=b())?c:o))||void 0;return iL(l.getItem.bind(l))(e.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===e.version)return[!1,a.state];else{if(e.migrate){let b=e.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(c=>{var f;if(g!==i)return;let[h,j]=c;if(a(d=e.merge(j,null!=(f=b())?f:o),!0),h)return m()}).then(()=>{g===i&&(null==n||n(d,void 0),d=b(),h=!0,k.forEach(a=>a(d)))}).catch(a=>{g===i&&(null==n||n(void 0,a))})};return c.persist={setOptions:a=>{e={...e,...a},a.storage&&(l=a.storage)},clearStorage:()=>{null==l||l.removeItem(e.name)},getOptions:()=>e,rehydrate:()=>p(),hasHydrated:()=>h,onHydrate:a=>(j.add(a),()=>{j.delete(a)}),onFinishHydration:a=>(k.add(a),()=>{k.delete(a)})},e.skipHydration||p(),d||o}));var iO=Object.defineProperty,iP=Object.getOwnPropertySymbols,iQ=Object.prototype.hasOwnProperty,iR=Object.prototype.propertyIsEnumerable,iS=(a,b,c)=>b in a?iO(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,iT=(a,b)=>{for(var c in b||(b={}))iQ.call(b,c)&&iS(a,c,b[c]);if(iP)for(var c of iP(b))iR.call(b,c)&&iS(a,c,b[c]);return a},iU=(a,b)=>{var c={};for(var d in a)iQ.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&iP)for(var d of iP(a))0>b.indexOf(d)&&iR.call(a,d)&&(c[d]=a[d]);return c};(a=>{let b=class b{constructor(a,c,d,f){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<b.MIN_VERSION||a>b.MAX_VERSION)throw RangeError("Version value out of range");if(f<-1||f>7)throw RangeError("Mask value out of range");this.size=4*a+17;let g=[];for(let a=0;a<this.size;a++)g.push(!1);for(let a=0;a<this.size;a++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const h=this.addEccAndInterleave(d);if(this.drawCodewords(h),-1==f){let a=1e9;for(let b=0;b<8;b++){this.applyMask(b),this.drawFormatBits(b);const c=this.getPenaltyScore();c<a&&(f=b,a=c),this.applyMask(b)}}e(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,d){let e=a.QrSegment.makeSegments(c);return b.encodeSegments(e,d)}static encodeBinary(c,d){let e=a.QrSegment.makeBytes(c);return b.encodeSegments([e],d)}static encodeSegments(a,d,f=1,h=40,i=-1,j=!0){let k,l;if(!(b.MIN_VERSION<=f&&f<=h&&h<=b.MAX_VERSION)||i<-1||i>7)throw RangeError("Invalid value");for(k=f;;k++){let c=8*b.getNumDataCodewords(k,d),e=g.getTotalBits(a,k);if(e<=c){l=e;break}if(k>=h)throw RangeError("Data too long")}for(let a of[b.Ecc.MEDIUM,b.Ecc.QUARTILE,b.Ecc.HIGH])j&&l<=8*b.getNumDataCodewords(k,a)&&(d=a);let m=[];for(let b of a)for(let a of(c(b.mode.modeBits,4,m),c(b.numChars,b.mode.numCharCountBits(k),m),b.getData()))m.push(a);e(m.length==l);let n=8*b.getNumDataCodewords(k,d);e(m.length<=n),c(0,Math.min(4,n-m.length),m),c(0,(8-m.length%8)%8,m),e(m.length%8==0);for(let a=236;m.length<n;a^=253)c(a,8,m);let o=[];for(;8*o.length<m.length;)o.push(0);return m.forEach((a,b)=>o[b>>>3]|=a<<7-(7&b)),new b(k,d,o,i)}getModule(a,b){return 0<=a&&a<this.size&&0<=b&&b<this.size&&this.modules[b][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let a=this.getAlignmentPatternPositions(),b=a.length;for(let c=0;c<b;c++)for(let d=0;d<b;d++)(0!=c||0!=d)&&(0!=c||d!=b-1)&&(c!=b-1||0!=d)&&this.drawAlignmentPattern(a[c],a[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){let b=this.errorCorrectionLevel.formatBits<<3|a,c=b;for(let a=0;a<10;a++)c=c<<1^(c>>>9)*1335;let f=(b<<10|c)^21522;e(f>>>15==0);for(let a=0;a<=5;a++)this.setFunctionModule(8,a,d(f,a));this.setFunctionModule(8,7,d(f,6)),this.setFunctionModule(8,8,d(f,7)),this.setFunctionModule(7,8,d(f,8));for(let a=9;a<15;a++)this.setFunctionModule(14-a,8,d(f,a));for(let a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,d(f,a));for(let a=8;a<15;a++)this.setFunctionModule(8,this.size-15+a,d(f,a));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let b=0;b<12;b++)a=a<<1^(a>>>11)*7973;let b=this.version<<12|a;e(b>>>18==0);for(let a=0;a<18;a++){let c=d(b,a),e=this.size-11+a%3,f=Math.floor(a/3);this.setFunctionModule(e,f,c),this.setFunctionModule(f,e,c)}}drawFinderPattern(a,b){for(let c=-4;c<=4;c++)for(let d=-4;d<=4;d++){let e=Math.max(Math.abs(d),Math.abs(c)),f=a+d,g=b+c;0<=f&&f<this.size&&0<=g&&g<this.size&&this.setFunctionModule(f,g,2!=e&&4!=e)}}drawAlignmentPattern(a,b){for(let c=-2;c<=2;c++)for(let d=-2;d<=2;d++)this.setFunctionModule(a+d,b+c,1!=Math.max(Math.abs(d),Math.abs(c)))}setFunctionModule(a,b,c){this.modules[b][a]=c,this.isFunction[b][a]=!0}addEccAndInterleave(a){let c=this.version,d=this.errorCorrectionLevel;if(a.length!=b.getNumDataCodewords(c,d))throw RangeError("Invalid argument");let f=b.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],g=b.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],h=Math.floor(b.getNumRawDataModules(c)/8),i=f-h%f,j=Math.floor(h/f),k=[],l=b.reedSolomonComputeDivisor(g);for(let c=0,d=0;c<f;c++){let e=a.slice(d,d+j-g+(c<i?0:1));d+=e.length;let f=b.reedSolomonComputeRemainder(e,l);c<i&&e.push(0),k.push(e.concat(f))}let m=[];for(let a=0;a<k[0].length;a++)k.forEach((b,c)=>{(a!=j-g||c>=i)&&m.push(b[a])});return e(m.length==h),m}drawCodewords(a){if(a.length!=Math.floor(b.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let c=0;for(let b=this.size-1;b>=1;b-=2){6==b&&(b=5);for(let e=0;e<this.size;e++)for(let f=0;f<2;f++){let g=b-f,h=(b+1&2)==0?this.size-1-e:e;!this.isFunction[h][g]&&c<8*a.length&&(this.modules[h][g]=d(a[c>>>3],7-(7&c)),c++)}}e(c==8*a.length)}applyMask(a){if(a<0||a>7)throw RangeError("Mask value out of range");for(let b=0;b<this.size;b++)for(let c=0;c<this.size;c++){let d;switch(a){case 0:d=(c+b)%2==0;break;case 1:d=b%2==0;break;case 2:d=c%3==0;break;case 3:d=(c+b)%3==0;break;case 4:d=(Math.floor(c/3)+Math.floor(b/2))%2==0;break;case 5:d=c*b%2+c*b%3==0;break;case 6:d=(c*b%2+c*b%3)%2==0;break;case 7:d=((c+b)%2+c*b%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[b][c]&&d&&(this.modules[b][c]=!this.modules[b][c])}}getPenaltyScore(){let a=0;for(let c=0;c<this.size;c++){let d=!1,e=0,f=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[c][g]==d?5==++e?a+=b.PENALTY_N1:e>5&&a++:(this.finderPenaltyAddHistory(e,f),d||(a+=this.finderPenaltyCountPatterns(f)*b.PENALTY_N3),d=this.modules[c][g],e=1);a+=this.finderPenaltyTerminateAndCount(d,e,f)*b.PENALTY_N3}for(let c=0;c<this.size;c++){let d=!1,e=0,f=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[g][c]==d?5==++e?a+=b.PENALTY_N1:e>5&&a++:(this.finderPenaltyAddHistory(e,f),d||(a+=this.finderPenaltyCountPatterns(f)*b.PENALTY_N3),d=this.modules[g][c],e=1);a+=this.finderPenaltyTerminateAndCount(d,e,f)*b.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let d=0;d<this.size-1;d++){let e=this.modules[c][d];e==this.modules[c][d+1]&&e==this.modules[c+1][d]&&e==this.modules[c+1][d+1]&&(a+=b.PENALTY_N2)}let c=0;for(let a of this.modules)c=a.reduce((a,b)=>a+ +!!b,c);let d=this.size*this.size,f=Math.ceil(Math.abs(20*c-10*d)/d)-1;return e(0<=f&&f<=9),e(0<=(a+=f*b.PENALTY_N4)&&a<=2568888),a}getAlignmentPatternPositions(){if(1==this.version)return[];{let a=Math.floor(this.version/7)+2,b=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*a-2)),c=[6];for(let d=this.size-7;c.length<a;d-=b)c.splice(1,0,d);return c}}static getNumRawDataModules(a){if(a<b.MIN_VERSION||a>b.MAX_VERSION)throw RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){let b=Math.floor(a/7)+2;c-=(25*b-10)*b-55,a>=7&&(c-=36)}return e(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(b.getNumRawDataModules(a)/8)-b.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*b.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw RangeError("Degree out of range");let c=[];for(let b=0;b<a-1;b++)c.push(0);c.push(1);let d=1;for(let e=0;e<a;e++){for(let a=0;a<c.length;a++)c[a]=b.reedSolomonMultiply(c[a],d),a+1<c.length&&(c[a]^=c[a+1]);d=b.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(a=>0);for(let e of a){let a=e^d.shift();d.push(0),c.forEach((c,e)=>d[e]^=b.reedSolomonMultiply(c,a))}return d}static reedSolomonMultiply(a,b){if(a>>>8!=0||b>>>8!=0)throw RangeError("Byte out of range");let c=0;for(let d=7;d>=0;d--)c=c<<1^(c>>>7)*285^(b>>>d&1)*a;return e(c>>>8==0),c}finderPenaltyCountPatterns(a){let b=a[1];e(b<=3*this.size);let c=b>0&&a[2]==b&&a[3]==3*b&&a[4]==b&&a[5]==b;return(c&&a[0]>=4*b&&a[6]>=b?1:0)+(c&&a[6]>=4*b&&a[0]>=b?1:0)}finderPenaltyTerminateAndCount(a,b,c){return a&&(this.finderPenaltyAddHistory(b,c),b=0),b+=this.size,this.finderPenaltyAddHistory(b,c),this.finderPenaltyCountPatterns(c)}finderPenaltyAddHistory(a,b){0==b[0]&&(a+=this.size),b.pop(),b.unshift(a)}};function c(a,b,c){if(b<0||b>31||a>>>b!=0)throw RangeError("Value out of range");for(let d=b-1;d>=0;d--)c.push(a>>>d&1)}function d(a,b){return(a>>>b&1)!=0}function e(a){if(!a)throw Error("Assertion error")}b.MIN_VERSION=1,b.MAX_VERSION=40,b.PENALTY_N1=3,b.PENALTY_N2=3,b.PENALTY_N3=40,b.PENALTY_N4=10,b.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],b.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=b;let f=class a{constructor(a,b,c){if(this.mode=a,this.numChars=b,this.bitData=c,b<0)throw RangeError("Invalid argument");this.bitData=c.slice()}static makeBytes(b){let d=[];for(let a of b)c(a,8,d);return new a(a.Mode.BYTE,b.length,d)}static makeNumeric(b){if(!a.isNumeric(b))throw RangeError("String contains non-numeric characters");let d=[];for(let a=0;a<b.length;){let e=Math.min(b.length-a,3);c(parseInt(b.substring(a,a+e),10),3*e+1,d),a+=e}return new a(a.Mode.NUMERIC,b.length,d)}static makeAlphanumeric(b){let d;if(!a.isAlphanumeric(b))throw RangeError("String contains unencodable characters in alphanumeric mode");let e=[];for(d=0;d+2<=b.length;d+=2){let f=45*a.ALPHANUMERIC_CHARSET.indexOf(b.charAt(d));c(f+=a.ALPHANUMERIC_CHARSET.indexOf(b.charAt(d+1)),11,e)}return d<b.length&&c(a.ALPHANUMERIC_CHARSET.indexOf(b.charAt(d)),6,e),new a(a.Mode.ALPHANUMERIC,b.length,e)}static makeSegments(b){return""==b?[]:a.isNumeric(b)?[a.makeNumeric(b)]:a.isAlphanumeric(b)?[a.makeAlphanumeric(b)]:[a.makeBytes(a.toUtf8ByteArray(b))]}static makeEci(b){let d=[];if(b<0)throw RangeError("ECI assignment value out of range");if(b<128)c(b,8,d);else if(b<16384)c(2,2,d),c(b,14,d);else if(b<1e6)c(6,3,d),c(b,21,d);else throw RangeError("ECI assignment value out of range");return new a(a.Mode.ECI,0,d)}static isNumeric(b){return a.NUMERIC_REGEX.test(b)}static isAlphanumeric(b){return a.ALPHANUMERIC_REGEX.test(b)}getData(){return this.bitData.slice()}static getTotalBits(a,b){let c=0;for(let d of a){let a=d.mode.numCharCountBits(b);if(d.numChars>=1<<a)return 1/0;c+=4+a+d.bitData.length}return c}static toUtf8ByteArray(a){a=encodeURI(a);let b=[];for(let c=0;c<a.length;c++)"%"!=a.charAt(c)?b.push(a.charCodeAt(c)):(b.push(parseInt(a.substring(c+1,c+3),16)),c+=2);return b}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let g=f;a.QrSegment=f})(L||(L={})),w=(v=L||(L={})).QrCode||(v.QrCode={}),(h=class{constructor(a,b){this.ordinal=a,this.formatBits=b}}).LOW=new h(0,1),h.MEDIUM=new h(1,0),h.QUARTILE=new h(2,3),h.HIGH=new h(3,2),w.Ecc=h,y=(x=L||(L={})).QrSegment||(x.QrSegment={}),(i=class{constructor(a,b){this.modeBits=a,this.numBitsCharCount=b}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}}).NUMERIC=new i(1,[10,12,14]),i.ALPHANUMERIC=new i(2,[9,11,13]),i.BYTE=new i(4,[8,16,16]),i.KANJI=new i(8,[8,10,12]),i.ECI=new i(7,[0,0,0]),y.Mode=i;var iV=L,iW={L:iV.QrCode.Ecc.LOW,M:iV.QrCode.Ecc.MEDIUM,Q:iV.QrCode.Ecc.QUARTILE,H:iV.QrCode.Ecc.HIGH},iX="#FFFFFF",iY="#000000";function iZ(a,b=0){let c=[];return a.forEach(function(a,d){let e=null;a.forEach(function(f,g){if(!f&&null!==e){c.push(`M${e+b} ${d+b}h${g-e}v1H${e+b}z`),e=null;return}if(g===a.length-1){if(!f)return;null===e?c.push(`M${g+b},${d+b} h1v1H${g+b}z`):c.push(`M${e+b},${d+b} h${g+1-e}v1H${e+b}z`);return}f&&null===e&&(e=g)})}),c.join("")}function i$(a,b){return a.slice().map((a,c)=>c<b.y||c>=b.y+b.h?a:a.map((a,c)=>(c<b.x||c>=b.x+b.w)&&a))}function i_({value:a,level:b,minVersion:c,includeMargin:d,marginSize:e,imageSettings:f,size:g,boostLevel:h}){let i=N.default.useMemo(()=>{let d=(Array.isArray(a)?a:[a]).reduce((a,b)=>(a.push(...iV.QrSegment.makeSegments(b)),a),[]);return iV.QrCode.encodeSegments(d,iW[b],c,void 0,void 0,h)},[a,b,c,h]),{cells:j,margin:k,numCells:l,calculatedImageSettings:m}=N.default.useMemo(()=>{let a=i.getModules(),b=null!=e?Math.max(Math.floor(e),0):4*!!d,c=a.length+2*b,h=function(a,b,c,d){if(null==d)return null;let e=a.length+2*c,f=Math.floor(.1*b),g=e/b,h=(d.width||f)*g,i=(d.height||f)*g,j=null==d.x?a.length/2-h/2:d.x*g,k=null==d.y?a.length/2-i/2:d.y*g,l=null==d.opacity?1:d.opacity,m=null;if(d.excavate){let a=Math.floor(j),b=Math.floor(k),c=Math.ceil(h+j-a),d=Math.ceil(i+k-b);m={x:a,y:b,w:c,h:d}}return{x:j,y:k,h:i,w:h,excavation:m,opacity:l,crossOrigin:d.crossOrigin}}(a,g,b,f);return{cells:a,margin:b,numCells:c,calculatedImageSettings:h}},[i,g,f,d,e]);return{qrcode:i,margin:k,cells:j,numCells:l,calculatedImageSettings:m}}var i0=function(){try{new Path2D().addPath(new Path2D)}catch(a){return!1}return!0}();N.default.forwardRef(function(a,b){let{value:c,size:d=128,level:e="L",bgColor:f=iX,fgColor:g=iY,includeMargin:h=!1,minVersion:i=1,boostLevel:j,marginSize:k,imageSettings:l}=a,m=iU(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:n}=m,o=iU(m,["style"]),p=null==l?void 0:l.src,q=N.default.useRef(null),r=N.default.useRef(null),s=N.default.useCallback(a=>{q.current=a,"function"==typeof b?b(a):b&&(b.current=a)},[b]),[t,u]=N.default.useState(!1),{margin:v,cells:w,numCells:x,calculatedImageSettings:y}=i_({value:c,level:e,minVersion:i,boostLevel:j,includeMargin:h,marginSize:k,imageSettings:l,size:d});N.default.useEffect(()=>{if(null!=q.current){let a=q.current,b=a.getContext("2d");if(!b)return;let c=w,e=r.current,h=null!=y&&null!==e&&e.complete&&0!==e.naturalHeight&&0!==e.naturalWidth;h&&null!=y.excavation&&(c=i$(w,y.excavation));let i=window.devicePixelRatio||1;a.height=a.width=d*i;let j=d/x*i;b.scale(j,j),b.fillStyle=f,b.fillRect(0,0,x,x),b.fillStyle=g,i0?b.fill(new Path2D(iZ(c,v))):w.forEach(function(a,c){a.forEach(function(a,d){a&&b.fillRect(d+v,c+v,1,1)})}),y&&(b.globalAlpha=y.opacity),h&&b.drawImage(e,y.x+v,y.y+v,y.w,y.h)}}),N.default.useEffect(()=>{u(!1)},[p]);let z=iT({height:d,width:d},n),A=null;return null!=p&&(A=N.default.createElement("img",{src:p,key:p,style:{display:"none"},onLoad:()=>{u(!0)},ref:r,crossOrigin:null==y?void 0:y.crossOrigin})),N.default.createElement(N.default.Fragment,null,N.default.createElement("canvas",iT({style:z,height:d,width:d,ref:s,role:"img"},o)),A)}).displayName="QRCodeCanvas";var i1=N.default.forwardRef(function(a,b){let{value:c,size:d=128,level:e="L",bgColor:f=iX,fgColor:g=iY,includeMargin:h=!1,minVersion:i=1,boostLevel:j,title:k,marginSize:l,imageSettings:m}=a,n=iU(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:o,cells:p,numCells:q,calculatedImageSettings:r}=i_({value:c,level:e,minVersion:i,boostLevel:j,includeMargin:h,marginSize:l,imageSettings:m,size:d}),s=p,t=null;null!=m&&null!=r&&(null!=r.excavation&&(s=i$(p,r.excavation)),t=N.default.createElement("image",{href:m.src,height:r.h,width:r.w,x:r.x+o,y:r.y+o,preserveAspectRatio:"none",opacity:r.opacity,crossOrigin:r.crossOrigin}));let u=iZ(s,o);return N.default.createElement("svg",iT({height:d,width:d,viewBox:`0 0 ${q} ${q}`,ref:b,role:"img"},n),!!k&&N.default.createElement("title",null,k),N.default.createElement("path",{fill:f,d:`M0,0 h${q}v${q}H0z`,shapeRendering:"crispEdges"}),N.default.createElement("path",{fill:g,d:u,shapeRendering:"crispEdges"}),t)});i1.displayName="QRCodeSVG";let i2=R("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),i3=R("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),i4=R("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);function i5({isOpen:a,onClose:b}){let[c,d]=(0,N.useState)("show"),[e,f]=(0,N.useState)(""),[g,h]=(0,N.useState)(!1),[i,j]=(0,N.useState)(null),[k,l]=(0,N.useState)(!1),{recoveryPhrase:m,restoreFromPhrase:n}=gH(),o=async()=>{if(m)try{await navigator.clipboard.writeText(m),h(!0),setTimeout(()=>h(!1),2e3)}catch{console.error("Failed to copy to clipboard")}};return a?(0,M.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[380px] rounded-2xl overflow-hidden",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-[#E5E5EA]",children:[(0,M.jsx)("h2",{className:"sf-pro-display text-[17px] font-semibold text-[#1D1D1F]",children:"Gert verbinden"}),(0,M.jsx)("button",{onClick:b,className:"w-8 h-8 flex items-center justify-center rounded-full bg-[#F2F2F7]",children:(0,M.jsx)(i2,{className:"w-4 h-4 text-[#6E6E73]"})})]}),(0,M.jsxs)("div",{className:"flex border-b border-[#E5E5EA]",children:[(0,M.jsxs)("button",{onClick:()=>d("show"),className:`flex-1 py-3 text-[15px] font-medium flex items-center justify-center gap-2 ${"show"===c?"text-[#007AFF] border-b-2 border-[#007AFF]":"text-[#6E6E73]"}`,children:[(0,M.jsx)(i4,{className:"w-4 h-4"}),"Schlssel zeigen"]}),(0,M.jsxs)("button",{onClick:()=>d("input"),className:`flex-1 py-3 text-[15px] font-medium flex items-center justify-center gap-2 ${"input"===c?"text-[#007AFF] border-b-2 border-[#007AFF]":"text-[#6E6E73]"}`,children:[(0,M.jsx)(i3,{className:"w-4 h-4"}),"Schlssel eingeben"]})]}),(0,M.jsx)("div",{className:"p-5",children:"show"===c?(0,M.jsxs)("div",{className:"flex flex-col items-center",children:[(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mb-4",children:"Scanne diesen QR-Code mit deinem anderen Gert oder kopiere den Schlssel."}),m&&(0,M.jsx)("div",{className:"bg-white p-4 rounded-xl border border-[#E5E5EA] mb-4",children:(0,M.jsx)(i1,{value:m,size:180,level:"M",includeMargin:!1})}),(0,M.jsxs)("div",{className:"w-full bg-[#F2F2F7] rounded-xl p-3 mb-4",children:[(0,M.jsx)("p",{className:"text-[11px] text-[#6E6E73] mb-1",children:"Dein Schlssel:"}),(0,M.jsx)("p",{className:"text-[13px] font-mono text-[#1D1D1F] break-all leading-relaxed",children:m||"Kein Schlssel verfgbar"})]}),(0,M.jsx)("button",{onClick:o,disabled:!m,className:"w-full h-[44px] bg-[#007AFF] text-white text-[15px] font-semibold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:g?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(gE,{className:"w-4 h-4"}),"Kopiert!"]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(gF,{className:"w-4 h-4"}),"Schlssel kopieren"]})})]}):(0,M.jsxs)("div",{className:"flex flex-col",children:[(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mb-4",children:"Gib den Schlssel von deinem anderen Gert ein, um deine Fotos zu synchronisieren."}),(0,M.jsx)("textarea",{value:e,onChange:a=>{f(a.target.value),j(null)},placeholder:"Schlssel hier eingeben...",className:"w-full h-[100px] bg-[#F2F2F7] rounded-xl p-3 text-[14px] font-mono text-[#1D1D1F] resize-none mb-3 placeholder:text-[#C7C7CC]"}),i&&(0,M.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center mb-3",children:i}),k&&(0,M.jsx)("p",{className:"text-[13px] text-[#30D158] text-center mb-3",children:"Schlssel erfolgreich importiert!"}),(0,M.jsxs)("button",{onClick:()=>{(j(null),e.trim())?n(e.trim())?(l(!0),f(""),setTimeout(()=>{l(!1),b()},1500)):j("Ungltiger Schlssel. Bitte berprfe die Eingabe."):j("Bitte gib einen Schlssel ein")},disabled:!e.trim()||k,className:"w-full h-[44px] bg-[#30D158] text-white text-[15px] font-semibold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,M.jsx)(i3,{className:"w-4 h-4"}),"Gert verbinden"]}),(0,M.jsx)("p",{className:"text-[11px] text-[#FF9500] text-center mt-4",children:"Achtung: Dies berschreibt deinen aktuellen Schlssel. Stelle sicher, dass du ihn gesichert hast."})]})})]})}):null}function i6({state:b,setState:c,onRestartOnboarding:d}){let[e,f]=(0,N.useState)(!1),[g,h]=(0,N.useState)(!1),[i,j]=(0,N.useState)(!1),[k,l]=(0,N.useState)(!1),[m,n]=(0,N.useState)(!1),[o,p]=(0,N.useState)(!1),[q,r]=(0,N.useState)([]),[s,t]=(0,N.useState)(!1),[u,v]=(0,N.useState)({current:0,total:0}),w=iN(a=>a.autoBackupEnabled),x=iN(a=>a.setAutoBackupEnabled),y=iN(a=>a.backgroundBackupEnabled),z=iN(a=>a.setBackgroundBackupEnabled),A=iN(a=>a.selectedPlan),B=iN(a=>a.setSelectedPlan),C=iN(a=>a.setLastBackup),{secretKey:D,recoveryPhrase:E,generateNewKey:F,clearKey:G}=gH(),[H,I]=(0,N.useState)(null);(0,N.useEffect)(()=>{D&&a.A(42124).then(a=>a.getUserKeyHash(D)).then(I)},[D]),(0,N.useEffect)(()=>{H&&(async()=>{try{let a=await iz(H);r(a)}catch(a){console.error("Failed to fetch devices:",a)}})()},[H]);let J=E?.split("-").slice(0,12)||[],K=async()=>{if(!s&&D){t(!0),console.log("[Backup] Starting manual backup to IPFS...");try{let a=(await (0,iH.getAllPhotos)()).filter(a=>a.encryptedBlob);v({current:0,total:a.length});let b=0,c=(0,iA.getDeviceId)(),d=H||await (0,gC.getUserKeyHash)(D);for(let e of a)if(e.encryptedBlob)try{if(!await ix(e.cid,d)){let a=await iE(e.encryptedBlob,e.fileName);console.log(`[Backup] Uploaded to IPFS: ${a}`),await iv(a,e.fileSize,c,e.nonce,e.mimeType,d)}b++,v({current:b,total:a.length})}catch(a){console.error(`[Backup] Failed to upload ${e.cid}:`,a)}C("Gerade eben"),console.log(`[Backup] Complete: ${b} photos processed`)}catch(a){console.error("[Backup] Failed:",a)}finally{t(!1),v({current:0,total:0})}}},L=async()=>{G(),await F()&&c(a=>({...a,photosCount:0})),j(!1)},[O,P]=(0,N.useState)(!1),[Q,R]=(0,N.useState)(!1),S=async()=>{try{let{db:b}=await a.A(58590);await b.delete(),localStorage.clear(),window.location.reload()}catch(a){console.error("Failed to clear cache:",a)}};if(e){let a=q.map(a=>({id:a.id,name:a.device_name||"Unbekanntes Gert",lastActive:""===a.id?"Aktiv":function(a){if(!a)return"Unbekannt";let b=new Date(a),c=new Date().getTime()-b.getTime(),d=Math.floor(c/6e4),e=Math.floor(c/36e5),f=Math.floor(c/864e5);return d<1?"Gerade eben":d<60?`vor ${d} Min.`:e<24?`vor ${e} Std.`:f<7?`vor ${f} Tagen`:b.toLocaleDateString("de-DE")}(a.created_at),syncing:!1}));return 0===a.length&&a.push({id:"",name:"Dieses Gert",lastActive:"Aktiv",syncing:!1}),(0,M.jsx)(i8,{devices:a,onBack:()=>f(!1),onAddDevice:()=>{f(!1),P(!0)}})}return(0,M.jsxs)("div",{className:"h-full flex flex-col pb-4 overflow-y-auto",children:[(0,M.jsx)("header",{className:"px-5 pt-6 pb-4 bg-[#F2F2F7]",children:(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] text-[#1D1D1F]",children:"Einstellungen"})}),(0,M.jsxs)("div",{className:"flex-1 px-5",children:[(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Backup"}),(0,M.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,M.jsx)(i7,{label:"Automatisches Backup",description:"Neue Fotos automatisch sichern",enabled:w,onToggle:()=>{x(!w)}}),(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsx)(i7,{label:"Hintergrund-Backup",description:"Weiter sichern wenn App geschlossen",enabled:y,onToggle:()=>{z(!y)}}),(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsxs)("button",{onClick:()=>n(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)(aH,{name:"folder",size:24}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsx)("span",{className:"text-[17px] text-[#1D1D1F] block",children:"Backup-Quelle"}),(0,M.jsx)("span",{className:"text-[13px] text-[#6E6E73]",children:"photos-app"===b.photoSource?"Fotos-App":"Dateien-App"})]})]}),(0,M.jsx)(aH,{name:"chevronRight",size:16})]})]}),(0,M.jsx)("button",{onClick:K,disabled:s||!D,className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl mt-3 ios-tap-target disabled:opacity-70 flex items-center justify-center gap-2",children:s?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(gK,{className:"w-5 h-5 animate-spin"}),u.total>0?`${u.current}/${u.total} hochladen...`:"Vorbereiten..."]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(gL,{className:"w-5 h-5"}),"Jetzt sichern"]})}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-4 mt-2 text-center",children:"Alle lokalen Fotos in die Cloud hochladen"})]}),(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Speicher"}),(0,M.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,M.jsxs)("div",{className:"p-4",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,M.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Aktueller Plan"}),(0,M.jsx)("span",{className:"text-[15px] font-semibold text-[#007AFF]",children:"free"===A?"Free":"Backup+"})]}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:"free"===A?"Fotos auf deinen Gerten":"200 GB Cloud-Backup"})]}),(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsx)("div",{className:"p-4",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsx)("span",{className:"text-[15px] text-[#6E6E73]",children:"Verwendet"}),(0,M.jsxs)("span",{className:"text-[15px] text-[#1D1D1F]",children:[b.photosCount.toLocaleString()," Fotos (nur lokal)"]})]})}),(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsxs)("button",{onClick:()=>p(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsx)("span",{className:"text-[17px] text-[#007AFF]",children:"free"===A?"Upgrade zu Backup+":"Plan verwalten"}),(0,M.jsx)(aH,{name:"chevronRight",size:16})]})]})]}),(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Gerte"}),(0,M.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:(0,M.jsxs)("button",{onClick:()=>{console.log("Fetch Device List"),f(!0)},className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)(aH,{name:"smartphone",size:24}),(0,M.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Verbundene Gerte"})]}),(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)("span",{className:"text-[15px] text-[#6E6E73]",children:q.length||1}),(0,M.jsx)(aH,{name:"chevronRight",size:16})]})]})})]}),(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Sicherheit"}),(0,M.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,M.jsxs)("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Backup-Phrase anzeigen"}),(0,M.jsx)(aH,{name:"chevronRight",size:16})]}),(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsxs)("button",{onClick:()=>j(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsx)("span",{className:"text-[17px] text-[#FF3B30]",children:"Neuen Schlssel erstellen"}),(0,M.jsx)(aH,{name:"chevronRight",size:16})]})]}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-4 mt-2",children:"Teile diese Wrter niemals mit anderen."})]}),(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Wartung"}),(0,M.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:(0,M.jsxs)("button",{onClick:()=>R(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("div",{className:"w-6 h-6 flex items-center justify-center text-[#FF9500]",children:(0,M.jsx)(aH,{name:"refresh",size:24})}),(0,M.jsx)("span",{className:"text-[17px] text-[#FF9500]",children:"Lokalen Cache leeren"})]}),(0,M.jsx)(aH,{name:"chevronRight",size:16})]})}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-4 mt-2",children:"Lscht lokale Vorschaubilder und Gertedaten. Deine Fotos in der Cloud bleiben sicher."})]})]}),g&&(0,M.jsx)(jb,{title:"Sicherheitshinweis",message:"Deine Backup-Phrase gibt vollen Zugriff auf deine verschlsselten Fotos. Nur an einem privaten Ort anzeigen.",confirmLabel:"Phrase anzeigen",confirmDestructive:!1,onConfirm:()=>{h(!1),l(!0)},onCancel:()=>h(!1)}),k&&(0,M.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10",children:[(0,M.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Deine Backup-Phrase"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-4",children:"Notiere diese Wrter und bewahre sie sicher auf."}),J.length>0?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:J.map((a,b)=>(0,M.jsxs)("div",{className:"bg-[#F2F2F7] rounded-lg p-2 text-center",children:[(0,M.jsx)("span",{className:"text-[11px] text-[#8E8E93] block",children:b+1}),(0,M.jsx)("span",{className:"text-[14px] text-[#1D1D1F] font-mono",children:a})]},b))}),(0,M.jsxs)("div",{className:"bg-[#F2F2F7] rounded-xl p-3 mb-4",children:[(0,M.jsx)("p",{className:"text-[11px] text-[#6E6E73] mb-1",children:"Vollstndiger Schlssel:"}),(0,M.jsx)("p",{className:"text-[12px] font-mono text-[#1D1D1F] break-all",children:E})]})]}):(0,M.jsx)("div",{className:"bg-[#FF9500]/10 rounded-xl p-4 mb-4",children:(0,M.jsx)("p",{className:"text-[13px] text-[#FF9500] text-center",children:"Kein Schlssel gefunden. Bitte erstelle einen neuen Schlssel."})}),(0,M.jsx)("div",{className:"bg-[#FF3B30]/10 rounded-xl p-3 mb-4",children:(0,M.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center",children:" Teile diese Wrter niemals mit anderen"})}),(0,M.jsx)("button",{onClick:()=>l(!1),className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target",children:"Fertig"})]})}),i&&(0,M.jsx)(jb,{title:"Datenverlust-Warnung",message:"Das Erstellen eines neuen Schlssels lscht alle vorhandenen Backup-Daten permanent. Diese Aktion kann nicht rckgngig gemacht werden.",confirmLabel:"Neuen Schlssel erstellen",confirmDestructive:!0,onConfirm:L,onCancel:()=>j(!1)}),m&&(0,M.jsx)(i9,{currentSource:b.photoSource,onSelect:a=>{console.log("Update backup source preference:",a),c(b=>({...b,photoSource:a})),n(!1)},onClose:()=>n(!1)}),o&&(0,M.jsx)(ja,{currentPlan:A,onSelect:a=>{console.log("Update plan:",a),B(a),p(!1)},onClose:()=>p(!1)}),Q&&(0,M.jsx)(jb,{title:"Cache leeren?",message:"Dies wird lokale Vorschaubilder und Gertedaten lschen. Deine verschlsselten Fotos in der Cloud bleiben sicher. Die App wird neu geladen.",confirmLabel:"Cache leeren",confirmDestructive:!0,onConfirm:S,onCancel:()=>R(!1)}),(0,M.jsx)(i5,{isOpen:O,onClose:()=>P(!1)})]})}function i7({label:a,description:b,enabled:c,onToggle:d}){return(0,M.jsxs)("button",{onClick:d,className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsx)("p",{className:"text-[17px] text-[#1D1D1F]",children:a}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] mt-0.5",children:b})]}),(0,M.jsx)("div",{className:`w-[51px] h-[31px] rounded-full p-[2px] shrink-0 ${c?"bg-[#30D158]":"bg-[#E5E5EA]"}`,children:(0,M.jsx)("div",{className:`w-[27px] h-[27px] rounded-full bg-white shadow-sm ${c?"ml-auto":""}`})})]})}function i8({devices:a,onBack:b,onAddDevice:c}){return(0,M.jsxs)("div",{className:"h-full flex flex-col pb-4 overflow-y-auto",children:[(0,M.jsxs)("header",{className:"px-5 pt-6 pb-4 bg-[#F2F2F7]",children:[(0,M.jsx)("button",{onClick:b,className:"text-[#007AFF] text-[17px] ios-tap-target mb-2",children:" Zurck"}),(0,M.jsx)("h1",{className:"sf-pro-display text-[28px] text-[#1D1D1F]",children:"Gerte"})]}),(0,M.jsxs)("div",{className:"flex-1 px-5",children:[(0,M.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:a.map((a,b)=>(0,M.jsxs)("div",{children:[b>0&&(0,M.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,M.jsxs)("div",{className:"flex items-center gap-3 p-4",children:[(0,M.jsx)(aH,{name:"smartphone",size:32}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("p",{className:"text-[17px] text-[#1D1D1F]",children:a.name}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:a.lastActive})]}),a.syncing?(0,M.jsx)(gK,{className:"w-5 h-5 text-[#007AFF] animate-spin"}):"Aktiv"===a.lastActive?(0,M.jsxs)("div",{className:"flex items-center gap-1",children:[(0,M.jsx)(gE,{className:"w-4 h-4 text-[#30D158]"}),(0,M.jsx)("span",{className:"text-[13px] text-[#30D158] font-medium",children:"Dieses Gert"})]}):null]})]},a.id))}),(0,M.jsxs)("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 mt-6 p-4 bg-white rounded-xl ios-tap-target",children:[(0,M.jsx)(gJ,{className:"w-5 h-5 text-[#007AFF]"}),(0,M.jsx)("span",{className:"text-[17px] text-[#007AFF]",children:"Neues Gert verbinden"})]}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mt-3",children:"Scanne den QR-Code oder gib deine Backup-Phrase ein"})]})]})}function i9({currentSource:a,onSelect:b,onClose:c}){return(0,M.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10",children:[(0,M.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Backup-Quelle"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-6",children:"Wo sind deine Fotos gespeichert?"}),(0,M.jsx)("div",{className:"space-y-3 mb-6",children:[{id:"photos-app",label:"Fotos-App",description:"Alle Fotos aus der iOS Foto-Bibliothek"},{id:"files-app",label:"Dateien-App",description:"Fotos aus einem bestimmten Ordner"}].map(c=>(0,M.jsx)("button",{onClick:()=>b(c.id),className:`w-full p-4 rounded-xl bg-[#F2F2F7] text-left ios-tap-target ${a===c.id?"ring-2 ring-[#007AFF]":""}`,children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("p",{className:"text-[17px] font-medium text-[#1D1D1F]",children:c.label}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] mt-0.5",children:c.description})]}),(0,M.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${a===c.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:a===c.id&&(0,M.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})},c.id))}),(0,M.jsx)("button",{onClick:c,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Abbrechen"})]})})}function ja({currentPlan:a,onSelect:b,onClose:c}){return(0,M.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10 max-h-[80vh] overflow-y-auto",children:[(0,M.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Speicherplan"}),(0,M.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-6",children:"Du kannst jederzeit wechseln"}),(0,M.jsx)("div",{className:"space-y-3 mb-6",children:[{id:"free",label:"FREE",subtitle:"Auf deinen Gerten",price:"0/Monat",features:["Unbegrenzte Fotos","Zero-Knowledge Verschlsselung","Multi-Device Sync"]},{id:"backup-plus",label:"BACKUP+",subtitle:"Dauerhaft im Netz",price:"2,99/Monat",features:["Alles von Free","200 GB Cloud-Backup","Schnellere Synchronisierung"]}].map(c=>(0,M.jsx)("button",{onClick:()=>b(c.id),className:`w-full p-4 rounded-xl bg-[#F2F2F7] text-left ios-tap-target ${a===c.id?"ring-2 ring-[#007AFF]":""}`,children:(0,M.jsxs)("div",{className:"flex items-start justify-between",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("p",{className:"text-[13px] font-bold text-[#007AFF] tracking-wide",children:c.label}),(0,M.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] mt-0.5",children:c.subtitle}),(0,M.jsx)("ul",{className:"mt-2 space-y-1",children:c.features.map(a=>(0,M.jsxs)("li",{className:"text-[13px] text-[#6E6E73] flex items-center gap-2",children:[(0,M.jsx)("span",{className:"text-[#30D158]",children:""})," ",a]},a))}),(0,M.jsx)("p",{className:"text-[15px] font-semibold text-[#1D1D1F] mt-3",children:c.price})]}),(0,M.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${a===c.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:a===c.id&&(0,M.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})},c.id))}),(0,M.jsx)("button",{onClick:c,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Abbrechen"})]})})}function jb({title:a,message:b,confirmLabel:c,confirmDestructive:d,onConfirm:e,onCancel:f}){return(0,M.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-8",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[270px] rounded-2xl overflow-hidden",children:[(0,M.jsxs)("div",{className:"p-4 text-center",children:[(0,M.jsx)("h3",{className:"sf-pro-display text-[17px] text-[#1D1D1F] mb-1",children:a}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] leading-relaxed",children:b})]}),(0,M.jsxs)("div",{className:"border-t border-[#E5E5EA]",children:[(0,M.jsx)("button",{onClick:f,className:"w-full py-3 text-[17px] text-[#007AFF] border-b border-[#E5E5EA] ios-tap-target",children:"Abbrechen"}),(0,M.jsx)("button",{onClick:e,className:`w-full py-3 text-[17px] font-semibold ios-tap-target ${d?"text-[#FF3B30]":"text-[#007AFF]"}`,children:c})]})]})})}let jc=R("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),jd=R("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]),je=R("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var jf=a.i(99745),jg=a.i(18544),jh=a.i(76644),ji=a.i(33791),jj=a.i(79715),jk=a.i(42871),jl=a.i(8361),jm=class extends ji.Subscribable{constructor(a,b){super(),this.options=b,this.#a=a,this.#b=null,this.#c=(0,jj.pendingThenable)(),this.bindMethods(),this.setOptions(b)}#a;#d=void 0;#e=void 0;#f=void 0;#g;#h;#c;#b;#i;#j;#k;#l;#m;#n;#o=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#d.addObserver(this),jn(this.#d,this.options)?this.#p():this.updateResult(),this.#q())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jo(this.#d,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jo(this.#d,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#r(),this.#s(),this.#d.removeObserver(this)}setOptions(a){let b=this.options,c=this.#d;if(this.options=this.#a.defaultQueryOptions(a),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,jk.resolveEnabled)(this.options.enabled,this.#d))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#t(),this.#d.setOptions(this.options),b._defaulted&&!(0,jk.shallowEqualObjects)(this.options,b)&&this.#a.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#d,observer:this});let d=this.hasListeners();d&&jp(this.#d,c,this.options,b)&&this.#p(),this.updateResult(),d&&(this.#d!==c||(0,jk.resolveEnabled)(this.options.enabled,this.#d)!==(0,jk.resolveEnabled)(b.enabled,this.#d)||(0,jk.resolveStaleTime)(this.options.staleTime,this.#d)!==(0,jk.resolveStaleTime)(b.staleTime,this.#d))&&this.#u();let e=this.#v();d&&(this.#d!==c||(0,jk.resolveEnabled)(this.options.enabled,this.#d)!==(0,jk.resolveEnabled)(b.enabled,this.#d)||e!==this.#n)&&this.#w(e)}getOptimisticResult(a){var b,c;let d=this.#a.getQueryCache().build(this.#a,a),e=this.createResult(d,a);return b=this,c=e,(0,jk.shallowEqualObjects)(b.getCurrentResult(),c)||(this.#f=e,this.#h=this.options,this.#g=this.#d.state),e}getCurrentResult(){return this.#f}trackResult(a,b){return new Proxy(a,{get:(a,c)=>(this.trackProp(c),b?.(c),"promise"===c&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#c.status||this.#c.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,c))})}trackProp(a){this.#o.add(a)}getCurrentQuery(){return this.#d}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){let b=this.#a.defaultQueryOptions(a),c=this.#a.getQueryCache().build(this.#a,b);return c.fetch().then(()=>this.createResult(c,b))}fetch(a){return this.#p({...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#f))}#p(a){this.#t();let b=this.#d.fetch(this.options,a);return a?.throwOnError||(b=b.catch(jk.noop)),b}#u(){this.#r();let a=(0,jk.resolveStaleTime)(this.options.staleTime,this.#d);if(jk.isServer||this.#f.isStale||!(0,jk.isValidTimeout)(a))return;let b=(0,jk.timeUntilStale)(this.#f.dataUpdatedAt,a);this.#l=jl.timeoutManager.setTimeout(()=>{this.#f.isStale||this.updateResult()},b+1)}#v(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#d):this.options.refetchInterval)??!1}#w(a){this.#s(),this.#n=a,!jk.isServer&&!1!==(0,jk.resolveEnabled)(this.options.enabled,this.#d)&&(0,jk.isValidTimeout)(this.#n)&&0!==this.#n&&(this.#m=jl.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||jf.focusManager.isFocused())&&this.#p()},this.#n))}#q(){this.#u(),this.#w(this.#v())}#r(){this.#l&&(jl.timeoutManager.clearTimeout(this.#l),this.#l=void 0)}#s(){this.#m&&(jl.timeoutManager.clearInterval(this.#m),this.#m=void 0)}createResult(a,b){let c,d=this.#d,e=this.options,f=this.#f,g=this.#g,h=this.#h,i=a!==d?a.state:this.#e,{state:j}=a,k={...j},l=!1;if(b._optimisticResults){let c=this.hasListeners(),f=!c&&jn(a,b),g=c&&jp(a,d,b,e);(f||g)&&(k={...k,...(0,jh.fetchState)(j.data,a.options)}),"isRestoring"===b._optimisticResults&&(k.fetchStatus="idle")}let{error:m,errorUpdatedAt:n,status:o}=k;c=k.data;let p=!1;if(void 0!==b.placeholderData&&void 0===c&&"pending"===o){let a;f?.isPlaceholderData&&b.placeholderData===h?.placeholderData?(a=f.data,p=!0):a="function"==typeof b.placeholderData?b.placeholderData(this.#k?.state.data,this.#k):b.placeholderData,void 0!==a&&(o="success",c=(0,jk.replaceData)(f?.data,a,b),l=!0)}if(b.select&&void 0!==c&&!p)if(f&&c===g?.data&&b.select===this.#i)c=this.#j;else try{this.#i=b.select,c=b.select(c),c=(0,jk.replaceData)(f?.data,c,b),this.#j=c,this.#b=null}catch(a){this.#b=a}this.#b&&(m=this.#b,c=this.#j,n=Date.now(),o="error");let q="fetching"===k.fetchStatus,r="pending"===o,s="error"===o,t=r&&q,u=void 0!==c,v={status:o,fetchStatus:k.fetchStatus,isPending:r,isSuccess:"success"===o,isError:s,isInitialLoading:t,isLoading:t,data:c,dataUpdatedAt:k.dataUpdatedAt,error:m,errorUpdatedAt:n,failureCount:k.fetchFailureCount,failureReason:k.fetchFailureReason,errorUpdateCount:k.errorUpdateCount,isFetched:k.dataUpdateCount>0||k.errorUpdateCount>0,isFetchedAfterMount:k.dataUpdateCount>i.dataUpdateCount||k.errorUpdateCount>i.errorUpdateCount,isFetching:q,isRefetching:q&&!r,isLoadingError:s&&!u,isPaused:"paused"===k.fetchStatus,isPlaceholderData:l,isRefetchError:s&&u,isStale:jq(a,b),refetch:this.refetch,promise:this.#c,isEnabled:!1!==(0,jk.resolveEnabled)(b.enabled,a)};if(this.options.experimental_prefetchInRender){let b=void 0!==v.data,c="error"===v.status&&!b,e=a=>{c?a.reject(v.error):b&&a.resolve(v.data)},f=()=>{e(this.#c=v.promise=(0,jj.pendingThenable)())},g=this.#c;switch(g.status){case"pending":a.queryHash===d.queryHash&&e(g);break;case"fulfilled":(c||v.data!==g.value)&&f();break;case"rejected":c&&v.error===g.reason||f()}}return v}updateResult(){let a=this.#f,b=this.createResult(this.#d,this.options);if(this.#g=this.#d.state,this.#h=this.options,void 0!==this.#g.data&&(this.#k=this.#d),(0,jk.shallowEqualObjects)(b,a))return;this.#f=b;let c=()=>{if(!a)return!0;let{notifyOnChangeProps:b}=this.options,c="function"==typeof b?b():b;if("all"===c||!c&&!this.#o.size)return!0;let d=new Set(c??this.#o);return this.options.throwOnError&&d.add("error"),Object.keys(this.#f).some(b=>this.#f[b]!==a[b]&&d.has(b))};this.#x({listeners:c()})}#t(){let a=this.#a.getQueryCache().build(this.#a,this.options);if(a===this.#d)return;let b=this.#d;this.#d=a,this.#e=a.state,this.hasListeners()&&(b?.removeObserver(this),a.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#q()}#x(a){jg.notifyManager.batch(()=>{a.listeners&&this.listeners.forEach(a=>{a(this.#f)}),this.#a.getQueryCache().notify({query:this.#d,type:"observerResultsUpdated"})})}};function jn(a,b){return!1!==(0,jk.resolveEnabled)(b.enabled,a)&&void 0===a.state.data&&("error"!==a.state.status||!1!==b.retryOnMount)||void 0!==a.state.data&&jo(a,b,b.refetchOnMount)}function jo(a,b,c){if(!1!==(0,jk.resolveEnabled)(b.enabled,a)&&"static"!==(0,jk.resolveStaleTime)(b.staleTime,a)){let d="function"==typeof c?c(a):c;return"always"===d||!1!==d&&jq(a,b)}return!1}function jp(a,b,c,d){return(a!==b||!1===(0,jk.resolveEnabled)(d.enabled,a))&&(!c.suspense||"error"!==a.state.status)&&jq(a,c)}function jq(a,b){return!1!==(0,jk.resolveEnabled)(b.enabled,a)&&a.isStaleByTime((0,jk.resolveStaleTime)(b.staleTime,a))}var jr=a.i(11508),js=N.createContext((j=!1,{clearReset:()=>{j=!1},reset:()=>{j=!0},isReset:()=>j})),jt=N.createContext(!1);jt.Provider;var ju=(a,b,c)=>b.fetchOptimistic(a).catch(()=>{c.clearReset()});function jv(a,b){return function(a,b,c){let d,e=N.useContext(jt),f=N.useContext(js),g=(0,jr.useQueryClient)(c),h=g.defaultQueryOptions(a);g.getDefaultOptions().queries?._experimental_beforeQuery?.(h);let i=g.getQueryCache().get(h.queryHash);if(h._optimisticResults=e?"isRestoring":"optimistic",h.suspense){let a=a=>"static"===a?a:Math.max(a??1e3,1e3),b=h.staleTime;h.staleTime="function"==typeof b?(...c)=>a(b(...c)):a(b),"number"==typeof h.gcTime&&(h.gcTime=Math.max(h.gcTime,1e3))}d=i?.state.error&&"function"==typeof h.throwOnError?(0,jk.shouldThrowError)(h.throwOnError,[i.state.error,i]):h.throwOnError,(h.suspense||h.experimental_prefetchInRender||d)&&!f.isReset()&&(h.retryOnMount=!1),N.useEffect(()=>{f.clearReset()},[f]);let j=!g.getQueryCache().get(h.queryHash),[k]=N.useState(()=>new b(g,h)),l=k.getOptimisticResult(h),m=!e&&!1!==a.subscribed;if(N.useSyncExternalStore(N.useCallback(a=>{let b=m?k.subscribe(jg.notifyManager.batchCalls(a)):jk.noop;return k.updateResult(),b},[k,m]),()=>k.getCurrentResult(),()=>k.getCurrentResult()),N.useEffect(()=>{k.setOptions(h)},[h,k]),h?.suspense&&l.isPending)throw ju(h,k,f);if((({result:a,errorResetBoundary:b,throwOnError:c,query:d,suspense:e})=>a.isError&&!b.isReset()&&!a.isFetching&&d&&(e&&void 0===a.data||(0,jk.shouldThrowError)(c,[a.error,d])))({result:l,errorResetBoundary:f,throwOnError:h.throwOnError,query:i,suspense:h.suspense}))throw l.error;if(g.getDefaultOptions().queries?._experimental_afterQuery?.(h,l),h.experimental_prefetchInRender&&!jk.isServer&&l.isLoading&&l.isFetching&&!e){let a=j?ju(h,k,f):i?.promise;a?.catch(jk.noop).finally(()=>{k.updateResult()})}return h.notifyOnChangeProps?l:k.trackResult(l)}(a,jm,b)}var jw=a.i(12794),jx=ji,jy=class extends jx.Subscribable{#a;#f=void 0;#y;#z;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#A()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,jk.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#y,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,jk.hashKey)(b.mutationKey)!==(0,jk.hashKey)(this.options.mutationKey)?this.reset():this.#y?.state.status==="pending"&&this.#y.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#y?.removeObserver(this)}onMutationUpdate(a){this.#A(),this.#x(a)}getCurrentResult(){return this.#f}reset(){this.#y?.removeObserver(this),this.#y=void 0,this.#A(),this.#x()}mutate(a,b){return this.#z=b,this.#y?.removeObserver(this),this.#y=this.#a.getMutationCache().build(this.#a,this.options),this.#y.addObserver(this),this.#y.execute(a)}#A(){let a=this.#y?.state??(0,jw.getDefaultState)();this.#f={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#x(a){jg.notifyManager.batch(()=>{if(this.#z&&this.hasListeners()){let b=this.#f.variables,c=this.#f.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};if(a?.type==="success"){try{this.#z.onSuccess?.(a.data,b,c,d)}catch(a){Promise.reject(a)}try{this.#z.onSettled?.(a.data,null,b,c,d)}catch(a){Promise.reject(a)}}else if(a?.type==="error"){try{this.#z.onError?.(a.error,b,c,d)}catch(a){Promise.reject(a)}try{this.#z.onSettled?.(void 0,a.error,b,c,d)}catch(a){Promise.reject(a)}}}this.listeners.forEach(a=>{a(this.#f)})})}};function jz(a,b){let c=(0,jr.useQueryClient)(b),[d]=N.useState(()=>new jy(c,a));N.useEffect(()=>{d.setOptions(a)},[d,a]);let e=N.useSyncExternalStore(N.useCallback(a=>d.subscribe(jg.notifyManager.batchCalls(a)),[d]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),f=N.useCallback((a,b)=>{d.mutate(a,b).catch(jk.noop)},[d]);if(e.error&&(0,jk.shouldThrowError)(d.options.throwOnError,[e.error]))throw e.error;return{...e,mutate:f,mutateAsync:e.mutate}}async function jA(b){if(!(["image/heic","image/heif","image/heic-sequence","image/heif-sequence"].includes(b.type.toLowerCase())||b.name.toLowerCase().endsWith(".heic")||b.name.toLowerCase().endsWith(".heif")))return b;console.log("[HEIC] Converting HEIC to JPEG:",b.name);try{let c=(await a.A(46269)).default,d=await c({blob:b,toType:"image/jpeg",quality:.92}),e=Array.isArray(d)?d[0]:d,f=b.name.replace(/\.(heic|heif)$/i,".jpg"),g=new File([e],f,{type:"image/jpeg",lastModified:b.lastModified});return console.log("[HEIC] Conversion complete:",{original:{name:b.name,size:b.size,type:b.type},converted:{name:g.name,size:g.size,type:g.type}}),g}catch(a){return console.error("[HEIC] Conversion failed, using original:",a),b}}function jB({photo:a,secretKey:b,showCloudBadge:c=!0}){let[d,e]=(0,N.useState)(null),[f,g]=(0,N.useState)(!1),[h,i]=(0,N.useState)(!1),[j,k]=(0,N.useState)(!1),[l,m]=(0,N.useState)(!1),n=(0,N.useRef)(null);return((0,N.useEffect)(()=>{if(b&&!d)return(async()=>{i(!0);try{let c=a.encryptedBlob;if(!c&&a.cid&&iG(a.cid)){k(!0),m(!0),console.log("Fetching from IPFS for thumbnail:",a.cid);try{c=await iF(a.cid),console.log("Fetched from IPFS:",{cid:a.cid,size:c.size})}catch(b){console.error(`Failed to fetch from IPFS (CID: ${a.cid}):`,b),g(!0);return}finally{k(!1)}}if(!c){console.log("No blob available for:",a.cid),m(!0);return}let d=await (0,gC.decryptFile)(c,a.nonce,b,a.mimeType);if(d){let a=URL.createObjectURL(d);n.current=a,e(a)}else g(!0)}catch(b){console.error("Failed to decrypt photo:",a.cid,b),g(!0)}finally{i(!1)}})(),()=>{if(n.current){let a=n.current;setTimeout(()=>{try{URL.revokeObjectURL(a)}catch(a){}},1e3),n.current=null}}},[a,b,d]),f)?(0,M.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center bg-red-50 text-red-500 p-2 text-center",children:[(0,M.jsx)(aH,{name:"lock",size:24,className:"mb-1 opacity-50"}),(0,M.jsx)("span",{className:"text-[10px]",children:"Fehler"})]}):j?(0,M.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center bg-blue-50",children:[(0,M.jsx)(gL,{className:"w-5 h-5 text-blue-400 mb-1 animate-pulse"}),(0,M.jsx)(gK,{className:"w-4 h-4 animate-spin text-blue-400"}),(0,M.jsx)("span",{className:"text-[9px] text-blue-500 mt-1",children:"Laden..."})]}):h||!d?!l||d||h?(0,M.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,M.jsx)(gK,{className:"w-6 h-6 animate-spin text-gray-400"})}):(0,M.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-100 relative",children:[(0,M.jsx)(gL,{className:"w-6 h-6 text-gray-400"}),(0,M.jsx)("span",{className:"text-[9px] text-gray-500 mt-1",children:"In der Cloud"})]}):(0,M.jsxs)("div",{className:"relative w-full h-full",children:[(0,M.jsx)("img",{src:d,alt:"",className:"w-full h-full object-cover animate-in fade-in duration-500",loading:"lazy"}),c&&l&&(0,M.jsx)("div",{className:"absolute bottom-1 right-1 bg-black/50 rounded-full p-1",children:(0,M.jsx)(gL,{className:"w-3 h-3 text-white"})})]})}function jC({photosCount:a}){let b,c,[d,e]=(0,N.useState)(""),[f,g]=(0,N.useState)(!1),[h,i]=(0,N.useState)(!1),[j,k]=(0,N.useState)(null),[l,m]=(0,N.useState)(!1),[n,o]=(0,N.useState)(new Set),[p,q]=(0,N.useState)(null),[r,s]=(0,N.useState)(null),[t,u]=(0,N.useState)(null),[v,w]=(0,N.useState)(!1),[x,y]=(0,N.useState)(!1),z=(0,N.useRef)(null),{secretKey:A}=gH(),{photos:B,uploadPhoto:C,isUploading:D,uploadProgress:E}=function(a){let b=(0,jr.useQueryClient)(),[c,d]=(0,N.useState)(null);(0,N.useEffect)(()=>{a?(0,gC.getUserKeyHash)(a).then(d):d(null)},[a]);let{data:e=[],isLoading:f,error:g}=jv({queryKey:["photos"],queryFn:iH.getAllPhotos,enabled:!0}),{data:h=0}=jv({queryKey:["photoCount"],queryFn:iH.getPhotoCount}),[i,j]=(0,N.useState)(0),k=jz({mutationFn:async b=>{let d;if(!a)throw Error("No encryption key");if(!c)throw Error("userKeyHash not ready - bitte kurz warten");console.log("[Upload] Starting upload:",b.name),j(0);let e=await jA(b),{encrypted:f,nonce:g}=await (0,gC.encryptFile)(e,a);console.log("[Upload] Encrypted:",{size:f.size});try{d=await iE(f,e.name,a=>{j(a)}),console.log("[Upload] IPFS CID:",d)}catch(a){console.error("[Upload] IPFS failed:",a),console.log("[Upload] Using fallback CID:",d=`cid_${Date.now()}_${Math.random().toString(36).slice(2)}`)}let h={cid:d,nonce:g,fileName:e.name,mimeType:e.type,fileSize:e.size,uploadedAt:new Date,encryptedBlob:f};try{await (0,iH.savePhoto)(h),console.log("[Upload] Saved to IndexedDB:",d)}catch(a){throw console.error("[Upload] IndexedDB save FAILED:",a),a}let i=(0,iA.getDeviceId)();try{await iv(d,e.size,i,g,e.type,c),console.log("[Upload] Supabase synced:",d)}catch(a){console.error("[Upload] Supabase sync failed (local + IPFS OK):",a)}return h},onSuccess:()=>{b.invalidateQueries({queryKey:["photos"]}),b.invalidateQueries({queryKey:["photoCount"]}),console.log("[Upload] Complete - queries invalidated")},onError:a=>{console.error("[Upload] Mutation failed:",a)}}),l=jz({mutationFn:async a=>{await (0,iH.deletePhoto)(a)},onSuccess:()=>{b.invalidateQueries({queryKey:["photos"]}),b.invalidateQueries({queryKey:["photoCount"]})}}),m=(0,N.useCallback)(async b=>{if(!a||!b.encryptedBlob)return null;let c=await (0,gC.decryptFile)(b.encryptedBlob,b.nonce,a,b.mimeType);return c?URL.createObjectURL(c):null},[a]);return{photos:e,photoCount:h,isLoading:f,error:g,uploadPhoto:k.mutate,deletePhoto:l.mutate,decryptPhoto:m,isUploading:k.isPending,uploadProgress:i,userKeyHash:c}}(A),{remoteCIDs:F,remoteCIDsFromOtherDevices:G,isConnected:H}=function(a={}){let{onNewPhoto:b,onPhotoDeleted:c,enabled:d=!0,secretKey:e}=a,[f,g]=(0,N.useState)([]),[h,i]=(0,N.useState)(!1),[j,k]=(0,N.useState)(null),[l,m]=(0,N.useState)(null),n="server";(0,N.useEffect)(()=>{e?(0,gC.getUserKeyHash)(e).then(m):m(null)},[e]);let o=(0,N.useCallback)(async()=>{if(!l)return[];try{let a=(await iw(n,l)).map(a=>({cid:a.cid,device_id:a.device_id,uploaded_at:a.uploaded_at,file_size_bytes:a.file_size_bytes,nonce:a.nonce||null,mime_type:a.mime_type||null,isFromOtherDevice:a.device_id!==n}));return g(a),k(null),a}catch(a){return console.error("Failed to load remote CIDs:",a),k(a),[]}},[n,l]);(0,N.useEffect)(()=>{},[d,n,l,b,c,o]);let p=(0,N.useCallback)(async()=>o(),[o]),q=f.filter(a=>a.isFromOtherDevice);return{remoteCIDs:f,remoteCIDsFromOtherDevices:q,isConnected:h,lastSyncError:j,refresh:p,deviceId:n,userKeyHash:l}}({onNewPhoto:(0,N.useCallback)(a=>{console.log("New photo from device:",a.device_id),s(`Neues Foto von anderem Ger\xe4t empfangen`),setTimeout(()=>s(null),3e3)},[]),enabled:!0,secretKey:A}),I=(b=B.map(a=>({id:a.id?.toString()||a.cid,cid:a.cid,placeholderUrl:"",category:"photo",date:a.uploadedAt.toISOString().split("T")[0],metadata:a,isLocal:!0,isCloud:iG(a.cid)})),c=new Set(B.map(a=>a.cid)),[...b,...F.filter(a=>!c.has(a.cid)).map(a=>({id:a.cid,cid:a.cid,placeholderUrl:"",category:"cloud",date:a.uploaded_at?new Date(a.uploaded_at).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],metadata:{cid:a.cid,nonce:a.nonce||"",fileName:`cloud_${a.cid}`,mimeType:a.mime_type||"image/jpeg",fileSize:a.file_size_bytes||0,uploadedAt:a.uploaded_at?new Date(a.uploaded_at):new Date},isLocal:!1,isCloud:!0}))]),J=(0,N.useMemo)(()=>{var b;let c,d;return I.length>0?I:(b=Math.min(a,50),c=["nature","architecture","travel","food","animals","city","landscape","portrait","ocean","forest"],d=new Date,Array.from({length:b},(a,b)=>{let e=new Date(d);return e.setDate(e.getDate()-Math.floor(b/3)),{id:`photo-${b}`,cid:`Qm${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}`,placeholderUrl:`https://picsum.photos/seed/${b+100}/400/400`,category:c[b%c.length],date:e.toISOString().split("T")[0],metadata:void 0}}))},[I,a]),K=(0,N.useMemo)(()=>J.filter(a=>(!j||a.category===j)&&(!d||!!a.category.includes(d.toLowerCase()))),[J,j,d]),L=(0,N.useMemo)(()=>{let a;return a={},K.forEach(b=>{a[b.date]||(a[b.date]=[]),a[b.date].push(b)}),Object.entries(a).map(([a,b])=>{var c;let d,e,f;return{date:a,photos:b,label:(d=new Date(c=a),((f=new Date(e=new Date)).setDate(f.getDate()-1),c===e.toISOString().split("T")[0])?"Heute":c===f.toISOString().split("T")[0]?"Gestern":d.toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long"}))}})},[K]),O=async a=>{if(A&&a.metadata){w(!0),u(null);try{let b=a.metadata.encryptedBlob;if(!b&&a.cid&&iG(a.cid)&&(console.log("Loading full-res from IPFS:",a.cid),b=await iF(a.cid)),!b)return void console.error("No blob available for fullscreen");let c=await (0,gC.decryptFile)(b,a.metadata.nonce,A,a.metadata.mimeType);if(c){let a=URL.createObjectURL(c);u(a)}}catch(a){console.error("Failed to load fullscreen photo:",a)}finally{w(!1)}}},P=async a=>{if(A&&a.metadata){y(!0);try{let b=a.metadata.encryptedBlob;if(!b&&a.cid&&iG(a.cid)&&(b=await iF(a.cid)),!b)return;let c=await (0,gC.decryptFile)(b,a.metadata.nonce,A,a.metadata.mimeType);if(c){let b=URL.createObjectURL(c),d=document.createElement("a");d.href=b,d.download=a.metadata.fileName||`photo_${a.cid.slice(0,8)}.jpg`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(b),s("Foto heruntergeladen!"),setTimeout(()=>s(null),2e3)}}catch(a){console.error("Failed to download photo:",a)}finally{y(!1)}}},Q=()=>{z.current&&(clearTimeout(z.current),z.current=null)};return(0,M.jsxs)("div",{className:"flex flex-col h-full bg-[#F2F2F7]",children:[(0,M.jsx)("header",{className:"h-[60px] bg-white border-b border-[#E5E5EA] px-4 flex items-center justify-between shrink-0",children:f?(0,M.jsxs)("div",{className:"flex-1 flex items-center gap-3",children:[(0,M.jsxs)("div",{className:"flex-1 bg-[#E5E5EA] rounded-lg px-3 py-2 flex items-center gap-2",children:[(0,M.jsx)(aH,{name:"search",size:16}),(0,M.jsx)("input",{type:"text",placeholder:"Suchen...",value:d,onChange:a=>e(a.target.value),className:"flex-1 bg-transparent text-[15px] text-[#1D1D1F] outline-none",autoFocus:!0})]}),(0,M.jsx)("button",{onClick:()=>{g(!1),e("")},className:"text-[17px] text-[#007AFF] ios-tap-target",children:"Abbrechen"})]}):l?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("button",{onClick:()=>{m(!1),o(new Set)},className:"text-[17px] text-[#007AFF] ios-tap-target",children:"Abbrechen"}),(0,M.jsxs)("span",{className:"sf-pro-display text-[17px] text-[#1D1D1F]",children:[n.size," ausgewhlt"]}),(0,M.jsx)("button",{onClick:()=>{console.log("TODO: Delete selected photos",Array.from(n))},className:"text-[17px] text-[#FF3B30] ios-tap-target",children:"Lschen"})]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)(aH,{name:"lock",size:20}),(0,M.jsx)("h1",{className:"sf-pro-display text-[20px] text-[#1D1D1F]",children:"Galerie"}),H?(0,M.jsx)(gL,{className:"w-4 h-4 text-[#007AFF]"}):(0,M.jsx)(jd,{className:"w-4 h-4 text-[#8E8E93]"})]}),(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsxs)("label",{className:"ios-tap-target cursor-pointer",children:[(0,M.jsx)("div",{className:D?"animate-pulse opacity-50":"",children:(0,M.jsx)(aH,{name:"upload",size:24})}),(0,M.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:a=>{Array.from(a.target.files||[]).forEach(a=>C(a))},className:"hidden",disabled:D})]}),(0,M.jsx)("button",{onClick:()=>g(!0),className:"ios-tap-target",children:(0,M.jsx)(aH,{name:"search",size:24})}),(0,M.jsx)("button",{onClick:()=>i(!h),className:"ios-tap-target",children:(0,M.jsx)(jc,{className:`w-6 h-6 ${j?"text-[#30D158]":"text-[#007AFF]"}`})})]})]})}),h&&(0,M.jsx)("div",{className:"bg-white border-b border-[#E5E5EA] px-4 py-3 shrink-0",children:(0,M.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-1 -mx-1 px-1",children:[(0,M.jsx)("button",{onClick:()=>k(null),className:`px-4 py-1.5 rounded-full text-[15px] whitespace-nowrap shrink-0 ${null===j?"bg-[#007AFF] text-white":"bg-[#E5E5EA] text-[#1D1D1F]"}`,children:"Alle"}),[{id:"nature",label:"Natur"},{id:"architecture",label:"Architektur"},{id:"travel",label:"Reisen"},{id:"food",label:"Essen"},{id:"animals",label:"Tiere"},{id:"city",label:"Stadt"},{id:"landscape",label:"Landschaft"}].map(a=>(0,M.jsx)("button",{onClick:()=>k(a.id),className:`px-4 py-1.5 rounded-full text-[15px] whitespace-nowrap shrink-0 ${j===a.id?"bg-[#007AFF] text-white":"bg-[#E5E5EA] text-[#1D1D1F]"}`,children:a.label},a.id))]})}),(0,M.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[L.map(a=>(0,M.jsxs)("div",{className:"mb-2",children:[(0,M.jsx)("div",{className:"sticky top-0 bg-[#F2F2F7]/95 backdrop-blur-sm px-3 py-2 z-10",children:(0,M.jsx)("p",{className:"text-[13px] font-semibold text-[#6E6E73]",children:a.label})}),(0,M.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-[2px] md:gap-1 px-[2px] md:px-1",children:a.photos.map(a=>{let b=void 0!==a.metadata;return(0,M.jsxs)("button",{onClick:()=>{var b;return b=a.id,void(l?o(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c}):(q(b),a.metadata&&O(a)))},onTouchStart:()=>{var b;return b=a.id,void(z.current=setTimeout(()=>{m(!0),o(new Set([b]))},500))},onTouchEnd:Q,onTouchCancel:Q,onContextMenu:b=>{b.preventDefault(),m(!0),o(new Set([a.id]))},className:"relative aspect-square overflow-hidden bg-[#E5E5EA]",children:[b?(0,M.jsx)(jB,{photo:a.metadata,secretKey:A,showCloudBadge:!0}):a.placeholderUrl?(0,M.jsx)("img",{src:a.placeholderUrl,alt:"",className:"w-full h-full object-cover",loading:"lazy"}):null,l&&(0,M.jsx)("div",{className:"absolute inset-0 bg-black/20",children:(0,M.jsx)("div",{className:`absolute top-2 right-2 w-6 h-6 rounded-full border-2 flex items-center justify-center ${n.has(a.id)?"bg-[#007AFF] border-[#007AFF]":"border-white bg-black/30"}`,children:n.has(a.id)&&(0,M.jsx)(gE,{className:"w-4 h-4 text-white"})})})]},a.id)})})]},a.date)),(0,M.jsxs)("div",{className:"text-center py-6 px-4",children:[(0,M.jsx)("p",{className:"text-[13px] text-[#8E8E93]",children:"Lange drcken zum Auswhlen  Tippen zum ffnen"}),(0,M.jsxs)("p",{className:"text-[11px] text-[#C7C7CC] mt-1",children:[B.length," Fotos lokal  ",F.length," in der Cloud"]}),G.length>0&&(0,M.jsxs)("div",{className:"text-[11px] text-[#007AFF] mt-1 flex items-center justify-center gap-1",children:[(0,M.jsx)(aH,{name:"smartphone",size:12}),G.length," von anderen Gerten"]})]})]}),r&&(0,M.jsxs)("div",{className:"fixed top-[70px] left-1/2 -translate-x-1/2 bg-[#1D1D1F] text-white px-4 py-2 rounded-full text-[13px] flex items-center gap-2 z-50 animate-pulse",children:[(0,M.jsx)(gL,{className:"w-4 h-4"}),r]}),p&&(0,M.jsxs)("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[(0,M.jsxs)("header",{className:"h-[60px] flex items-center justify-between px-4 bg-black/80",children:[(0,M.jsx)("button",{onClick:()=>{q(null),t&&(URL.revokeObjectURL(t),u(null))},className:"ios-tap-target",children:(0,M.jsx)(i2,{className:"w-6 h-6 text-white"})}),(0,M.jsxs)("span",{className:"text-[17px] text-white",children:["Foto ",J.findIndex(a=>a.id===p)+1," von"," ",J.length]}),(0,M.jsx)("div",{className:"w-10"})]}),(0,M.jsx)("div",{className:"flex-1 flex items-center justify-center p-4",children:v?(0,M.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,M.jsx)(gK,{className:"w-12 h-12 animate-spin text-white/60"}),(0,M.jsx)("p",{className:"text-white/60 text-center",children:"Lade von IPFS..."})]}):t?(0,M.jsx)("img",{src:t,alt:"",className:"max-w-full max-h-full object-contain rounded-lg"}):(0,M.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,M.jsx)(aH,{name:"lock",size:64}),(0,M.jsx)("p",{className:"text-white/80 text-center",children:"Verschlsseltes Foto"})]})}),(0,M.jsxs)("footer",{className:"h-[80px] flex items-center justify-center gap-6 bg-black/80 px-4",children:[(0,M.jsxs)("button",{onClick:()=>{let a=J.find(a=>a.id===p);a&&P(a)},disabled:x,className:"flex flex-col items-center gap-1 ios-tap-target",children:[x?(0,M.jsx)(gK,{className:"w-6 h-6 animate-spin text-white"}):(0,M.jsx)(je,{className:"w-6 h-6 text-white"}),(0,M.jsx)("span",{className:"text-[11px] text-white/80",children:"Herunterladen"})]}),(0,M.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,M.jsx)(aH,{name:"lock",size:20}),(0,M.jsx)("span",{className:"text-[11px] text-white/60",children:"Verschlsselt"})]})]})]}),D&&(0,M.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[60] flex items-center justify-center p-6",children:(0,M.jsxs)("div",{className:"bg-white w-full max-w-[280px] rounded-2xl p-6 shadow-2xl flex flex-col items-center",children:[(0,M.jsx)("div",{className:"w-16 h-16 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-4",children:(0,M.jsx)(gK,{className:"w-8 h-8 text-[#007AFF] animate-spin"})}),(0,M.jsxs)("h3",{className:"sf-pro-display text-[17px] font-semibold text-[#1D1D1F] mb-1",children:["Foto wird gesichert (",E,"%)"]}),(0,M.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center",children:"Verschlsselung & IPFS-Upload wird durchgefhrt..."}),(0,M.jsx)("div",{className:"w-full bg-[#E5E5EA] h-1.5 rounded-full mt-4 overflow-hidden",children:(0,M.jsx)("div",{className:"bg-[#007AFF] h-full transition-all duration-300",style:{width:`${E}%`}})})]})})]})}let jD={isOnboarded:!1,backupActive:!1,selectedPlan:"free",autoBackupEnabled:!0,backgroundBackupEnabled:!1,photosCount:0,lastBackup:"Noch nie",permanence:0,encryptionKey:"",backupPhrase:[],devices:[],photoSource:"photos-app"};function jE(){let[a,b]=(0,N.useState)(jD),[c,d]=(0,N.useState)("gallery"),[e,f]=(0,N.useState)("loading"),[g,h]=(0,N.useState)(null),{data:i,isPending:j}=gx(),k=(0,N.useRef)(!1),l=(0,N.useCallback)(async(a,b)=>{if(k.current)return void console.log("[Device] Already registered this session, skipping");try{let c=(0,iA.getDeviceId)(),d=(0,iA.getDeviceName)(),e=(0,iA.getDeviceType)();await iy(c,d,e,a,b),k.current=!0,console.log("[Device] Registered successfully:",c)}catch(a){console.error("[Device] Registration failed:",a)}},[]);(0,N.useEffect)(()=>{(async()=>{if(j)return;if(!i?.user)return f("auth");let a=i.user;h({id:a.id,email:a.email,vaultKeyHash:a.vault_key_hash||null});let c=(0,gC.loadKeyFromStorage)();if(c){let d=await (0,gC.getUserKeyHash)(c);if(a.vault_key_hash&&d!==a.vault_key_hash){console.warn("Local key doesn't match account's vault_key_hash"),(0,gC.clearKeyFromStorage)(),f("unlock");return}await l(d,a.id),b(a=>({...a,isOnboarded:!0})),f("main")}else a.vault_key_hash?f("unlock"):f("setup")})()},[i,j,l]);let m=(0,N.useCallback)(a=>{h(a);let c=(0,gC.loadKeyFromStorage)();c?(0,gC.getUserKeyHash)(c).then(c=>{a.vaultKeyHash&&c!==a.vaultKeyHash?((0,gC.clearKeyFromStorage)(),f("unlock")):(l(c,a.id),b(a=>({...a,isOnboarded:!0})),f("main"))}):a.vaultKeyHash?f("unlock"):f("setup")},[l]),n=(0,N.useCallback)(async(a,c)=>{g&&(g.vaultKeyHash||(await jF(g.id,c),h({...g,vaultKeyHash:c})),await l(c,g.id),b(a=>({...a,isOnboarded:!0})),f("main"))},[g,l]),o=(0,N.useCallback)(async a=>{g&&(await jF(g.id,a),h({...g,vaultKeyHash:a}),await l(a,g.id),b(a=>({...a,isOnboarded:!0})),f("main"))},[g,l]),p=(0,N.useCallback)(async()=>{await gw(),(0,gC.clearKeyFromStorage)(),h(null),b(jD),f("auth")},[]);return"loading"===e||j?(0,M.jsx)(aJ,{}):"auth"===e?(0,M.jsx)("div",{className:"min-h-screen ios-bg-gray",children:(0,M.jsx)("div",{className:"max-w-[1200px] mx-auto min-h-screen bg-[#F2F2F7]",children:(0,M.jsx)(gz,{onSuccess:m})})}):"unlock"===e&&g?(0,M.jsx)("div",{className:"min-h-screen ios-bg-gray",children:(0,M.jsx)("div",{className:"max-w-[1200px] mx-auto min-h-screen bg-[#F2F2F7]",children:(0,M.jsx)(gD,{userEmail:g.email,expectedKeyHash:g.vaultKeyHash,onUnlock:n,onCreateNewVault:()=>f("setup"),onLogout:p})})}):"setup"===e&&g?(0,M.jsx)("div",{className:"min-h-screen ios-bg-gray",children:(0,M.jsx)("div",{className:"max-w-[1200px] mx-auto min-h-screen bg-[#F2F2F7]",children:(0,M.jsx)(gI,{userId:g.id,onComplete:o,onBack:()=>f("unlock")})})}):(0,M.jsx)("div",{className:"min-h-screen ios-bg-gray",children:(0,M.jsxs)("div",{className:"max-w-[1200px] mx-auto min-h-screen bg-[#F2F2F7] flex flex-col relative",children:[(0,M.jsxs)("div",{className:"flex-1 overflow-hidden pb-[80px]",children:["gallery"===c&&(0,M.jsx)(jC,{photosCount:a.photosCount}),"settings"===c&&(0,M.jsx)(i6,{state:a,setState:b,onRestartOnboarding:p})]}),(0,M.jsx)(jG,{currentScreen:c,onNavigate:a=>{d(a)}})]})})}async function jF(a,b){try{if(!(await fetch("/api/auth/update-vault-key",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a,keyHash:b})})).ok)throw Error("Failed to update vault key hash")}catch(a){throw console.error("Failed to update vault_key_hash:",a),a}}function jG({currentScreen:a,onNavigate:b}){return(0,M.jsxs)("nav",{className:"fixed bottom-0 left-0 right-0 h-[80px] bg-white/80 backdrop-blur-xl border-t border-[#E5E5EA]/50 flex items-start justify-around pt-2 pb-6 max-w-[1200px] mx-auto safe-area-bottom z-40",children:[(0,M.jsxs)("button",{onClick:()=>b("gallery"),className:"flex flex-col items-center gap-1 ios-tap-target px-8",children:[(0,M.jsx)(aH,{name:"image",size:24,className:"gallery"===a?"text-[#007AFF]":"text-[#6E6E73]"}),(0,M.jsx)("span",{className:`text-[10px] ${"gallery"===a?"text-[#007AFF]":"text-[#6E6E73]"}`,children:"Galerie"})]}),(0,M.jsxs)("button",{onClick:()=>b("settings"),className:"flex flex-col items-center gap-1 ios-tap-target px-8",children:[(0,M.jsx)(S,{className:`w-6 h-6 ${"settings"===a?"text-[#007AFF]":"text-[#6E6E73]"}`}),(0,M.jsx)("span",{className:`text-[10px] ${"settings"===a?"text-[#007AFF]":"text-[#6E6E73]"}`,children:"Einstellungen"})]})]})}a.s(["PhotoVaultApp",()=>jE],23605)}];

//# sourceMappingURL=_fde75b8c._.js.map