module.exports=[33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},92434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},68063,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getDeploymentId:function(){return f},getDeploymentIdQueryOrEmptyString:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(){return!1}function g(){return""}},4987,(a,b,c)=>{"use strict";function d({widthInt:a,heightInt:b,blurWidth:c,blurHeight:d,blurDataURL:e,objectFit:f}){let g=c?40*c:a,h=d?40*d:b,i=g&&h?`viewBox='0 0 ${g} ${h}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${i}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${i?"none":"contain"===f?"xMidYMid":"cover"===f?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${e}'/%3E%3C/svg%3E`}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getImageBlurSvg",{enumerable:!0,get:function(){return d}})},345,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={VALID_LOADERS:function(){return f},imageConfigDefault:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=["default","imgix","cloudinary","akamai","custom"],g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},94915,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getImgProps",{enumerable:!0,get:function(){return j}}),a.r(92434);let d=a.r(68063),e=a.r(4987),f=a.r(345),g=["-moz-initial","fill","none","scale-down",void 0];function h(a){return void 0!==a.default}function i(a){return void 0===a?a:"number"==typeof a?Number.isFinite(a)?a:NaN:"string"==typeof a&&/^[0-9]+$/.test(a)?parseInt(a,10):NaN}function j({src:a,sizes:b,unoptimized:c=!1,priority:j=!1,preload:k=!1,loading:l,className:m,quality:n,width:o,height:p,fill:q=!1,style:r,overrideSrc:s,onLoad:t,onLoadingComplete:u,placeholder:v="empty",blurDataURL:w,fetchPriority:x,decoding:y="async",layout:z,objectFit:A,objectPosition:B,lazyBoundary:C,lazyRoot:D,...E},F){var G;let H,I,J,{imgConf:K,showAltText:L,blurComplete:M,defaultLoader:N}=F,O=K||f.imageConfigDefault;if("allSizes"in O)H=O;else{let a=[...O.deviceSizes,...O.imageSizes].sort((a,b)=>a-b),b=O.deviceSizes.sort((a,b)=>a-b),c=O.qualities?.sort((a,b)=>a-b);H={...O,allSizes:a,deviceSizes:b,qualities:c}}if(void 0===N)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let P=E.loader||N;delete E.loader,delete E.srcSet;let Q="__next_img_default"in P;if(Q){if("custom"===H.loader)throw Object.defineProperty(Error(`Image with src "${a}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let a=P;P=b=>{let{config:c,...d}=b;return a(d)}}if(z){"fill"===z&&(q=!0);let a={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[z];a&&(r={...r,...a});let c={responsive:"100vw",fill:"100vw"}[z];c&&!b&&(b=c)}let R="",S=i(o),T=i(p);if((G=a)&&"object"==typeof G&&(h(G)||void 0!==G.src)){let b=h(a)?a.default:a;if(!b.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(b)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!b.height||!b.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(b)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(I=b.blurWidth,J=b.blurHeight,w=w||b.blurDataURL,R=b.src,!q)if(S||T){if(S&&!T){let a=S/b.width;T=Math.round(b.height*a)}else if(!S&&T){let a=T/b.height;S=Math.round(b.width*a)}}else S=b.width,T=b.height}let U=!j&&!k&&("lazy"===l||void 0===l);(!(a="string"==typeof a?a:R)||a.startsWith("data:")||a.startsWith("blob:"))&&(c=!0,U=!1),H.unoptimized&&(c=!0),Q&&!H.dangerouslyAllowSVG&&a.split("?",1)[0].endsWith(".svg")&&(c=!0);let V=i(n),W=Object.assign(q?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:A,objectPosition:B}:{},L?{}:{color:"transparent"},r),X=M||"empty"===v?null:"blur"===v?`url("data:image/svg+xml;charset=utf-8,${(0,e.getImageBlurSvg)({widthInt:S,heightInt:T,blurWidth:I,blurHeight:J,blurDataURL:w||"",objectFit:W.objectFit})}")`:`url("${v}")`,Y=g.includes(W.objectFit)?"fill"===W.objectFit?"100% 100%":"cover":W.objectFit,Z=X?{backgroundSize:Y,backgroundPosition:W.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:X}:{},$=function({config:a,src:b,unoptimized:c,width:e,quality:f,sizes:g,loader:h}){if(c){let a=(0,d.getDeploymentId)();if(b.startsWith("/")&&!b.startsWith("//")&&a){let c=b.includes("?")?"&":"?";b=`${b}${c}dpl=${a}`}return{src:b,srcSet:void 0,sizes:void 0}}let{widths:i,kind:j}=function({deviceSizes:a,allSizes:b},c,d){if(d){let c=/(^|\s)(1?\d?\d)vw/g,e=[];for(let a;a=c.exec(d);)e.push(parseInt(a[2]));if(e.length){let c=.01*Math.min(...e);return{widths:b.filter(b=>b>=a[0]*c),kind:"w"}}return{widths:b,kind:"w"}}return"number"!=typeof c?{widths:a,kind:"w"}:{widths:[...new Set([c,2*c].map(a=>b.find(b=>b>=a)||b[b.length-1]))],kind:"x"}}(a,e,g),k=i.length-1;return{sizes:g||"w"!==j?g:"100vw",srcSet:i.map((c,d)=>`${h({config:a,src:b,quality:f,width:c})} ${"w"===j?c:d+1}${j}`).join(", "),src:h({config:a,src:b,quality:f,width:i[k]})}}({config:H,src:a,unoptimized:c,width:S,quality:V,sizes:b,loader:P}),_=U?"lazy":l;return{props:{...E,loading:_,fetchPriority:x,width:S,height:T,decoding:y,className:m,style:{...W,...Z},sizes:$.sizes,srcSet:$.srcSet,src:s||$.src},meta:{unoptimized:c,preload:k||j,placeholder:v,fill:q}}}},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},94613,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return f}});let d=a.r(72131),e=()=>{};function f(a){let{headManager:b,reduceComponentsToState:c}=a;function f(){if(b&&b.mountedInstances){let a=d.Children.toArray(Array.from(b.mountedInstances).filter(Boolean));b.updateHead(c(a))}}return b?.mountedInstances?.add(a.children),f(),e(()=>(b?.mountedInstances?.add(a.children),()=>{b?.mountedInstances?.delete(a.children)})),e(()=>(b&&(b._pendingUpdate=f),()=>{b&&(b._pendingUpdate=f)})),null}},92966,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HeadManagerContext},58018,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return p},defaultHead:function(){return l}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(46058),h=a.r(87924),i=g._(a.r(72131)),j=f._(a.r(94613)),k=a.r(92966);function l(){return[(0,h.jsx)("meta",{charSet:"utf-8"},"charset"),(0,h.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function m(a,b){return"string"==typeof b||"number"==typeof b?a:b.type===i.default.Fragment?a.concat(i.default.Children.toArray(b.props.children).reduce((a,b)=>"string"==typeof b||"number"==typeof b?a:a.concat(b),[])):a.concat(b)}a.r(92434);let n=["name","httpEquiv","charSet","itemProp"];function o(a){let b,c,d,e;return a.reduce(m,[]).reverse().concat(l().reverse()).filter((b=new Set,c=new Set,d=new Set,e={},a=>{let f=!0,g=!1;if(a.key&&"number"!=typeof a.key&&a.key.indexOf("$")>0){g=!0;let c=a.key.slice(a.key.indexOf("$")+1);b.has(c)?f=!1:b.add(c)}switch(a.type){case"title":case"base":c.has(a.type)?f=!1:c.add(a.type);break;case"meta":for(let b=0,c=n.length;b<c;b++){let c=n[b];if(a.props.hasOwnProperty(c))if("charSet"===c)d.has(c)?f=!1:d.add(c);else{let b=a.props[c],d=e[c]||new Set;("name"!==c||!g)&&d.has(b)?f=!1:(d.add(b),e[c]=d)}}}return f})).reverse().map((a,b)=>{let c=a.key||b;return i.default.cloneElement(a,{key:c})})}let p=function({children:a}){let b=(0,i.useContext)(k.HeadManagerContext);return(0,h.jsx)(j.default,{reduceComponentsToState:o,headManager:b,children:a})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},4486,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ImageConfigContext},53773,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.RouterContext},35444,(a,b,c)=>{"use strict";function d(a,b){let c=a||75;return b?.qualities?.length?b.qualities.reduce((a,b)=>Math.abs(b-c)<Math.abs(a-c)?b:a,0):c}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findClosestQuality",{enumerable:!0,get:function(){return d}})},2305,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return g}});let d=a.r(35444),e=a.r(68063);function f({config:a,src:b,width:c,quality:f}){if(b.startsWith("/")&&b.includes("?")&&a.localPatterns?.length===1&&"**"===a.localPatterns[0].pathname&&""===a.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${b}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let g=(0,d.findClosestQuality)(f,a),h=(0,e.getDeploymentId)();return`${a.path}?url=${encodeURIComponent(b)}&w=${c}&q=${g}${b.startsWith("/")&&h?`&dpl=${h}`:""}`}f.__next_img_default=!0;let g=f},8591,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(72131);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},67161,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"Image",{enumerable:!0,get:function(){return u}});let d=a.r(33354),e=a.r(46058),f=a.r(87924),g=e._(a.r(72131)),h=d._(a.r(35112)),i=d._(a.r(58018)),j=a.r(94915),k=a.r(345),l=a.r(4486);a.r(92434);let m=a.r(53773),n=d._(a.r(2305)),o=a.r(8591),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function q(a,b,c,d,e,f,g){let h=a?.src;a&&a["data-loaded-src"]!==h&&(a["data-loaded-src"]=h,("decode"in a?a.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(a.parentElement&&a.isConnected){if("empty"!==b&&e(!0),c?.current){let b=new Event("load");Object.defineProperty(b,"target",{writable:!1,value:a});let d=!1,e=!1;c.current({...b,nativeEvent:b,currentTarget:a,target:a,isDefaultPrevented:()=>d,isPropagationStopped:()=>e,persist:()=>{},preventDefault:()=>{d=!0,b.preventDefault()},stopPropagation:()=>{e=!0,b.stopPropagation()}})}d?.current&&d.current(a)}}))}function r(a){return g.use?{fetchPriority:a}:{fetchpriority:a}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let s=(0,g.forwardRef)(({src:a,srcSet:b,sizes:c,height:d,width:e,decoding:h,className:i,style:j,fetchPriority:k,placeholder:l,loading:m,unoptimized:n,fill:p,onLoadRef:s,onLoadingCompleteRef:t,setBlurComplete:u,setShowAltText:v,sizesInput:w,onLoad:x,onError:y,...z},A)=>{let B=(0,g.useCallback)(a=>{a&&(y&&(a.src=a.src),a.complete&&q(a,l,s,t,u,n,w))},[a,l,s,t,u,y,n,w]),C=(0,o.useMergedRef)(A,B);return(0,f.jsx)("img",{...z,...r(k),loading:m,width:e,height:d,decoding:h,"data-nimg":p?"fill":"1",className:i,style:j,sizes:c,srcSet:b,src:a,ref:C,onLoad:a=>{q(a.currentTarget,l,s,t,u,n,w)},onError:a=>{v(!0),"empty"!==l&&u(!0),y&&y(a)}})});function t({isAppRouter:a,imgAttributes:b}){let c={as:"image",imageSrcSet:b.srcSet,imageSizes:b.sizes,crossOrigin:b.crossOrigin,referrerPolicy:b.referrerPolicy,...r(b.fetchPriority)};return a&&h.default.preload?(h.default.preload(b.src,c),null):(0,f.jsx)(i.default,{children:(0,f.jsx)("link",{rel:"preload",href:b.srcSet?void 0:b.src,...c},"__nimg-"+b.src+b.srcSet+b.sizes)})}let u=(0,g.forwardRef)((a,b)=>{let c=(0,g.useContext)(m.RouterContext),d=(0,g.useContext)(l.ImageConfigContext),e=(0,g.useMemo)(()=>{let a=p||d||k.imageConfigDefault,b=[...a.deviceSizes,...a.imageSizes].sort((a,b)=>a-b),c=a.deviceSizes.sort((a,b)=>a-b),e=a.qualities?.sort((a,b)=>a-b);return{...a,allSizes:b,deviceSizes:c,qualities:e,localPatterns:d?.localPatterns}},[d]),{onLoad:h,onLoadingComplete:i}=a,o=(0,g.useRef)(h);(0,g.useEffect)(()=>{o.current=h},[h]);let q=(0,g.useRef)(i);(0,g.useEffect)(()=>{q.current=i},[i]);let[r,u]=(0,g.useState)(!1),[v,w]=(0,g.useState)(!1),{props:x,meta:y}=(0,j.getImgProps)(a,{defaultLoader:n.default,imgConf:e,blurComplete:r,showAltText:v});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s,{...x,unoptimized:y.unoptimized,placeholder:y.placeholder,fill:y.fill,onLoadRef:o,onLoadingCompleteRef:q,setBlurComplete:u,setShowAltText:w,sizesInput:a.sizes,ref:b}),y.preload?(0,f.jsx)(t,{isAppRouter:!c,imgAttributes:x}):null]})});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},33095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(94915),h=a.r(67161),i=f._(a.r(2305));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},71987,(a,b,c)=>{b.exports=a.r(33095)},21756,(a,b,c)=>{!function(b){"use strict";var c,d=function(a){var b,c=new Float64Array(16);if(a)for(b=0;b<a.length;b++)c[b]=a[b];return c},e=function(){throw Error("no PRNG")},f=new Uint8Array(16),g=new Uint8Array(32);g[0]=9;var h=d(),i=d([1]),j=d([56129,1]),k=d([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=d([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=d([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),n=d([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),o=d([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(a,b,c,d){a[b]=c>>24&255,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=255&c,a[b+4]=d>>24&255,a[b+5]=d>>16&255,a[b+6]=d>>8&255,a[b+7]=255&d}function q(a,b,c,d,e){var f,g=0;for(f=0;f<e;f++)g|=a[b+f]^c[d+f];return(1&g-1>>>8)-1}function r(a,b,c,d){return q(a,b,c,d,16)}function s(a,b,c,d){return q(a,b,c,d,32)}function t(a,b,c,d){!function(a,b,c,d){for(var e,f=255&d[0]|(255&d[1])<<8|(255&d[2])<<16|(255&d[3])<<24,g=255&c[0]|(255&c[1])<<8|(255&c[2])<<16|(255&c[3])<<24,h=255&c[4]|(255&c[5])<<8|(255&c[6])<<16|(255&c[7])<<24,i=255&c[8]|(255&c[9])<<8|(255&c[10])<<16|(255&c[11])<<24,j=255&c[12]|(255&c[13])<<8|(255&c[14])<<16|(255&c[15])<<24,k=255&d[4]|(255&d[5])<<8|(255&d[6])<<16|(255&d[7])<<24,l=255&b[0]|(255&b[1])<<8|(255&b[2])<<16|(255&b[3])<<24,m=255&b[4]|(255&b[5])<<8|(255&b[6])<<16|(255&b[7])<<24,n=255&b[8]|(255&b[9])<<8|(255&b[10])<<16|(255&b[11])<<24,o=255&b[12]|(255&b[13])<<8|(255&b[14])<<16|(255&b[15])<<24,p=255&d[8]|(255&d[9])<<8|(255&d[10])<<16|(255&d[11])<<24,q=255&c[16]|(255&c[17])<<8|(255&c[18])<<16|(255&c[19])<<24,r=255&c[20]|(255&c[21])<<8|(255&c[22])<<16|(255&c[23])<<24,s=255&c[24]|(255&c[25])<<8|(255&c[26])<<16|(255&c[27])<<24,t=255&c[28]|(255&c[29])<<8|(255&c[30])<<16|(255&c[31])<<24,u=255&d[12]|(255&d[13])<<8|(255&d[14])<<16|(255&d[15])<<24,v=f,w=g,x=h,y=i,z=j,A=k,B=l,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=0;L<20;L+=2)z^=(e=v+H|0)<<7|e>>>25,D^=(e=z+v|0)<<9|e>>>23,H^=(e=D+z|0)<<13|e>>>19,v^=(e=H+D|0)<<18|e>>>14,E^=(e=A+w|0)<<7|e>>>25,I^=(e=E+A|0)<<9|e>>>23,w^=(e=I+E|0)<<13|e>>>19,A^=(e=w+I|0)<<18|e>>>14,J^=(e=F+B|0)<<7|e>>>25,x^=(e=J+F|0)<<9|e>>>23,B^=(e=x+J|0)<<13|e>>>19,F^=(e=B+x|0)<<18|e>>>14,y^=(e=K+G|0)<<7|e>>>25,C^=(e=y+K|0)<<9|e>>>23,G^=(e=C+y|0)<<13|e>>>19,K^=(e=G+C|0)<<18|e>>>14,w^=(e=v+y|0)<<7|e>>>25,x^=(e=w+v|0)<<9|e>>>23,y^=(e=x+w|0)<<13|e>>>19,v^=(e=y+x|0)<<18|e>>>14,B^=(e=A+z|0)<<7|e>>>25,C^=(e=B+A|0)<<9|e>>>23,z^=(e=C+B|0)<<13|e>>>19,A^=(e=z+C|0)<<18|e>>>14,G^=(e=F+E|0)<<7|e>>>25,D^=(e=G+F|0)<<9|e>>>23,E^=(e=D+G|0)<<13|e>>>19,F^=(e=E+D|0)<<18|e>>>14,H^=(e=K+J|0)<<7|e>>>25,I^=(e=H+K|0)<<9|e>>>23,J^=(e=I+H|0)<<13|e>>>19,K^=(e=J+I|0)<<18|e>>>14;v=v+f|0,w=w+g|0,x=x+h|0,y=y+i|0,z=z+j|0,A=A+k|0,B=B+l|0,C=C+m|0,D=D+n|0,E=E+o|0,F=F+p|0,G=G+q|0,H=H+r|0,I=I+s|0,J=J+t|0,K=K+u|0,a[0]=v>>>0&255,a[1]=v>>>8&255,a[2]=v>>>16&255,a[3]=v>>>24&255,a[4]=w>>>0&255,a[5]=w>>>8&255,a[6]=w>>>16&255,a[7]=w>>>24&255,a[8]=x>>>0&255,a[9]=x>>>8&255,a[10]=x>>>16&255,a[11]=x>>>24&255,a[12]=y>>>0&255,a[13]=y>>>8&255,a[14]=y>>>16&255,a[15]=y>>>24&255,a[16]=z>>>0&255,a[17]=z>>>8&255,a[18]=z>>>16&255,a[19]=z>>>24&255,a[20]=A>>>0&255,a[21]=A>>>8&255,a[22]=A>>>16&255,a[23]=A>>>24&255,a[24]=B>>>0&255,a[25]=B>>>8&255,a[26]=B>>>16&255,a[27]=B>>>24&255,a[28]=C>>>0&255,a[29]=C>>>8&255,a[30]=C>>>16&255,a[31]=C>>>24&255,a[32]=D>>>0&255,a[33]=D>>>8&255,a[34]=D>>>16&255,a[35]=D>>>24&255,a[36]=E>>>0&255,a[37]=E>>>8&255,a[38]=E>>>16&255,a[39]=E>>>24&255,a[40]=F>>>0&255,a[41]=F>>>8&255,a[42]=F>>>16&255,a[43]=F>>>24&255,a[44]=G>>>0&255,a[45]=G>>>8&255,a[46]=G>>>16&255,a[47]=G>>>24&255,a[48]=H>>>0&255,a[49]=H>>>8&255,a[50]=H>>>16&255,a[51]=H>>>24&255,a[52]=I>>>0&255,a[53]=I>>>8&255,a[54]=I>>>16&255,a[55]=I>>>24&255,a[56]=J>>>0&255,a[57]=J>>>8&255,a[58]=J>>>16&255,a[59]=J>>>24&255,a[60]=K>>>0&255,a[61]=K>>>8&255,a[62]=K>>>16&255,a[63]=K>>>24&255}(a,b,c,d)}function u(a,b,c,d){!function(a,b,c,d){for(var e,f=255&d[0]|(255&d[1])<<8|(255&d[2])<<16|(255&d[3])<<24,g=255&c[0]|(255&c[1])<<8|(255&c[2])<<16|(255&c[3])<<24,h=255&c[4]|(255&c[5])<<8|(255&c[6])<<16|(255&c[7])<<24,i=255&c[8]|(255&c[9])<<8|(255&c[10])<<16|(255&c[11])<<24,j=255&c[12]|(255&c[13])<<8|(255&c[14])<<16|(255&c[15])<<24,k=255&d[4]|(255&d[5])<<8|(255&d[6])<<16|(255&d[7])<<24,l=255&b[0]|(255&b[1])<<8|(255&b[2])<<16|(255&b[3])<<24,m=255&b[4]|(255&b[5])<<8|(255&b[6])<<16|(255&b[7])<<24,n=255&b[8]|(255&b[9])<<8|(255&b[10])<<16|(255&b[11])<<24,o=255&b[12]|(255&b[13])<<8|(255&b[14])<<16|(255&b[15])<<24,p=255&d[8]|(255&d[9])<<8|(255&d[10])<<16|(255&d[11])<<24,q=255&c[16]|(255&c[17])<<8|(255&c[18])<<16|(255&c[19])<<24,r=255&c[20]|(255&c[21])<<8|(255&c[22])<<16|(255&c[23])<<24,s=255&c[24]|(255&c[25])<<8|(255&c[26])<<16|(255&c[27])<<24,t=255&c[28]|(255&c[29])<<8|(255&c[30])<<16|(255&c[31])<<24,u=255&d[12]|(255&d[13])<<8|(255&d[14])<<16|(255&d[15])<<24,v=f,w=g,x=h,y=i,z=j,A=k,B=l,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=0;L<20;L+=2)z^=(e=v+H|0)<<7|e>>>25,D^=(e=z+v|0)<<9|e>>>23,H^=(e=D+z|0)<<13|e>>>19,v^=(e=H+D|0)<<18|e>>>14,E^=(e=A+w|0)<<7|e>>>25,I^=(e=E+A|0)<<9|e>>>23,w^=(e=I+E|0)<<13|e>>>19,A^=(e=w+I|0)<<18|e>>>14,J^=(e=F+B|0)<<7|e>>>25,x^=(e=J+F|0)<<9|e>>>23,B^=(e=x+J|0)<<13|e>>>19,F^=(e=B+x|0)<<18|e>>>14,y^=(e=K+G|0)<<7|e>>>25,C^=(e=y+K|0)<<9|e>>>23,G^=(e=C+y|0)<<13|e>>>19,K^=(e=G+C|0)<<18|e>>>14,w^=(e=v+y|0)<<7|e>>>25,x^=(e=w+v|0)<<9|e>>>23,y^=(e=x+w|0)<<13|e>>>19,v^=(e=y+x|0)<<18|e>>>14,B^=(e=A+z|0)<<7|e>>>25,C^=(e=B+A|0)<<9|e>>>23,z^=(e=C+B|0)<<13|e>>>19,A^=(e=z+C|0)<<18|e>>>14,G^=(e=F+E|0)<<7|e>>>25,D^=(e=G+F|0)<<9|e>>>23,E^=(e=D+G|0)<<13|e>>>19,F^=(e=E+D|0)<<18|e>>>14,H^=(e=K+J|0)<<7|e>>>25,I^=(e=H+K|0)<<9|e>>>23,J^=(e=I+H|0)<<13|e>>>19,K^=(e=J+I|0)<<18|e>>>14;a[0]=v>>>0&255,a[1]=v>>>8&255,a[2]=v>>>16&255,a[3]=v>>>24&255,a[4]=A>>>0&255,a[5]=A>>>8&255,a[6]=A>>>16&255,a[7]=A>>>24&255,a[8]=F>>>0&255,a[9]=F>>>8&255,a[10]=F>>>16&255,a[11]=F>>>24&255,a[12]=K>>>0&255,a[13]=K>>>8&255,a[14]=K>>>16&255,a[15]=K>>>24&255,a[16]=B>>>0&255,a[17]=B>>>8&255,a[18]=B>>>16&255,a[19]=B>>>24&255,a[20]=C>>>0&255,a[21]=C>>>8&255,a[22]=C>>>16&255,a[23]=C>>>24&255,a[24]=D>>>0&255,a[25]=D>>>8&255,a[26]=D>>>16&255,a[27]=D>>>24&255,a[28]=E>>>0&255,a[29]=E>>>8&255,a[30]=E>>>16&255,a[31]=E>>>24&255}(a,b,c,d)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(a,b,c,d,e,f,g){var h,i,j=new Uint8Array(16),k=new Uint8Array(64);for(i=0;i<16;i++)j[i]=0;for(i=0;i<8;i++)j[i]=f[i];for(;e>=64;){for(t(k,j,g,v),i=0;i<64;i++)a[b+i]=c[d+i]^k[i];for(i=8,h=1;i<16;i++)h=h+(255&j[i])|0,j[i]=255&h,h>>>=8;e-=64,b+=64,d+=64}if(e>0)for(t(k,j,g,v),i=0;i<e;i++)a[b+i]=c[d+i]^k[i];return 0}function x(a,b,c,d,e){var f,g,h=new Uint8Array(16),i=new Uint8Array(64);for(g=0;g<16;g++)h[g]=0;for(g=0;g<8;g++)h[g]=d[g];for(;c>=64;){for(t(i,h,e,v),g=0;g<64;g++)a[b+g]=i[g];for(g=8,f=1;g<16;g++)f=f+(255&h[g])|0,h[g]=255&f,f>>>=8;c-=64,b+=64}if(c>0)for(t(i,h,e,v),g=0;g<c;g++)a[b+g]=i[g];return 0}function y(a,b,c,d,e){var f=new Uint8Array(32);u(f,d,e,v);for(var g=new Uint8Array(8),h=0;h<8;h++)g[h]=d[h+16];return x(a,b,c,g,f)}function z(a,b,c,d,e,f,g){var h=new Uint8Array(32);u(h,f,g,v);for(var i=new Uint8Array(8),j=0;j<8;j++)i[j]=f[j+16];return w(a,b,c,d,e,i,h)}var A=function(a){var b,c,d,e,f,g,h,i;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,b=255&a[0]|(255&a[1])<<8,this.r[0]=8191&b,c=255&a[2]|(255&a[3])<<8,this.r[1]=(b>>>13|c<<3)&8191,d=255&a[4]|(255&a[5])<<8,this.r[2]=(c>>>10|d<<6)&7939,e=255&a[6]|(255&a[7])<<8,this.r[3]=(d>>>7|e<<9)&8191,f=255&a[8]|(255&a[9])<<8,this.r[4]=(e>>>4|f<<12)&255,this.r[5]=f>>>1&8190,g=255&a[10]|(255&a[11])<<8,this.r[6]=(f>>>14|g<<2)&8191,h=255&a[12]|(255&a[13])<<8,this.r[7]=(g>>>11|h<<5)&8065,i=255&a[14]|(255&a[15])<<8,this.r[8]=(h>>>8|i<<8)&8191,this.r[9]=i>>>5&127,this.pad[0]=255&a[16]|(255&a[17])<<8,this.pad[1]=255&a[18]|(255&a[19])<<8,this.pad[2]=255&a[20]|(255&a[21])<<8,this.pad[3]=255&a[22]|(255&a[23])<<8,this.pad[4]=255&a[24]|(255&a[25])<<8,this.pad[5]=255&a[26]|(255&a[27])<<8,this.pad[6]=255&a[28]|(255&a[29])<<8,this.pad[7]=255&a[30]|(255&a[31])<<8};function B(a,b,c,d,e,f){var g=new A(f);return g.update(c,d,e),g.finish(a,b),0}function C(a,b,c,d,e,f){var g=new Uint8Array(16);return B(g,0,c,d,e,f),r(a,b,g,0)}function D(a,b,c,d,e){var f;if(c<32)return -1;for(z(a,0,b,0,c,d,e),B(a,16,a,32,c-32,a),f=0;f<16;f++)a[f]=0;return 0}function E(a,b,c,d,e){var f,g=new Uint8Array(32);if(c<32||(y(g,0,32,d,e),0!==C(b,16,b,32,c-32,g)))return -1;for(z(a,0,b,0,c,d,e),f=0;f<32;f++)a[f]=0;return 0}function F(a,b){var c;for(c=0;c<16;c++)a[c]=0|b[c]}function G(a){var b,c,d=1;for(b=0;b<16;b++)d=Math.floor((c=a[b]+d+65535)/65536),a[b]=c-65536*d;a[0]+=d-1+37*(d-1)}function H(a,b,c){for(var d,e=~(c-1),f=0;f<16;f++)d=e&(a[f]^b[f]),a[f]^=d,b[f]^=d}function I(a,b){var c,e,f,g=d(),h=d();for(c=0;c<16;c++)h[c]=b[c];for(G(h),G(h),G(h),e=0;e<2;e++){for(c=1,g[0]=h[0]-65517;c<15;c++)g[c]=h[c]-65535-(g[c-1]>>16&1),g[c-1]&=65535;g[15]=h[15]-32767-(g[14]>>16&1),f=g[15]>>16&1,g[14]&=65535,H(h,g,1-f)}for(c=0;c<16;c++)a[2*c]=255&h[c],a[2*c+1]=h[c]>>8}function J(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);return I(c,a),I(d,b),s(c,0,d,0)}function K(a){var b=new Uint8Array(32);return I(b,a),1&b[0]}function L(a,b){var c;for(c=0;c<16;c++)a[c]=b[2*c]+(b[2*c+1]<<8);a[15]&=32767}function M(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]+c[d]}function N(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]-c[d]}function O(a,b,c){var d,e,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=c[0],L=c[1],M=c[2],N=c[3],O=c[4],P=c[5],Q=c[6],R=c[7],S=c[8],T=c[9],U=c[10],V=c[11],W=c[12],X=c[13],Y=c[14],Z=c[15];f+=(d=b[0])*K,g+=d*L,h+=d*M,i+=d*N,j+=d*O,k+=d*P,l+=d*Q,m+=d*R,n+=d*S,o+=d*T,p+=d*U,q+=d*V,r+=d*W,s+=d*X,t+=d*Y,u+=d*Z,g+=(d=b[1])*K,h+=d*L,i+=d*M,j+=d*N,k+=d*O,l+=d*P,m+=d*Q,n+=d*R,o+=d*S,p+=d*T,q+=d*U,r+=d*V,s+=d*W,t+=d*X,u+=d*Y,v+=d*Z,h+=(d=b[2])*K,i+=d*L,j+=d*M,k+=d*N,l+=d*O,m+=d*P,n+=d*Q,o+=d*R,p+=d*S,q+=d*T,r+=d*U,s+=d*V,t+=d*W,u+=d*X,v+=d*Y,w+=d*Z,i+=(d=b[3])*K,j+=d*L,k+=d*M,l+=d*N,m+=d*O,n+=d*P,o+=d*Q,p+=d*R,q+=d*S,r+=d*T,s+=d*U,t+=d*V,u+=d*W,v+=d*X,w+=d*Y,x+=d*Z,j+=(d=b[4])*K,k+=d*L,l+=d*M,m+=d*N,n+=d*O,o+=d*P,p+=d*Q,q+=d*R,r+=d*S,s+=d*T,t+=d*U,u+=d*V,v+=d*W,w+=d*X,x+=d*Y,y+=d*Z,k+=(d=b[5])*K,l+=d*L,m+=d*M,n+=d*N,o+=d*O,p+=d*P,q+=d*Q,r+=d*R,s+=d*S,t+=d*T,u+=d*U,v+=d*V,w+=d*W,x+=d*X,y+=d*Y,z+=d*Z,l+=(d=b[6])*K,m+=d*L,n+=d*M,o+=d*N,p+=d*O,q+=d*P,r+=d*Q,s+=d*R,t+=d*S,u+=d*T,v+=d*U,w+=d*V,x+=d*W,y+=d*X,z+=d*Y,A+=d*Z,m+=(d=b[7])*K,n+=d*L,o+=d*M,p+=d*N,q+=d*O,r+=d*P,s+=d*Q,t+=d*R,u+=d*S,v+=d*T,w+=d*U,x+=d*V,y+=d*W,z+=d*X,A+=d*Y,B+=d*Z,n+=(d=b[8])*K,o+=d*L,p+=d*M,q+=d*N,r+=d*O,s+=d*P,t+=d*Q,u+=d*R,v+=d*S,w+=d*T,x+=d*U,y+=d*V,z+=d*W,A+=d*X,B+=d*Y,C+=d*Z,o+=(d=b[9])*K,p+=d*L,q+=d*M,r+=d*N,s+=d*O,t+=d*P,u+=d*Q,v+=d*R,w+=d*S,x+=d*T,y+=d*U,z+=d*V,A+=d*W,B+=d*X,C+=d*Y,D+=d*Z,p+=(d=b[10])*K,q+=d*L,r+=d*M,s+=d*N,t+=d*O,u+=d*P,v+=d*Q,w+=d*R,x+=d*S,y+=d*T,z+=d*U,A+=d*V,B+=d*W,C+=d*X,D+=d*Y,E+=d*Z,q+=(d=b[11])*K,r+=d*L,s+=d*M,t+=d*N,u+=d*O,v+=d*P,w+=d*Q,x+=d*R,y+=d*S,z+=d*T,A+=d*U,B+=d*V,C+=d*W,D+=d*X,E+=d*Y,F+=d*Z,r+=(d=b[12])*K,s+=d*L,t+=d*M,u+=d*N,v+=d*O,w+=d*P,x+=d*Q,y+=d*R,z+=d*S,A+=d*T,B+=d*U,C+=d*V,D+=d*W,E+=d*X,F+=d*Y,G+=d*Z,s+=(d=b[13])*K,t+=d*L,u+=d*M,v+=d*N,w+=d*O,x+=d*P,y+=d*Q,z+=d*R,A+=d*S,B+=d*T,C+=d*U,D+=d*V,E+=d*W,F+=d*X,G+=d*Y,H+=d*Z,t+=(d=b[14])*K,u+=d*L,v+=d*M,w+=d*N,x+=d*O,y+=d*P,z+=d*Q,A+=d*R,B+=d*S,C+=d*T,D+=d*U,E+=d*V,F+=d*W,G+=d*X,H+=d*Y,I+=d*Z,u+=(d=b[15])*K,v+=d*L,w+=d*M,x+=d*N,y+=d*O,z+=d*P,A+=d*Q,B+=d*R,C+=d*S,D+=d*T,E+=d*U,F+=d*V,G+=d*W,H+=d*X,I+=d*Y,J+=d*Z,f+=38*v,g+=38*w,h+=38*x,i+=38*y,j+=38*z,k+=38*A,l+=38*B,m+=38*C,n+=38*D,o+=38*E,p+=38*F,q+=38*G,r+=38*H,s+=38*I,t+=38*J,e=Math.floor((d=f+(e=1)+65535)/65536),f=d-65536*e,e=Math.floor((d=g+e+65535)/65536),g=d-65536*e,e=Math.floor((d=h+e+65535)/65536),h=d-65536*e,e=Math.floor((d=i+e+65535)/65536),i=d-65536*e,e=Math.floor((d=j+e+65535)/65536),j=d-65536*e,e=Math.floor((d=k+e+65535)/65536),k=d-65536*e,e=Math.floor((d=l+e+65535)/65536),l=d-65536*e,e=Math.floor((d=m+e+65535)/65536),m=d-65536*e,e=Math.floor((d=n+e+65535)/65536),n=d-65536*e,e=Math.floor((d=o+e+65535)/65536),o=d-65536*e,e=Math.floor((d=p+e+65535)/65536),p=d-65536*e,e=Math.floor((d=q+e+65535)/65536),q=d-65536*e,e=Math.floor((d=r+e+65535)/65536),r=d-65536*e,e=Math.floor((d=s+e+65535)/65536),s=d-65536*e,e=Math.floor((d=t+e+65535)/65536),t=d-65536*e,e=Math.floor((d=u+e+65535)/65536),u=d-65536*e,f+=e-1+37*(e-1),e=Math.floor((d=f+(e=1)+65535)/65536),f=d-65536*e,e=Math.floor((d=g+e+65535)/65536),g=d-65536*e,e=Math.floor((d=h+e+65535)/65536),h=d-65536*e,e=Math.floor((d=i+e+65535)/65536),i=d-65536*e,e=Math.floor((d=j+e+65535)/65536),j=d-65536*e,e=Math.floor((d=k+e+65535)/65536),k=d-65536*e,e=Math.floor((d=l+e+65535)/65536),l=d-65536*e,e=Math.floor((d=m+e+65535)/65536),m=d-65536*e,e=Math.floor((d=n+e+65535)/65536),n=d-65536*e,e=Math.floor((d=o+e+65535)/65536),o=d-65536*e,e=Math.floor((d=p+e+65535)/65536),p=d-65536*e,e=Math.floor((d=q+e+65535)/65536),q=d-65536*e,e=Math.floor((d=r+e+65535)/65536),r=d-65536*e,e=Math.floor((d=s+e+65535)/65536),s=d-65536*e,e=Math.floor((d=t+e+65535)/65536),t=d-65536*e,e=Math.floor((d=u+e+65535)/65536),u=d-65536*e,f+=e-1+37*(e-1),a[0]=f,a[1]=g,a[2]=h,a[3]=i,a[4]=j,a[5]=k,a[6]=l,a[7]=m,a[8]=n,a[9]=o,a[10]=p,a[11]=q,a[12]=r,a[13]=s,a[14]=t,a[15]=u}function P(a,b){O(a,b,b)}function Q(a,b){var c,e=d();for(c=0;c<16;c++)e[c]=b[c];for(c=253;c>=0;c--)P(e,e),2!==c&&4!==c&&O(e,e,b);for(c=0;c<16;c++)a[c]=e[c]}function R(a,b){var c,e=d();for(c=0;c<16;c++)e[c]=b[c];for(c=250;c>=0;c--)P(e,e),1!==c&&O(e,e,b);for(c=0;c<16;c++)a[c]=e[c]}function S(a,b,c){var e,f,g=new Uint8Array(32),h=new Float64Array(80),i=d(),k=d(),l=d(),m=d(),n=d(),o=d();for(f=0;f<31;f++)g[f]=b[f];for(g[31]=127&b[31]|64,g[0]&=248,L(h,c),f=0;f<16;f++)k[f]=h[f],m[f]=i[f]=l[f]=0;for(f=254,i[0]=m[0]=1;f>=0;--f)H(i,k,e=g[f>>>3]>>>(7&f)&1),H(l,m,e),M(n,i,l),N(i,i,l),M(l,k,m),N(k,k,m),P(m,n),P(o,i),O(i,l,i),O(l,k,n),M(n,i,l),N(i,i,l),P(k,i),N(l,m,o),O(i,l,j),M(i,i,m),O(l,l,i),O(i,m,o),O(m,k,h),P(k,n),H(i,k,e),H(l,m,e);for(f=0;f<16;f++)h[f+16]=i[f],h[f+32]=l[f],h[f+48]=k[f],h[f+64]=m[f];var p=h.subarray(32),q=h.subarray(16);return Q(p,p),O(q,q,p),I(a,q),0}function T(a,b){return S(a,b,g)}function U(a,b){return e(b,32),T(a,b)}function V(a,b,c){var d=new Uint8Array(32);return S(d,c,b),u(a,f,d,v)}A.prototype.blocks=function(a,b,c){for(var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=2048*!this.fin,x=this.h[0],y=this.h[1],z=this.h[2],A=this.h[3],B=this.h[4],C=this.h[5],D=this.h[6],E=this.h[7],F=this.h[8],G=this.h[9],H=this.r[0],I=this.r[1],J=this.r[2],K=this.r[3],L=this.r[4],M=this.r[5],N=this.r[6],O=this.r[7],P=this.r[8],Q=this.r[9];c>=16;)x+=8191&(d=255&a[b+0]|(255&a[b+1])<<8),y+=(d>>>13|(e=255&a[b+2]|(255&a[b+3])<<8)<<3)&8191,z+=(e>>>10|(f=255&a[b+4]|(255&a[b+5])<<8)<<6)&8191,A+=(f>>>7|(g=255&a[b+6]|(255&a[b+7])<<8)<<9)&8191,B+=(g>>>4|(h=255&a[b+8]|(255&a[b+9])<<8)<<12)&8191,C+=h>>>1&8191,D+=(h>>>14|(i=255&a[b+10]|(255&a[b+11])<<8)<<2)&8191,E+=(i>>>11|(j=255&a[b+12]|(255&a[b+13])<<8)<<5)&8191,F+=(j>>>8|(k=255&a[b+14]|(255&a[b+15])<<8)<<8)&8191,G+=k>>>5|w,l=(m=(l=0)+x*H+5*Q*y+5*P*z+5*O*A+5*N*B)>>>13,m&=8191,m+=5*M*C,m+=5*L*D,m+=5*K*E,m+=5*J*F,m+=5*I*G,l+=m>>>13,m&=8191,l=(n=l+x*I+y*H+5*Q*z+5*P*A+5*O*B)>>>13,n&=8191,n+=5*N*C,n+=5*M*D,n+=5*L*E,n+=5*K*F,n+=5*J*G,l+=n>>>13,n&=8191,l=(o=l+x*J+y*I+z*H+5*Q*A+5*P*B)>>>13,o&=8191,o+=5*O*C,o+=5*N*D,o+=5*M*E,o+=5*L*F,o+=5*K*G,l+=o>>>13,o&=8191,l=(p=l+x*K+y*J+z*I+A*H+5*Q*B)>>>13,p&=8191,p+=5*P*C,p+=5*O*D,p+=5*N*E,p+=5*M*F,p+=5*L*G,l+=p>>>13,p&=8191,l=(q=l+x*L+y*K+z*J+A*I+B*H)>>>13,q&=8191,q+=5*Q*C,q+=5*P*D,q+=5*O*E,q+=5*N*F,q+=5*M*G,l+=q>>>13,q&=8191,l=(r=l+x*M+y*L+z*K+A*J+B*I)>>>13,r&=8191,r+=C*H,r+=5*Q*D,r+=5*P*E,r+=5*O*F,r+=5*N*G,l+=r>>>13,r&=8191,l=(s=l+x*N+y*M+z*L+A*K+B*J)>>>13,s&=8191,s+=C*I,s+=D*H,s+=5*Q*E,s+=5*P*F,s+=5*O*G,l+=s>>>13,s&=8191,l=(t=l+x*O+y*N+z*M+A*L+B*K)>>>13,t&=8191,t+=C*J,t+=D*I,t+=E*H,t+=5*Q*F,t+=5*P*G,l+=t>>>13,t&=8191,l=(u=l+x*P+y*O+z*N+A*M+B*L)>>>13,u&=8191,u+=C*K,u+=D*J,u+=E*I,u+=F*H,u+=5*Q*G,l+=u>>>13,u&=8191,l=(v=l+x*Q+y*P+z*O+A*N+B*M)>>>13,v&=8191,v+=C*L,v+=D*K,v+=E*J,v+=F*I,v+=G*H,l+=v>>>13,v&=8191,m=8191&(l=(l=(l<<2)+l|0)+m|0),l>>>=13,n+=l,x=m,y=n,z=o,A=p,B=q,C=r,D=s,E=t,F=u,G=v,b+=16,c-=16;this.h[0]=x,this.h[1]=y,this.h[2]=z,this.h[3]=A,this.h[4]=B,this.h[5]=C,this.h[6]=D,this.h[7]=E,this.h[8]=F,this.h[9]=G},A.prototype.finish=function(a,b){var c,d,e,f,g=new Uint16Array(10);if(this.leftover){for(f=this.leftover,this.buffer[f++]=1;f<16;f++)this.buffer[f]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(c=this.h[1]>>>13,this.h[1]&=8191,f=2;f<10;f++)this.h[f]+=c,c=this.h[f]>>>13,this.h[f]&=8191;for(this.h[0]+=5*c,c=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=c,c=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=c,g[0]=this.h[0]+5,c=g[0]>>>13,g[0]&=8191,f=1;f<10;f++)g[f]=this.h[f]+c,c=g[f]>>>13,g[f]&=8191;for(g[9]-=8192,d=(1^c)-1,f=0;f<10;f++)g[f]&=d;for(f=0,d=~d;f<10;f++)this.h[f]=this.h[f]&d|g[f];for(f=1,this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,e=this.h[0]+this.pad[0],this.h[0]=65535&e;f<8;f++)e=(this.h[f]+this.pad[f]|0)+(e>>>16)|0,this.h[f]=65535&e;a[b+0]=this.h[0]>>>0&255,a[b+1]=this.h[0]>>>8&255,a[b+2]=this.h[1]>>>0&255,a[b+3]=this.h[1]>>>8&255,a[b+4]=this.h[2]>>>0&255,a[b+5]=this.h[2]>>>8&255,a[b+6]=this.h[3]>>>0&255,a[b+7]=this.h[3]>>>8&255,a[b+8]=this.h[4]>>>0&255,a[b+9]=this.h[4]>>>8&255,a[b+10]=this.h[5]>>>0&255,a[b+11]=this.h[5]>>>8&255,a[b+12]=this.h[6]>>>0&255,a[b+13]=this.h[6]>>>8&255,a[b+14]=this.h[7]>>>0&255,a[b+15]=this.h[7]>>>8&255},A.prototype.update=function(a,b,c){var d,e;if(this.leftover){for((e=16-this.leftover)>c&&(e=c),d=0;d<e;d++)this.buffer[this.leftover+d]=a[b+d];if(c-=e,b+=e,this.leftover+=e,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(c>=16&&(e=c-c%16,this.blocks(a,b,e),b+=e,c-=e),c){for(d=0;d<c;d++)this.buffer[this.leftover+d]=a[b+d];this.leftover+=c}};var W=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0xfc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x6ca6351,0xe003826f,0x14292967,0xa0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x6f067aa,0x72176fba,0xa637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function X(a,b,c,d){for(var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=new Int32Array(16),F=new Int32Array(16),G=a[0],H=a[1],I=a[2],J=a[3],K=a[4],L=a[5],M=a[6],N=a[7],O=b[0],P=b[1],Q=b[2],R=b[3],S=b[4],T=b[5],U=b[6],V=b[7],X=0;d>=128;){for(w=0;w<16;w++)x=8*w+X,E[w]=c[x+0]<<24|c[x+1]<<16|c[x+2]<<8|c[x+3],F[w]=c[x+4]<<24|c[x+5]<<16|c[x+6]<<8|c[x+7];for(w=0;w<80;w++)if(e=G,f=H,g=I,h=J,i=K,j=L,k=M,l=N,m=O,n=P,o=Q,p=R,q=S,r=T,s=U,t=V,y=N,A=65535&(z=V),B=z>>>16,C=65535&y,D=y>>>16,y=(K>>>14|S<<18)^(K>>>18|S<<14)^(S>>>9|K<<23),A+=65535&(z=(S>>>14|K<<18)^(S>>>18|K<<14)^(K>>>9|S<<23)),B+=z>>>16,C+=65535&y,D+=y>>>16,y=K&L^~K&M,A+=65535&(z=S&T^~S&U),B+=z>>>16,C+=65535&y,D+=y>>>16,y=W[2*w],A+=65535&(z=W[2*w+1]),B+=z>>>16,C+=65535&y,D+=y>>>16,y=E[w%16],A+=65535&(z=F[w%16]),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,u=65535&C|D<<16,v=65535&A|B<<16,y=u,A=65535&(z=v),B=z>>>16,C=65535&y,D=y>>>16,y=(G>>>28|O<<4)^(O>>>2|G<<30)^(O>>>7|G<<25),A+=65535&(z=(O>>>28|G<<4)^(G>>>2|O<<30)^(G>>>7|O<<25)),B+=z>>>16,C+=65535&y,D+=y>>>16,y=G&H^G&I^H&I,A+=65535&(z=O&P^O&Q^P&Q),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,l=65535&C|D<<16,t=65535&A|B<<16,y=h,A=65535&(z=p),B=z>>>16,C=65535&y,D=y>>>16,y=u,A+=65535&(z=v),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,h=65535&C|D<<16,p=65535&A|B<<16,H=e,I=f,J=g,K=h,L=i,M=j,N=k,G=l,P=m,Q=n,R=o,S=p,T=q,U=r,V=s,O=t,w%16==15)for(x=0;x<16;x++)y=E[x],A=65535&(z=F[x]),B=z>>>16,C=65535&y,D=y>>>16,y=E[(x+9)%16],A+=65535&(z=F[(x+9)%16]),B+=z>>>16,C+=65535&y,D+=y>>>16,y=((u=E[(x+1)%16])>>>1|(v=F[(x+1)%16])<<31)^(u>>>8|v<<24)^u>>>7,A+=65535&(z=(v>>>1|u<<31)^(v>>>8|u<<24)^(v>>>7|u<<25)),B+=z>>>16,C+=65535&y,D+=y>>>16,y=((u=E[(x+14)%16])>>>19|(v=F[(x+14)%16])<<13)^(v>>>29|u<<3)^u>>>6,A+=65535&(z=(v>>>19|u<<13)^(u>>>29|v<<3)^(v>>>6|u<<26)),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,E[x]=65535&C|D<<16,F[x]=65535&A|B<<16;y=G,A=65535&(z=O),B=z>>>16,C=65535&y,D=y>>>16,y=a[0],A+=65535&(z=b[0]),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,a[0]=G=65535&C|D<<16,b[0]=O=65535&A|B<<16,y=H,A=65535&(z=P),B=z>>>16,C=65535&y,D=y>>>16,y=a[1],A+=65535&(z=b[1]),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,a[1]=H=65535&C|D<<16,b[1]=P=65535&A|B<<16,y=I,A=65535&(z=Q),B=z>>>16,C=65535&y,D=y>>>16,y=a[2],A+=65535&(z=b[2]),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,a[2]=I=65535&C|D<<16,b[2]=Q=65535&A|B<<16,y=J,A=65535&(z=R),B=z>>>16,C=65535&y,D=y>>>16,y=a[3],A+=65535&(z=b[3]),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,a[3]=J=65535&C|D<<16,b[3]=R=65535&A|B<<16,y=K,A=65535&(z=S),B=z>>>16,C=65535&y,D=y>>>16,y=a[4],A+=65535&(z=b[4]),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,a[4]=K=65535&C|D<<16,b[4]=S=65535&A|B<<16,y=L,A=65535&(z=T),B=z>>>16,C=65535&y,D=y>>>16,y=a[5],A+=65535&(z=b[5]),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,a[5]=L=65535&C|D<<16,b[5]=T=65535&A|B<<16,y=M,A=65535&(z=U),B=z>>>16,C=65535&y,D=y>>>16,y=a[6],A+=65535&(z=b[6]),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,a[6]=M=65535&C|D<<16,b[6]=U=65535&A|B<<16,y=N,A=65535&(z=V),B=z>>>16,C=65535&y,D=y>>>16,y=a[7],A+=65535&(z=b[7]),B+=z>>>16,C+=65535&y,D+=y>>>16,B+=A>>>16,C+=B>>>16,D+=C>>>16,a[7]=N=65535&C|D<<16,b[7]=V=65535&A|B<<16,X+=128,d-=128}return d}function Y(a,b,c){var d,e=new Int32Array(8),f=new Int32Array(8),g=new Uint8Array(256),h=c;for(e[0]=0x6a09e667,e[1]=0xbb67ae85,e[2]=0x3c6ef372,e[3]=0xa54ff53a,e[4]=0x510e527f,e[5]=0x9b05688c,e[6]=0x1f83d9ab,e[7]=0x5be0cd19,f[0]=0xf3bcc908,f[1]=0x84caa73b,f[2]=0xfe94f82b,f[3]=0x5f1d36f1,f[4]=0xade682d1,f[5]=0x2b3e6c1f,f[6]=0xfb41bd6b,f[7]=0x137e2179,X(e,f,b,c),c%=128,d=0;d<c;d++)g[d]=b[h-c+d];for(g[c]=128,g[(c=256-(c<112)*128)-9]=0,p(g,c-8,h/0x20000000|0,h<<3),X(e,f,g,c),d=0;d<8;d++)p(a,8*d,e[d],f[d]);return 0}function Z(a,b){var c=d(),e=d(),f=d(),g=d(),h=d(),i=d(),j=d(),k=d(),m=d();N(c,a[1],a[0]),N(m,b[1],b[0]),O(c,c,m),M(e,a[0],a[1]),M(m,b[0],b[1]),O(e,e,m),O(f,a[3],b[3]),O(f,f,l),O(g,a[2],b[2]),M(g,g,g),N(h,e,c),N(i,g,f),M(j,g,f),M(k,e,c),O(a[0],h,i),O(a[1],k,j),O(a[2],j,i),O(a[3],h,k)}function $(a,b,c){var d;for(d=0;d<4;d++)H(a[d],b[d],c)}function _(a,b){var c=d(),e=d(),f=d();Q(f,b[2]),O(c,b[0],f),O(e,b[1],f),I(a,e),a[31]^=K(c)<<7}function aa(a,b,c){var d,e;for(F(a[0],h),F(a[1],i),F(a[2],i),F(a[3],h),e=255;e>=0;--e)$(a,b,d=c[e/8|0]>>(7&e)&1),Z(b,a),Z(a,a),$(a,b,d)}function ab(a,b){var c=[d(),d(),d(),d()];F(c[0],m),F(c[1],n),F(c[2],i),O(c[3],m,n),aa(a,c,b)}function ac(a,b,c){var f,g=new Uint8Array(64),h=[d(),d(),d(),d()];for(c||e(b,32),Y(g,b,32),g[0]&=248,g[31]&=127,g[31]|=64,ab(h,g),_(a,h),f=0;f<32;f++)b[f+32]=a[f];return 0}var ad=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ae(a,b){var c,d,e,f;for(d=63;d>=32;--d){for(c=0,e=d-32,f=d-12;e<f;++e)b[e]+=c-16*b[d]*ad[e-(d-32)],c=Math.floor((b[e]+128)/256),b[e]-=256*c;b[e]+=c,b[d]=0}for(e=0,c=0;e<32;e++)b[e]+=c-(b[31]>>4)*ad[e],c=b[e]>>8,b[e]&=255;for(e=0;e<32;e++)b[e]-=c*ad[e];for(d=0;d<32;d++)b[d+1]+=b[d]>>8,a[d]=255&b[d]}function af(a){var b,c=new Float64Array(64);for(b=0;b<64;b++)c[b]=a[b];for(b=0;b<64;b++)a[b]=0;ae(a,c)}function ag(a,b,c,e){var f,g,h=new Uint8Array(64),i=new Uint8Array(64),j=new Uint8Array(64),k=new Float64Array(64),l=[d(),d(),d(),d()];for(Y(h,e,32),h[0]&=248,h[31]&=127,h[31]|=64,f=0;f<c;f++)a[64+f]=b[f];for(f=0;f<32;f++)a[32+f]=h[32+f];for(Y(j,a.subarray(32),c+32),af(j),ab(l,j),_(a,l),f=32;f<64;f++)a[f]=e[f];for(Y(i,a,c+64),af(i),f=0;f<64;f++)k[f]=0;for(f=0;f<32;f++)k[f]=j[f];for(f=0;f<32;f++)for(g=0;g<32;g++)k[f+g]+=i[f]*h[g];return ae(a.subarray(32),k),c+64}function ah(a,b,c,e){var f,g,j,l,m,n,p,q,r=new Uint8Array(32),t=new Uint8Array(64),u=[d(),d(),d(),d()],v=[d(),d(),d(),d()];if(c<64||(f=d(),g=d(),j=d(),l=d(),m=d(),n=d(),p=d(),(F(v[2],i),L(v[1],e),P(j,v[1]),O(l,j,k),N(j,j,v[2]),M(l,v[2],l),P(m,l),P(n,m),O(p,n,m),O(f,p,j),O(f,f,l),R(f,f),O(f,f,j),O(f,f,l),O(f,f,l),O(v[0],f,l),P(g,v[0]),O(g,g,l),J(g,j)&&O(v[0],v[0],o),P(g,v[0]),O(g,g,l),J(g,j))?-1:(K(v[0])===e[31]>>7&&N(v[0],h,v[0]),O(v[3],v[0],v[1]),0)))return -1;for(q=0;q<c;q++)a[q]=b[q];for(q=0;q<32;q++)a[q+32]=e[q];if(Y(t,a,c),af(t),aa(u,v,t),ab(v,b.subarray(32)),Z(u,v),_(r,u),c-=64,s(b,0,r,0)){for(q=0;q<c;q++)a[q]=0;return -1}for(q=0;q<c;q++)a[q]=b[q+64];return c}function ai(a,b){if(32!==a.length)throw Error("bad key size");if(24!==b.length)throw Error("bad nonce size")}function aj(){for(var a=0;a<arguments.length;a++)if(!(arguments[a]instanceof Uint8Array))throw TypeError("unexpected type, use Uint8Array")}function ak(a){for(var b=0;b<a.length;b++)a[b]=0}b.lowlevel={crypto_core_hsalsa20:u,crypto_stream_xor:z,crypto_stream:y,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:x,crypto_onetimeauth:B,crypto_onetimeauth_verify:C,crypto_verify_16:r,crypto_verify_32:s,crypto_secretbox:D,crypto_secretbox_open:E,crypto_scalarmult:S,crypto_scalarmult_base:T,crypto_box_beforenm:V,crypto_box_afternm:D,crypto_box:function(a,b,c,d,e,f){var g=new Uint8Array(32);return V(g,e,f),D(a,b,c,d,g)},crypto_box_open:function(a,b,c,d,e,f){var g=new Uint8Array(32);return V(g,e,f),E(a,b,c,d,g)},crypto_box_keypair:U,crypto_hash:Y,crypto_sign:ag,crypto_sign_keypair:ac,crypto_sign_open:ah,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:d,D:k,L:ad,pack25519:I,unpack25519:L,M:O,A:M,S:P,Z:N,pow2523:R,add:Z,set25519:F,modL:ae,scalarmult:aa,scalarbase:ab},b.randomBytes=function(a){var b=new Uint8Array(a);return e(b,a),b},b.secretbox=function(a,b,c){aj(a,b,c),ai(c,b);for(var d=new Uint8Array(32+a.length),e=new Uint8Array(d.length),f=0;f<a.length;f++)d[f+32]=a[f];return D(e,d,d.length,b,c),e.subarray(16)},b.secretbox.open=function(a,b,c){aj(a,b,c),ai(c,b);for(var d=new Uint8Array(16+a.length),e=new Uint8Array(d.length),f=0;f<a.length;f++)d[f+16]=a[f];return d.length<32||0!==E(e,d,d.length,b,c)?null:e.subarray(32)},b.secretbox.keyLength=32,b.secretbox.nonceLength=24,b.secretbox.overheadLength=16,b.scalarMult=function(a,b){if(aj(a,b),32!==a.length)throw Error("bad n size");if(32!==b.length)throw Error("bad p size");var c=new Uint8Array(32);return S(c,a,b),c},b.scalarMult.base=function(a){if(aj(a),32!==a.length)throw Error("bad n size");var b=new Uint8Array(32);return T(b,a),b},b.scalarMult.scalarLength=32,b.scalarMult.groupElementLength=32,b.box=function(a,c,d,e){var f=b.box.before(d,e);return b.secretbox(a,c,f)},b.box.before=function(a,b){aj(a,b);if(32!==a.length)throw Error("bad public key size");if(32!==b.length)throw Error("bad secret key size");var c=new Uint8Array(32);return V(c,a,b),c},b.box.after=b.secretbox,b.box.open=function(a,c,d,e){var f=b.box.before(d,e);return b.secretbox.open(a,c,f)},b.box.open.after=b.secretbox.open,b.box.keyPair=function(){var a=new Uint8Array(32),b=new Uint8Array(32);return U(a,b),{publicKey:a,secretKey:b}},b.box.keyPair.fromSecretKey=function(a){if(aj(a),32!==a.length)throw Error("bad secret key size");var b=new Uint8Array(32);return T(b,a),{publicKey:b,secretKey:new Uint8Array(a)}},b.box.publicKeyLength=32,b.box.secretKeyLength=32,b.box.sharedKeyLength=32,b.box.nonceLength=24,b.box.overheadLength=b.secretbox.overheadLength,b.sign=function(a,b){if(aj(a,b),64!==b.length)throw Error("bad secret key size");var c=new Uint8Array(64+a.length);return ag(c,a,a.length,b),c},b.sign.open=function(a,b){if(aj(a,b),32!==b.length)throw Error("bad public key size");var c=new Uint8Array(a.length),d=ah(c,a,a.length,b);if(d<0)return null;for(var e=new Uint8Array(d),f=0;f<e.length;f++)e[f]=c[f];return e},b.sign.detached=function(a,c){for(var d=b.sign(a,c),e=new Uint8Array(64),f=0;f<e.length;f++)e[f]=d[f];return e},b.sign.detached.verify=function(a,b,c){if(aj(a,b,c),64!==b.length)throw Error("bad signature size");if(32!==c.length)throw Error("bad public key size");var d,e=new Uint8Array(64+a.length),f=new Uint8Array(64+a.length);for(d=0;d<64;d++)e[d]=b[d];for(d=0;d<a.length;d++)e[d+64]=a[d];return ah(f,e,e.length,c)>=0},b.sign.keyPair=function(){var a=new Uint8Array(32),b=new Uint8Array(64);return ac(a,b),{publicKey:a,secretKey:b}},b.sign.keyPair.fromSecretKey=function(a){if(aj(a),64!==a.length)throw Error("bad secret key size");for(var b=new Uint8Array(32),c=0;c<b.length;c++)b[c]=a[32+c];return{publicKey:b,secretKey:new Uint8Array(a)}},b.sign.keyPair.fromSeed=function(a){if(aj(a),32!==a.length)throw Error("bad seed size");for(var b=new Uint8Array(32),c=new Uint8Array(64),d=0;d<32;d++)c[d]=a[d];return ac(b,c,!0),{publicKey:b,secretKey:c}},b.sign.publicKeyLength=32,b.sign.secretKeyLength=64,b.sign.seedLength=32,b.sign.signatureLength=64,b.hash=function(a){aj(a);var b=new Uint8Array(64);return Y(b,a,a.length),b},b.hash.hashLength=64,b.verify=function(a,b){return aj(a,b),0!==a.length&&0!==b.length&&a.length===b.length&&0===q(a,0,b,0,a.length)},b.setPRNG=function(a){e=a},(c="u">typeof self?self.crypto||self.msCrypto:null)&&c.getRandomValues?b.setPRNG(function(a,b){var d,e=new Uint8Array(b);for(d=0;d<b;d+=65536)c.getRandomValues(e.subarray(d,d+Math.min(b-d,65536)));for(d=0;d<b;d++)a[d]=e[d];ak(e)}):(c=a.r(54799))&&c.randomBytes&&b.setPRNG(function(a,b){var d,e=c.randomBytes(b);for(d=0;d<b;d++)a[d]=e[d];ak(e)})}(b.exports?b.exports:self.nacl=self.nacl||{})},47166,(a,b,c)=>{!function(a,c){"use strict";b.exports?b.exports=c():(a.nacl||(a.nacl={}),a.nacl.util=c())}(a.e,function(){"use strict";var a={};function b(a){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(a))throw TypeError("invalid encoding")}return a.decodeUTF8=function(a){if("string"!=typeof a)throw TypeError("expected string");var b,c=unescape(encodeURIComponent(a)),d=new Uint8Array(c.length);for(b=0;b<c.length;b++)d[b]=c.charCodeAt(b);return d},a.encodeUTF8=function(a){var b,c=[];for(b=0;b<a.length;b++)c.push(String.fromCharCode(a[b]));return decodeURIComponent(escape(c.join("")))},"u"<typeof atob?void 0!==Buffer.from?(a.encodeBase64=function(a){return Buffer.from(a).toString("base64")},a.decodeBase64=function(a){return b(a),new Uint8Array(Array.prototype.slice.call(Buffer.from(a,"base64"),0))}):(a.encodeBase64=function(a){return new Buffer(a).toString("base64")},a.decodeBase64=function(a){return b(a),new Uint8Array(Array.prototype.slice.call(new Buffer(a,"base64"),0))}):(a.encodeBase64=function(a){var b,c=[],d=a.length;for(b=0;b<d;b++)c.push(String.fromCharCode(a[b]));return btoa(c.join(""))},a.decodeBase64=function(a){b(a);var c,d=atob(a),e=new Uint8Array(d.length);for(c=0;c<d.length;c++)e[c]=d.charCodeAt(c);return e}),a})},21730,(a,b,c)=>{a.e,b.exports=function(){"use strict";var b=function(a,c){return(b=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,c)},c=function(){return(c=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function d(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||((d=d||Array.prototype.slice.call(b,0,e))[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}var e="u">typeof globalThis?globalThis:"u">typeof self?self:a.g,f=Object.keys,g=Array.isArray;function h(a,b){return"object"!=typeof b||f(b).forEach(function(c){a[c]=b[c]}),a}"u"<typeof Promise||e.Promise||(e.Promise=Promise);var i=Object.getPrototypeOf,j={}.hasOwnProperty;function k(a,b){return j.call(a,b)}function l(a,b){"function"==typeof b&&(b=b(i(a))),("u"<typeof Reflect?f:Reflect.ownKeys)(b).forEach(function(c){n(a,c,b[c])})}var m=Object.defineProperty;function n(a,b,c,d){m(a,b,h(c&&k(c,"get")&&"function"==typeof c.get?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function o(a){return{from:function(b){return a.prototype=Object.create(b.prototype),n(a.prototype,"constructor",a),{extend:l.bind(null,a.prototype)}}}}var p=Object.getOwnPropertyDescriptor,q=[].slice;function r(a,b,c){return q.call(a,b,c)}function s(a,b){return b(a)}function t(a){if(!a)throw Error("Assertion Failed")}function u(a){e.setImmediate?setImmediate(a):setTimeout(a,0)}function v(a,b){if("string"==typeof b&&k(a,b))return a[b];if(!b)return a;if("string"!=typeof b){for(var c=[],d=0,e=b.length;d<e;++d){var f=v(a,b[d]);c.push(f)}return c}var g=b.indexOf(".");if(-1!==g){var h=a[b.substr(0,g)];return null==h?void 0:v(h,b.substr(g+1))}}function w(a,b,c){if(a&&void 0!==b&&!("isFrozen"in Object&&Object.isFrozen(a)))if("string"!=typeof b&&"length"in b){t("string"!=typeof c&&"length"in c);for(var d=0,e=b.length;d<e;++d)w(a,b[d],c[d])}else{var f,h,i=b.indexOf(".");-1!==i?(f=b.substr(0,i),""===(h=b.substr(i+1))?void 0===c?g(a)&&!isNaN(parseInt(f))?a.splice(f,1):delete a[f]:a[f]=c:w(i=(i=a[f])&&k(a,f)?i:a[f]={},h,c)):void 0===c?g(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function x(a){var b,c={};for(b in a)k(a,b)&&(c[b]=a[b]);return c}var y=[].concat;function z(a){return y.apply([],a)}var A="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(z([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return e[a]}),B=new Set(A.map(function(a){return e[a]})),C=null;function D(a){return C=new WeakMap,a=function a(b){if(!b||"object"!=typeof b)return b;var c=C.get(b);if(c)return c;if(g(b)){c=[],C.set(b,c);for(var d=0,e=b.length;d<e;++d)c.push(a(b[d]))}else if(B.has(b.constructor))c=b;else{var f,h=i(b);for(f in c=h===Object.prototype?{}:Object.create(h),C.set(b,c),b)k(b,f)&&(c[f]=a(b[f]))}return c}(a),C=null,a}var E={}.toString;function F(a){return E.call(a).slice(8,-1)}var G="u">typeof Symbol?Symbol.iterator:"@@iterator",H="symbol"==typeof G?function(a){var b;return null!=a&&(b=a[G])&&b.apply(a)}:function(){return null};function I(a,b){return 0<=(b=a.indexOf(b))&&a.splice(b,1),0<=b}var J={};function K(a){var b,c,d,e;if(1==arguments.length){if(g(a))return a.slice();if(this===J&&"string"==typeof a)return[a];if(e=H(a)){for(c=[];!(d=e.next()).done;)c.push(d.value);return c}if(null==a||"number"!=typeof(b=a.length))return[a];for(c=Array(b);b--;)c[b]=a[b];return c}for(b=arguments.length,c=Array(b);b--;)c[b]=arguments[b];return c}var L="u">typeof Symbol?function(a){return"AsyncFunction"===a[Symbol.toStringTag]}:function(){return!1},M=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],N=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(M),O={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function P(a,b){this.name=a,this.message=b}function Q(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function R(a,b,c,d){this.failures=b,this.failedKeys=d,this.successCount=c,this.message=Q(a,b)}function S(a,b){this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=Q(a,this.failures)}o(P).from(Error).extend({toString:function(){return this.name+": "+this.message}}),o(R).from(P),o(S).from(P);var T=N.reduce(function(a,b){return a[b]=b+"Error",a},{}),U=N.reduce(function(a,b){var c=b+"Error";function d(a,d){this.name=c,a?"string"==typeof a?(this.message="".concat(a).concat(d?"\n "+d:""),this.inner=d||null):"object"==typeof a&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=O[b]||c,this.inner=null)}return o(d).from(P),a[b]=d,a},{});U.Syntax=SyntaxError,U.Type=TypeError,U.Range=RangeError;var V=M.reduce(function(a,b){return a[b+"Error"]=U[b],a},{}),W=N.reduce(function(a,b){return -1===["Syntax","Type","Range"].indexOf(b)&&(a[b+"Error"]=U[b]),a},{});function X(){}function Y(a){return a}function Z(a,b){return null==a||a===Y?b:function(c){return b(a(c))}}function $(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function _(a,b){return a===X?b:function(){var c=a.apply(this,arguments);void 0!==c&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null,this.onerror=null;var f=b.apply(this,arguments);return d&&(this.onsuccess=this.onsuccess?$(d,this.onsuccess):d),e&&(this.onerror=this.onerror?$(e,this.onerror):e),void 0!==f?f:c}}function aa(a,b){return a===X?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null,b.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?$(c,this.onsuccess):c),d&&(this.onerror=this.onerror?$(d,this.onerror):d)}}function ab(a,b){return a===X?b:function(c){var d=a.apply(this,arguments);h(c,d);var e=this.onsuccess,f=this.onerror;return this.onsuccess=null,this.onerror=null,c=b.apply(this,arguments),e&&(this.onsuccess=this.onsuccess?$(e,this.onsuccess):e),f&&(this.onerror=this.onerror?$(f,this.onerror):f),void 0===d?void 0===c?void 0:c:h(d,c)}}function ac(a,b){return a===X?b:function(){return!1!==b.apply(this,arguments)&&a.apply(this,arguments)}}function ad(a,b){return a===X?b:function(){var c=a.apply(this,arguments);if(c&&"function"==typeof c.then){for(var d=this,e=arguments.length,f=Array(e);e--;)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}W.ModifyError=R,W.DexieError=P,W.BulkError=S;var ae="u">typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),af={},A="u"<typeof Promise?[]:function(){var a=Promise.resolve();if("u"<typeof crypto||!crypto.subtle)return[a,i(a),a];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,i(b),a]}(),M=A[0],N=A[1],A=A[2],N=N&&N.then,ag=M&&M.constructor,ah=!!A,ai=function(a,b){aq.push([a,b]),ak&&(queueMicrotask(aA),ak=!1)},aj=!0,ak=!0,al=[],am=[],an=Y,ao={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:X,pgp:!1,env:{},finalize:X},ap=ao,aq=[],ar=0,as=[];function at(a){if("object"!=typeof this)throw TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var b=this._PSD=ap;if("function"!=typeof a){if(a!==af)throw TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&aw(this,this._value))}this._state=null,this._value=null,++b.ref,function a(b,c){try{c(function(c){if(null===b._state){if(c===b)throw TypeError("A promise cannot be resolved with itself.");var d=b._lib&&aB();c&&"function"==typeof c.then?a(b,function(a,b){c instanceof at?c._then(a,b):c.then(a,b)}):(b._state=!0,b._value=c,ax(b)),d&&aC()}},aw.bind(null,b))}catch(a){aw(b,a)}}(this,a)}var au={get:function(){var a=ap,b=aK;function c(c,d){var e=this,f=!a.global&&(a!==ap||b!==aK),g=f&&!aO(),h=new at(function(b,h){ay(e,new av(aU(c,a,f,g),aU(d,a,f,g),b,h,a))});return this._consoleTask&&(h._consoleTask=this._consoleTask),h}return c.prototype=af,c},set:function(a){n(this,"then",a&&a.prototype===af?au:{get:function(){return a},set:au.set})}};function av(a,b,c,d,e){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d,this.psd=e}function aw(a,b){var c;am.push(b),null===a._state&&(c=a._lib&&aB(),b=an(b),a._state=!1,a._value=b,al.some(function(b){return b._value===a._value})||al.push(a),ax(a),c&&aC())}function ax(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)ay(a,b[c]);var e=a._PSD;--e.ref||e.finalize(),0===ar&&(++ar,ai(function(){0==--ar&&aD()},[]))}function ay(a,b){if(null!==a._state){var c=a._state?b.onFulfilled:b.onRejected;if(null===c)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref,++ar,ai(az,[c,a,b])}else a._listeners.push(b)}function az(a,b,c){try{var d,e=b._value;!b._state&&am.length&&(am=[]),d=ae&&b._consoleTask?b._consoleTask.run(function(){return a(e)}):a(e),b._state||-1!==am.indexOf(e)||function(a){for(var b=al.length;b;)if(al[--b]._value===a._value)return al.splice(b,1)}(b),c.resolve(d)}catch(a){c.reject(a)}finally{0==--ar&&aD(),--c.psd.ref||c.psd.finalize()}}function aA(){aT(ao,function(){aB()&&aC()})}function aB(){var a=aj;return ak=aj=!1,a}function aC(){var a,b,c;do for(;0<aq.length;)for(a=aq,aq=[],c=a.length,b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}while(0<aq.length)ak=aj=!0}function aD(){var a=al;al=[],a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var b=as.slice(0),c=b.length;c;)b[--c]()}function aE(a){return new at(af,!1,a)}function aF(a,b){var c=ap;return function(){var d=aB(),e=ap;try{return aR(c,!0),a.apply(this,arguments)}catch(a){b&&b(a)}finally{aR(e,!1),d&&aC()}}}l(at.prototype,{then:au,_then:function(a,b){ay(this,new av(null,null,a,b,ap))},catch:function(a){if(1==arguments.length)return this.then(null,a);var b=arguments[1];return"function"==typeof a?this.then(null,function(c){return(c instanceof a?b:aE)(c)}):this.then(null,function(c){return(c&&c.name===a?b:aE)(c)})},finally:function(a){return this.then(function(b){return at.resolve(a()).then(function(){return b})},function(b){return at.resolve(a()).then(function(){return aE(b)})})},timeout:function(a,b){var c=this;return a<1/0?new at(function(d,e){var f=setTimeout(function(){return e(new U.Timeout(b))},a);c.then(d,e).finally(clearTimeout.bind(null,f))}):this}}),"u">typeof Symbol&&Symbol.toStringTag&&n(at.prototype,Symbol.toStringTag,"Dexie.Promise"),ao.env=aS(),l(at,{all:function(){var a=K.apply(null,arguments).map(aP);return new at(function(b,c){0===a.length&&b([]);var d=a.length;a.forEach(function(e,f){return at.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){return a instanceof at?a:a&&"function"==typeof a.then?new at(function(b,c){a.then(b,c)}):new at(af,!0,a)},reject:aE,race:function(){var a=K.apply(null,arguments).map(aP);return new at(function(b,c){a.map(function(a){return at.resolve(a).then(b,c)})})},PSD:{get:function(){return ap},set:function(a){return ap=a}},totalEchoes:{get:function(){return aK}},newPSD:aM,usePSD:aT,scheduler:{get:function(){return ai},set:function(a){ai=a}},rejectionMapper:{get:function(){return an},set:function(a){an=a}},follow:function(a,b){return new at(function(c,d){return aM(function(b,c){var d=ap;d.unhandleds=[],d.onunhandled=c,d.finalize=$(function(){var a,d=this;a=function(){0===d.unhandleds.length?b():c(d.unhandleds[0])},as.push(function b(){a(),as.splice(as.indexOf(b),1)}),++ar,ai(function(){0==--ar&&aD()},[])},d.finalize),a()},b,c,d)})}}),ag&&(ag.allSettled&&n(at,"allSettled",function(){var a=K.apply(null,arguments).map(aP);return new at(function(b){0===a.length&&b([]);var c=a.length,d=Array(c);a.forEach(function(a,e){return at.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),ag.any&&"u">typeof AggregateError&&n(at,"any",function(){var a=K.apply(null,arguments).map(aP);return new at(function(b,c){0===a.length&&c(AggregateError([]));var d=a.length,e=Array(d);a.forEach(function(a,f){return at.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(AggregateError(e))})})})}),ag.withResolvers&&(at.withResolvers=ag.withResolvers));var aG={awaits:0,echoes:0,id:0},aH=0,aI=[],aJ=0,aK=0,aL=0;function aM(a,b,c,d){var e=ap,f=Object.create(e);return f.parent=e,f.ref=0,f.global=!1,f.id=++aL,ao.env,f.env=ah?{Promise:at,PromiseProp:{value:at,configurable:!0,writable:!0},all:at.all,race:at.race,allSettled:at.allSettled,any:at.any,resolve:at.resolve,reject:at.reject}:{},b&&h(f,b),++e.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()},d=aT(f,a,c,d),0===f.ref&&f.finalize(),d}function aN(){return aG.id||(aG.id=++aH),++aG.awaits,aG.echoes+=100,aG.id}function aO(){return!!aG.awaits&&(0==--aG.awaits&&(aG.id=0),aG.echoes=100*aG.awaits,!0)}function aP(a){return aG.echoes&&a&&a.constructor===ag?(aN(),a.then(function(a){return aO(),a},function(a){return aO(),aW(a)})):a}function aQ(){var a=aI[aI.length-1];aI.pop(),aR(a,!1)}function aR(a,b){var c,d=ap;(b?!aG.echoes||aJ++&&a===ap:!aJ||--aJ&&a===ap)||queueMicrotask(b?(function(a){++aK,aG.echoes&&0!=--aG.echoes||(aG.echoes=aG.awaits=aG.id=0),aI.push(ap),aR(a,!0)}).bind(null,a):aQ),a!==ap&&(ap=a,d===ao&&(ao.env=aS()),ah&&(c=ao.env.Promise,b=a.env,(d.global||a.global)&&(Object.defineProperty(e,"Promise",b.PromiseProp),c.all=b.all,c.race=b.race,c.resolve=b.resolve,c.reject=b.reject,b.allSettled&&(c.allSettled=b.allSettled),b.any&&(c.any=b.any))))}function aS(){var a=e.Promise;return ah?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(e,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function aT(a,b,c,d,e){var f=ap;try{return aR(a,!0),b(c,d,e)}finally{aR(f,!1)}}function aU(a,b,c,d){return"function"!=typeof a?a:function(){var e=ap;c&&aN(),aR(b,!0);try{return a.apply(this,arguments)}finally{aR(e,!1),d&&queueMicrotask(aO)}}}function aV(a){Promise===ag&&0===aG.echoes?0===aJ?a():enqueueNativeMicroTask(a):setTimeout(a,0)}-1===(""+N).indexOf("[native code]")&&(aN=aO=X);var aW=at.reject,aX=String.fromCharCode(65535),aY="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",aZ="String expected.",a$=[],a_="__dbnames",a0="readonly",a1="readwrite";function a2(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var a3={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function a4(a){return"string"!=typeof a||/\./.test(a)?function(a){return a}:function(b){return void 0===b[a]&&a in b&&delete(b=D(b))[a],b}}function a5(){throw U.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function a6(a,b){try{var c=a7(a),d=a7(b);if(c!==d)return"Array"===c?1:"Array"===d?-1:"binary"===c?1:"binary"===d?-1:"string"===c?1:"string"===d?-1:"Date"===c?1:"Date"!==d?NaN:-1;switch(c){case"number":case"Date":case"string":return b<a?1:a<b?-1:0;case"binary":return function(a,b){for(var c=a.length,d=b.length,e=c<d?c:d,f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}(a8(a),a8(b));case"Array":return function(a,b){for(var c=a.length,d=b.length,e=c<d?c:d,f=0;f<e;++f){var g=a6(a[f],b[f]);if(0!==g)return g}return c===d?0:c<d?-1:1}(a,b)}}catch(a){}return NaN}function a7(a){var b=typeof a;return"object"!=b?b:ArrayBuffer.isView(a)||"ArrayBuffer"===(a=F(a))?"binary":a}function a8(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}function a9(a,b,c){var d=a.schema.yProps;return d?(b&&0<c.numFailures&&(b=b.filter(function(a,b){return!c.failures[b]})),Promise.all(d.map(function(c){return c=c.updatesTable,b?a.db.table(c).where("k").anyOf(b).delete():a.db.table(c).clear()})).then(function(){return c})):c}var ba=(bb.prototype.execute=function(a){var b=this["@@propmod"];if(void 0!==b.add){var c=b.add;if(g(c))return d(d([],g(a)?a:[],!0),c,!0).sort();if("number"==typeof c)return(Number(a)||0)+c;if("bigint"==typeof c)try{return BigInt(a)+c}catch(a){return BigInt(0)+c}throw TypeError("Invalid term ".concat(c))}if(void 0!==b.remove){var e=b.remove;if(g(e))return g(a)?a.filter(function(a){return!e.includes(a)}).sort():[];if("number"==typeof e)return Number(a)-e;if("bigint"==typeof e)try{return BigInt(a)-e}catch(a){return BigInt(0)-e}throw TypeError("Invalid subtrahend ".concat(e))}return(c=null==(c=b.replacePrefix)?void 0:c[0])&&"string"==typeof a&&a.startsWith(c)?b.replacePrefix[1]+a.substring(c.length):a},bb);function bb(a){this["@@propmod"]=a}function bc(a,b){for(var c=f(b),d=c.length,e=!1,g=0;g<d;++g){var h=c[g],i=b[h],j=v(a,h);i instanceof ba?(w(a,h,i.execute(j)),e=!0):j!==i&&(w(a,h,i),e=!0)}return e}var bd=(be.prototype._trans=function(a,b,c){var d=this._tx||ap.trans,e=this.name,f=ae&&"u">typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===a?"read":"write"," ").concat(this.name));function g(a,c,d){if(!d.schema[e])throw new U.NotFound("Table "+e+" not part of transaction");return b(d.idbtrans,d)}var h=aB();try{var i=d&&d.db._novip===this.db._novip?d===ap.trans?d._promise(a,g,c):aM(function(){return d._promise(a,g,c)},{trans:d,transless:ap.transless||ap}):function a(b,c,d,e){if(b.idbdb&&(b._state.openComplete||ap.letThrough||b._vip)){var f=b._createTransaction(c,d,b._dbSchema);try{f.create(),b._state.PR1398_maxLoop=3}catch(f){return f.name===T.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return a(b,c,d,e)})):aW(f)}return f._promise(c,function(a,b){return aM(function(){return ap.trans=f,e(a,b,f)})}).then(function(a){if("readwrite"===c)try{f.idbtrans.commit()}catch(a){}return"readonly"===c?a:f._completion.then(function(){return a})})}if(b._state.openComplete)return aW(new U.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return aW(new U.DatabaseClosed);b.open().catch(X)}return b._state.dbReadyPromise.then(function(){return a(b,c,d,e)})}(this.db,a,[this.name],g);return f&&(i._consoleTask=f,i=i.catch(function(a){return console.trace(a),aW(a)})),i}finally{h&&aC()}},be.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):null==a?aW(new U.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)},be.prototype.where=function(a){if("string"==typeof a)return new this.db.WhereClause(this,a);if(g(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var b=f(a);if(1===b.length)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){if(a.compound&&b.every(function(b){return 0<=a.keyPath.indexOf(b)})){for(var c=0;c<b.length;++c)if(-1===b.indexOf(a.keyPath[c]))return!1;return!0}return!1}).sort(function(a,b){return a.keyPath.length-b.keyPath.length})[0];if(c&&this.db._maxKey!==aX){var d=c.keyPath.slice(0,b.length);return this.where(d).equals(d.map(function(b){return a[b]}))}!c&&ae&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(b.join("+"),"]"));var e=this.schema.idxByName,h=b.reduce(function(b,c){var d=b[0],f=b[1],b=e[c],h=a[c];return[d||b,d||!b?a2(f,b&&b.multi?function(a){return g(a=v(a,c))&&a.some(function(a){return 0===a6(h,a)})}:function(a){return 0===a6(h,v(a,c))}):f]},[null,null]),d=h[0],h=h[1];return d?this.where(d.name).equals(a[d.keyPath]).filter(h):c?this.filter(h):this.where(b).equals("")},be.prototype.filter=function(a){return this.toCollection().and(a)},be.prototype.count=function(a){return this.toCollection().count(a)},be.prototype.offset=function(a){return this.toCollection().offset(a)},be.prototype.limit=function(a){return this.toCollection().limit(a)},be.prototype.each=function(a){return this.toCollection().each(a)},be.prototype.toArray=function(a){return this.toCollection().toArray(a)},be.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},be.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,g(a)?"[".concat(a.join("+"),"]"):a))},be.prototype.reverse=function(){return this.toCollection().reverse()},be.prototype.mapToClass=function(a){var c,d=this.db,e=this.name;function f(){return null!==c&&c.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof a5&&(function(a,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=a}b(a,c),a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}(f,c=a),Object.defineProperty(f.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0}),f.prototype.table=function(){return e},a=f);for(var g=new Set,h=a.prototype;h;h=i(h))Object.getOwnPropertyNames(h).forEach(function(a){return g.add(a)});function j(b){if(!b)return b;var c,d=Object.create(a.prototype);for(c in b)if(!g.has(c))try{d[c]=b[c]}catch(a){}return d}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=j,this.hook("reading",j),a},be.prototype.defineClass=function(){return this.mapToClass(function(a){h(this,a)})},be.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;return f&&e&&(g=a4(f)(a)),this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:null!=b?[b]:null,values:[g]})}).then(function(a){return a.numFailures?at.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{w(a,f,b)}catch(a){}return b})},be.prototype.upsert=function(a,b){var c=this,d=this.schema.primKey.keyPath;return this._trans("readwrite",function(e){return c.core.get({trans:e,key:a}).then(function(f){var g=null!=f?f:{};return bc(g,b),d&&w(g,d,a),c.core.mutate({trans:e,type:"put",values:[g],keys:[a],upsert:!0,updates:{keys:[a],changeSpecs:[b]}}).then(function(a){return a.numFailures?at.reject(a.failures[0]):!!f})})})},be.prototype.update=function(a,b){return"object"!=typeof a||g(a)?this.where(":id").equals(a).modify(b):void 0===(a=v(a,this.schema.primKey.keyPath))?aW(new U.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(b)},be.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;return f&&e&&(g=a4(f)(a)),this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:null!=b?[b]:null})}).then(function(a){return a.numFailures?at.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{w(a,f,b)}catch(a){}return b})},be.prototype.delete=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]}).then(function(c){return a9(b,[a],c)}).then(function(a){return a.numFailures?at.reject(a.failures[0]):void 0})})},be.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:a3}).then(function(b){return a9(a,null,b)})}).then(function(a){return a.numFailures?at.reject(a.failures[0]):void 0})},be.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})},be.prototype.bulkAdd=function(a,b,c){var d=this,e=Array.isArray(b)?b:void 0,f=(c=c||(e?void 0:b))?c.allKeys:void 0;return this._trans("readwrite",function(b){var c=d.schema.primKey,g=c.auto,c=c.keyPath;if(c&&e)throw new U.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==a.length)throw new U.InvalidArgument("Arguments objects and keys must have the same length");var h=a.length,c=c&&g?a.map(a4(c)):a;return d.core.mutate({trans:b,type:"add",keys:e,values:c,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,e=a.lastResult,a=a.failures;if(0===b)return f?c:e;throw new S("".concat(d.name,".bulkAdd(): ").concat(b," of ").concat(h," operations failed"),a)})})},be.prototype.bulkPut=function(a,b,c){var d=this,e=Array.isArray(b)?b:void 0,f=(c=c||(e?void 0:b))?c.allKeys:void 0;return this._trans("readwrite",function(b){var c=d.schema.primKey,g=c.auto,c=c.keyPath;if(c&&e)throw new U.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==a.length)throw new U.InvalidArgument("Arguments objects and keys must have the same length");var h=a.length,c=c&&g?a.map(a4(c)):a;return d.core.mutate({trans:b,type:"put",keys:e,values:c,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,e=a.lastResult,a=a.failures;if(0===b)return f?c:e;throw new S("".concat(d.name,".bulkPut(): ").concat(b," of ").concat(h," operations failed"),a)})})},be.prototype.bulkUpdate=function(a){var b=this,c=this.core,d=a.map(function(a){return a.key}),e=a.map(function(a){return a.changes}),f=[];return this._trans("readwrite",function(g){return c.getMany({trans:g,keys:d,cache:"clone"}).then(function(h){var i=[],j=[];a.forEach(function(a,c){var d=a.key,e=a.changes,g=h[c];if(g){for(var k=0,l=Object.keys(e);k<l.length;k++){var m=l[k],n=e[m];if(m===b.schema.primKey.keyPath){if(0!==a6(n,d))throw new U.Constraint("Cannot update primary key in bulkUpdate()")}else w(g,m,n)}f.push(c),i.push(d),j.push(g)}});var k=i.length;return c.mutate({trans:g,type:"put",keys:i,values:j,updates:{keys:d,changeSpecs:e}}).then(function(a){var c=a.numFailures,d=a.failures;if(0===c)return k;for(var e=0,g=Object.keys(d);e<g.length;e++){var h,i=g[e],j=f[Number(i)];null!=j&&(h=d[i],delete d[i],d[j]=h)}throw new S("".concat(b.name,".bulkUpdate(): ").concat(c," of ").concat(k," operations failed"),d)})})})},be.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a}).then(function(c){return a9(b,a,c)})}).then(function(a){var d=a.numFailures,e=a.lastResult,a=a.failures;if(0===d)return e;throw new S("".concat(b.name,".bulkDelete(): ").concat(d," of ").concat(c," operations failed"),a)})},be);function be(){}function bf(a){function b(b,d){if(d){for(var e=arguments.length,f=Array(e-1);--e;)f[e-1]=arguments[e];return c[b].subscribe.apply(null,f),a}if("string"==typeof b)return c[b]}var c={};b.addEventType=h;for(var d=1,e=arguments.length;d<e;++d)h(arguments[d]);return b;function h(a,d,e){if("object"!=typeof a){d=d||ac;var i={subscribers:[],fire:e=e||X,subscribe:function(a){-1===i.subscribers.indexOf(a)&&(i.subscribers.push(a),i.fire=d(i.fire,a))},unsubscribe:function(a){i.subscribers=i.subscribers.filter(function(b){return b!==a}),i.fire=i.subscribers.reduce(d,e)}};return c[a]=b[a]=i}f(a).forEach(function(b){var c=a[b];if(g(c))h(b,a[b][0],a[b][1]);else{if("asap"!==c)throw new U.InvalidArgument("Invalid event config");var d=h(b,Y,function(){for(var a=arguments.length,b=Array(a);a--;)b[a]=arguments[a];d.subscribers.forEach(function(a){u(function(){a.apply(null,b)})})})}})}}function bg(a,b){return o(b).from({prototype:a}),b}function bh(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function bi(a,b){a.filter=a2(a.filter,b)}function bj(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return a2(d(),b())}:b,a.justLimit=c&&!d}function bk(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new U.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function bl(a,b,c){var d=bk(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:"prev"===a.dir,unique:!!a.unique,query:{index:d,range:a.range}})}function bm(a,b,c,d){var e=a.replayFilter?a2(a.filter,a.replayFilter()):a.filter;if(a.or){var f={},g=function(a,c,d){var g,h;e&&!e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})||("[object ArrayBuffer]"==(h=""+(g=c.primaryKey))&&(h=""+new Uint8Array(g)),k(f,h)||(f[h]=!0,b(a,c,d)))};return Promise.all([a.or._iterate(g,c),bn(bl(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}return bn(bl(a,d,c),a2(a.algorithm,e),b,!a.keysOnly&&a.valueMapper)}function bn(a,b,c,d){var e=aF(d?function(a,b,e){return c(d(a),b,e)}:c);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a.continue()};b&&!b(a,function(a){return c=a},function(b){a.stop(b),c=X},function(b){a.fail(b),c=X})||e(a.value,a,function(a){return c=a}),c()})})}var bo=(bp.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,aW.bind(null,c.error)):c.table._trans("readonly",a).then(b)},bp.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,aW.bind(null,b.error)):b.table._trans("readwrite",a,"locked")},bp.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=a2(b.algorithm,a)},bp.prototype._iterate=function(a,b){return bm(this._ctx,a,b,this._ctx.table.core)},bp.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return a&&h(c,a),b._ctx=c,b},bp.prototype.raw=function(){return this._ctx.valueMapper=null,this},bp.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return bm(b,a,c,b.table.core)})},bp.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(bh(c,!0))return d.count({trans:a,query:{index:bk(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});var e=0;return bm(c,function(){return++e,!1},a,d).then(function(){return e})}).then(a)},bp.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g="next"===this._ctx.dir?1:-1;function h(a,b){return a6(f(a,e),f(b,e))*g}return this.toArray(function(a){return a.sort(h)}).then(b)},bp.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if("next"===c.dir&&bh(c,!0)&&0<c.limit){var d=c.valueMapper,e=bk(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){return a=a.result,d?a.map(d):a})}var f=[];return bm(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})},a)},bp.prototype.offset=function(a){var b=this._ctx;return a<=0||(b.offset+=a,bh(b)?bj(b,function(){var b=a;return function(a,c){return 0===b||(1===b?--b:c(function(){a.advance(b),b=0}),!1)}}):bj(b,function(){var b=a;return function(){return--b<0}})),this},bp.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),bj(this._ctx,function(){var b=a;return function(a,c,d){return--b<=0&&c(d),0<=b}},!0),this},bp.prototype.until=function(a,b){return bi(this._ctx,function(c,d,e){return!a(c.value)||(d(e),b)}),this},bp.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)},bp.prototype.last=function(a){return this.reverse().first(a)},bp.prototype.filter=function(a){var b;return bi(this._ctx,function(b){return a(b.value)}),(b=this._ctx).isMatch=a2(b.isMatch,a),this},bp.prototype.and=function(a){return this.filter(a)},bp.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},bp.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},bp.prototype.desc=function(){return this.reverse()},bp.prototype.eachKey=function(a){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(b,c){a(c.key,c)})},bp.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},bp.prototype.eachPrimaryKey=function(a){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(b,c){a(c.primaryKey,c)})},bp.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)},bp.prototype.primaryKeys=function(a){var b=this._ctx;if("next"===b.dir&&bh(b,!0)&&0<b.limit)return this._read(function(a){var c=bk(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){return a.result}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)},bp.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},bp.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)},bp.prototype.lastKey=function(a){return this.reverse().firstKey(a)},bp.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};return bi(this._ctx,function(a){var c=a.primaryKey.toString(),a=k(b,c);return b[c]=!0,!a}),this},bp.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){var e="function"==typeof a?a:function(b){return bc(b,a)},g=c.table.core,h=g.schema.primaryKey,i=h.outbound,j=h.extractKey,k=200,h=b.db._options.modifyChunkSize;function l(a,b){var c=b.failures,b=b.numFailures;n+=a-b;for(var d=0,e=f(c);d<e.length;d++){var g=e[d];m.push(c[g])}}h&&(k="object"==typeof h?h[g.name]||h["*"]||200:h);var m=[],n=0,o=[],p=a===bq;return b.clone().primaryKeys().then(function(b){var f=bh(c)&&c.limit===1/0&&("function"!=typeof a||p)&&{index:c.index,range:c.range};return(function h(m){var n=Math.min(k,b.length-m),o=b.slice(m,m+n);return(p?Promise.resolve([]):g.getMany({trans:d,keys:o,cache:"immutable"})).then(function(q){var r=[],s=[],t=i?[]:null,u=p?o:[];if(!p)for(var v=0;v<n;++v){var w=q[v],x={value:D(w),primKey:b[m+v]};!1!==e.call(x,x.value,x)&&(null==x.value?u.push(b[m+v]):i||0===a6(j(w),j(x.value))?(s.push(x.value),i&&t.push(b[m+v])):(u.push(b[m+v]),r.push(x.value)))}return Promise.resolve(0<r.length&&g.mutate({trans:d,type:"add",values:r}).then(function(a){for(var b in a.failures)u.splice(parseInt(b),1);l(r.length,a)})).then(function(){return(0<s.length||f&&"object"==typeof a)&&g.mutate({trans:d,type:"put",keys:t,values:s,criteria:f,changeSpec:"function"!=typeof a&&a,isAdditionalChunk:0<m}).then(function(a){return l(s.length,a)})}).then(function(){return(0<u.length||f&&p)&&g.mutate({trans:d,type:"delete",keys:u,criteria:f,isAdditionalChunk:0<m}).then(function(a){return a9(c.table,u,a)}).then(function(a){return l(u.length,a)})}).then(function(){return b.length>m+n&&h(m+k)})})})(0).then(function(){if(0<m.length)throw new R("Error modifying one or more objects",m,n,o);return b.length})})})},bp.prototype.delete=function(){var a=this._ctx,b=a.range;return bh(a)&&!a.table.schema.yProps&&(a.isPrimKey||3===b.type)?this._write(function(c){var d=a.table.core.schema.primaryKey;return a.table.core.count({trans:c,query:{index:d,range:b}}).then(function(d){return a.table.core.mutate({trans:c,type:"deleteRange",range:b}).then(function(a){var b=a.failures,a=a.numFailures;if(a)throw new R("Could not delete some values",Object.keys(b).map(function(a){return b[a]}),d-a);return d-a})})}):this.modify(bq)},bp);function bp(){}var bq=function(a,b){return b.value=null};function br(a,b){return a<b?-1:+(a!==b)}function bs(a,b){return b<a?-1:+(a!==b)}function bt(a,b,c){return(a=a instanceof by?new a.Collection(a):a)._ctx.error=new(c||TypeError)(b),a}function bu(a){return new a.Collection(a,function(){return bx("")}).limit(0)}function bv(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return"string"==typeof a}))return bt(a,aZ);function m(a){e="next"===a?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()},f="next"===a?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()},g="next"===a?br:bs;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper}),i=b.map(function(a){return a.lower}),k="next"===(j=a)?"":d}m("next"),(a=new a.Collection(a,function(){return bw(h[0],i[l-1]+d)}))._ondirectionchange=function(a){m(a)};var n=0;return a._addAlgorithm(function(a,c,d){var e=a.key;if("string"!=typeof e)return!1;var m=f(e);if(b(m,i,n))return!0;for(var o=null,p=n;p<l;++p){var q=function(a,b,c,d,e,f){for(var g=Math.min(a.length,d.length),h=-1,i=0;i<g;++i){var j=b[i];if(j!==d[i])return 0>e(a[i],c[i])?a.substr(0,i)+c[i]+c.substr(i+1):0>e(a[i],d[i])?a.substr(0,i)+d[i]+c.substr(i+1):0<=h?a.substr(0,h)+b[h]+c.substr(h+1):null;0>e(a[i],j)&&(h=i)}return g<d.length&&"next"===f?a+c.substr(a.length):g<a.length&&"prev"===f?a.substr(0,c.length):h<0?null:a.substr(0,h)+d[h]+c.substr(h+1)}(e,m,h[p],i[p],g,j);null===q&&null===o?n=p+1:(null===o||0<g(o,q))&&(o=q)}return c(null!==o?function(){a.continue(o+k)}:d),!1}),a}function bw(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function bx(a){return{type:1,lower:a,upper:a}}var by=(Object.defineProperty(bz.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),bz.prototype.between=function(a,b,c,d){c=!1!==c,d=!0===d;try{return 0<this._cmp(a,b)||0===this._cmp(a,b)&&(c||d)&&(!c||!d)?bu(this):new this.Collection(this,function(){return bw(a,b,!c,!d)})}catch(a){return bt(this,aY)}},bz.prototype.equals=function(a){return null==a?bt(this,aY):new this.Collection(this,function(){return bx(a)})},bz.prototype.above=function(a){return null==a?bt(this,aY):new this.Collection(this,function(){return bw(a,void 0,!0)})},bz.prototype.aboveOrEqual=function(a){return null==a?bt(this,aY):new this.Collection(this,function(){return bw(a,void 0,!1)})},bz.prototype.below=function(a){return null==a?bt(this,aY):new this.Collection(this,function(){return bw(void 0,a,!1,!0)})},bz.prototype.belowOrEqual=function(a){return null==a?bt(this,aY):new this.Collection(this,function(){return bw(void 0,a)})},bz.prototype.startsWith=function(a){return"string"!=typeof a?bt(this,aZ):this.between(a,a+aX,!0,!0)},bz.prototype.startsWithIgnoreCase=function(a){return""===a?this.startsWith(a):bv(this,function(a,b){return 0===a.indexOf(b[0])},[a],aX)},bz.prototype.equalsIgnoreCase=function(a){return bv(this,function(a,b){return a===b[0]},[a],"")},bz.prototype.anyOfIgnoreCase=function(){var a=K.apply(J,arguments);return 0===a.length?bu(this):bv(this,function(a,b){return -1!==b.indexOf(a)},a,"")},bz.prototype.startsWithAnyOfIgnoreCase=function(){var a=K.apply(J,arguments);return 0===a.length?bu(this):bv(this,function(a,b){return b.some(function(b){return 0===a.indexOf(b)})},a,aX)},bz.prototype.anyOf=function(){var a=this,b=K.apply(J,arguments),c=this._cmp;try{b.sort(c)}catch(a){return bt(this,aY)}if(0===b.length)return bu(this);var d=new this.Collection(this,function(){return bw(b[0],b[b.length-1])});d._ondirectionchange=function(d){c="next"===d?a._ascending:a._descending,b.sort(c)};var e=0;return d._addAlgorithm(function(a,d,f){for(var g=a.key;0<c(g,b[e]);)if(++e===b.length)return d(f),!1;return 0===c(g,b[e])||(d(function(){a.continue(b[e])}),!1)}),d},bz.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},bz.prototype.noneOf=function(){var a=K.apply(J,arguments);if(0===a.length)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return bt(this,aY)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[-1/0,b]]},null);return b.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})},bz.prototype.inAnyRange=function(a,b){var c=this,d=this._cmp,e=this._ascending,f=this._descending,g=this._min,h=this._max;if(0===a.length)return bu(this);if(!a.every(function(a){return void 0!==a[0]&&void 0!==a[1]&&0>=e(a[0],a[1])}))return bt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",U.InvalidArgument);var i,j=!b||!1!==b.includeLowers,k=b&&!0===b.includeUppers,l=e;function m(a,b){return l(a[0],b[0])}try{(i=a.reduce(function(a,b){for(var c=0,e=a.length;c<e;++c){var f=a[c];if(0>d(b[0],f[1])&&0<d(b[1],f[0])){f[0]=g(f[0],b[0]),f[1]=h(f[1],b[1]);break}}return c===e&&a.push(b),a},[])).sort(m)}catch(a){return bt(this,aY)}var n=0,o=k?function(a){return 0<e(a,i[n][1])}:function(a){return 0<=e(a,i[n][1])},p=j?function(a){return 0<f(a,i[n][0])}:function(a){return 0<=f(a,i[n][0])},q=o,a=new this.Collection(this,function(){return bw(i[0][0],i[i.length-1][1],!j,!k)});return a._ondirectionchange=function(a){l="next"===a?(q=o,e):(q=p,f),i.sort(m)},a._addAlgorithm(function(a,b,d){for(var f=a.key;q(f);)if(++n===i.length)return b(d),!1;return!o(f)&&!p(f)||(0===c._cmp(f,i[n][1])||0===c._cmp(f,i[n][0])||b(function(){l===e?a.continue(i[n][0]):a.continue(i[n][1])}),!1)}),a},bz.prototype.startsWithAnyOf=function(){var a=K.apply(J,arguments);return a.every(function(a){return"string"==typeof a})?0===a.length?bu(this):this.inAnyRange(a.map(function(a){return[a,a+aX]})):bt(this,"startsWithAnyOf() only works with strings")},bz);function bz(){}function bA(a){return aF(function(b){return bB(b),a(b.target.error),!1})}function bB(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var bC="storagemutated",bD="x-storagemutated-1",bE=bf(null,bC),bF=(bG.prototype._lock=function(){return t(!ap.global),++this._reculock,1!==this._reculock||ap.global||(ap.lockOwnerFor=this),this},bG.prototype._unlock=function(){if(t(!ap.global),0==--this._reculock)for(ap.global||(ap.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{aT(a[1],a[0])}catch(a){}}return this},bG.prototype._locked=function(){return this._reculock&&ap.lockOwnerFor!==this},bG.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;if(t(!this.idbtrans),!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new U.DatabaseClosed(d);case"MissingAPIError":throw new U.MissingAPI(d.message,d);default:throw new U.OpenFailed(d)}if(!this.active)throw new U.TransactionInactive;return t(null===this._completion._state),(a=this.idbtrans=a||(this.db.core||c).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=aF(function(c){bB(c),b._reject(a.error)}),a.onabort=aF(function(c){bB(c),b.active&&b._reject(new U.Abort(a.error)),b.active=!1,b.on("abort").fire(c)}),a.oncomplete=aF(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&bE.storagemutated.fire(a.mutatedParts)}),this},bG.prototype._promise=function(a,b,c){var d=this;if("readwrite"===a&&"readwrite"!==this.mode)return aW(new U.ReadOnly("Transaction is readonly"));if(!this.active)return aW(new U.TransactionInactive);if(this._locked())return new at(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},ap])});if(c)return aM(function(){var a=new at(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});return a.finally(function(){return d._unlock()}),a._lib=!0,a});var e=new at(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});return e._lib=!0,e},bG.prototype._root=function(){return this.parent?this.parent._root():this},bG.prototype.waitFor=function(a){var b,c=this._root(),d=at.resolve(a);c._waitingFor?c._waitingFor=c._waitingFor.then(function(){return d}):(c._waitingFor=d,c._waitingQueue=[],b=c.idbtrans.objectStore(c.storeNames[0]),function a(){for(++c._spinCount;c._waitingQueue.length;)c._waitingQueue.shift()();c._waitingFor&&(b.get(-1/0).onsuccess=a)}());var e=c._waitingFor;return new at(function(a,b){d.then(function(b){return c._waitingQueue.push(aF(a.bind(null,b)))},function(a){return c._waitingQueue.push(aF(b.bind(null,a)))}).finally(function(){c._waitingFor===e&&(c._waitingFor=null)})})},bG.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new U.Abort))},bG.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(k(b,a))return b[a];var c=this.schema[a];if(!c)throw new U.NotFound("Table "+a+" not part of transaction");return(c=new this.db.Table(a,c,this)).core=this.db.core.table(a),b[a]=c},bG);function bG(){}function bH(a,b,c,d,e,f,g,h){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+bI(b),type:h}}function bI(a){return"string"==typeof a?a:a?"["+[].join.call(a,"+")+"]":""}function bJ(a,b,c){var d;return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:(d=function(a){return[a.name,a]},c.reduce(function(a,b,c){return(c=d(b,c))&&(a[c[0]]=c[1]),a},{}))}}var bK=function(a){try{return a.only([[]]),bK=function(){return[[]]},[[]]}catch(a){return bK=function(){return aX},aX}};function bL(a){return null==a?function(){}:"string"==typeof a?1===a.split(".").length?function(b){return b[a]}:function(b){return v(b,a)}:function(b){return v(b,a)}}function bM(a){return[].slice.call(a)}var bN=0;function bO(a){return null==a?":id":"string"==typeof a?a:"[".concat(a.join("+"),"]")}function bP(a,b){var d,e,f,h,i=b.db,b=(d=a._middlewares,e=a._deps,f=b,h=e.IDBKeyRange,e.indexedDB,{dbcore:(f=function(a,b,c){function d(a){if(3===a.type)return null;if(4===a.type)throw Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen,a=a.upperOpen;return void 0===c?void 0===d?null:b.upperBound(d,!!a):void 0===d?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a)}var e,f,h=(e=c,f=bM(a.objectStoreNames),{schema:{name:a.name,tables:f.map(function(a){return e.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=g(b),e={},c={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==b,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:bL(b)},indexes:bM(a.indexNames).map(function(b){return a.index(b)}).map(function(a){var b=a.name,c=a.unique,d=a.multiEntry,a=a.keyPath,d={name:b,compound:g(a),keyPath:a,unique:c,multiEntry:d,extractKey:bL(a)};return e[bO(a)]=d}),getIndexByKeyPath:function(a){return e[bO(a)]}};return e[":id"]=c.primaryKey,null!=b&&(e[bO(b)]=c.primaryKey),c})},hasGetAll:0<f.length&&"getAll"in e.objectStore(f[0])&&!("u">typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),c=h.schema,i=h.hasGetAll,h=c.tables.map(function(a){var b=a.name;return{name:b,schema:a,mutate:function(a){var c=a.trans,e=a.type,f=a.keys,g=a.values,h=a.range;return new Promise(function(a,i){a=aF(a);var j=c.objectStore(b),k=null==j.keyPath,l="put"===e||"add"===e;if(!l&&"delete"!==e&&"deleteRange"!==e)throw Error("Invalid operation type: "+e);var m,n=(f||g||{length:1}).length;if(f&&g&&f.length!==g.length)throw Error("Given keys array must have same length as given values array.");if(0===n)return a({numFailures:0,failures:{},results:[],lastResult:void 0});function o(a){++r,bB(a)}var p=[],q=[],r=0;if("deleteRange"===e){if(4===h.type)return a({numFailures:r,failures:q,results:[],lastResult:void 0});3===h.type?p.push(m=j.clear()):p.push(m=j.delete(d(h)))}else{var k=l?k?[g,f]:[g,null]:[f,null],s=k[0],t=k[1];if(l)for(var u=0;u<n;++u)p.push(m=t&&void 0!==t[u]?j[e](s[u],t[u]):j[e](s[u])),m.onerror=o;else for(u=0;u<n;++u)p.push(m=j[e](s[u])),m.onerror=o}function v(b){b=b.target.result,p.forEach(function(a,b){return null!=a.error&&(q[b]=a.error)}),a({numFailures:r,failures:q,results:"delete"===e?f:p.map(function(a){return a.result}),lastResult:b})}m.onerror=function(a){o(a),v(a)},m.onsuccess=v})},getMany:function(a){var c=a.trans,d=a.keys;return new Promise(function(a,e){a=aF(a);for(var f,g=c.objectStore(b),h=d.length,i=Array(h),j=0,k=0,l=function(b){i[(b=b.target)._pos]=b.result,++k===j&&a(i)},m=bA(e),n=0;n<h;++n)null!=d[n]&&((f=g.get(d[n]))._pos=n,f.onsuccess=l,f.onerror=m,++j);0===j&&a(i)})},get:function(a){var c=a.trans,d=a.key;return new Promise(function(a,e){a=aF(a);var f=c.objectStore(b).get(d);f.onsuccess=function(b){return a(b.target.result)},f.onerror=bA(e)})},query:function(a){return new Promise(function(c,e){c=aF(c);var f,g,h,j=a.trans,k=a.values,l=a.limit,m=a.query,n=l===1/0?void 0:l,o=m.index,m=m.range,j=j.objectStore(b),o=o.isPrimaryKey?j:j.index(o.name),m=d(m);if(0===l)return c({result:[]});i?((n=k?o.getAll(m,n):o.getAllKeys(m,n)).onsuccess=function(a){return c({result:a.target.result})},n.onerror=bA(e)):(f=0,g=!k&&"openKeyCursor"in o?o.openKeyCursor(m):o.openCursor(m),h=[],g.onsuccess=function(a){var b=g.result;return b?(h.push(k?b.value:b.primaryKey),++f===l?c({result:h}):void b.continue()):c({result:h})},g.onerror=bA(e))})},openCursor:function(a){var c=a.trans,e=a.values,f=a.query,g=a.reverse,h=a.unique;return new Promise(function(a,i){a=aF(a);var j=f.index,k=f.range,l=c.objectStore(b),l=j.isPrimaryKey?l:l.index(j.name),j=g?h?"prevunique":"prev":h?"nextunique":"next",m=!e&&"openKeyCursor"in l?l.openKeyCursor(d(k),j):l.openCursor(d(k),j);m.onerror=bA(i),m.onsuccess=aF(function(b){var d,e,f,g,h=m.result;h?(h.___id=++bN,h.done=!1,d=h.continue.bind(h),e=(e=h.continuePrimaryKey)&&e.bind(h),f=h.advance.bind(h),g=function(){throw Error("Cursor not stopped")},h.trans=c,h.stop=h.continue=h.continuePrimaryKey=h.advance=function(){throw Error("Cursor not started")},h.fail=aF(i),h.next=function(){var a=this,b=1;return this.start(function(){return b--?a.continue():a.stop()}).then(function(){return a})},h.start=function(a){function b(){if(m.result)try{a()}catch(a){h.fail(a)}else h.done=!0,h.start=function(){throw Error("Cursor behind last entry")},h.stop()}var c=new Promise(function(a,b){a=aF(a),m.onerror=bA(b),h.fail=b,h.stop=function(b){h.stop=h.continue=h.continuePrimaryKey=h.advance=g,a(b)}});return m.onsuccess=aF(function(a){m.onsuccess=b,b()}),h.continue=d,h.continuePrimaryKey=e,h.advance=f,b(),c},a(h)):a(null)},i)})},count:function(a){var c=a.query,e=a.trans,f=c.index,g=c.range;return new Promise(function(a,c){var h=e.objectStore(b),i=f.isPrimaryKey?h:h.index(f.name),h=d(g),i=h?i.count(h):i.count();i.onsuccess=aF(function(b){return a(b.target.result)}),i.onerror=bA(c)})}}}),j={};return h.forEach(function(a){return j[a.name]=a}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){if(!j[a])throw Error("Table '".concat(a,"' not found"));return j[a]},MIN_KEY:-1/0,MAX_KEY:bK(b),schema:c}}(i,h,f),d.dbcore.reduce(function(a,b){return b=b.create,c(c({},a),b(a))},f))});a.core=b.dbcore,a.tables.forEach(function(b){var c=b.name;a.core.schema.tables.some(function(a){return a.name===c})&&(b.core=a.core.table(c),a[c]instanceof a.Table&&(a[c].core=b.core))})}function bQ(a,b,c,d){c.forEach(function(c){var e=d[c];b.forEach(function(b){var d=function a(b,c){return p(b,c)||(b=i(b))&&a(b,c)}(b,c);(!d||"value"in d&&void 0===d.value)&&(b===a.Transaction.prototype||b instanceof a.Transaction?n(b,c,{get:function(){return this.table(c)},set:function(a){m(this,c,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):b[c]=new a.Table(c,e))})})}function bR(a,b){b.forEach(function(b){for(var c in b)b[c]instanceof a.Table&&delete b[c]})}function bS(a,b){return a._cfg.version-b._cfg.version}function bT(a,b){var c,d={del:[],add:[],change:[]};for(c in a)b[c]||d.del.push(c);for(c in b){var e=a[c],f=b[c];if(e){var g={name:c,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto)g.recreate=!0,d.change.push(g);else{var h=e.idxByName,i=f.idxByName,j=void 0;for(j in h)i[j]||g.del.push(j);for(j in i){var k=h[j],l=i[j];k?k.src!==l.src&&g.change.push(l):g.add.push(l)}(0<g.del.length||0<g.add.length||0<g.change.length)&&d.change.push(g)}}else d.add.push([c,f])}return d}function bU(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});return d.forEach(function(a){return bW(e,a)}),e}function bV(a,b){f(a).forEach(function(c){b.db.objectStoreNames.contains(c)||(ae&&console.debug("Dexie: Creating missing table",c),bU(b,c,a[c].primKey,a[c].indexes))})}function bW(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function bX(a,b,c){var d={};return r(b.objectStoreNames,0).forEach(function(a){for(var b=c.objectStore(a),e=bH(bI(i=b.keyPath),i||"",!0,!1,!!b.autoIncrement,i&&"string"!=typeof i,!0),f=[],g=0;g<b.indexNames.length;++g){var h=b.index(b.indexNames[g]),i=h.keyPath,h=bH(h.name,i,!!h.unique,!!h.multiEntry,!1,i&&"string"!=typeof i,!1);f.push(h)}d[a]=bJ(a,e,f)}),d}function bY(a,b,c){for(var d=c.db.objectStoreNames,f=0;f<d.length;++f){var g=d[f],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath,l="string"==typeof k?k:"["+r(k).join("+")+"]";!b[g]||(k=b[g].idxByName[l])&&(k.name=j,delete b[g].idxByName[l],b[g].idxByName[j]=k)}}"u">typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function bZ(a){return a.split(",").map(function(a,b){var c=a.split(":"),d=null==(e=c[1])?void 0:e.trim(),e=(a=c[0].trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(e)?e.match(/^\[(.*)\]$/)[1].split("+"):e;return bH(e,c||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),g(c),0===b,d)})}var b$=(b_.prototype._createTableSchema=bJ,b_.prototype._parseIndexSyntax=bZ,b_.prototype._parseStoresSpec=function(a,b){var c=this;f(a).forEach(function(d){if(null!==a[d]){var e=c._parseIndexSyntax(a[d]),f=e.shift();if(!f)throw new U.Schema("Invalid schema for table "+d+": "+a[d]);if(f.unique=!0,f.multi)throw new U.Schema("Primary key cannot be multiEntry*");e.forEach(function(a){if(a.auto)throw new U.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new U.Schema("Index must have a name and cannot be an empty string")}),e=c._createTableSchema(d,f,e),b[d]=e}})},b_.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,a):a;var a=b._versions,c={},d={};return a.forEach(function(a){h(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)}),b._dbSchema=d,bR(b,[b._allTables,b,b.Transaction.prototype]),bQ(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],f(d),d),b._storeNames=f(d),this},b_.prototype.upgrade=function(a){return this._cfg.contentUpgrade=ad(this._cfg.contentUpgrade||X,a),this},b_);function b_(){}function b0(a,b){var c=a._dbNamesDB;return c||(c=a._dbNamesDB=new cA(a_,{addons:[],indexedDB:a,IDBKeyRange:b})).version(1).stores({dbnames:"name"}),c.table("dbnames")}function b1(a){return a&&"function"==typeof a.databases}function b2(a){return aM(function(){return ap.letThrough=!0,a()})}function b3(a){return!("from"in a)}var b4=function(a,b){if(!this){var c=new b4;return a&&"d"in a&&h(c,a),c}h(this,arguments.length?{d:1,from:a,to:1<arguments.length?b:a}:{d:0})};function b5(a,b,c){var d=a6(b,c);if(!isNaN(d)){if(0<d)throw RangeError();if(b3(a))return h(a,{from:b,to:c,d:1});var e=a.l,d=a.r;if(0>a6(c,a.from))return e?b5(e,b,c):a.l={from:b,to:c,d:1,l:null,r:null},b9(a);if(0<a6(b,a.to))return d?b5(d,b,c):a.r={from:b,to:c,d:1,l:null,r:null},b9(a);0>a6(b,a.from)&&(a.from=b,a.l=null,a.d=d?d.d+1:1),0<a6(c,a.to)&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1),c=!a.r,e&&!a.l&&b6(a,e),d&&c&&b6(a,d)}}function b6(a,b){b3(b)||function a(b,c){var d=c.from,e=c.to,f=c.l,c=c.r;b5(b,d,e),f&&a(b,f),c&&a(b,c)}(a,b)}function b7(a,b){var c=b8(b),d=c.next();if(d.done)return!1;for(var e=d.value,f=b8(a),g=f.next(e.from),h=g.value;!d.done&&!g.done;){if(0>=a6(h.from,e.to)&&0<=a6(h.to,e.from))return!0;0>a6(e.from,h.from)?e=(d=c.next(h.from)).value:h=(g=f.next(e.from)).value}return!1}function b8(a){var b=b3(a)?null:{s:0,n:a};return{next:function(a){for(var c=0<arguments.length;b;)switch(b.s){case 0:if(b.s=1,c)for(;b.n.l&&0>a6(a,b.n.from);)b={up:b,n:b.n.l,s:1};else for(;b.n.l;)b={up:b,n:b.n.l,s:1};case 1:if(b.s=2,!c||0>=a6(a,b.n.to))return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3,b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function b9(a){var b,d,e=((null==(b=a.r)?void 0:b.d)||0)-((null==(d=a.l)?void 0:d.d)||0),f=1<e?"r":e<-1?"l":"";f&&(b="r"==f?"l":"r",d=c({},a),e=a[f],a.from=e.from,a.to=e.to,a[f]=e[f],d[f]=e[b],(a[b]=d).d=ca(d)),a.d=ca(a)}function ca(a){var b=a.r,a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}function cb(a,b){return f(b).forEach(function(c){a[c]?b6(a[c],b[c]):a[c]=function a(b){var c,d,e={};for(c in b)k(b,c)&&(d=b[c],e[c]=!d||"object"!=typeof d||B.has(d.constructor)?d:a(d));return e}(b[c])}),a}function cc(a,b){return a.all||b.all||Object.keys(a).some(function(c){return b[c]&&b7(b[c],a[c])})}l(b4.prototype,((N={add:function(a){return b6(this,a),this},addKey:function(a){return b5(this,a,a),this},addKeys:function(a){var b=this;return a.forEach(function(a){return b5(b,a,a)}),this},hasKey:function(a){var b=b8(this).next(a).value;return b&&0>=a6(b.from,a)&&0<=a6(b.to,a)}})[G]=function(){return b8(this)},N));var cd={},ce={},cf=!1;function cg(a){cb(ce,a),cf||(cf=!0,setTimeout(function(){cf=!1,ch(ce,(ce={},!1))},0))}function ch(a,b){void 0===b&&(b=!1);var c=new Set;if(a.all)for(var d=0,e=Object.values(cd);d<e.length;d++)ci(g=e[d],a,c,b);else for(var f in a){var g,h=/^idb\:\/\/(.*)\/(.*)\//.exec(f);h&&(f=h[1],h=h[2],(g=cd["idb://".concat(f,"/").concat(h)])&&ci(g,a,c,b))}c.forEach(function(a){return a()})}function ci(a,b,c,d){for(var e=[],f=0,g=Object.entries(a.queries.query);f<g.length;f++){for(var h=g[f],i=h[0],j=[],k=0,l=h[1];k<l.length;k++){var m=l[k];cc(b,m.obsSet)?m.subscribers.forEach(function(a){return c.add(a)}):d&&j.push(m)}d&&e.push([i,j])}if(d)for(var n=0;n<e.length;n++){var o=e[n],i=o[0],j=o[1];a.queries.query[i]=j}}function cj(a){function b(b){return a.next(b)}var c=e(b),d=e(function(b){return a.throw(b)});function e(a){return function(b){var e=a(b),b=e.value;return e.done?b:b&&"function"==typeof b.then?b.then(c,d):g(b)?Promise.all(b).then(c,d):c(b)}}return e(b)()}function ck(a,b,c){for(var d=g(a)?a.slice():[a],e=0;e<c;++e)d.push(b);return d}var cl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return c(c({},a),{table:function(b){var d=a.table(b),e=d.schema,f={},g=[];function h(a,b,d){var e=bO(a),i=f[e]=f[e]||[],j=null==a?0:"string"==typeof a?1:a.length,k=0<b,k=c(c({},d),{name:k?"".concat(e,"(virtual-from:").concat(d.name,")"):d.name,lowLevelIndex:d,isVirtual:k,keyTail:b,keyLength:j,extractKey:bL(a),unique:!k&&d.unique});return i.push(k),k.isPrimaryKey||g.push(k),1<j&&h(2===j?a[0]:a.slice(0,j-1),b+1,d),i.sort(function(a,b){return a.keyTail-b.keyTail}),k}b=h(e.primaryKey.keyPath,0,e.primaryKey),f[":id"]=[b];for(var i=0,j=e.indexes;i<j.length;i++){var k=j[i];h(k.keyPath,0,k)}function l(b){var d,e=b.query.index;return e.isVirtual?c(c({},b),{query:{index:e.lowLevelIndex,range:(d=b.query.range,e=e.keyTail,{type:1===d.type?2:d.type,lower:ck(d.lower,d.lowerOpen?a.MAX_KEY:a.MIN_KEY,e),lowerOpen:!0,upper:ck(d.upper,d.upperOpen?a.MIN_KEY:a.MAX_KEY,e),upperOpen:!0})}}):b}return c(c({},d),{schema:c(c({},e),{primaryKey:b,indexes:g,getIndexByKeyPath:function(a){return(a=f[bO(a)])&&a[0]}}),count:function(a){return d.count(l(a))},query:function(a){return d.query(l(a))},openCursor:function(b){var c=b.query.index,e=c.keyTail,f=c.isVirtual,g=c.keyLength;return f?d.openCursor(l(b)).then(function(c){var d;return c&&Object.create(d=c,{continue:{value:function(c){null!=c?d.continue(ck(c,b.reverse?a.MAX_KEY:a.MIN_KEY,e)):b.unique?d.continue(d.key.slice(0,g).concat(b.reverse?a.MIN_KEY:a.MAX_KEY,e)):d.continue()}},continuePrimaryKey:{value:function(b,c){d.continuePrimaryKey(ck(b,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return d.primaryKey}},key:{get:function(){var a=d.key;return 1===g?a[0]:a.slice(0,g)}},value:{get:function(){return d.value}}})}):d.openCursor(b)}})}})}};function cm(a,b,c,d){return c=c||{},d=d||"",f(a).forEach(function(e){var f,g,h;k(b,e)?(f=a[e],g=b[e],"object"==typeof f&&"object"==typeof g&&f&&g?(h=F(f))!==F(g)?c[d+e]=b[e]:"Object"===h?cm(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e]):f!==g&&(c[d+e]=b[e])):c[d+e]=void 0}),f(b).forEach(function(e){k(a,e)||(c[d+e]=b[e])}),c}function cn(a,b){return"delete"===b.type?b.keys:b.keys||b.values.map(a.extractKey)}var co={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return c(c({},a),{table:function(b){var e=a.table(b),f=e.schema.primaryKey;return c(c({},e),{mutate:function(a){var g=ap.trans,h=g.table(b).hook,i=h.deleting,j=h.creating,l=h.updating;switch(a.type){case"add":if(j.fire===X)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(j.fire===X&&l.fire===X)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===X)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===X)break;return g._promise("readwrite",function(){return function a(b,d,g){return e.query({trans:b,values:!1,query:{index:f,range:d},limit:g}).then(function(e){var f=e.result;return m({type:"delete",keys:f,trans:b}).then(function(e){return 0<e.numFailures?Promise.reject(e.failures[0]):f.length<g?{failures:[],numFailures:0,lastResult:void 0}:a(b,c(c({},d),{lower:f[f.length-1],lowerOpen:!0}),g)})})}(a.trans,a.range,1e4)},!0)}return e.mutate(a);function m(a){var b,g=ap.trans,h=a.keys||cn(f,a);if(!h)throw Error("Keys missing");return"delete"!==(a="add"===a.type||"put"===a.type?c(c({},a),{keys:h}):c({},a)).type&&(a.values=d([],a.values,!0)),a.keys&&(a.keys=d([],a.keys,!0)),("add"===(b=a).type?Promise.resolve([]):e.getMany({trans:b.trans,keys:h,cache:"immutable"})).then(function(b){var c=h.map(function(c,d){var e,h,m,n=b[d],o={onerror:null,onsuccess:null};return"delete"===a.type?i.fire.call(o,c,n,g):"add"===a.type||void 0===n?(e=j.fire.call(o,c,a.values[d],g),null==c&&null!=e&&(a.keys[d]=c=e,f.outbound||w(a.values[d],f.keyPath,c))):(e=cm(n,a.values[d]),(h=l.fire.call(o,e,c,n,g))&&(m=a.values[d],Object.keys(h).forEach(function(a){k(m,a)?m[a]=h[a]:w(m,a,h[a])}))),o});return e.mutate(a).then(function(d){for(var e=d.failures,f=d.results,g=d.numFailures,d=d.lastResult,i=0;i<h.length;++i){var j=(f||h)[i],k=c[i];null==j?k.onerror&&k.onerror(e[i]):k.onsuccess&&k.onsuccess("put"===a.type&&b[i]?a.values[i]:j)}return{failures:e,results:f,numFailures:g,lastResult:d}}).catch(function(a){return c.forEach(function(b){return b.onerror&&b.onerror(a)}),Promise.reject(a)})})}}})}})}};function cp(a,b,c){try{if(!b||b.keys.length<a.length)return null;for(var d=[],e=0,f=0;e<b.keys.length&&f<a.length;++e)0===a6(b.keys[e],a[f])&&(d.push(c?D(b.values[e]):b.values[e]),++f);return d.length===a.length?d:null}catch(a){return null}}var cq={stack:"dbcore",level:-1,create:function(a){return{table:function(b){var d=a.table(b);return c(c({},d),{getMany:function(a){if(!a.cache)return d.getMany(a);var b=cp(a.keys,a.trans._cache,"clone"===a.cache);return b?at.resolve(b):d.getMany(a).then(function(b){return a.trans._cache={keys:a.keys,values:"clone"===a.cache?D(b):b},b})},mutate:function(a){return"add"!==a.type&&(a.trans._cache=null),d.mutate(a)}})}}}};function cr(a,b){return"readonly"===a.trans.mode&&!!a.subscr&&!a.trans.explicit&&"disabled"!==a.trans.db._options.cache&&!b.schema.primaryKey.outbound}function cs(a,b){switch(a){case"query":return b.values&&!b.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ct={stack:"dbcore",level:0,name:"Observability",create:function(a){var b=a.schema.name,d=new b4(a.MIN_KEY,a.MAX_KEY);return c(c({},a),{transaction:function(b,c,d){if(ap.subscr&&"readonly"!==c)throw new U.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ap.querier));return a.transaction(b,c,d)},table:function(e){var h=a.table(e),i=h.schema,j=i.primaryKey,k=i.indexes,l=j.extractKey,m=j.outbound,n=j.autoIncrement&&k.filter(function(a){return a.compound&&a.keyPath.includes(j.keyPath)}),o=c(c({},h),{mutate:function(c){function f(a){return o[a="idb://".concat(b,"/").concat(e,"/").concat(a)]||(o[a]=new b4)}var k,l,m=c.trans,o=c.mutatedParts||(c.mutatedParts={}),p=f(""),q=f(":dels"),r=c.type,s="deleteRange"===c.type?[c.range]:"delete"===c.type?[c.keys]:c.values.length<50?[cn(j,c).filter(function(a){return a}),c.values]:[],t=s[0],u=s[1],s=c.trans._cache;return g(t)?(p.addKeys(t),(s="delete"===r||t.length===u.length?cp(t,s):null)||q.addKeys(t),(s||u)&&(k=s,l=u,i.indexes.forEach(function(a){var b=f(a.name||"");function c(b){return null!=b?a.extractKey(b):null}function d(c){return a.multiEntry&&g(c)?c.forEach(function(a){return b.addKey(a)}):b.addKey(c)}(k||l).forEach(function(a,b){var e=k&&c(k[b]),b=l&&c(l[b]);0!==a6(e,b)&&(null!=e&&d(e),null!=b&&d(b))})}))):t?(u={from:null!=(u=t.lower)?u:a.MIN_KEY,to:null!=(u=t.upper)?u:a.MAX_KEY},q.add(u),p.add(u)):(p.add(d),q.add(d),i.indexes.forEach(function(a){return f(a.name).add(d)})),h.mutate(c).then(function(a){return!t||"add"!==c.type&&"put"!==c.type||(p.addKeys(a.results),n&&n.forEach(function(b){for(var d=c.values.map(function(a){return b.extractKey(a)}),e=b.keyPath.findIndex(function(a){return a===j.keyPath}),g=0,h=a.results.length;g<h;++g)d[g][e]=a.results[g];f(b.name).addKeys(d)})),m.mutatedParts=cb(m.mutatedParts||{},o),a})}}),k=function(b){var c=b.query,b=c.index,c=c.range;return[b,new b4(null!=(b=c.lower)?b:a.MIN_KEY,null!=(c=c.upper)?c:a.MAX_KEY)]},p={get:function(a){return[j,new b4(a.key)]},getMany:function(a){return[j,(new b4).addKeys(a.keys)]},count:k,query:k,openCursor:k};return f(p).forEach(function(a){o[a]=function(f){var g=ap.subscr,i=!!g,j=cr(ap,h)&&cs(a,f)?f.obsSet={}:g;if(i){var k=function(a){return j[a="idb://".concat(b,"/").concat(e,"/").concat(a)]||(j[a]=new b4)},n=k(""),o=k(":dels"),g=p[a](f),i=g[0],g=g[1];if(("query"===a&&i.isPrimaryKey&&!f.values?o:k(i.name||"")).add(g),!i.isPrimaryKey){if("count"!==a){var q="query"===a&&m&&f.values&&h.query(c(c({},f),{values:!1}));return h[a].apply(this,arguments).then(function(b){if("query"===a){if(m&&f.values)return q.then(function(a){return a=a.result,n.addKeys(a),b});var c=f.values?b.result.map(l):b.result;(f.values?n:o).addKeys(c)}else if("openCursor"===a){var d=f.values;return b&&Object.create(b,{key:{get:function(){return o.addKey(b.primaryKey),b.key}},primaryKey:{get:function(){var a=b.primaryKey;return o.addKey(a),a}},value:{get:function(){return d&&n.addKey(b.primaryKey),b.value}}})}return b})}o.add(d)}}return h[a].apply(this,arguments)}}),o}})}};function cu(a,b,d){if(0===d.numFailures)return b;if("deleteRange"===b.type)return null;var e=b.keys?b.keys.length:"values"in b&&b.values?b.values.length:1;return d.numFailures===e?null:(g((b=c({},b)).keys)&&(b.keys=b.keys.filter(function(a,b){return!(b in d.failures)})),"values"in b&&g(b.values)&&(b.values=b.values.filter(function(a,b){return!(b in d.failures)})),b)}function cv(a,b){return(void 0===b.lower||(b.lowerOpen?0<a6(a,b.lower):0<=a6(a,b.lower)))&&(void 0===b.upper||(b.upperOpen?0>a6(a,b.upper):0>=a6(a,b.upper)))}function cw(a,b,c,d,e,f){if(!c||0===c.length)return a;var h=b.query.index,i=h.multiEntry,j=b.query.range,k=d.schema.primaryKey.extractKey,l=h.extractKey,m=(h.lowLevelIndex||h).extractKey,c=c.reduce(function(a,c){var d=a,e=[];if("add"===c.type||"put"===c.type)for(var f=new b4,h=c.values.length-1;0<=h;--h){var m,n=c.values[h],o=k(n);f.hasKey(o)||(m=l(n),(i&&g(m)?m.some(function(a){return cv(a,j)}):cv(m,j))&&(f.addKey(o),e.push(n)))}switch(c.type){case"add":var p=(new b4).addKeys(b.values?a.map(function(a){return k(a)}):a),d=a.concat(b.values?e.filter(function(a){return a=k(a),!p.hasKey(a)&&(p.addKey(a),!0)}):e.map(function(a){return k(a)}).filter(function(a){return!p.hasKey(a)&&(p.addKey(a),!0)}));break;case"put":var q=(new b4).addKeys(c.values.map(function(a){return k(a)}));d=a.filter(function(a){return!q.hasKey(b.values?k(a):a)}).concat(b.values?e:e.map(function(a){return k(a)}));break;case"delete":var r=(new b4).addKeys(c.keys);d=a.filter(function(a){return!r.hasKey(b.values?k(a):a)});break;case"deleteRange":var s=c.range;d=a.filter(function(a){return!cv(k(a),s)})}return d},a);return c===a?a:(c.sort(function(a,b){return a6(m(a),m(b))||a6(k(a),k(b))}),b.limit&&b.limit<1/0&&(c.length>b.limit?c.length=b.limit:a.length===b.limit&&c.length<b.limit&&(e.dirty=!0)),f?Object.freeze(c):c)}function cx(a,b){return 0===a6(a.lower,b.lower)&&0===a6(a.upper,b.upper)&&!!a.lowerOpen==!!b.lowerOpen&&!!a.upperOpen==!!b.upperOpen}var cy={stack:"dbcore",level:0,name:"Cache",create:function(a){var b=a.schema.name;return c(c({},a),{transaction:function(c,d,e){var f,g,h=a.transaction(c,d,e);return"readwrite"===d&&(g=(f=new AbortController).signal,e=function(e){return function(){if(f.abort(),"readwrite"===d){for(var g=new Set,i=0;i<c.length;i++){var j=c[i],k=cd["idb://".concat(b,"/").concat(j)];if(k){var l=a.table(j),m=k.optimisticOps.filter(function(a){return a.trans===h});if(h._explicit&&e&&h.mutatedParts)for(var n=0,o=Object.values(k.queries.query);n<o.length;n++)for(var p=0,q=(t=o[n]).slice();p<q.length;p++)cc((u=q[p]).obsSet,h.mutatedParts)&&(I(t,u),u.subscribers.forEach(function(a){return g.add(a)}));else if(0<m.length){k.optimisticOps=k.optimisticOps.filter(function(a){return a.trans!==h});for(var r=0,s=Object.values(k.queries.query);r<s.length;r++)for(var t,u,v,w=0,x=(t=s[r]).slice();w<x.length;w++)null!=(u=x[w]).res&&h.mutatedParts&&(e&&!u.dirty?(v=Object.isFrozen(u.res),v=cw(u.res,u.req,m,l,u,v),u.dirty?(I(t,u),u.subscribers.forEach(function(a){return g.add(a)})):v!==u.res&&(u.res=v,u.promise=at.resolve({result:v}))):(u.dirty&&I(t,u),u.subscribers.forEach(function(a){return g.add(a)})))}}}g.forEach(function(a){return a()})}}},h.addEventListener("abort",e(!1),{signal:g}),h.addEventListener("error",e(!1),{signal:g}),h.addEventListener("complete",e(!0),{signal:g})),h},table:function(d){var e=a.table(d),f=e.schema.primaryKey;return c(c({},e),{mutate:function(a){var g=ap.trans;if(f.outbound||"disabled"===g.db._options.cache||g.explicit||"readwrite"!==g.idbtrans.mode)return e.mutate(a);var h=cd["idb://".concat(b,"/").concat(d)];return h?(g=e.mutate(a),("add"===a.type||"put"===a.type)&&(50<=a.values.length||cn(f,a).some(function(a){return null==a}))?g.then(function(b){var d=cu(0,c(c({},a),{values:a.values.map(function(a,d){var e;return b.failures[d]||w(a=null!=(e=f.keyPath)&&e.includes(".")?D(a):c({},a),f.keyPath,b.results[d]),a})}),b);h.optimisticOps.push(d),queueMicrotask(function(){return a.mutatedParts&&cg(a.mutatedParts)})}):(h.optimisticOps.push(a),a.mutatedParts&&cg(a.mutatedParts),g.then(function(b){0<b.numFailures&&(I(h.optimisticOps,a),(b=cu(0,a,b))&&h.optimisticOps.push(b),a.mutatedParts&&cg(a.mutatedParts))}),g.catch(function(){I(h.optimisticOps,a),a.mutatedParts&&cg(a.mutatedParts)})),g):e.mutate(a)},query:function(a){if(!cr(ap,e)||!cs("query",a))return e.query(a);var c,f,g="immutable"===(null==(k=ap.trans)?void 0:k.db._options.cache),h=ap,i=h.requery,j=h.signal,k=function(a,b,c,d){var e=cd["idb://".concat(a,"/").concat(b)];if(!e)return[];if(!(b=e.queries[c]))return[null,!1,e,null];var f=b[(d.query?d.query.index.name:null)||""];if(!f)return[null,!1,e,null];switch(c){case"query":var g=f.find(function(a){return a.req.limit===d.limit&&a.req.values===d.values&&cx(a.req.query.range,d.query.range)});return g?[g,!0,e,f]:[f.find(function(a){var b,c;return("limit"in a.req?a.req.limit:1/0)>=d.limit&&(!d.values||a.req.values)&&(b=a.req.query.range,c=d.query.range,0>=function(a,b,c,d){if(void 0===a)return void 0!==b?-1:0;if(void 0===b)return 1;if(0===(b=a6(a,b))){if(c&&d)return 0;if(c)return 1;if(d)return -1}return b}(b.lower,c.lower,b.lowerOpen,c.lowerOpen)&&0<=function(a,b,c,d){if(void 0===a)return+(void 0!==b);if(void 0===b)return -1;if(0===(b=a6(a,b))){if(c&&d)return 0;if(c)return -1;if(d)return 1}return b}(b.upper,c.upper,b.upperOpen,c.upperOpen))}),!1,e,f];case"count":return[g=f.find(function(a){return cx(a.req.query.range,d.query.range)}),!!g,e,f]}}(b,d,"query",a),l=k[0],h=k[1],m=k[2],n=k[3];return l&&h?l.obsSet=a.obsSet:(h=e.query(a).then(function(a){var b=a.result;if(l&&(l.res=b),g){for(var c=0,d=b.length;c<d;++c)Object.freeze(b[c]);Object.freeze(b)}else a.result=D(b);return a}).catch(function(a){return n&&l&&I(n,l),Promise.reject(a)}),l={obsSet:a.obsSet,promise:h,subscribers:new Set,type:"query",req:a,dirty:!1},n?n.push(l):(n=[l],(m=m||(cd["idb://".concat(b,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[a.query.index.name||""]=n)),c=l,f=n,c.subscribers.add(i),j.addEventListener("abort",function(){c.subscribers.delete(i),0===c.subscribers.size&&setTimeout(function(){0===c.subscribers.size&&I(f,c)},3e3)}),l.promise.then(function(b){return{result:cw(b.result,a,null==m?void 0:m.optimisticOps,e,l,g)}})}})}})}};function cz(a,b){return new Proxy(a,{get:function(a,c,d){return"db"===c?b:Reflect.get(a,c,d)}})}var cA=(cB.prototype.version=function(a){if(isNaN(a)||a<.1)throw new U.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new U.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];return c||(c=new this.Version(a),b.push(c),b.sort(bS),c.stores({}),this._state.autoSchema=!1,c)},cB.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||ap.letThrough||this._vip)?a():new at(function(a,c){if(b._state.openComplete)return c(new U.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return void c(new U.DatabaseClosed);b.open().catch(X)}b._state.dbReadyPromise.then(a,c)}).then(a)},cB.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level,e=a.name;return e&&this.unuse({stack:b,name:e}),(a=this._middlewares[b]||(this._middlewares[b]=[])).push({stack:b,create:c,level:null==d?10:d,name:e}),a.sort(function(a,b){return a.level-b.level}),this},cB.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;return b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:!!c&&a.name!==c})),this},cB.prototype.open=function(){var a=this;return aT(ao,function(){return function(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?aW(b.dbOpenError):a});b.isBeingOpened=!0,b.dbOpenError=null,b.openComplete=!1;var d=b.openCanceller,e=Math.round(10*a.verno),g=!1;function h(){if(b.openCanceller!==d)throw new U.DatabaseClosed("db.open() was cancelled")}var i,j=b.dbReadyResolve,k=null,l=!1;return at.race([d,("u"<typeof navigator?at.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(a){function b(){return indexedDB.databases().finally(a)}i=setInterval(b,100),b()}).finally(function(){return clearInterval(i)}):Promise.resolve()).then(function d(){return new at(function(i,j){if(h(),!c)throw new U.MissingAPI;var m=a.name,n=b.autoSchema||!e?c.open(m):c.open(m,e);if(!n)throw new U.MissingAPI;n.onerror=bA(j),n.onblocked=aF(a._fireOnBlocked),n.onupgradeneeded=aF(function(d){var e,h,i,o,p,q,r;k=n.transaction,b.autoSchema&&!a._options.allowEmptyDB?(n.onerror=bB,k.abort(),n.result.close(),(e=c.deleteDatabase(m)).onsuccess=e.onerror=aF(function(){j(new U.NoSuchDatabase("Database ".concat(m," doesnt exist")))})):(k.onerror=bA(j),l=(d=d.oldVersion>0x4000000000000000?0:d.oldVersion)<1,a.idbdb=n.result,g&&function(a,b){bV(a._dbSchema,b),b.db.version%10!=0||b.objectStoreNames.contains("$meta")||b.db.createObjectStore("$meta").add(Math.ceil(b.db.version/10-1),"version");var c=bX(0,a.idbdb,b);bY(a,a._dbSchema,b);for(var d=0,e=bT(c,a._dbSchema).change;d<e.length;d++){var f=function(a){if(a.change.length||a.recreate)return console.warn("Unable to patch indexes of table ".concat(a.name," because it has changes on the type of index or primary key.")),{value:void 0};var c=b.objectStore(a.name);a.add.forEach(function(b){ae&&console.debug("Dexie upgrade patch: Creating missing index ".concat(a.name,".").concat(b.src)),bW(c,b)})}(e[d]);if("object"==typeof f)return f.value}}(a,k),h=d/10,i=k,o=a._dbSchema,i.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=bJ("$meta",bZ("")[0],[]),a._storeNames.push("$meta")),(p=a._createTransaction("readwrite",a._storeNames,o)).create(i),p._completion.catch(j),q=p._reject.bind(p),r=ap.transless||ap,aM(function(){return ap.trans=p,ap.transless=r,0!==h?(bP(a,i),(p.storeNames.includes("$meta")?p.table("$meta").get("version").then(function(a){return null!=a?a:h}):at.resolve(h)).then(function(b){var c,d,e;return c=b,d=[],b=a._versions,e=a._dbSchema=bX(0,a.idbdb,i),0!==(b=b.filter(function(a){return a._cfg.version>=c})).length?(b.forEach(function(b){d.push(function(){var d=e,g=b._cfg.dbschema;bY(a,d,i),bY(a,g,i),e=a._dbSchema=g;var h=bT(d,g);h.add.forEach(function(a){bU(i,a[0],a[1].primKey,a[1].indexes)}),h.change.forEach(function(a){if(a.recreate)throw new U.Upgrade("Not yet support for changing primary key");var b=i.objectStore(a.name);a.add.forEach(function(a){return bW(b,a)}),a.change.forEach(function(a){b.deleteIndex(a.name),bW(b,a)}),a.del.forEach(function(a){return b.deleteIndex(a)})});var j=b._cfg.contentUpgrade;if(j&&b._cfg.version>c){bP(a,i),p._memoizedTables={};var k=x(g);h.del.forEach(function(a){k[a]=d[a]}),bR(a,[a.Transaction.prototype]),bQ(a,[a.Transaction.prototype],f(k),k),p.schema=k;var l,m=L(j);return m&&aN(),h=at.follow(function(){var a;(l=j(p))&&m&&(a=aO.bind(null,null),l.then(a,a))}),l&&"function"==typeof l.then?at.resolve(l):h.then(function(){return l})}}),d.push(function(c){var d=b._cfg.dbschema;[].slice.call(c.db.objectStoreNames).forEach(function(a){return null==d[a]&&c.db.deleteObjectStore(a)}),bR(a,[a.Transaction.prototype]),bQ(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),p.schema=a._dbSchema}),d.push(function(c){a.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(a.idbdb.version/10)===b._cfg.version?(a.idbdb.deleteObjectStore("$meta"),delete a._dbSchema.$meta,a._storeNames=a._storeNames.filter(function(a){return"$meta"!==a})):c.objectStore("$meta").put(b._cfg.version,"version"))})}),(function a(){return d.length?at.resolve(d.shift()(p.idbtrans)).then(a):at.resolve()})().then(function(){bV(e,i)})):at.resolve()}).catch(q)):(f(o).forEach(function(a){bU(i,a,o[a].primKey,o[a].indexes)}),bP(a,i),void at.follow(function(){return a.on.populate.fire(p)}).catch(q))}))},j),n.onsuccess=aF(function(){k=null;var c,h,j,o=a.idbdb=n.result,p=r(o.objectStoreNames);if(0<p.length)try{var q=o.transaction(1===p.length?p[0]:p,"readonly");if(b.autoSchema)c=o,h=q,a.verno=c.version/10,h=a._dbSchema=bX(0,c,h),a._storeNames=r(c.objectStoreNames,0),bQ(a,[a._allTables],f(h),h);else if(bY(a,a._dbSchema,q),((j=bT(bX(0,(j=a).idbdb,q),j._dbSchema)).add.length||j.change.some(function(a){return a.add.length||a.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),o.close(),e=o.version+1,g=!0,i(d());bP(a,q)}catch(a){}a$.push(a),o.onversionchange=aF(function(c){b.vcFired=!0,a.on("versionchange").fire(c)}),o.onclose=aF(function(){a.close({disableAutoOpen:!1})}),l&&(j=a._deps,q=m,o=j.indexedDB,j=j.IDBKeyRange,b1(o)||q===a_||b0(o,j).put({name:q}).catch(X)),i()},j)}).catch(function(a){switch(null==a?void 0:a.name){case"UnknownError":if(0<b.PR1398_maxLoop)return b.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(0<e)return e=0,d()}return at.reject(a)})})]).then(function(){return h(),b.onReadyBeingFired=[],at.resolve(b2(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(0<b.onReadyBeingFired.length){var d=b.onReadyBeingFired.reduce(ad,X);return b.onReadyBeingFired=[],at.resolve(b2(function(){return d(a.vip)})).then(c)}})}).finally(function(){b.openCanceller===d&&(b.onReadyBeingFired=null,b.isBeingOpened=!1)}).catch(function(c){b.dbOpenError=c;try{k&&k.abort()}catch(a){}return d===b.openCanceller&&a._close(),aW(c)}).finally(function(){b.openComplete=!0,j()}).then(function(){var b;return l&&(b={},a.tables.forEach(function(c){c.schema.indexes.forEach(function(d){d.name&&(b["idb://".concat(a.name,"/").concat(c.name,"/").concat(d.name)]=new b4(-1/0,[[[]]]))}),b["idb://".concat(a.name,"/").concat(c.name,"/")]=b["idb://".concat(a.name,"/").concat(c.name,"/:dels")]=new b4(-1/0,[[[]]])}),bE(bC).fire(b),ch(b,!0)),a})}(a)})},cB.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var a=this._state,b=a$.indexOf(this);if(0<=b&&a$.splice(b,1),this.idbdb){try{this.idbdb.close()}catch(a){}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new at(function(b){a.dbReadyResolve=b}),a.openCanceller=new at(function(b,c){a.cancelOpen=c}))},cB.prototype.close=function(a){var b=(void 0===a?{disableAutoOpen:!0}:a).disableAutoOpen,a=this._state;b?(a.isBeingOpened&&a.cancelOpen(new U.DatabaseClosed),this._close(),a.autoOpen=!1,a.dbOpenError=new U.DatabaseClosed):(this._close(),a.autoOpen=this._options.autoOpen||a.isBeingOpened,a.openComplete=!1,a.dbOpenError=null)},cB.prototype.delete=function(a){var b=this;void 0===a&&(a={disableAutoOpen:!0});var c=0<arguments.length&&"object"!=typeof arguments[0],d=this._state;return new at(function(e,f){function g(){b.close(a);var c=b._deps.indexedDB.deleteDatabase(b.name);c.onsuccess=aF(function(){var a,c,d;a=b._deps,c=b.name,d=a.indexedDB,a=a.IDBKeyRange,b1(d)||c===a_||b0(d,a).delete(c).catch(X),e()}),c.onerror=bA(f),c.onblocked=b._fireOnBlocked}if(c)throw new U.InvalidArgument("Invalid closeOptions argument to db.delete()");d.isBeingOpened?d.dbReadyPromise.then(g):g()})},cB.prototype.backendDB=function(){return this.idbdb},cB.prototype.isOpen=function(){return null!==this.idbdb},cB.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&"DatabaseClosed"===a.name},cB.prototype.hasFailed=function(){return null!==this._state.dbOpenError},cB.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(cB.prototype,"tables",{get:function(){var a=this;return f(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0}),cB.prototype.transaction=function(){var a=(function(a,b,c){var d=arguments.length;if(d<2)throw new U.InvalidArgument("Too few arguments");for(var e=Array(d-1);--d;)e[d-1]=arguments[d];return c=e.pop(),[a,z(e),c]}).apply(this,arguments);return this._transaction.apply(this,a)},cB.prototype._transaction=function(a,b,c){var d=this,e=ap.trans;e&&e.db===this&&-1===a.indexOf("!")||(e=null);var f,g,h=-1!==a.indexOf("?");a=a.replace("!","").replace("?","");try{if(g=b.map(function(a){if(a=a instanceof d.Table?a.name:a,"string"!=typeof a)throw TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a}),"r"==a||a===a0)f=a0;else{if("rw"!=a&&a!=a1)throw new U.InvalidArgument("Invalid transaction mode: "+a);f=a1}if(e){if(e.mode===a0&&f===a1){if(!h)throw new U.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e=null}e&&g.forEach(function(a){if(e&&-1===e.storeNames.indexOf(a)){if(!h)throw new U.SubTransaction("Table "+a+" not included in parent transaction.");e=null}}),h&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):aW(a)}var i=(function a(b,c,d,e,f){return at.resolve().then(function(){var g=ap.transless||ap,h=b._createTransaction(c,d,b._dbSchema,e);if(h.explicit=!0,g={trans:h,transless:g},e)h.idbtrans=e.idbtrans;else try{h.create(),h.idbtrans._explicit=!0,b._state.PR1398_maxLoop=3}catch(e){return e.name===T.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return a(b,c,d,null,f)})):aW(e)}var i,j=L(f);return j&&aN(),g=at.follow(function(){var a;(i=f.call(h,h))&&(j?(a=aO.bind(null,null),i.then(a,a)):"function"==typeof i.next&&"function"==typeof i.throw&&(i=cj(i)))},g),(i&&"function"==typeof i.then?at.resolve(i).then(function(a){return h.active?a:aW(new U.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):g.then(function(){return i})).then(function(a){return e&&h._resolve(),h._completion.then(function(){return a})}).catch(function(a){return h._reject(a),aW(a)})})}).bind(null,this,f,g,e,c);return e?e._promise(f,i,"lock"):ap.trans?aT(ap.transless,function(){return d._whenReady(i)}):this._whenReady(i)},cB.prototype.table=function(a){if(!k(this._allTables,a))throw new U.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},cB);function cB(a,b){var d=this;this._middlewares={},this.verno=0;var e=cB.dependencies;this._options=b=c({addons:cB.addons,autoOpen:!0,indexedDB:e.indexedDB,IDBKeyRange:e.IDBKeyRange,cache:"cloned"},b),this._deps={indexedDB:b.indexedDB,IDBKeyRange:b.IDBKeyRange},e=b.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f,g,h,i,j,k={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:X,dbReadyPromise:null,cancelOpen:X,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:b.autoOpen};k.dbReadyPromise=new at(function(a){k.dbReadyResolve=a}),k.openCanceller=new at(function(a,b){k.cancelOpen=b}),this._state=k,this.name=a,this.on=bf(this,"populate","blocked","versionchange","close",{ready:[ad,X]}),this.once=function(a,b){var c=function(){for(var e=[],f=0;f<arguments.length;f++)e[f]=arguments[f];d.on(a).unsubscribe(c),b.apply(d,e)};return d.on(a,c)},this.on.ready.subscribe=s(this.on.ready.subscribe,function(a){return function(b,c){cB.vip(function(){var e=d._state;e.openComplete?(e.dbOpenError||at.resolve().then(b),c&&a(b)):e.onReadyBeingFired?(e.onReadyBeingFired.push(b),c&&a(b)):(a(b),c||a(function a(){d.on.ready.unsubscribe(b),d.on.ready.unsubscribe(a)}))})}}),this.Collection=(f=this,bg(bo.prototype,function(a,b){this.db=f;var c=a3,d=null;if(b)try{c=b()}catch(a){d=a}var e=a._ctx,b=e.table,a=b.hook.reading.fire;this._ctx={table:b,index:e.index,isPrimKey:!e.index||b.schema.primKey.keyPath&&e.index===b.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:e.or,valueMapper:a!==Y?a:null}})),this.Table=(g=this,bg(bd.prototype,function(a,b,c){this.db=g,this._tx=c,this.name=a,this.schema=b,this.hook=g._allTables[a]?g._allTables[a].hook:bf(null,{creating:[_,X],reading:[Z,Y],updating:[ab,X],deleting:[aa,X]})})),this.Transaction=(h=this,bg(bF.prototype,function(a,b,c,d,e){var f=this;"readonly"!==a&&b.forEach(function(a){(a=null==(a=c[a])?void 0:a.yProps)&&(b=b.concat(a.map(function(a){return a.updatesTable})))}),this.db=h,this.mode=a,this.storeNames=b,this.schema=c,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=bf(this,"complete","error","abort"),this.parent=e||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new at(function(a,b){f._resolve=a,f._reject=b}),this._completion.then(function(){f.active=!1,f.on.complete.fire()},function(a){var b=f.active;return f.active=!1,f.on.error.fire(a),f.parent?f.parent._reject(a):b&&f.idbtrans&&f.idbtrans.abort(),aW(a)})})),this.Version=(i=this,bg(b$.prototype,function(a){this.db=i,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(j=this,bg(by.prototype,function(a,b,c){if(this.db=j,this._ctx={table:a,index:":id"===b?null:b,or:c},this._cmp=this._ascending=a6,this._descending=function(a,b){return a6(b,a)},this._max=function(a,b){return 0<a6(a,b)?a:b},this._min=function(a,b){return 0>a6(a,b)?a:b},this._IDBKeyRange=j._deps.IDBKeyRange,!this._IDBKeyRange)throw new U.MissingAPI})),this.on("versionchange",function(a){0<a.newVersion?console.warn("Another connection wants to upgrade database '".concat(d.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(d.name,"'. Closing db now to resume the delete request.")),d.close({disableAutoOpen:!1})}),this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?console.warn("Dexie.delete('".concat(d.name,"') was blocked")):console.warn("Upgrade '".concat(d.name,"' blocked by other connection holding version ").concat(a.oldVersion/10))}),this._maxKey=bK(b.IDBKeyRange),this._createTransaction=function(a,b,c,e){return new d.Transaction(a,b,c,d._options.chromeTransactionDurability,e)},this._fireOnBlocked=function(a){d.on("blocked").fire(a),a$.filter(function(a){return a.name===d.name&&a!==d&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})},this.use(cq),this.use(cy),this.use(ct),this.use(cl),this.use(co);var l=new Proxy(this,{get:function(a,b,c){if("_vip"===b)return!0;if("table"===b)return function(a){return cz(d.table(a),l)};var e=Reflect.get(a,b,c);return e instanceof bd?cz(e,l):"tables"===b?e.map(function(a){return cz(a,l)}):"_createTransaction"===b?function(){return cz(e.apply(this,arguments),l)}:e}});this.vip=l,e.forEach(function(a){return a(d)})}var cC,N="u">typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",cD=(cE.prototype.subscribe=function(a,b,c){return this._subscribe(a&&"function"!=typeof a?a:{next:a,error:b,complete:c})},cE.prototype[N]=function(){return this},cE);function cE(a){this._subscribe=a}try{cC={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch(a){cC={indexedDB:null,IDBKeyRange:null}}function cF(a){var b,c=!1,d=new cD(function(d){var e,f=L(a),g=!1,h={},i={},j={get closed(){return g},unsubscribe:function(){g||(g=!0,e&&e.abort(),l&&bE.storagemutated.unsubscribe(n))}};d.start&&d.start(j);var l=!1,m=function(){return aV(o)},n=function(a){cb(h,a),cc(i,h)&&m()},o=function(){var j,o;!g&&cC.indexedDB&&(h={},j={},e&&e.abort(),Promise.resolve(function(b){var c=aB();try{f&&aN();var d=aM(a,b);return d=f?d.finally(aO):d}finally{c&&aC()}}(o={subscr:j,signal:(e=new AbortController).signal,requery:m,querier:a,trans:null})).then(function(a){c=!0,b=a,g||o.signal.aborted||(h={},function(a){for(var b in a)if(k(a,b))return;return 1}(i=j)||l||(bE(bC,n),l=!0),aV(function(){return!g&&d.next&&d.next(a)}))},function(a){c=!1,["DatabaseClosedError","AbortError"].includes(null==a?void 0:a.name)||g||aV(function(){g||d.error&&d.error(a)})}))};return setTimeout(m,0),j});return d.hasValue=function(){return c},d.getValue=function(){return b},d}function cG(a){var b=cI;try{cI=!0,bE.storagemutated.fire(a),ch(a,!0)}finally{cI=b}}l(cA,c(c({},W),{delete:function(a){return new cA(a,{addons:[]}).delete()},exists:function(a){return new cA(a,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){var b,c;try{return c=(b=cA.dependencies).indexedDB,b=b.IDBKeyRange,(b1(c)?Promise.resolve(c.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==a_})}):b0(c,b).toCollection().primaryKeys()).then(a)}catch(a){return aW(new U.MissingAPI)}},defineClass:function(){return function(a){h(this,a)}},ignoreTransaction:function(a){return ap.trans?aT(ap.transless,a):a()},vip:b2,async:function(a){return function(){try{var b=cj(a.apply(this,arguments));return b&&"function"==typeof b.then?b:at.resolve(b)}catch(a){return aW(a)}}},spawn:function(a,b,c){try{var d=cj(a.apply(c,b||[]));return d&&"function"==typeof d.then?d:at.resolve(d)}catch(a){return aW(a)}},currentTransaction:{get:function(){return ap.trans||null}},waitFor:function(a,b){return b=at.resolve("function"==typeof a?cA.ignoreTransaction(a):a).timeout(b||6e4),ap.trans?ap.trans.waitFor(b):b},Promise:at,debug:{get:function(){return ae},set:function(a){ae=a}},derive:o,extend:h,props:l,override:s,Events:bf,on:bE,liveQuery:cF,extendObservabilitySet:cb,getByKeyPath:v,setByKeyPath:w,delByKeyPath:function(a,b){"string"==typeof b?w(a,b,void 0):"length"in b&&[].map.call(b,function(b){w(a,b,void 0)})},shallowClone:x,deepClone:D,getObjectDiff:cm,cmp:a6,asap:u,minKey:-1/0,addons:[],connections:a$,errnames:T,dependencies:cC,cache:cd,semVer:"4.2.1",version:"4.2.1".split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,2*c)})})),cA.maxKey=bK(cA.dependencies.IDBKeyRange),"u">typeof dispatchEvent&&"u">typeof addEventListener&&(bE(bC,function(a){cI||(a=new CustomEvent(bD,{detail:a}),cI=!0,dispatchEvent(a),cI=!1)}),addEventListener(bD,function(a){a=a.detail,cI||cG(a)}));var cH,cI=!1,cJ=function(){};return"u">typeof BroadcastChannel&&((cJ=function(){(cH=new BroadcastChannel(bD)).onmessage=function(a){return a.data&&cG(a.data)}})(),"function"==typeof cH.unref&&cH.unref(),bE(bC,function(a){cI||cH.postMessage(a)})),"u">typeof addEventListener&&(addEventListener("pagehide",function(a){if(!cA.disableBfCache&&a.persisted){ae&&console.debug("Dexie: handling persisted pagehide"),null!=cH&&cH.close();for(var b=0;b<a$.length;b++)a$[b].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!cA.disableBfCache&&a.persisted&&(ae&&console.debug("Dexie: handling persisted pageshow"),cJ(),cG({all:new b4(-1/0,[[]])}))})),at.rejectionMapper=function(a,b){return!a||a instanceof P||a instanceof TypeError||a instanceof SyntaxError||!a.name||!V[a.name]?a:(b=new V[a.name](b||a.message,a),"stack"in a&&n(b,"stack",{get:function(){return this.inner.stack}}),b)},c(cA,Object.freeze({__proto__:null,Dexie:cA,liveQuery:cF,Entity:a5,cmp:a6,PropModification:ba,replacePrefix:function(a,b){return new ba({replacePrefix:[a,b]})},add:function(a){return new ba({add:a})},remove:function(a){return new ba({remove:a})},default:cA,RangeSet:b4,mergeRanges:b6,rangesOverlap:b7}),{default:cA}),cA}()},72124,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}},56592,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(23952)),f=d(a.r(72124));c.default=class{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:"u"<typeof fetch?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,b){return this.headers=Object.assign({},this.headers),this.headers[a]=b,this}then(a,b){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let c=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var b,c,d;let e=null,g=null,h=null,i=a.status,j=a.statusText;if(a.ok){if("HEAD"!==this.method){let b=await a.text();""===b||(g="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?b:JSON.parse(b))}let d=null==(b=this.headers.Prefer)?void 0:b.match(/count=(exact|planned|estimated)/),f=null==(c=a.headers.get("content-range"))?void 0:c.split("/");d&&f&&f.length>1&&(h=parseInt(f[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(g)&&(g.length>1?(e={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,h=null,i=406,j="Not Acceptable"):g=1===g.length?g[0]:null)}else{let b=await a.text();try{e=JSON.parse(b),Array.isArray(e)&&404===a.status&&(g=[],e=null,i=200,j="OK")}catch(c){404===a.status&&""===b?(i=204,j="No Content"):e={message:b}}if(e&&this.isMaybeSingle&&(null==(d=null==e?void 0:e.details)?void 0:d.includes("0 rows"))&&(e=null,i=200,j="OK"),e&&this.shouldThrowOnError)throw new f.default(e)}return{error:e,data:g,count:h,status:i,statusText:j}});return this.shouldThrowOnError||(c=c.catch(a=>{var b,c,d;return{error:{message:`${null!=(b=null==a?void 0:a.name)?b:"FetchError"}: ${null==a?void 0:a.message}`,details:`${null!=(c=null==a?void 0:a.stack)?c:""}`,hint:"",code:`${null!=(d=null==a?void 0:a.code)?d:""}`},data:null,count:null,status:0,statusText:""}})),c.then(a,b)}}},98564,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(56592));class f extends e.default{select(a){let b=!1,c=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!b?"":('"'===a&&(b=!b),a)).join("");return this.url.searchParams.set("select",c),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:b=!0,nullsFirst:c,foreignTable:d,referencedTable:e=d}={}){let f=e?`${e}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${a}.${b?"asc":"desc"}${void 0===c?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:b,referencedTable:c=b}={}){let d=void 0===c?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,b,{foreignTable:c,referencedTable:d=c}={}){let e=void 0===d?"offset":`${d}.offset`,f=void 0===d?"limit":`${d}.limit`;return this.url.searchParams.set(e,`${a}`),this.url.searchParams.set(f,`${b-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:b=!1,settings:c=!1,buffers:d=!1,wal:e=!1,format:f="text"}={}){var g;let h=[a?"analyze":null,b?"verbose":null,c?"settings":null,d?"buffers":null,e?"wal":null].filter(Boolean).join("|"),i=null!=(g=this.headers.Accept)?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${i}"; options=${h};`,this}rollback(){var a;return(null!=(a=this.headers.Prefer)?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}c.default=f},19001,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(98564));class f extends e.default{eq(a,b){return this.url.searchParams.append(a,`eq.${b}`),this}neq(a,b){return this.url.searchParams.append(a,`neq.${b}`),this}gt(a,b){return this.url.searchParams.append(a,`gt.${b}`),this}gte(a,b){return this.url.searchParams.append(a,`gte.${b}`),this}lt(a,b){return this.url.searchParams.append(a,`lt.${b}`),this}lte(a,b){return this.url.searchParams.append(a,`lte.${b}`),this}like(a,b){return this.url.searchParams.append(a,`like.${b}`),this}likeAllOf(a,b){return this.url.searchParams.append(a,`like(all).{${b.join(",")}}`),this}likeAnyOf(a,b){return this.url.searchParams.append(a,`like(any).{${b.join(",")}}`),this}ilike(a,b){return this.url.searchParams.append(a,`ilike.${b}`),this}ilikeAllOf(a,b){return this.url.searchParams.append(a,`ilike(all).{${b.join(",")}}`),this}ilikeAnyOf(a,b){return this.url.searchParams.append(a,`ilike(any).{${b.join(",")}}`),this}is(a,b){return this.url.searchParams.append(a,`is.${b}`),this}in(a,b){let c=Array.from(new Set(b)).map(a=>"string"==typeof a&&RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cs.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cs.{${b.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(b)}`),this}containedBy(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cd.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cd.{${b.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(b)}`),this}rangeGt(a,b){return this.url.searchParams.append(a,`sr.${b}`),this}rangeGte(a,b){return this.url.searchParams.append(a,`nxl.${b}`),this}rangeLt(a,b){return this.url.searchParams.append(a,`sl.${b}`),this}rangeLte(a,b){return this.url.searchParams.append(a,`nxr.${b}`),this}rangeAdjacent(a,b){return this.url.searchParams.append(a,`adj.${b}`),this}overlaps(a,b){return"string"==typeof b?this.url.searchParams.append(a,`ov.${b}`):this.url.searchParams.append(a,`ov.{${b.join(",")}}`),this}textSearch(a,b,{config:c,type:d}={}){let e="";"plain"===d?e="pl":"phrase"===d?e="ph":"websearch"===d&&(e="w");let f=void 0===c?"":`(${c})`;return this.url.searchParams.append(a,`${e}fts${f}.${b}`),this}match(a){return Object.entries(a).forEach(([a,b])=>{this.url.searchParams.append(a,`eq.${b}`)}),this}not(a,b,c){return this.url.searchParams.append(a,`not.${b}.${c}`),this}or(a,{foreignTable:b,referencedTable:c=b}={}){let d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,b,c){return this.url.searchParams.append(a,`${b}.${c}`),this}}c.default=f},3619,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(19001));c.default=class{constructor(a,{headers:b={},schema:c,fetch:d}){this.url=a,this.headers=b,this.schema=c,this.fetch=d}select(a,{head:b=!1,count:c}={}){let d=!1,f=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!d?"":('"'===a&&(d=!d),a)).join("");return this.url.searchParams.set("select",f),c&&(this.headers.Prefer=`count=${c}`),new e.default({method:b?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:b,defaultToNull:c=!0}={}){let d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),b&&d.push(`count=${b}`),c||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:b,ignoreDuplicates:c=!1,count:d,defaultToNull:f=!0}={}){let g=[`resolution=${c?"ignore":"merge"}-duplicates`];if(void 0!==b&&this.url.searchParams.set("on_conflict",b),this.headers.Prefer&&g.push(this.headers.Prefer),d&&g.push(`count=${d}`),f||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:b}={}){let c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),b&&c.push(`count=${b}`),this.headers.Prefer=c.join(","),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){let b=[];return a&&b.push(`count=${a}`),this.headers.Prefer&&b.unshift(this.headers.Prefer),this.headers.Prefer=b.join(","),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},84589,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.version=void 0,c.version="0.0.0-automated"},37418,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_HEADERS=void 0;let d=a.r(84589);c.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${d.version}`}},27749,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(3619)),f=d(a.r(19001)),g=a.r(37418);class h{constructor(a,{headers:b={},schema:c,fetch:d}={}){this.url=a,this.headers=Object.assign(Object.assign({},g.DEFAULT_HEADERS),b),this.schemaName=c,this.fetch=d}from(a){let b=new URL(`${this.url}/${a}`);return new e.default(b,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new h(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,b={},{head:c=!1,get:d=!1,count:e}={}){let g,h,i=new URL(`${this.url}/rpc/${a}`);c||d?(g=c?"HEAD":"GET",Object.entries(b).filter(([a,b])=>void 0!==b).map(([a,b])=>[a,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([a,b])=>{i.searchParams.append(a,b)})):(g="POST",h=b);let j=Object.assign({},this.headers);return e&&(j.Prefer=`count=${e}`),new f.default({method:g,url:i,headers:j,schema:this.schemaName,body:h,fetch:this.fetch,allowEmpty:!1})}}c.default=h},79614,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.PostgrestError=c.PostgrestBuilder=c.PostgrestTransformBuilder=c.PostgrestFilterBuilder=c.PostgrestQueryBuilder=c.PostgrestClient=void 0;let e=d(a.r(27749));c.PostgrestClient=e.default;let f=d(a.r(3619));c.PostgrestQueryBuilder=f.default;let g=d(a.r(19001));c.PostgrestFilterBuilder=g.default;let h=d(a.r(98564));c.PostgrestTransformBuilder=h.default;let i=d(a.r(56592));c.PostgrestBuilder=i.default;let j=d(a.r(72124));c.PostgrestError=j.default,c.default={PostgrestClient:e.default,PostgrestQueryBuilder:f.default,PostgrestFilterBuilder:g.default,PostgrestTransformBuilder:h.default,PostgrestBuilder:i.default,PostgrestError:j.default}},23605,a=>{"use strict";let b,c,d,e,f,g;var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=a.i(87924),J=a.i(72131);let K=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var L={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let M=(0,J.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:g,...h},i)=>(0,J.createElement)("svg",{ref:i,...L,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:K("lucide",e),...h},[...g.map(([a,b])=>(0,J.createElement)(a,b)),...Array.isArray(f)?f:[f]])),N=(a,b)=>{let c=(0,J.forwardRef)(({className:c,...d},e)=>(0,J.createElement)(M,{ref:e,iconNode:b,className:K(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,c),...d}));return c.displayName=`${a}`,c},O=N("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var P=a.i(71987);let Q=(a,b)=>{if(0===a.length)return b.classGroupId;let c=a[0],d=b.nextPart.get(c),e=d?Q(a.slice(1),d):void 0;if(e)return e;if(0===b.validators.length)return;let f=a.join("-");return b.validators.find(({validator:a})=>a(f))?.classGroupId},R=/^\[(.+)\]$/,S=(a,b,c,d)=>{a.forEach(a=>{if("string"==typeof a){(""===a?b:T(b,a)).classGroupId=c;return}"function"==typeof a?U(a)?S(a(d),b,c,d):b.validators.push({validator:a,classGroupId:c}):Object.entries(a).forEach(([a,e])=>{S(e,T(b,a),c,d)})})},T=(a,b)=>{let c=a;return b.split("-").forEach(a=>{c.nextPart.has(a)||c.nextPart.set(a,{nextPart:new Map,validators:[]}),c=c.nextPart.get(a)}),c},U=a=>a.isThemeGetter,V=(a,b)=>b?a.map(([a,c])=>[a,c.map(a=>"string"==typeof a?b+a:"object"==typeof a?Object.fromEntries(Object.entries(a).map(([a,c])=>[b+a,c])):a)]):a,W=a=>{if(a.length<=1)return a;let b=[],c=[];return a.forEach(a=>{"["===a[0]?(b.push(...c.sort(),a),c=[]):c.push(a)}),b.push(...c.sort()),b},X=/\s+/;function Y(){let a,b,c=0,d="";for(;c<arguments.length;)(a=arguments[c++])&&(b=Z(a))&&(d&&(d+=" "),d+=b);return d}let Z=a=>{let b;if("string"==typeof a)return a;let c="";for(let d=0;d<a.length;d++)a[d]&&(b=Z(a[d]))&&(c&&(c+=" "),c+=b);return c},$=a=>{let b=b=>b[a]||[];return b.isThemeGetter=!0,b},_=/^\[(?:([a-z-]+):)?(.+)\]$/i,aa=/^\d+\/\d+$/,ab=new Set(["px","full","screen"]),ac=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ad=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ae=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,af=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ag=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ah=a=>aj(a)||ab.has(a)||aa.test(a),ai=a=>aw(a,"length",ax),aj=a=>!!a&&!Number.isNaN(Number(a)),ak=a=>aw(a,"number",aj),al=a=>!!a&&Number.isInteger(Number(a)),am=a=>a.endsWith("%")&&aj(a.slice(0,-1)),an=a=>_.test(a),ao=a=>ac.test(a),ap=new Set(["length","size","percentage"]),aq=a=>aw(a,ap,ay),ar=a=>aw(a,"position",ay),as=new Set(["image","url"]),at=a=>aw(a,as,aA),au=a=>aw(a,"",az),av=()=>!0,aw=(a,b,c)=>{let d=_.exec(a);return!!d&&(d[1]?"string"==typeof b?d[1]===b:b.has(d[1]):c(d[2]))},ax=a=>ad.test(a)&&!ae.test(a),ay=()=>!1,az=a=>af.test(a),aA=a=>ag.test(a),aB=function(a,...b){let c,d,e,f=function(h){let i;return d=(c={cache:(a=>{if(a<1)return{get:()=>void 0,set:()=>{}};let b=0,c=new Map,d=new Map,e=(e,f)=>{c.set(e,f),++b>a&&(b=0,d=c,c=new Map)};return{get(a){let b=c.get(a);return void 0!==b?b:void 0!==(b=d.get(a))?(e(a,b),b):void 0},set(a,b){c.has(a)?c.set(a,b):e(a,b)}}})((i=b.reduce((a,b)=>b(a),a())).cacheSize),parseClassName:(a=>{let{separator:b,experimentalParseClassName:c}=a,d=1===b.length,e=b[0],f=b.length,g=a=>{let c,g=[],h=0,i=0;for(let j=0;j<a.length;j++){let k=a[j];if(0===h){if(k===e&&(d||a.slice(j,j+f)===b)){g.push(a.slice(i,j)),i=j+f;continue}if("/"===k){c=j;continue}}"["===k?h++:"]"===k&&h--}let j=0===g.length?a:a.substring(i),k=j.startsWith("!"),l=k?j.substring(1):j;return{modifiers:g,hasImportantModifier:k,baseClassName:l,maybePostfixModifierPosition:c&&c>i?c-i:void 0}};return c?a=>c({className:a,parseClassName:g}):g})(i),...(a=>{let b=(a=>{let{theme:b,prefix:c}=a,d={nextPart:new Map,validators:[]};return V(Object.entries(a.classGroups),c).forEach(([a,c])=>{S(c,d,a,b)}),d})(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;return{getClassGroupId:a=>{let c=a.split("-");return""===c[0]&&1!==c.length&&c.shift(),Q(c,b)||(a=>{if(R.test(a)){let b=R.exec(a)[1],c=b?.substring(0,b.indexOf(":"));if(c)return"arbitrary.."+c}})(a)},getConflictingClassGroupIds:(a,b)=>{let e=c[a]||[];return b&&d[a]?[...e,...d[a]]:e}}})(i)}).cache.get,e=c.cache.set,f=g,g(h)};function g(a){let b=d(a);if(b)return b;let f=((a,b)=>{let{parseClassName:c,getClassGroupId:d,getConflictingClassGroupIds:e}=b,f=[],g=a.trim().split(X),h="";for(let a=g.length-1;a>=0;a-=1){let b=g[a],{modifiers:i,hasImportantModifier:j,baseClassName:k,maybePostfixModifierPosition:l}=c(b),m=!!l,n=d(m?k.substring(0,l):k);if(!n){if(!m||!(n=d(k))){h=b+(h.length>0?" "+h:h);continue}m=!1}let o=W(i).join(":"),p=j?o+"!":o,q=p+n;if(f.includes(q))continue;f.push(q);let r=e(n,m);for(let a=0;a<r.length;++a){let b=r[a];f.push(p+b)}h=b+(h.length>0?" "+h:h)}return h})(a,c);return e(a,f),f}return function(){return f(Y.apply(null,arguments))}}(()=>{let a=$("colors"),b=$("spacing"),c=$("blur"),d=$("brightness"),e=$("borderColor"),f=$("borderRadius"),g=$("borderSpacing"),h=$("borderWidth"),i=$("contrast"),j=$("grayscale"),k=$("hueRotate"),l=$("invert"),m=$("gap"),n=$("gradientColorStops"),o=$("gradientColorStopPositions"),p=$("inset"),q=$("margin"),r=$("opacity"),s=$("padding"),t=$("saturate"),u=$("scale"),v=$("sepia"),w=$("skew"),x=$("space"),y=$("translate"),z=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",an,b],C=()=>[an,b],D=()=>["",ah,ai],E=()=>["auto",aj,an],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",an],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[aj,an];return{cacheSize:500,separator:":",theme:{colors:[av],spacing:[ah,ai],blur:["none","",ao,an],brightness:L(),borderColor:[a],borderRadius:["none","","full",ao,an],borderSpacing:C(),borderWidth:D(),contrast:L(),grayscale:J(),hueRotate:L(),invert:J(),gap:C(),gradientColorStops:[a],gradientColorStopPositions:[am,ai],inset:B(),margin:B(),opacity:L(),padding:C(),saturate:L(),scale:L(),sepia:J(),skew:L(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",an]}],container:["container"],columns:[{columns:[ao]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),an]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",al,an]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",an]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",al,an]}],"grid-cols":[{"grid-cols":[av]}],"col-start-end":[{col:["auto",{span:["full",al,an]},an]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[av]}],"row-start-end":[{row:["auto",{span:[al,an]},an]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",an]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",an]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[s]}],px:[{px:[s]}],py:[{py:[s]}],ps:[{ps:[s]}],pe:[{pe:[s]}],pt:[{pt:[s]}],pr:[{pr:[s]}],pb:[{pb:[s]}],pl:[{pl:[s]}],m:[{m:[q]}],mx:[{mx:[q]}],my:[{my:[q]}],ms:[{ms:[q]}],me:[{me:[q]}],mt:[{mt:[q]}],mr:[{mr:[q]}],mb:[{mb:[q]}],ml:[{ml:[q]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",an,b]}],"min-w":[{"min-w":[an,b,"min","max","fit"]}],"max-w":[{"max-w":[an,b,"none","full","min","max","fit","prose",{screen:[ao]},ao]}],h:[{h:[an,b,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[an,b,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[an,b,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[an,b,"auto","min","max","fit"]}],"font-size":[{text:["base",ao,ai]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ak]}],"font-family":[{font:[av]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",an]}],"line-clamp":[{"line-clamp":["none",aj,ak]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ah,an]}],"list-image":[{"list-image":["none",an]}],"list-style-type":[{list:["none","disc","decimal",an]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[a]}],"placeholder-opacity":[{"placeholder-opacity":[r]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[a]}],"text-opacity":[{"text-opacity":[r]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ah,ai]}],"underline-offset":[{"underline-offset":["auto",ah,an]}],"text-decoration-color":[{decoration:[a]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",an]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",an]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[r]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),ar]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",aq]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},at]}],"bg-color":[{bg:[a]}],"gradient-from-pos":[{from:[o]}],"gradient-via-pos":[{via:[o]}],"gradient-to-pos":[{to:[o]}],"gradient-from":[{from:[n]}],"gradient-via":[{via:[n]}],"gradient-to":[{to:[n]}],rounded:[{rounded:[f]}],"rounded-s":[{"rounded-s":[f]}],"rounded-e":[{"rounded-e":[f]}],"rounded-t":[{"rounded-t":[f]}],"rounded-r":[{"rounded-r":[f]}],"rounded-b":[{"rounded-b":[f]}],"rounded-l":[{"rounded-l":[f]}],"rounded-ss":[{"rounded-ss":[f]}],"rounded-se":[{"rounded-se":[f]}],"rounded-ee":[{"rounded-ee":[f]}],"rounded-es":[{"rounded-es":[f]}],"rounded-tl":[{"rounded-tl":[f]}],"rounded-tr":[{"rounded-tr":[f]}],"rounded-br":[{"rounded-br":[f]}],"rounded-bl":[{"rounded-bl":[f]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[r]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[r]}],"divide-style":[{divide:G()}],"border-color":[{border:[e]}],"border-color-x":[{"border-x":[e]}],"border-color-y":[{"border-y":[e]}],"border-color-s":[{"border-s":[e]}],"border-color-e":[{"border-e":[e]}],"border-color-t":[{"border-t":[e]}],"border-color-r":[{"border-r":[e]}],"border-color-b":[{"border-b":[e]}],"border-color-l":[{"border-l":[e]}],"divide-color":[{divide:[e]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[ah,an]}],"outline-w":[{outline:[ah,ai]}],"outline-color":[{outline:[a]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[a]}],"ring-opacity":[{"ring-opacity":[r]}],"ring-offset-w":[{"ring-offset":[ah,ai]}],"ring-offset-color":[{"ring-offset":[a]}],shadow:[{shadow:["","inner","none",ao,au]}],"shadow-color":[{shadow:[av]}],opacity:[{opacity:[r]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[c]}],brightness:[{brightness:[d]}],contrast:[{contrast:[i]}],"drop-shadow":[{"drop-shadow":["","none",ao,an]}],grayscale:[{grayscale:[j]}],"hue-rotate":[{"hue-rotate":[k]}],invert:[{invert:[l]}],saturate:[{saturate:[t]}],sepia:[{sepia:[v]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[c]}],"backdrop-brightness":[{"backdrop-brightness":[d]}],"backdrop-contrast":[{"backdrop-contrast":[i]}],"backdrop-grayscale":[{"backdrop-grayscale":[j]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[k]}],"backdrop-invert":[{"backdrop-invert":[l]}],"backdrop-opacity":[{"backdrop-opacity":[r]}],"backdrop-saturate":[{"backdrop-saturate":[t]}],"backdrop-sepia":[{"backdrop-sepia":[v]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[g]}],"border-spacing-x":[{"border-spacing-x":[g]}],"border-spacing-y":[{"border-spacing-y":[g]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",an]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",an]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",an]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[u]}],"scale-x":[{"scale-x":[u]}],"scale-y":[{"scale-y":[u]}],rotate:[{rotate:[al,an]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",an]}],accent:[{accent:["auto",a]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",an]}],"caret-color":[{caret:[a]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",an]}],fill:[{fill:[a,"none"]}],"stroke-w":[{stroke:[ah,ai,ak]}],stroke:[{stroke:[a,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function aC(...a){return aB(function(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}(a))}let aD={key:"/key.svg",lock:"/lock.svg",shield:"/shield.svg",upload:"/upload.svg",smartphone:"/smartphone.svg",cloud:"/cloud.svg",clock:"/clock.svg",search:"/search.svg",image:"/image.svg",folder:"/Openfolder.svg",refresh:"/RefreshCw.svg",chevronRight:"/ChevronRight.svg"};function aE({name:a,className:b,size:c=24}){return(0,I.jsx)("div",{className:aC("relative inline-block shrink-0",b),style:{width:c,height:c},children:(0,I.jsx)(P.default,{src:aD[a],alt:a,fill:!0,className:"object-contain",unoptimized:!0})})}var aF=a.i(21756),aG=a.i(47166);function aH(a){let b=(0,aG.encodeBase64)(a);return b.match(/.{1,8}/g)?.join("-")||b}function aI(a){let b=a.replace(/-/g,"");return(0,aG.decodeBase64)(b)}async function aJ(a,b){var c;let d,e,f=(c=new Uint8Array(await a.arrayBuffer()),d=aF.default.randomBytes(aF.default.secretbox.nonceLength),e=aF.default.secretbox(c,d,b),{ciphertext:(0,aG.encodeBase64)(e),nonce:(0,aG.encodeBase64)(d)});return{encrypted:new Blob([(0,aG.decodeBase64)(f.ciphertext)],{type:"application/octet-stream"}),nonce:f.nonce}}async function aK(a,b,c,d){var e;let f,g,h=new Uint8Array(await a.arrayBuffer()),i=(e={ciphertext:(0,aG.encodeBase64)(h),nonce:b},f=(0,aG.decodeBase64)(e.ciphertext),g=(0,aG.decodeBase64)(e.nonce),aF.default.secretbox.open(f,g,c));return i?new Blob([i],{type:d}):null}function aL(a,b){let c=(0,aG.encodeBase64)(a);localStorage.setItem("photovault_secret_key",c)}let aM=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],aN=new Set(aM),aO=(a,b,c)=>c>b?b:c<a?a:c,aP={test:a=>"number"==typeof a,parse:parseFloat,transform:a=>a},aQ={...aP,transform:a=>aO(0,1,a)},aR={...aP,default:1},aS=a=>Math.round(1e5*a)/1e5,aT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,aU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,aV=(a,b)=>c=>!!("string"==typeof c&&aU.test(c)&&c.startsWith(a)||b&&null!=c&&Object.prototype.hasOwnProperty.call(c,b)),aW=(a,b,c)=>d=>{if("string"!=typeof d)return d;let[e,f,g,h]=d.match(aT);return{[a]:parseFloat(e),[b]:parseFloat(f),[c]:parseFloat(g),alpha:void 0!==h?parseFloat(h):1}},aX={...aP,transform:a=>Math.round(aO(0,255,a))},aY={test:aV("rgb","red"),parse:aW("red","green","blue"),transform:({red:a,green:b,blue:c,alpha:d=1})=>"rgba("+aX.transform(a)+", "+aX.transform(b)+", "+aX.transform(c)+", "+aS(aQ.transform(d))+")"},aZ={test:aV("#"),parse:function(a){let b="",c="",d="",e="";return a.length>5?(b=a.substring(1,3),c=a.substring(3,5),d=a.substring(5,7),e=a.substring(7,9)):(b=a.substring(1,2),c=a.substring(2,3),d=a.substring(3,4),e=a.substring(4,5),b+=b,c+=c,d+=d,e+=e),{red:parseInt(b,16),green:parseInt(c,16),blue:parseInt(d,16),alpha:e?parseInt(e,16)/255:1}},transform:aY.transform},a$=a=>({test:b=>"string"==typeof b&&b.endsWith(a)&&1===b.split(" ").length,parse:parseFloat,transform:b=>`${b}${a}`}),a_=a$("deg"),a0=a$("%"),a1=a$("px"),a2=a$("vh"),a3=a$("vw"),a4={...a0,parse:a=>a0.parse(a)/100,transform:a=>a0.transform(100*a)},a5={test:aV("hsl","hue"),parse:aW("hue","saturation","lightness"),transform:({hue:a,saturation:b,lightness:c,alpha:d=1})=>"hsla("+Math.round(a)+", "+a0.transform(aS(b))+", "+a0.transform(aS(c))+", "+aS(aQ.transform(d))+")"},a6={test:a=>aY.test(a)||aZ.test(a)||a5.test(a),parse:a=>aY.test(a)?aY.parse(a):a5.test(a)?a5.parse(a):aZ.parse(a),transform:a=>"string"==typeof a?a:a.hasOwnProperty("red")?aY.transform(a):a5.transform(a),getAnimatableNone:a=>{let b=a6.parse(a);return b.alpha=0,a6.transform(b)}},a7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,a8="number",a9="color",ba=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bb(a){let b=a.toString(),c=[],d={color:[],number:[],var:[]},e=[],f=0,g=b.replace(ba,a=>(a6.test(a)?(d.color.push(f),e.push(a9),c.push(a6.parse(a))):a.startsWith("var(")?(d.var.push(f),e.push("var"),c.push(a)):(d.number.push(f),e.push(a8),c.push(parseFloat(a))),++f,"${}")).split("${}");return{values:c,split:g,indexes:d,types:e}}function bc(a){return bb(a).values}function bd(a){let{split:b,types:c}=bb(a),d=b.length;return a=>{let e="";for(let f=0;f<d;f++)if(e+=b[f],void 0!==a[f]){let b=c[f];b===a8?e+=aS(a[f]):b===a9?e+=a6.transform(a[f]):e+=a[f]}return e}}let be=a=>"number"==typeof a?0:a6.test(a)?a6.getAnimatableNone(a):a,bf={test:function(a){return isNaN(a)&&"string"==typeof a&&(a.match(aT)?.length||0)+(a.match(a7)?.length||0)>0},parse:bc,createTransformer:bd,getAnimatableNone:function(a){let b=bc(a);return bd(a)(b.map(be))}},bg=new Set(["brightness","contrast","saturate","opacity"]);function bh(a){let[b,c]=a.slice(0,-1).split("(");if("drop-shadow"===b)return a;let[d]=c.match(aT)||[];if(!d)return a;let e=c.replace(d,""),f=+!!bg.has(b);return d!==c&&(f*=100),b+"("+f+e+")"}let bi=/\b([a-z-]*)\(.*?\)/gu,bj={...bf,getAnimatableNone:a=>{let b=a.match(bi);return b?b.map(bh).join(" "):a}},bk={...aP,transform:Math.round},bl={borderWidth:a1,borderTopWidth:a1,borderRightWidth:a1,borderBottomWidth:a1,borderLeftWidth:a1,borderRadius:a1,radius:a1,borderTopLeftRadius:a1,borderTopRightRadius:a1,borderBottomRightRadius:a1,borderBottomLeftRadius:a1,width:a1,maxWidth:a1,height:a1,maxHeight:a1,top:a1,right:a1,bottom:a1,left:a1,inset:a1,insetBlock:a1,insetBlockStart:a1,insetBlockEnd:a1,insetInline:a1,insetInlineStart:a1,insetInlineEnd:a1,padding:a1,paddingTop:a1,paddingRight:a1,paddingBottom:a1,paddingLeft:a1,paddingBlock:a1,paddingBlockStart:a1,paddingBlockEnd:a1,paddingInline:a1,paddingInlineStart:a1,paddingInlineEnd:a1,margin:a1,marginTop:a1,marginRight:a1,marginBottom:a1,marginLeft:a1,marginBlock:a1,marginBlockStart:a1,marginBlockEnd:a1,marginInline:a1,marginInlineStart:a1,marginInlineEnd:a1,backgroundPositionX:a1,backgroundPositionY:a1,rotate:a_,rotateX:a_,rotateY:a_,rotateZ:a_,scale:aR,scaleX:aR,scaleY:aR,scaleZ:aR,skew:a_,skewX:a_,skewY:a_,distance:a1,translateX:a1,translateY:a1,translateZ:a1,x:a1,y:a1,z:a1,perspective:a1,transformPerspective:a1,opacity:aQ,originX:a4,originY:a4,originZ:a1,zIndex:bk,fillOpacity:aQ,strokeOpacity:aQ,numOctaves:bk},bm={...bl,color:a6,backgroundColor:a6,outlineColor:a6,fill:a6,stroke:a6,borderColor:a6,borderTopColor:a6,borderRightColor:a6,borderBottomColor:a6,borderLeftColor:a6,filter:bj,WebkitFilter:bj},bn=a=>bm[a],bo=()=>({translate:0,scale:1,origin:0,originPoint:0}),bp=()=>({x:bo(),y:bo()}),bq=()=>({min:0,max:0}),br=()=>({x:bq(),y:bq()}),bs=a=>!!(a&&a.getVelocity),bt=new Set(["width","height","top","left","right","bottom",...aM]),bu=a=>b=>b.test(a),bv=[aP,a1,a0,a_,a3,a2,{test:a=>"auto"===a,parse:a=>a}],bw=a=>bv.find(bu(a)),bx=()=>{},by=()=>{},bz=a=>b=>"string"==typeof b&&b.startsWith(a),bA=bz("--"),bB=bz("var(--"),bC=a=>!!bB(a)&&bD.test(a.split("/*")[0].trim()),bD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function bE(a){return"string"==typeof a&&a.split("/*")[0].includes("var(--")}let bF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,bG=a=>180*a/Math.PI,bH=a=>bJ(bG(Math.atan2(a[1],a[0]))),bI={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:a=>(Math.abs(a[0])+Math.abs(a[3]))/2,rotate:bH,rotateZ:bH,skewX:a=>bG(Math.atan(a[1])),skewY:a=>bG(Math.atan(a[2])),skew:a=>(Math.abs(a[1])+Math.abs(a[2]))/2},bJ=a=>((a%=360)<0&&(a+=360),a),bK=a=>Math.sqrt(a[0]*a[0]+a[1]*a[1]),bL=a=>Math.sqrt(a[4]*a[4]+a[5]*a[5]),bM={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:bK,scaleY:bL,scale:a=>(bK(a)+bL(a))/2,rotateX:a=>bJ(bG(Math.atan2(a[6],a[5]))),rotateY:a=>bJ(bG(Math.atan2(-a[2],a[0]))),rotateZ:bH,rotate:bH,skewX:a=>bG(Math.atan(a[4])),skewY:a=>bG(Math.atan(a[1])),skew:a=>(Math.abs(a[1])+Math.abs(a[4]))/2};function bN(a){return+!!a.includes("scale")}function bO(a,b){let c,d;if(!a||"none"===a)return bN(b);let e=a.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(e)c=bM,d=e;else{let b=a.match(/^matrix\(([-\d.e\s,]+)\)$/u);c=bI,d=b}if(!d)return bN(b);let f=c[b],g=d[1].split(",").map(bP);return"function"==typeof f?f(g):g[f]}function bP(a){return parseFloat(a.trim())}let bQ=a=>a===aP||a===a1,bR=new Set(["x","y","z"]),bS=aM.filter(a=>!bR.has(a)),bT={width:({x:a},{paddingLeft:b="0",paddingRight:c="0"})=>a.max-a.min-parseFloat(b)-parseFloat(c),height:({y:a},{paddingTop:b="0",paddingBottom:c="0"})=>a.max-a.min-parseFloat(b)-parseFloat(c),top:(a,{top:b})=>parseFloat(b),left:(a,{left:b})=>parseFloat(b),bottom:({y:a},{top:b})=>parseFloat(b)+(a.max-a.min),right:({x:a},{left:b})=>parseFloat(b)+(a.max-a.min),x:(a,{transform:b})=>bO(b,"x"),y:(a,{transform:b})=>bO(b,"y")};bT.translateX=bT.x,bT.translateY=bT.y;let bU=a=>a,bV={},bW=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function bX(a,b){let c=!1,d=!0,e={delta:0,timestamp:0,isProcessing:!1},f=()=>c=!0,g=bW.reduce((a,c)=>(a[c]=function(a,b){let c=new Set,d=new Set,e=!1,f=!1,g=new WeakSet,h={delta:0,timestamp:0,isProcessing:!1},i=0;function j(b){g.has(b)&&(k.schedule(b),a()),i++,b(h)}let k={schedule:(a,b=!1,f=!1)=>{let h=f&&e?c:d;return b&&g.add(a),h.has(a)||h.add(a),a},cancel:a=>{d.delete(a),g.delete(a)},process:a=>{if(h=a,e){f=!0;return}e=!0,[c,d]=[d,c],c.forEach(j),b,i=0,c.clear(),e=!1,f&&(f=!1,k.process(a))}};return k}(f,b?c:void 0),a),{}),{setup:h,read:i,resolveKeyframes:j,preUpdate:k,update:l,preRender:m,render:n,postRender:o}=g,p=()=>{let f=bV.useManualTiming?e.timestamp:performance.now();c=!1,bV.useManualTiming||(e.delta=d?1e3/60:Math.max(Math.min(f-e.timestamp,40),1)),e.timestamp=f,e.isProcessing=!0,h.process(e),i.process(e),j.process(e),k.process(e),l.process(e),m.process(e),n.process(e),o.process(e),e.isProcessing=!1,c&&b&&(d=!1,a(p))};return{schedule:bW.reduce((b,f)=>{let h=g[f];return b[f]=(b,f=!1,g=!1)=>(!c&&(c=!0,d=!0,e.isProcessing||a(p)),h.schedule(b,f,g)),b},{}),cancel:a=>{for(let b=0;b<bW.length;b++)g[bW[b]].cancel(a)},state:e,steps:g}}let{schedule:bY,cancel:bZ,state:b$,steps:b_}=bX("u">typeof requestAnimationFrame?requestAnimationFrame:bU,!0),b0=new Set,b1=!1,b2=!1,b3=!1;function b4(){if(b2){let a=Array.from(b0).filter(a=>a.needsMeasurement),b=new Set(a.map(a=>a.element)),c=new Map;b.forEach(a=>{let b,d=(b=[],bS.forEach(c=>{let d=a.getValue(c);void 0!==d&&(b.push([c,d.get()]),d.set(+!!c.startsWith("scale")))}),b);d.length&&(c.set(a,d),a.render())}),a.forEach(a=>a.measureInitialState()),b.forEach(a=>{a.render();let b=c.get(a);b&&b.forEach(([b,c])=>{a.getValue(b)?.set(c)})}),a.forEach(a=>a.measureEndState()),a.forEach(a=>{void 0!==a.suspendedScrollY&&window.scrollTo(0,a.suspendedScrollY)})}b2=!1,b1=!1,b0.forEach(a=>a.complete(b3)),b0.clear()}function b5(){b0.forEach(a=>{a.readKeyframes(),a.needsMeasurement&&(b2=!0)})}class b6{constructor(a,b,c,d,e,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...a],this.onComplete=b,this.name=c,this.motionValue=d,this.element=e,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(b0.add(this),b1||(b1=!0,bY.read(b5),bY.resolveKeyframes(b4))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:a,name:b,element:c,motionValue:d}=this;if(null===a[0]){let e=d?.get(),f=a[a.length-1];if(void 0!==e)a[0]=e;else if(c&&b){let d=c.readValue(b,f);null!=d&&(a[0]=d)}void 0===a[0]&&(a[0]=f),d&&void 0===e&&d.set(a[0])}for(let b=1;b<a.length;b++)a[b]??(a[b]=a[b-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(a=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,a),b0.delete(this)}cancel(){"scheduled"===this.state&&(b0.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function b7(a,b){let c=bn(a);return c!==bj&&(c=bf),c.getAnimatableNone?c.getAnimatableNone(b):void 0}let b8=new Set(["auto","none","0"]);class b9 extends b6{constructor(a,b,c,d,e){super(a,b,c,d,e,!0)}readKeyframes(){let{unresolvedKeyframes:a,element:b,name:c}=this;if(!b||!b.current)return;super.readKeyframes();for(let c=0;c<a.length;c++){let d=a[c];if("string"==typeof d&&bC(d=d.trim())){let e=function a(b,c,d=1){by(d<=4,`Max CSS variable fallback depth detected in property "${b}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[e,f]=function(a){let b=bF.exec(a);if(!b)return[,];let[,c,d,e]=b;return[`--${c??d}`,e]}(b);if(!e)return;let g=window.getComputedStyle(c).getPropertyValue(e);if(g){let a=g.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(a)?parseFloat(a):a}return bC(f)?a(f,c,d+1):f}(d,b.current);void 0!==e&&(a[c]=e),c===a.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!bt.has(c)||2!==a.length)return;let[d,e]=a,f=bw(d),g=bw(e);if(bE(d)!==bE(e)&&bT[c]){this.needsMeasurement=!0;return}if(f!==g)if(bQ(f)&&bQ(g))for(let b=0;b<a.length;b++){let c=a[b];"string"==typeof c&&(a[b]=parseFloat(c))}else bT[c]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:a,name:b}=this,c=[];for(let b=0;b<a.length;b++)(null===a[b]||function(a){if("number"==typeof a)return 0===a;if(null===a)return!0;return"none"===a||"0"===a||/^0[^.\s]+$/u.test(a)}(a[b]))&&c.push(b);c.length&&function(a,b,c){let d,e=0;for(;e<a.length&&!d;){let b=a[e];"string"==typeof b&&!b8.has(b)&&bb(b).values.length&&(d=a[e]),e++}if(d&&c)for(let e of b)a[e]=b7(c,d)}(a,c,b)}measureInitialState(){let{element:a,unresolvedKeyframes:b,name:c}=this;if(!a||!a.current)return;"height"===c&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bT[c](a.measureViewportBox(),window.getComputedStyle(a.current)),b[0]=this.measuredOrigin;let d=b[b.length-1];void 0!==d&&a.getValue(c,d).jump(d,!1)}measureEndState(){let{element:a,name:b,unresolvedKeyframes:c}=this;if(!a||!a.current)return;let d=a.getValue(b);d&&d.jump(this.measuredOrigin,!1);let e=c.length-1,f=c[e];c[e]=bT[b](a.measureViewportBox(),window.getComputedStyle(a.current)),null!==f&&void 0===this.finalKeyframe&&(this.finalKeyframe=f),this.removedTransforms?.length&&this.removedTransforms.forEach(([b,c])=>{a.getValue(b).set(c)}),this.resolveNoneKeyframes()}}function ca(a,b){-1===a.indexOf(b)&&a.push(b)}function cb(a,b){let c=a.indexOf(b);c>-1&&a.splice(c,1)}class cc{constructor(){this.subscriptions=[]}add(a){return ca(this.subscriptions,a),()=>cb(this.subscriptions,a)}notify(a,b,c){let d=this.subscriptions.length;if(d)if(1===d)this.subscriptions[0](a,b,c);else for(let e=0;e<d;e++){let d=this.subscriptions[e];d&&d(a,b,c)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let{schedule:cd}=bX(queueMicrotask,!1);function ce(){b=void 0}let cf={now:()=>(void 0===b&&cf.set(b$.isProcessing||bV.useManualTiming?b$.timestamp:performance.now()),b),set:a=>{b=a,queueMicrotask(ce)}};class cg{constructor(a,b={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{let b=cf.now();if(this.updatedAt!==b&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(a),this.owner=b.owner}setCurrent(a){this.current=a,this.updatedAt=cf.now(),null===this.canTrackVelocity&&void 0!==a&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(a=this.current){this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt}onChange(a){return this.on("change",a)}on(a,b){this.events[a]||(this.events[a]=new cc);let c=this.events[a].add(b);return"change"===a?()=>{c(),bY.read(()=>{this.events.change.getSize()||this.stop()})}:c}clearListeners(){for(let a in this.events)this.events[a].clear()}attach(a,b){this.passiveEffect=a,this.stopPassiveEffect=b}set(a){this.passiveEffect?this.passiveEffect(a,this.updateAndNotify):this.updateAndNotify(a)}setWithVelocity(a,b,c){this.set(b),this.prev=void 0,this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt-c}jump(a,b=!0){this.updateAndNotify(a),this.prev=a,this.prevUpdatedAt=this.prevFrameValue=void 0,b&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(a){this.dependents||(this.dependents=new Set),this.dependents.add(a)}removeDependent(a){this.dependents&&this.dependents.delete(a)}get(){return g&&g.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var a;let b=cf.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||b-this.updatedAt>30)return 0;let c=Math.min(this.updatedAt-this.prevUpdatedAt,30);return a=parseFloat(this.current)-parseFloat(this.prevFrameValue),c?1e3/c*a:0}start(a){return this.stop(),new Promise(b=>{this.hasAnimated=!0,this.animation=a(b),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ch(a,b){return new cg(a,b)}let ci=[...bv,a6,bf],cj={current:!1},ck=new WeakMap;function cl(a){return null!==a&&"object"==typeof a&&"function"==typeof a.start}function cm(a){return"string"==typeof a||Array.isArray(a)}let cn=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],co=["initial",...cn];function cp(a){return cl(a.animate)||co.some(b=>cm(a[b]))}function cq(a){return!!(cp(a)||a.variants)}function cr(a){let b=[{},{}];return a?.values.forEach((a,c)=>{b[0][c]=a.get(),b[1][c]=a.getVelocity()}),b}function cs(a,b,c,d){if("function"==typeof b){let[e,f]=cr(d);b=b(void 0!==c?c:a.custom,e,f)}if("string"==typeof b&&(b=a.variants&&a.variants[b]),"function"==typeof b){let[e,f]=cr(d);b=b(void 0!==c?c:a.custom,e,f)}return b}let ct=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cu={};class cv{scrapeMotionValuesFromProps(a,b,c){return{}}constructor({parent:a,props:b,presenceContext:c,reducedMotionConfig:d,blockInitialAnimation:e,visualState:f},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=b6,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let a=cf.now();this.renderScheduledAt<a&&(this.renderScheduledAt=a,bY.render(this.render,!1,!0))};const{latestValues:h,renderState:i}=f;this.latestValues=h,this.baseTarget={...h},this.initialValues=b.initial?{...h}:{},this.renderState=i,this.parent=a,this.props=b,this.presenceContext=c,this.depth=a?a.depth+1:0,this.reducedMotionConfig=d,this.options=g,this.blockInitialAnimation=!!e,this.isControllingVariants=cp(b),this.isVariantNode=cq(b),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(a&&a.current);const{willChange:j,...k}=this.scrapeMotionValuesFromProps(b,{},this);for(const a in k){const b=k[a];void 0!==h[a]&&bs(b)&&b.set(h[a])}}mount(a){this.current=a,ck.set(a,this),this.projection&&!this.projection.instance&&this.projection.mount(a),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,b)=>this.bindToMotionValue(b,a)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(cj.current||(cj.current=!0),this.shouldReduceMotion=null),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let a in this.projection&&this.projection.unmount(),bZ(this.notifyUpdate),bZ(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[a].clear();for(let a in this.features){let b=this.features[a];b&&(b.unmount(),b.isMounted=!1)}this.current=null}addChild(a){this.children.add(a),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(a)}removeChild(a){this.children.delete(a),this.enteringChildren&&this.enteringChildren.delete(a)}bindToMotionValue(a,b){let c;this.valueSubscriptions.has(a)&&this.valueSubscriptions.get(a)();let d=aN.has(a);d&&this.onBindTransform&&this.onBindTransform();let e=b.on("change",b=>{this.latestValues[a]=b,this.props.onUpdate&&bY.preRender(this.notifyUpdate),d&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});this.valueSubscriptions.set(a,()=>{e(),c&&c(),b.owner&&b.stop()})}sortNodePosition(a){return this.current&&this.sortInstanceNodePosition&&this.type===a.type?this.sortInstanceNodePosition(this.current,a.current):0}updateFeatures(){let a="animation";for(a in cu){let b=cu[a];if(!b)continue;let{isEnabled:c,Feature:d}=b;if(!this.features[a]&&d&&c(this.props)&&(this.features[a]=new d(this)),this.features[a]){let b=this.features[a];b.isMounted?b.update():(b.mount(),b.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):br()}getStaticValue(a){return this.latestValues[a]}setStaticValue(a,b){this.latestValues[a]=b}update(a,b){(a.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=a,this.prevPresenceContext=this.presenceContext,this.presenceContext=b;for(let b=0;b<ct.length;b++){let c=ct[b];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);let d=a["on"+c];d&&(this.propEventSubscriptions[c]=this.on(c,d))}this.prevMotionValues=function(a,b,c){for(let d in b){let e=b[d],f=c[d];if(bs(e))a.addValue(d,e);else if(bs(f))a.addValue(d,ch(e,{owner:a}));else if(f!==e)if(a.hasValue(d)){let b=a.getValue(d);!0===b.liveStyle?b.jump(e):b.hasAnimated||b.set(e)}else{let b=a.getStaticValue(d);a.addValue(d,ch(void 0!==b?b:e,{owner:a}))}}for(let d in c)void 0===b[d]&&a.removeValue(d);return b}(this,this.scrapeMotionValuesFromProps(a,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(a){return this.props.variants?this.props.variants[a]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(a){let b=this.getClosestVariantNode();if(b)return b.variantChildren&&b.variantChildren.add(a),()=>b.variantChildren.delete(a)}addValue(a,b){let c=this.values.get(a);b!==c&&(c&&this.removeValue(a),this.bindToMotionValue(a,b),this.values.set(a,b),this.latestValues[a]=b.get())}removeValue(a){this.values.delete(a);let b=this.valueSubscriptions.get(a);b&&(b(),this.valueSubscriptions.delete(a)),delete this.latestValues[a],this.removeValueFromRenderState(a,this.renderState)}hasValue(a){return this.values.has(a)}getValue(a,b){if(this.props.values&&this.props.values[a])return this.props.values[a];let c=this.values.get(a);return void 0===c&&void 0!==b&&(c=ch(null===b?void 0:b,{owner:this}),this.addValue(a,c)),c}readValue(a,b){let c=void 0===this.latestValues[a]&&this.current?this.getBaseTargetFromProps(this.props,a)??this.readValueFromInstance(this.current,a,this.options):this.latestValues[a];if(null!=c){let d,e;if("string"==typeof c&&(d=c,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(d)||(e=c,/^0[^.\s]+$/u.test(e))))c=parseFloat(c);else{let d;d=c,!ci.find(bu(d))&&bf.test(b)&&(c=b7(a,b))}this.setBaseTarget(a,bs(c)?c.get():c)}return bs(c)?c.get():c}setBaseTarget(a,b){this.baseTarget[a]=b}getBaseTarget(a){let b,{initial:c}=this.props;if("string"==typeof c||"object"==typeof c){let d=cs(this.props,c,this.presenceContext?.custom);d&&(b=d[a])}if(c&&void 0!==b)return b;let d=this.getBaseTargetFromProps(this.props,a);return void 0===d||bs(d)?void 0!==this.initialValues[a]&&void 0===b?void 0:this.baseTarget[a]:d}on(a,b){return this.events[a]||(this.events[a]=new cc),this.events[a].add(b)}notify(a,...b){this.events[a]&&this.events[a].notify(...b)}scheduleRenderMicrotask(){cd.render(this.render)}}class cw extends cv{constructor(){super(...arguments),this.KeyframeResolver=b9}sortInstanceNodePosition(a,b){return 2&a.compareDocumentPosition(b)?1:-1}getBaseTargetFromProps(a,b){let c=a.style;return c?c[b]:void 0}removeValueFromRenderState(a,{vars:b,style:c}){delete b[a],delete c[a]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:a}=this.props;bs(a)&&(this.childSubscription=a.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function cx(a){return a.replace(/([A-Z])/g,a=>`-${a.toLowerCase()}`)}let cy=(a,b)=>b&&"number"==typeof a?b.transform(a):a,cz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cA=aM.length;function cB(a,b,c){let{style:d,vars:e,transformOrigin:f}=a,g=!1,h=!1;for(let a in b){let c=b[a];if(aN.has(a)){g=!0;continue}if(bA(a)){e[a]=c;continue}{let b=cy(c,bl[a]);a.startsWith("origin")?(h=!0,f[a]=b):d[a]=b}}if(!b.transform&&(g||c?d.transform=function(a,b,c){let d="",e=!0;for(let f=0;f<cA;f++){let g=aM[f],h=a[g];if(void 0===h)continue;let i=!0;if("number"==typeof h)i=h===+!!g.startsWith("scale");else{let a=parseFloat(h);i=g.startsWith("scale")?1===a:0===a}if(!i||c){let a=cy(h,bl[g]);if(!i){e=!1;let b=cz[g]||g;d+=`${b}(${a}) `}c&&(b[g]=a)}}return d=d.trim(),c?d=c(b,e?"":d):e&&(d="none"),d}(b,a.transform,c):d.transform&&(d.transform="none")),h){let{originX:a="50%",originY:b="50%",originZ:c=0}=f;d.transformOrigin=`${a} ${b} ${c}`}}let cC={offset:"stroke-dashoffset",array:"stroke-dasharray"},cD={offset:"strokeDashoffset",array:"strokeDasharray"},cE=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function cF(a,{attrX:b,attrY:c,attrScale:d,pathLength:e,pathSpacing:f=1,pathOffset:g=0,...h},i,j,k){if(cB(a,h,j),i){a.style.viewBox&&(a.attrs.viewBox=a.style.viewBox);return}a.attrs=a.style,a.style={};let{attrs:l,style:m}=a;for(let a of(l.transform&&(m.transform=l.transform,delete l.transform),(m.transform||l.transformOrigin)&&(m.transformOrigin=l.transformOrigin??"50% 50%",delete l.transformOrigin),m.transform&&(m.transformBox=k?.transformBox??"fill-box",delete l.transformBox),cE))void 0!==l[a]&&(m[a]=l[a],delete l[a]);void 0!==b&&(l.x=b),void 0!==c&&(l.y=c),void 0!==d&&(l.scale=d),void 0!==e&&function(a,b,c=1,d=0,e=!0){a.pathLength=1;let f=e?cC:cD;a[f.offset]=`${-d}`,a[f.array]=`${b} ${c}`}(l,e,f,g,!1)}let cG=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),cH=a=>"string"==typeof a&&"svg"===a.toLowerCase();function cI(a,{style:b,vars:c},d,e){let f,g=a.style;for(f in b)g[f]=b[f];for(f in e?.applyProjectionStyles(g,d),c)g.setProperty(f,c[f])}function cJ(a,b){return b.max===b.min?0:a/(b.max-b.min)*100}let cK={correct:(a,b)=>{if(!b.target)return a;if("string"==typeof a)if(!a1.test(a))return a;else a=parseFloat(a);let c=cJ(a,b.target.x),d=cJ(a,b.target.y);return`${c}% ${d}%`}},cL=(a,b,c)=>a+(b-a)*c,cM={borderRadius:{...cK,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cK,borderTopRightRadius:cK,borderBottomLeftRadius:cK,borderBottomRightRadius:cK,boxShadow:{correct:(a,{treeScale:b,projectionDelta:c})=>{let d=bf.parse(a);if(d.length>5)return a;let e=bf.createTransformer(a),f=+("number"!=typeof d[0]),g=c.x.scale*b.x,h=c.y.scale*b.y;d[0+f]/=g,d[1+f]/=h;let i=cL(g,h,.5);return"number"==typeof d[2+f]&&(d[2+f]/=i),"number"==typeof d[3+f]&&(d[3+f]/=i),e(d)}}};function cN(a,{layout:b,layoutId:c}){return aN.has(a)||a.startsWith("origin")||(b||void 0!==c)&&(!!cM[a]||"opacity"===a)}function cO(a,b,c){let d=a.style,e=b?.style,f={};if(!d)return f;for(let b in d)(bs(d[b])||e&&bs(e[b])||cN(b,a)||c?.getValue(b)?.liveStyle!==void 0)&&(f[b]=d[b]);return f}function cP(a,b,c){let d=cO(a,b,c);for(let c in a)(bs(a[c])||bs(b[c]))&&(d[-1!==aM.indexOf(c)?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c]=a[c]);return d}class cQ extends cw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=br}getBaseTargetFromProps(a,b){return a[b]}readValueFromInstance(a,b){if(aN.has(b)){let a=bn(b);return a&&a.default||0}return b=cG.has(b)?b:cx(b),a.getAttribute(b)}scrapeMotionValuesFromProps(a,b,c){return cP(a,b,c)}build(a,b,c){cF(a,b,this.isSVGTag,c.transformTemplate,c.style)}renderInstance(a,b,c,d){for(let c in cI(a,b,void 0,d),b.attrs)a.setAttribute(cG.has(c)?c:cx(c),b.attrs[c])}mount(a){this.isSVGTag=cH(a.tagName),super.mount(a)}}function cR({top:a,left:b,right:c,bottom:d}){return{x:{min:b,max:c},y:{min:a,max:d}}}function cS(a){return void 0===a||1===a}function cT({scale:a,scaleX:b,scaleY:c}){return!cS(a)||!cS(b)||!cS(c)}function cU(a){return cT(a)||cV(a)||a.z||a.rotate||a.rotateX||a.rotateY||a.skewX||a.skewY}function cV(a){var b,c;return(b=a.x)&&"0%"!==b||(c=a.y)&&"0%"!==c}function cW(a,b,c,d,e){return void 0!==e&&(a=d+e*(a-d)),d+c*(a-d)+b}function cX(a,b=0,c=1,d,e){a.min=cW(a.min,b,c,d,e),a.max=cW(a.max,b,c,d,e)}function cY(a,{x:b,y:c}){cX(a.x,b.translate,b.scale,b.originPoint),cX(a.y,c.translate,c.scale,c.originPoint)}function cZ(a,b){a.min=a.min+b,a.max=a.max+b}function c$(a,b,c,d,e=.5){let f=cL(a.min,a.max,e);cX(a,b,c,f,d)}function c_(a,b){c$(a.x,b.x,b.scaleX,b.scale,b.originX),c$(a.y,b.y,b.scaleY,b.scale,b.originY)}function c0(a,b){return cR(function(a,b){if(!b)return a;let c=b({x:a.left,y:a.top}),d=b({x:a.right,y:a.bottom});return{top:c.y,left:c.x,bottom:d.y,right:d.x}}(a.getBoundingClientRect(),b))}class c1 extends cw{constructor(){super(...arguments),this.type="html",this.renderInstance=cI}readValueFromInstance(a,b){if(aN.has(b))return this.projection?.isProjecting?bN(b):((a,b)=>{let{transform:c="none"}=getComputedStyle(a);return bO(c,b)})(a,b);{let c=window.getComputedStyle(a),d=(bA(b)?c.getPropertyValue(b):c[b])||0;return"string"==typeof d?d.trim():d}}measureInstanceViewportBox(a,{transformPagePoint:b}){return c0(a,b)}build(a,b,c){cB(a,b,c.transformTemplate)}scrapeMotionValuesFromProps(a,b,c){return cO(a,b,c)}}let c2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function c3(a){if("string"!=typeof a||a.includes("-"));else if(c2.indexOf(a)>-1||/[A-Z]/u.test(a))return!0;return!1}let c4=(0,J.createContext)({}),c5=((0,J.createContext)({strict:!1}),(0,J.createContext)({transformPagePoint:a=>a,isStatic:!1,reducedMotion:"never"})),c6=(0,J.createContext)({});function c7(a){return Array.isArray(a)?a.join(" "):a}let c8=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function c9(a,b,c){for(let d in b)bs(b[d])||cN(d,c)||(a[d]=b[d])}let da=()=>({...c8(),attrs:{}}),db=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function dc(a){return a.startsWith("while")||a.startsWith("drag")&&"draggable"!==a||a.startsWith("layout")||a.startsWith("onTap")||a.startsWith("onPan")||a.startsWith("onLayout")||db.has(a)}let dd=a=>!dc(a);try{h=(()=>{let a=Error("Cannot find module '@emotion/is-prop-valid'");throw a.code="MODULE_NOT_FOUND",a})().default,"function"==typeof h&&(dd=a=>a.startsWith("on")?!dc(a):h(a))}catch{}function de(a){return bs(a)?a.get():a}let df=(0,J.createContext)(null),dg=a=>(b,c)=>{let d,e=(0,J.useContext)(c6),f=(0,J.useContext)(df),g=()=>(function({scrapeMotionValuesFromProps:a,createRenderState:b},c,d,e){return{latestValues:function(a,b,c,d){let e={},f=d(a,{});for(let a in f)e[a]=de(f[a]);let{initial:g,animate:h}=a,i=cp(a),j=cq(a);b&&j&&!i&&!1!==a.inherit&&(void 0===g&&(g=b.initial),void 0===h&&(h=b.animate));let k=!!c&&!1===c.initial,l=(k=k||!1===g)?h:g;if(l&&"boolean"!=typeof l&&!cl(l)){let b=Array.isArray(l)?l:[l];for(let c=0;c<b.length;c++){let d=cs(a,b[c]);if(d){let{transitionEnd:a,transition:b,...c}=d;for(let a in c){let b=c[a];if(Array.isArray(b)){let a=k?b.length-1:0;b=b[a]}null!==b&&(e[a]=b)}for(let b in a)e[b]=a[b]}}}return e}(c,d,e,a),renderState:b()}})(a,b,e,f);return c?g():(null===(d=(0,J.useRef)(null)).current&&(d.current=g()),d.current)},dh=dg({scrapeMotionValuesFromProps:cO,createRenderState:c8}),di=dg({scrapeMotionValuesFromProps:cP,createRenderState:da}),dj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dk=!1,dl=Symbol.for("motionComponentSymbol"),dm="data-"+cx("framerAppearId"),dn=(0,J.createContext)({});function dp(a){return a&&"object"==typeof a&&Object.prototype.hasOwnProperty.call(a,"current")}function dq(a,{forwardMotionProps:b=!1,type:c}={},d,e){d&&function(a){let b=(!function(){if(dk)return;let a={};for(let b in dj)a[b]={isEnabled:a=>dj[b].some(b=>!!a[b])};cu=a,dk=!0}(),cu);for(let c in a)b[c]={...b[c],...a[c]};cu=b}(d);let f=c?"svg"===c:c3(a),g=f?di:dh;function h(c,d){var e;let h,i,j,k={...(0,J.useContext)(c5),...c,layoutId:function({layoutId:a}){let b=(0,J.useContext)(c4).id;return b&&void 0!==a?b+"-"+a:a}(c)},{isStatic:l}=k,m=function(a){let{initial:b,animate:c}=function(a,b){if(cp(a)){let{initial:b,animate:c}=a;return{initial:!1===b||cm(b)?b:void 0,animate:cm(c)?c:void 0}}return!1!==a.inherit?b:{}}(a,(0,J.useContext)(c6));return(0,J.useMemo)(()=>({initial:b,animate:c}),[c7(b),c7(c)])}(c),n=g(c,l);return(0,I.jsxs)(c6.Provider,{value:m,children:[h&&m.visualElement?(0,I.jsx)(h,{visualElement:m.visualElement,...k}):null,function(a,b,c,{latestValues:d},e,f=!1,g){let h=(g??c3(a)?function(a,b,c,d){let e=(0,J.useMemo)(()=>{let c=da();return cF(c,b,cH(d),a.transformTemplate,a.style),{...c.attrs,style:{...c.style}}},[b]);if(a.style){let b={};c9(b,a.style,a),e.style={...b,...e.style}}return e}:function(a,b){let c,d,e={},f=(c=a.style||{},c9(d={},c,a),Object.assign(d,function({transformTemplate:a},b){return(0,J.useMemo)(()=>{let c=c8();return cB(c,b,a),Object.assign({},c.vars,c.style)},[b])}(a,b)),d);return a.drag&&!1!==a.dragListener&&(e.draggable=!1,f.userSelect=f.WebkitUserSelect=f.WebkitTouchCallout="none",f.touchAction=!0===a.drag?"none":`pan-${"x"===a.drag?"y":"x"}`),void 0===a.tabIndex&&(a.onTap||a.onTapStart||a.whileTap)&&(e.tabIndex=0),e.style=f,e})(b,d,e,a),i=function(a,b,c){let d={};for(let e in a)("values"!==e||"object"!=typeof a.values)&&(dd(e)||!0===c&&dc(e)||!b&&!dc(e)||a.draggable&&e.startsWith("onDrag"))&&(d[e]=a[e]);return d}(b,"string"==typeof a,f),j=a!==J.Fragment?{...i,...h,ref:c}:{},{children:k}=b,l=(0,J.useMemo)(()=>bs(k)?k.get():k,[k]);return(0,J.createElement)(a,{...j,children:l})}(a,c,(e=m.visualElement,i=(0,J.useRef)(d),(0,J.useInsertionEffect)(()=>{i.current=d}),j=(0,J.useRef)(null),(0,J.useCallback)(a=>{a&&n.onMount?.(a),e&&(a?e.mount(a):e.unmount());let b=i.current;if("function"==typeof b)if(a){let c=b(a);"function"==typeof c&&(j.current=c)}else j.current?(j.current(),j.current=null):b(a);else b&&(b.current=a)},[e])),n,l,b,f)]})}h.displayName=`motion.${"string"==typeof a?a:`create(${a.displayName??a.name??""})`}`;let i=(0,J.forwardRef)(h);return i[dl]=a,i}J.useEffect;class dr{constructor(a){this.isMounted=!1,this.node=a}update(){}}function ds(a,b,c){let d=a.getProps();return cs(d,b,void 0!==c?c:d.custom,a)}function dt(a,b){return a?.[b]??a?.default??a}let du=a=>Array.isArray(a);function dv(a,b){let c=a.getValue("willChange");if(bs(c)&&c.add)return c.add(b);if(!c&&bV.WillChange){let c=new bV.WillChange("auto");a.addValue("willChange",c),c.add(b)}}let dw=a=>1e3*a,dx=(a,b)=>c=>b(a(c)),dy=(...a)=>a.reduce(dx),dz={layout:0,mainThread:0,waapi:0};function dA(a,b,c){return(c<0&&(c+=1),c>1&&(c-=1),c<1/6)?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}function dB(a,b){return c=>c>0?b:a}let dC=(a,b,c)=>{let d=a*a,e=c*(b*b-d)+d;return e<0?0:Math.sqrt(e)},dD=[aZ,aY,a5];function dE(a){let b=dD.find(b=>b.test(a));if(bx(!!b,`'${a}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!b)return!1;let c=b.parse(a);return b===a5&&(c=function({hue:a,saturation:b,lightness:c,alpha:d}){a/=360,c/=100;let e=0,f=0,g=0;if(b/=100){let d=c<.5?c*(1+b):c+b-c*b,h=2*c-d;e=dA(h,d,a+1/3),f=dA(h,d,a),g=dA(h,d,a-1/3)}else e=f=g=c;return{red:Math.round(255*e),green:Math.round(255*f),blue:Math.round(255*g),alpha:d}}(c)),c}let dF=(a,b)=>{let c=dE(a),d=dE(b);if(!c||!d)return dB(a,b);let e={...c};return a=>(e.red=dC(c.red,d.red,a),e.green=dC(c.green,d.green,a),e.blue=dC(c.blue,d.blue,a),e.alpha=cL(c.alpha,d.alpha,a),aY.transform(e))},dG=new Set(["none","hidden"]);function dH(a,b){return c=>cL(a,b,c)}function dI(a){return"number"==typeof a?dH:"string"==typeof a?bC(a)?dB:a6.test(a)?dF:dL:Array.isArray(a)?dJ:"object"==typeof a?a6.test(a)?dF:dK:dB}function dJ(a,b){let c=[...a],d=c.length,e=a.map((a,c)=>dI(a)(a,b[c]));return a=>{for(let b=0;b<d;b++)c[b]=e[b](a);return c}}function dK(a,b){let c={...a,...b},d={};for(let e in c)void 0!==a[e]&&void 0!==b[e]&&(d[e]=dI(a[e])(a[e],b[e]));return a=>{for(let b in d)c[b]=d[b](a);return c}}let dL=(a,b)=>{let c=bf.createTransformer(b),d=bb(a),e=bb(b);if(!(d.indexes.var.length===e.indexes.var.length&&d.indexes.color.length===e.indexes.color.length&&d.indexes.number.length>=e.indexes.number.length))return bx(!0,`Complex values '${a}' and '${b}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),dB(a,b);if(dG.has(a)&&!e.values.length||dG.has(b)&&!d.values.length)return dG.has(a)?c=>c<=0?a:b:c=>c>=1?b:a;return dy(dJ(function(a,b){let c=[],d={color:0,var:0,number:0};for(let e=0;e<b.values.length;e++){let f=b.types[e],g=a.indexes[f][d[f]],h=a.values[g]??0;c[e]=h,d[f]++}return c}(d,e),e.values),c)};function dM(a,b,c){return"number"==typeof a&&"number"==typeof b&&"number"==typeof c?cL(a,b,c):dI(a)(a,b)}let dN=a=>{let b=({timestamp:b})=>a(b);return{start:(a=!0)=>bY.update(b,a),stop:()=>bZ(b),now:()=>b$.isProcessing?b$.timestamp:cf.now()}},dO=(a,b,c=10)=>{let d="",e=Math.max(Math.round(b/c),2);for(let b=0;b<e;b++)d+=Math.round(1e4*a(b/(e-1)))/1e4+", ";return`linear(${d.substring(0,d.length-2)})`};function dP(a){let b=0,c=a.next(b);for(;!c.done&&b<2e4;)b+=50,c=a.next(b);return b>=2e4?1/0:b}function dQ(a,b,c){var d,e;let f=Math.max(b-5,0);return d=c-a(f),(e=b-f)?1e3/e*d:0}let dR=.01,dS=2,dT=.005,dU=.5;function dV(a,b){return a*Math.sqrt(1-b*b)}let dW=["duration","bounce"],dX=["stiffness","damping","mass"];function dY(a,b){return b.some(b=>void 0!==a[b])}function dZ(a=.3,b=.3){let c,d="object"!=typeof a?{visualDuration:a,keyframes:[0,1],bounce:b}:a,{restSpeed:e,restDelta:f}=d,g=d.keyframes[0],h=d.keyframes[d.keyframes.length-1],i={done:!1,value:g},{stiffness:j,damping:k,mass:l,duration:m,velocity:n,isResolvedFromDuration:o}=function(a){let b={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...a};if(!dY(a,dX)&&dY(a,dW))if(a.visualDuration){let c=2*Math.PI/(1.2*a.visualDuration),d=c*c,e=2*aO(.05,1,1-(a.bounce||0))*Math.sqrt(d);b={...b,mass:1,stiffness:d,damping:e}}else{let c=function({duration:a=800,bounce:b=.3,velocity:c=0,mass:d=1}){let e,f;bx(a<=dw(10),"Spring duration must be 10 seconds or less","spring-duration-limit");let g=1-b;g=aO(.05,1,g),a=aO(.01,10,a/1e3),g<1?(e=b=>{let d=b*g,e=d*a;return .001-(d-c)/dV(b,g)*Math.exp(-e)},f=b=>{let d=b*g*a,f=Math.pow(g,2)*Math.pow(b,2)*a,h=Math.exp(-d),i=dV(Math.pow(b,2),g);return(d*c+c-f)*h*(-e(b)+.001>0?-1:1)/i}):(e=b=>-.001+Math.exp(-b*a)*((b-c)*a+1),f=b=>a*a*(c-b)*Math.exp(-b*a));let h=function(a,b,c){let d=c;for(let c=1;c<12;c++)d-=a(d)/b(d);return d}(e,f,5/a);if(a=dw(a),isNaN(h))return{stiffness:100,damping:10,duration:a};{let b=Math.pow(h,2)*d;return{stiffness:b,damping:2*g*Math.sqrt(d*b),duration:a}}}(a);(b={...b,...c,mass:1}).isResolvedFromDuration=!0}return b}({...d,velocity:-((d.velocity||0)/1e3)}),p=n||0,q=k/(2*Math.sqrt(j*l)),r=h-g,s=Math.sqrt(j/l)/1e3,t=5>Math.abs(r);if(e||(e=t?dR:dS),f||(f=t?dT:dU),q<1){let a=dV(s,q);c=b=>h-Math.exp(-q*s*b)*((p+q*s*r)/a*Math.sin(a*b)+r*Math.cos(a*b))}else if(1===q)c=a=>h-Math.exp(-s*a)*(r+(p+s*r)*a);else{let a=s*Math.sqrt(q*q-1);c=b=>{let c=Math.exp(-q*s*b),d=Math.min(a*b,300);return h-c*((p+q*s*r)*Math.sinh(d)+a*r*Math.cosh(d))/a}}let u={calculatedDuration:o&&m||null,next:a=>{let b=c(a);if(o)i.done=a>=m;else{let d=0===a?p:0;q<1&&(d=0===a?dw(p):dQ(c,a,b));let g=Math.abs(h-b)<=f;i.done=Math.abs(d)<=e&&g}return i.value=i.done?h:b,i},toString:()=>{let a=Math.min(dP(u),2e4),b=dO(b=>u.next(a*b).value,a,30);return a+"ms "+b},toTransition:()=>{}};return u}function d$({keyframes:a,velocity:b=0,power:c=.8,timeConstant:d=325,bounceDamping:e=10,bounceStiffness:f=500,modifyTarget:g,min:h,max:i,restDelta:j=.5,restSpeed:k}){let l,m,n=a[0],o={done:!1,value:n},p=c*b,q=n+p,r=void 0===g?q:g(q);r!==q&&(p=r-n);let s=a=>-p*Math.exp(-a/d),t=a=>r+s(a),u=a=>{let b=s(a),c=t(a);o.done=Math.abs(b)<=j,o.value=o.done?r:c},v=a=>{let b;if(b=o.value,void 0!==h&&b<h||void 0!==i&&b>i){var c;l=a,m=dZ({keyframes:[o.value,(c=o.value,void 0===h?i:void 0===i||Math.abs(h-c)<Math.abs(i-c)?h:i)],velocity:dQ(t,a,o.value),damping:e,stiffness:f,restDelta:j,restSpeed:k})}};return v(0),{calculatedDuration:null,next:a=>{let b=!1;return(m||void 0!==l||(b=!0,u(a),v(a)),void 0!==l&&a>=l)?m.next(a-l):(b||u(a),o)}}}dZ.applyToOptions=a=>{let b=function(a,b=100,c){let d=c({...a,keyframes:[0,b]}),e=Math.min(dP(d),2e4);return{type:"keyframes",ease:a=>d.next(e*a).value/b,duration:e/1e3}}(a,100,dZ);return a.ease=b.ease,a.duration=dw(b.duration),a.type="keyframes",a};let d_=(a,b,c)=>(((1-3*c+3*b)*a+(3*c-6*b))*a+3*b)*a;function d0(a,b,c,d){return a===b&&c===d?bU:e=>0===e||1===e?e:d_(function(a,b,c,d,e){let f,g,h=0;do(f=d_(g=b+(c-b)/2,d,e)-a)>0?c=g:b=g;while(Math.abs(f)>1e-7&&++h<12)return g}(e,0,1,a,c),b,d)}let d1=d0(.42,0,1,1),d2=d0(0,0,.58,1),d3=d0(.42,0,.58,1),d4=a=>b=>b<=.5?a(2*b)/2:(2-a(2*(1-b)))/2,d5=a=>b=>1-a(1-b),d6=d0(.33,1.53,.69,.99),d7=d5(d6),d8=d4(d7),d9=a=>(a*=2)<1?.5*d7(a):.5*(2-Math.pow(2,-10*(a-1))),ea=a=>1-Math.sin(Math.acos(a)),eb=d5(ea),ec=d4(ea),ed=a=>Array.isArray(a)&&"number"==typeof a[0],ee={linear:bU,easeIn:d1,easeInOut:d3,easeOut:d2,circIn:ea,circInOut:ec,circOut:eb,backIn:d7,backInOut:d8,backOut:d6,anticipate:d9},ef=a=>{if(ed(a)){by(4===a.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[b,c,d,e]=a;return d0(b,c,d,e)}return"string"==typeof a?(by(void 0!==ee[a],`Invalid easing type '${a}'`,"invalid-easing-type"),ee[a]):a},eg=(a,b,c)=>{let d=b-a;return 0===d?1:(c-a)/d};function eh({duration:a=300,keyframes:b,times:c,ease:d="easeInOut"}){var e;let f,g=Array.isArray(d)&&"number"!=typeof d[0]?d.map(ef):ef(d),h={done:!1,value:b[0]},i=function(a,b,{clamp:c=!0,ease:d,mixer:e}={}){let f=a.length;if(by(f===b.length,"Both input and output ranges must be the same length","range-length"),1===f)return()=>b[0];if(2===f&&b[0]===b[1])return()=>b[1];let g=a[0]===a[1];a[0]>a[f-1]&&(a=[...a].reverse(),b=[...b].reverse());let h=function(a,b,c){let d=[],e=c||bV.mix||dM,f=a.length-1;for(let c=0;c<f;c++){let f=e(a[c],a[c+1]);b&&(f=dy(Array.isArray(b)?b[c]||bU:b,f)),d.push(f)}return d}(b,d,e),i=h.length,j=c=>{if(g&&c<a[0])return b[0];let d=0;if(i>1)for(;d<a.length-2&&!(c<a[d+1]);d++);let e=eg(a[d],a[d+1],c);return h[d](e)};return c?b=>j(aO(a[0],a[f-1],b)):j}((e=c&&c.length===b.length?c:(!function(a,b){let c=a[a.length-1];for(let d=1;d<=b;d++){let e=eg(0,b,d);a.push(cL(c,1,e))}}(f=[0],b.length-1),f),e.map(b=>b*a)),b,{ease:Array.isArray(g)?g:b.map(()=>g||d3).splice(0,b.length-1)});return{calculatedDuration:a,next:b=>(h.value=i(b),h.done=b>=a,h)}}let ei=a=>null!==a;function ej(a,{repeat:b,repeatType:c="loop"},d,e=1){let f=a.filter(ei),g=e<0||b&&"loop"!==c&&b%2==1?0:f.length-1;return g&&void 0!==d?d:f[g]}let ek={decay:d$,inertia:d$,tween:eh,keyframes:eh,spring:dZ};function el(a){"string"==typeof a.type&&(a.type=ek[a.type])}class em{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(a=>{this.resolve=a})}notifyFinished(){this.resolve()}then(a,b){return this.finished.then(a,b)}}let en=a=>a/100;class eo extends em{constructor(a){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:a}=this.options;a&&a.updatedAt!==cf.now()&&this.tick(cf.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},dz.mainThread++,this.options=a,this.initAnimation(),this.play(),!1===a.autoplay&&this.pause()}initAnimation(){let{options:a}=this;el(a);let{type:b=eh,repeat:c=0,repeatDelay:d=0,repeatType:e,velocity:f=0}=a,{keyframes:g}=a,h=b||eh;h!==eh&&"number"!=typeof g[0]&&(this.mixKeyframes=dy(en,dM(g[0],g[1])),g=[0,100]);let i=h({...a,keyframes:g});"mirror"===e&&(this.mirroredGenerator=h({...a,keyframes:[...g].reverse(),velocity:-f})),null===i.calculatedDuration&&(i.calculatedDuration=dP(i));let{calculatedDuration:j}=i;this.calculatedDuration=j,this.resolvedDuration=j+d,this.totalDuration=this.resolvedDuration*(c+1)-d,this.generator=i}updateTime(a){let b=Math.round(a-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=b}tick(a,b=!1){let{generator:c,totalDuration:d,mixKeyframes:e,mirroredGenerator:f,resolvedDuration:g,calculatedDuration:h}=this;if(null===this.startTime)return c.next(0);let{delay:i=0,keyframes:j,repeat:k,repeatType:l,repeatDelay:m,type:n,onUpdate:o,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,a):this.speed<0&&(this.startTime=Math.min(a-d/this.speed,this.startTime)),b?this.currentTime=a:this.updateTime(a);let q=this.currentTime-i*(this.playbackSpeed>=0?1:-1),r=this.playbackSpeed>=0?q<0:q>d;this.currentTime=Math.max(q,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=d);let s=this.currentTime,t=c;if(k){let a=Math.min(this.currentTime,d)/g,b=Math.floor(a),c=a%1;!c&&a>=1&&(c=1),1===c&&b--,(b=Math.min(b,k+1))%2&&("reverse"===l?(c=1-c,m&&(c-=m/g)):"mirror"===l&&(t=f)),s=aO(0,1,c)*g}let u=r?{done:!1,value:j[0]}:t.next(s);e&&(u.value=e(u.value));let{done:v}=u;r||null===h||(v=this.playbackSpeed>=0?this.currentTime>=d:this.currentTime<=0);let w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&v);return w&&n!==d$&&(u.value=ej(j,this.options,p,this.speed)),o&&o(u.value),w&&this.finish(),u}then(a,b){return this.finished.then(a,b)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:a=0}=this.options||{};return this.duration+a/1e3}get time(){return this.currentTime/1e3}set time(a){a=dw(a),this.currentTime=a,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=a:this.driver&&(this.startTime=this.driver.now()-a/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(a){this.updateTime(cf.now());let b=this.playbackSpeed!==a;this.playbackSpeed=a,b&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:a=dN,startTime:b}=this.options;this.driver||(this.driver=a(a=>this.tick(a))),this.options.onPlay?.();let c=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=c):null!==this.holdTime?this.startTime=c-this.holdTime:this.startTime||(this.startTime=b??c),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(cf.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,dz.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(a){return this.startTime=0,this.tick(a,!0)}attachTimeline(a){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),a.observe(this)}}function ep(a){let b;return()=>(void 0===b&&(b=a()),b)}let eq=ep(()=>void 0!==window.ScrollTimeline),er={},es=(c=ep(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(a){return!1}return!0}),()=>er.linearEasing??c()),et=([a,b,c,d])=>`cubic-bezier(${a}, ${b}, ${c}, ${d})`,eu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:et([0,.65,.55,1]),circOut:et([.55,0,1,.45]),backIn:et([.31,.01,.66,-.59]),backOut:et([.33,1.53,.69,.99])};function ev(a){return"function"==typeof a&&"applyToOptions"in a}class ew extends em{constructor(a){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!a)return;const{element:b,name:c,keyframes:d,pseudoElement:e,allowFlatten:f=!1,finalKeyframe:g,onComplete:h}=a;this.isPseudoElement=!!e,this.allowFlatten=f,this.options=a,by("string"!=typeof a.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const i=function({type:a,...b}){return ev(a)&&es()?a.applyToOptions(b):(b.duration??(b.duration=300),b.ease??(b.ease="easeOut"),b)}(a);this.animation=function(a,b,c,{delay:d=0,duration:e=300,repeat:f=0,repeatType:g="loop",ease:h="easeOut",times:i}={},j){let k={[b]:c};i&&(k.offset=i);let l=function a(b,c){if(b)return"function"==typeof b?es()?dO(b,c):"ease-out":ed(b)?et(b):Array.isArray(b)?b.map(b=>a(b,c)||eu.easeOut):eu[b]}(h,e);Array.isArray(l)&&(k.easing=l);let m={delay:d,duration:e,easing:Array.isArray(l)?"linear":l,fill:"both",iterations:f+1,direction:"reverse"===g?"alternate":"normal"};j&&(m.pseudoElement=j);let n=a.animate(k,m);return n}(b,c,d,i,e),!1===i.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!e){let a=ej(d,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(a):c.startsWith("--")?b.style.setProperty(c,a):b.style[c]=a,this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(a){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:a}=this;"idle"!==a&&"finished"!==a&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:a=0}=this.options||{};return this.duration+a/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(a){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=dw(a)}get speed(){return this.animation.playbackRate}set speed(a){a<0&&(this.finishedTime=null),this.animation.playbackRate=a}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(a){this.manualStartTime=this.animation.startTime=a}attachTimeline({timeline:a,observe:b}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,a&&eq())?(this.animation.timeline=a,bU):b(this)}}let ex={anticipate:d9,backInOut:d8,circInOut:ec};class ey extends ew{constructor(a){!function(a){"string"==typeof a.ease&&a.ease in ex&&(a.ease=ex[a.ease])}(a),el(a),super(a),void 0!==a.startTime&&(this.startTime=a.startTime),this.options=a}updateMotionValue(a){let{motionValue:b,onUpdate:c,onComplete:d,element:e,...f}=this.options;if(!b)return;if(void 0!==a)return void b.set(a);let g=new eo({...f,autoplay:!1}),h=Math.max(10,cf.now()-this.startTime),i=aO(0,10,h-10);b.setWithVelocity(g.sample(Math.max(0,h-i)).value,g.sample(h).value,i),g.stop()}}let ez=(a,b)=>"zIndex"!==b&&!!("number"==typeof a||Array.isArray(a)||"string"==typeof a&&(bf.test(a)||"0"===a)&&!a.startsWith("url("));function eA(a){a.duration=0,a.type="keyframes"}let eB=new Set(["opacity","clipPath","filter","transform"]),eC=ep(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class eD extends em{constructor({autoplay:a=!0,delay:b=0,type:c="keyframes",repeat:d=0,repeatDelay:e=0,repeatType:f="loop",keyframes:g,name:h,motionValue:i,element:j,...k}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=cf.now();const l={autoplay:a,delay:b,type:c,repeat:d,repeatDelay:e,repeatType:f,name:h,motionValue:i,element:j,...k},m=j?.KeyframeResolver||b6;this.keyframeResolver=new m(g,(a,b,c)=>this.onKeyframesResolved(a,b,l,!c),h,i,j),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(a,b,c,d){this.keyframeResolver=void 0;let{name:e,type:f,velocity:g,delay:h,isHandoff:i,onUpdate:j}=c;this.resolvedAt=cf.now(),!function(a,b,c,d){let e=a[0];if(null===e)return!1;if("display"===b||"visibility"===b)return!0;let f=a[a.length-1],g=ez(e,b),h=ez(f,b);return bx(g===h,`You are trying to animate ${b} from "${e}" to "${f}". "${g?f:e}" is not an animatable value.`,"value-not-animatable"),!!g&&!!h&&(function(a){let b=a[0];if(1===a.length)return!0;for(let c=0;c<a.length;c++)if(a[c]!==b)return!0}(a)||("spring"===c||ev(c))&&d)}(a,e,f,g)&&((bV.instantAnimations||!h)&&j?.(ej(a,c,b)),a[0]=a[a.length-1],eA(c),c.repeat=0);let k={startTime:d?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:b,...c,keyframes:a},l=!i&&function(a){let{motionValue:b,name:c,repeatDelay:d,repeatType:e,damping:f,type:g}=a;if(!(b?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:h,transformTemplate:i}=b.owner.getProps();return eC()&&c&&eB.has(c)&&("transform"!==c||!i)&&!h&&!d&&"mirror"!==e&&0!==f&&"inertia"!==g}(k),m=k.motionValue?.owner?.current,n=l?new ey({...k,element:m}):new eo(k);n.finished.then(()=>{this.notifyFinished()}).catch(bU),this.pendingTimeline&&(this.stopTimeline=n.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=n}get finished(){return this._animation?this.animation.finished:this._finished}then(a,b){return this.finished.finally(a).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),b3=!0,b5(),b4(),b3=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(a){this.animation.time=a}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(a){this.animation.speed=a}get startTime(){return this.animation.startTime}attachTimeline(a){return this._animation?this.stopTimeline=this.animation.attachTimeline(a):this.pendingTimeline=a,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let eE={type:"spring",stiffness:500,damping:25,restSpeed:10},eF={type:"keyframes",duration:.8},eG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eH=a=>null!==a,eI=(a,b,c,d={},e,f)=>g=>{let h=dt(d,a)||{},i=h.delay||d.delay||0,{elapsed:j=0}=d;j-=dw(i);let k={keyframes:Array.isArray(c)?c:[null,c],ease:"easeOut",velocity:b.getVelocity(),...h,delay:-j,onUpdate:a=>{b.set(a),h.onUpdate&&h.onUpdate(a)},onComplete:()=>{g(),h.onComplete&&h.onComplete()},name:a,motionValue:b,element:f?void 0:e};!function({when:a,delay:b,delayChildren:c,staggerChildren:d,staggerDirection:e,repeat:f,repeatType:g,repeatDelay:h,from:i,elapsed:j,...k}){return!!Object.keys(k).length}(h)&&Object.assign(k,((a,{keyframes:b})=>b.length>2?eF:aN.has(a)?a.startsWith("scale")?{type:"spring",stiffness:550,damping:0===b[1]?2*Math.sqrt(550):30,restSpeed:10}:eE:eG)(a,k)),k.duration&&(k.duration=dw(k.duration)),k.repeatDelay&&(k.repeatDelay=dw(k.repeatDelay)),void 0!==k.from&&(k.keyframes[0]=k.from);let l=!1;if(!1!==k.type&&(0!==k.duration||k.repeatDelay)||(eA(k),0===k.delay&&(l=!0)),(bV.instantAnimations||bV.skipAnimations)&&(l=!0,eA(k),k.delay=0),k.allowFlatten=!h.type&&!h.ease,l&&!f&&void 0!==b.get()){let a=function(a,{repeat:b,repeatType:c="loop"},d){let e=a.filter(eH),f=b&&"loop"!==c&&b%2==1?0:e.length-1;return e[f]}(k.keyframes,h);if(void 0!==a)return void bY.update(()=>{k.onUpdate(a),k.onComplete()})}return h.isSync?new eo(k):new eD(k)};function eJ(a,b,{delay:c=0,transitionOverride:d,type:e}={}){let{transition:f=a.getDefaultTransition(),transitionEnd:g,...h}=b;d&&(f=d);let i=[],j=e&&a.animationState&&a.animationState.getState()[e];for(let b in h){let d=a.getValue(b,a.latestValues[b]??null),e=h[b];if(void 0===e||j&&function({protectedKeys:a,needsAnimating:b},c){let d=a.hasOwnProperty(c)&&!0!==b[c];return b[c]=!1,d}(j,b))continue;let g={delay:c,...dt(f||{},b)},k=d.get();if(void 0!==k&&!d.isAnimating&&!Array.isArray(e)&&e===k&&!g.velocity)continue;let l=!1;if(window.MotionHandoffAnimation){let c=a.props[dm];if(c){let a=window.MotionHandoffAnimation(c,b,bY);null!==a&&(g.startTime=a,l=!0)}}dv(a,b),d.start(eI(b,d,e,a.shouldReduceMotion&&bt.has(b)?{type:!1}:g,a,l));let m=d.animation;m&&i.push(m)}return g&&Promise.all(i).then(()=>{bY.update(()=>{g&&function(a,b){let{transitionEnd:c={},transition:d={},...e}=ds(a,b)||{};for(let b in e={...e,...c}){var f;let c=du(f=e[b])?f[f.length-1]||0:f;a.hasValue(b)?a.getValue(b).set(c):a.addValue(b,ch(c))}}(a,g)})}),i}function eK(a,b,c,d=0,e=1){let f=Array.from(a).sort((a,b)=>a.sortNodePosition(b)).indexOf(b),g=a.size,h=(g-1)*d;return"function"==typeof c?c(f,g):1===e?f*d:h-f*d}function eL(a,b,c={}){let d=ds(a,b,"exit"===c.type?a.presenceContext?.custom:void 0),{transition:e=a.getDefaultTransition()||{}}=d||{};c.transitionOverride&&(e=c.transitionOverride);let f=d?()=>Promise.all(eJ(a,d,c)):()=>Promise.resolve(),g=a.variantChildren&&a.variantChildren.size?(d=0)=>{let{delayChildren:f=0,staggerChildren:g,staggerDirection:h}=e;return function(a,b,c=0,d=0,e=0,f=1,g){let h=[];for(let i of a.variantChildren)i.notify("AnimationStart",b),h.push(eL(i,b,{...g,delay:c+("function"==typeof d?0:d)+eK(a.variantChildren,i,d,e,f)}).then(()=>i.notify("AnimationComplete",b)));return Promise.all(h)}(a,b,d,f,g,h,c)}:()=>Promise.resolve(),{when:h}=e;if(!h)return Promise.all([f(),g(c.delay)]);{let[a,b]="beforeChildren"===h?[f,g]:[g,f];return a().then(()=>b())}}let eM=co.length;function eN(a,b){if(!Array.isArray(b))return!1;let c=b.length;if(c!==a.length)return!1;for(let d=0;d<c;d++)if(b[d]!==a[d])return!1;return!0}let eO=[...cn].reverse(),eP=cn.length;function eQ(a=!1){return{isActive:a,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function eR(){return{animate:eQ(!0),whileInView:eQ(),whileHover:eQ(),whileTap:eQ(),whileDrag:eQ(),whileFocus:eQ(),exit:eQ()}}let eS=0;function eT(a){return[a("x"),a("y")]}let eU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function eV(a){return eU.has(a.tagName)||!0===a.isContentEditable}function eW(a,b,c,d={passive:!0}){return a.addEventListener(b,c,d),()=>a.removeEventListener(b,c)}let eX={x:!1,y:!1};function eY(a){return a.max-a.min}function eZ(a,b,c,d=.5){a.origin=d,a.originPoint=cL(b.min,b.max,a.origin),a.scale=eY(c)/eY(b),a.translate=cL(c.min,c.max,a.origin)-a.originPoint,(a.scale>=.9999&&a.scale<=1.0001||isNaN(a.scale))&&(a.scale=1),(a.translate>=-.01&&a.translate<=.01||isNaN(a.translate))&&(a.translate=0)}function e$(a,b,c,d){eZ(a.x,b.x,c.x,d?d.originX:void 0),eZ(a.y,b.y,c.y,d?d.originY:void 0)}function e_(a,b,c){a.min=c.min+b.min,a.max=a.min+eY(b)}function e0(a,b,c){a.min=b.min-c.min,a.max=a.min+eY(b)}function e1(a,b,c){e0(a.x,b.x,c.x),e0(a.y,b.y,c.y)}let e2=a=>"mouse"===a.pointerType?"number"!=typeof a.button||a.button<=0:!1!==a.isPrimary;function e3(a){return{point:{x:a.pageX,y:a.pageY}}}function e4(a,b,c,d){return eW(a,b,a=>e2(a)&&c(a,e3(a)),d)}let e5=({current:a})=>a?a.ownerDocument.defaultView:null,e6=(a,b)=>Math.abs(a-b),e7=new Set(["auto","scroll"]);class e8{constructor(a,b,{transformPagePoint:c,contextWindow:d=window,dragSnapToOrigin:e=!1,distanceThreshold:f=3,element:g}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=a=>{this.handleScroll(a.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{var a,b;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let c=fb(this.lastMoveEventInfo,this.history),d=null!==this.startEvent,e=(a=c.offset,b={x:0,y:0},Math.sqrt(e6(a.x,b.x)**2+e6(a.y,b.y)**2)>=this.distanceThreshold);if(!d&&!e)return;let{point:f}=c,{timestamp:g}=b$;this.history.push({...f,timestamp:g});let{onStart:h,onMove:i}=this.handlers;d||(h&&h(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,c)},this.handlePointerMove=(a,b)=>{this.lastMoveEvent=a,this.lastMoveEventInfo=e9(b,this.transformPagePoint),bY.update(this.updatePoint,!0)},this.handlePointerUp=(a,b)=>{this.end();let{onEnd:c,onSessionEnd:d,resumeAnimation:e}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&e&&e(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let f=fb("pointercancel"===a.type?this.lastMoveEventInfo:e9(b,this.transformPagePoint),this.history);this.startEvent&&c&&c(a,f),d&&d(a,f)},!e2(a))return;this.dragSnapToOrigin=e,this.handlers=b,this.transformPagePoint=c,this.distanceThreshold=f,this.contextWindow=d||window;const h=e9(e3(a),this.transformPagePoint),{point:i}=h,{timestamp:j}=b$;this.history=[{...i,timestamp:j}];const{onSessionStart:k}=b;k&&k(a,fb(h,this.history)),this.removeListeners=dy(e4(this.contextWindow,"pointermove",this.handlePointerMove),e4(this.contextWindow,"pointerup",this.handlePointerUp),e4(this.contextWindow,"pointercancel",this.handlePointerUp)),g&&this.startScrollTracking(g)}startScrollTracking(a){let b=a.parentElement;for(;b;){let a=getComputedStyle(b);(e7.has(a.overflowX)||e7.has(a.overflowY))&&this.scrollPositions.set(b,{x:b.scrollLeft,y:b.scrollTop}),b=b.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(a){let b=this.scrollPositions.get(a);if(!b)return;let c=a===window,d=c?{x:window.scrollX,y:window.scrollY}:{x:a.scrollLeft,y:a.scrollTop},e={x:d.x-b.x,y:d.y-b.y};(0!==e.x||0!==e.y)&&(c?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=e.x,this.lastMoveEventInfo.point.y+=e.y):this.history.length>0&&(this.history[0].x-=e.x,this.history[0].y-=e.y),this.scrollPositions.set(a,d),bY.update(this.updatePoint,!0))}updateHandlers(a){this.handlers=a}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),bZ(this.updatePoint)}}function e9(a,b){return b?{point:b(a.point)}:a}function fa(a,b){return{x:a.x-b.x,y:a.y-b.y}}function fb({point:a},b){return{point:a,delta:fa(a,fc(b)),offset:fa(a,b[0]),velocity:function(a,b){if(a.length<2)return{x:0,y:0};let c=a.length-1,d=null,e=fc(a);for(;c>=0&&(d=a[c],!(e.timestamp-d.timestamp>dw(.1)));)c--;if(!d)return{x:0,y:0};let f=(e.timestamp-d.timestamp)/1e3;if(0===f)return{x:0,y:0};let g={x:(e.x-d.x)/f,y:(e.y-d.y)/f};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}(b,.1)}}function fc(a){return a[a.length-1]}function fd(a,b,c){return{min:void 0!==b?a.min+b:void 0,max:void 0!==c?a.max+c-(a.max-a.min):void 0}}function fe(a,b){let c=b.min-a.min,d=b.max-a.max;return b.max-b.min<a.max-a.min&&([c,d]=[d,c]),{min:c,max:d}}function ff(a,b,c){return{min:fg(a,b),max:fg(a,c)}}function fg(a,b){return"number"==typeof a?a:a[b]||0}let fh=new WeakMap;class fi{constructor(a){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=br(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=a}start(a,{snapToCursor:b=!1,distanceThreshold:c}={}){let{presenceContext:d}=this.visualElement;if(d&&!1===d.isPresent)return;let e=a=>{b?(this.stopAnimation(),this.snapToCursor(e3(a).point)):this.pauseAnimation()},f=(a,b)=>{this.stopAnimation();let{drag:c,dragPropagation:d,onDragStart:e}=this.getProps();if(c&&!d&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(a){if("x"===a||"y"===a)if(eX[a])return null;else return eX[a]=!0,()=>{eX[a]=!1};return eX.x||eX.y?null:(eX.x=eX.y=!0,()=>{eX.x=eX.y=!1})}(c),!this.openDragLock))return;this.latestPointerEvent=a,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eT(a=>{let b=this.getAxisMotionValue(a).get()||0;if(a0.test(b)){let{projection:c}=this.visualElement;if(c&&c.layout){let d=c.layout.layoutBox[a];d&&(b=eY(d)*(parseFloat(b)/100))}}this.originPoint[a]=b}),e&&bY.postRender(()=>e(a,b)),dv(this.visualElement,"transform");let{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},g=(a,b)=>{this.latestPointerEvent=a,this.latestPanInfo=b;let{dragPropagation:c,dragDirectionLock:d,onDirectionLock:e,onDrag:f}=this.getProps();if(!c&&!this.openDragLock)return;let{offset:g}=b;if(d&&null===this.currentDirection){this.currentDirection=function(a,b=10){let c=null;return Math.abs(a.y)>b?c="y":Math.abs(a.x)>b&&(c="x"),c}(g),null!==this.currentDirection&&e&&e(this.currentDirection);return}this.updateAxis("x",b.point,g),this.updateAxis("y",b.point,g),this.visualElement.render(),f&&f(a,b)},h=(a,b)=>{this.latestPointerEvent=a,this.latestPanInfo=b,this.stop(a,b),this.latestPointerEvent=null,this.latestPanInfo=null},i=()=>eT(a=>"paused"===this.getAnimationState(a)&&this.getAxisMotionValue(a).animation?.play()),{dragSnapToOrigin:j}=this.getProps();this.panSession=new e8(a,{onSessionStart:e,onStart:f,onMove:g,onSessionEnd:h,resumeAnimation:i},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:j,distanceThreshold:c,contextWindow:e5(this.visualElement),element:this.visualElement.current})}stop(a,b){let c=a||this.latestPointerEvent,d=b||this.latestPanInfo,e=this.isDragging;if(this.cancel(),!e||!d||!c)return;let{velocity:f}=d;this.startAnimation(f);let{onDragEnd:g}=this.getProps();g&&bY.postRender(()=>g(c,d))}cancel(){this.isDragging=!1;let{projection:a,animationState:b}=this.visualElement;a&&(a.isAnimationBlocked=!1),this.endPanSession();let{dragPropagation:c}=this.getProps();!c&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),b&&b.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(a,b,c){let{drag:d}=this.getProps();if(!c||!fj(a,d,this.currentDirection))return;let e=this.getAxisMotionValue(a),f=this.originPoint[a]+c[a];this.constraints&&this.constraints[a]&&(f=function(a,{min:b,max:c},d){return void 0!==b&&a<b?a=d?cL(b,a,d.min):Math.max(a,b):void 0!==c&&a>c&&(a=d?cL(c,a,d.max):Math.min(a,c)),a}(f,this.constraints[a],this.elastic[a])),e.set(f)}resolveConstraints(){let{dragConstraints:a,dragElastic:b}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,d=this.constraints;a&&dp(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&c?this.constraints=function(a,{top:b,left:c,bottom:d,right:e}){return{x:fd(a.x,c,e),y:fd(a.y,b,d)}}(c.layoutBox,a):this.constraints=!1,this.elastic=function(a=.35){return!1===a?a=0:!0===a&&(a=.35),{x:ff(a,"left","right"),y:ff(a,"top","bottom")}}(b),d!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&eT(a=>{var b,d;let e;!1!==this.constraints&&this.getAxisMotionValue(a)&&(this.constraints[a]=(b=c.layoutBox[a],d=this.constraints[a],e={},void 0!==d.min&&(e.min=d.min-b.min),void 0!==d.max&&(e.max=d.max-b.min),e))})}resolveRefConstraints(){var a;let{dragConstraints:b,onMeasureDragConstraints:c}=this.getProps();if(!b||!dp(b))return!1;let d=b.current;by(null!==d,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:e}=this.visualElement;if(!e||!e.layout)return!1;let f=function(a,b,c){let d=c0(a,c),{scroll:e}=b;return e&&(cZ(d.x,e.offset.x),cZ(d.y,e.offset.y)),d}(d,e.root,this.visualElement.getTransformPagePoint()),g=(a=e.layout.layoutBox,{x:fe(a.x,f.x),y:fe(a.y,f.y)});if(c){let a=c(function({x:a,y:b}){return{top:b.min,right:a.max,bottom:b.max,left:a.min}}(g));this.hasMutatedConstraints=!!a,a&&(g=cR(a))}return g}startAnimation(a){let{drag:b,dragMomentum:c,dragElastic:d,dragTransition:e,dragSnapToOrigin:f,onDragTransitionEnd:g}=this.getProps(),h=this.constraints||{};return Promise.all(eT(g=>{if(!fj(g,b,this.currentDirection))return;let i=h&&h[g]||{};f&&(i={min:0,max:0});let j={type:"inertia",velocity:c?a[g]:0,bounceStiffness:d?200:1e6,bounceDamping:d?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...e,...i};return this.startAxisValueAnimation(g,j)})).then(g)}startAxisValueAnimation(a,b){let c=this.getAxisMotionValue(a);return dv(this.visualElement,a),c.start(eI(a,c,0,b,this.visualElement,!1))}stopAnimation(){eT(a=>this.getAxisMotionValue(a).stop())}pauseAnimation(){eT(a=>this.getAxisMotionValue(a).animation?.pause())}getAnimationState(a){return this.getAxisMotionValue(a).animation?.state}getAxisMotionValue(a){let b=`_drag${a.toUpperCase()}`,c=this.visualElement.getProps();return c[b]||this.visualElement.getValue(a,(c.initial?c.initial[a]:void 0)||0)}snapToCursor(a){eT(b=>{let{drag:c}=this.getProps();if(!fj(b,c,this.currentDirection))return;let{projection:d}=this.visualElement,e=this.getAxisMotionValue(b);if(d&&d.layout){let{min:c,max:f}=d.layout.layoutBox[b],g=e.get()||0;e.set(a[b]-cL(c,f,.5)+g)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:a,dragConstraints:b}=this.getProps(),{projection:c}=this.visualElement;if(!dp(b)||!c||!this.constraints)return;this.stopAnimation();let d={x:0,y:0};eT(a=>{let b=this.getAxisMotionValue(a);if(b&&!1!==this.constraints){var c,e;let f,g,h,i=b.get();d[a]=(c={min:i,max:i},e=this.constraints[a],f=.5,g=eY(c),(h=eY(e))>g?f=eg(e.min,e.max-g,c.min):g>h&&(f=eg(c.min,c.max-h,e.min)),aO(0,1,f))}});let{transformTemplate:e}=this.visualElement.getProps();this.visualElement.current.style.transform=e?e({},""):"none",c.root&&c.root.updateScroll(),c.updateLayout(),this.resolveConstraints(),eT(b=>{if(!fj(b,a,null))return;let c=this.getAxisMotionValue(b),{min:e,max:f}=this.constraints[b];c.set(cL(e,f,d[b]))})}addListeners(){if(!this.visualElement.current)return;fh.set(this.visualElement,this);let a=this.visualElement.current,b=e4(a,"pointerdown",b=>{let{drag:c,dragListener:d=!0}=this.getProps(),e=b.target,f=e!==a&&eV(e);c&&d&&!f&&this.start(b)}),c=()=>{let{dragConstraints:a}=this.getProps();dp(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:d}=this.visualElement,e=d.addEventListener("measure",c);d&&!d.layout&&(d.root&&d.root.updateScroll(),d.updateLayout()),bY.read(c);let f=eW(window,"resize",()=>this.scalePositionWithinConstraints()),g=d.addEventListener("didUpdate",({delta:a,hasLayoutChanged:b})=>{this.isDragging&&b&&(eT(b=>{let c=this.getAxisMotionValue(b);c&&(this.originPoint[b]+=a[b].translate,c.set(c.get()+a[b].translate))}),this.visualElement.render())});return()=>{f(),b(),e(),g&&g()}}getProps(){let a=this.visualElement.getProps(),{drag:b=!1,dragDirectionLock:c=!1,dragPropagation:d=!1,dragConstraints:e=!1,dragElastic:f=.35,dragMomentum:g=!0}=a;return{...a,drag:b,dragDirectionLock:c,dragPropagation:d,dragConstraints:e,dragElastic:f,dragMomentum:g}}}function fj(a,b,c){return(!0===b||b===a)&&(null===c||c===a)}let fk=a=>(b,c)=>{a&&bY.postRender(()=>a(b,c))},fl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};var fm=J;let fn=!1;class fo extends fm.Component{componentDidMount(){let{visualElement:a,layoutGroup:b,switchLayoutGroup:c,layoutId:d}=this.props,{projection:e}=a;e&&(b.group&&b.group.add(e),c&&c.register&&d&&c.register(e),fn&&e.root.didUpdate(),e.addEventListener("animationComplete",()=>{this.safeToRemove()}),e.setOptions({...e.options,onExitComplete:()=>this.safeToRemove()})),fl.hasEverUpdated=!0}getSnapshotBeforeUpdate(a){let{layoutDependency:b,visualElement:c,drag:d,isPresent:e}=this.props,{projection:f}=c;return f&&(f.isPresent=e,fn=!0,d||a.layoutDependency!==b||void 0===b||a.isPresent!==e?f.willUpdate():this.safeToRemove(),a.isPresent!==e&&(e?f.promote():f.relegate()||bY.postRender(()=>{let a=f.getStack();a&&a.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:a}=this.props.visualElement;a&&(a.root.didUpdate(),cd.postRender(()=>{!a.currentAnimation&&a.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:a,layoutGroup:b,switchLayoutGroup:c}=this.props,{projection:d}=a;fn=!0,d&&(d.scheduleCheckAfterUnmount(),b&&b.group&&b.group.remove(d),c&&c.deregister&&c.deregister(d))}safeToRemove(){let{safeToRemove:a}=this.props;a&&a()}render(){return null}}function fp(a){let[b,c]=function(a=!0){let b=(0,J.useContext)(df);if(null===b)return[!0,null];let{isPresent:c,onExitComplete:d,register:e}=b,f=(0,J.useId)();(0,J.useEffect)(()=>{if(a)return e(f)},[a]);let g=(0,J.useCallback)(()=>a&&d&&d(f),[f,d,a]);return!c&&d?[!1,g]:[!0]}(),d=(0,fm.useContext)(c4);return(0,I.jsx)(fo,{...a,layoutGroup:d,switchLayoutGroup:(0,fm.useContext)(dn),isPresent:b,safeToRemove:c})}function fq(a,b,c,d,e){return a-=b,a=d+1/c*(a-d),void 0!==e&&(a=d+1/e*(a-d)),a}function fr(a,b,[c,d,e],f,g){!function(a,b=0,c=1,d=.5,e,f=a,g=a){if(a0.test(b)&&(b=parseFloat(b),b=cL(g.min,g.max,b/100)-g.min),"number"!=typeof b)return;let h=cL(f.min,f.max,d);a===f&&(h-=b),a.min=fq(a.min,b,c,h,e),a.max=fq(a.max,b,c,h,e)}(a,b[c],b[d],b[e],b.scale,f,g)}let fs=["x","scaleX","originX"],ft=["y","scaleY","originY"];function fu(a,b,c,d){fr(a.x,b,fs,c?c.x:void 0,d?d.x:void 0),fr(a.y,b,ft,c?c.y:void 0,d?d.y:void 0)}function fv(a,b){a.min=b.min,a.max=b.max}function fw(a,b){fv(a.x,b.x),fv(a.y,b.y)}function fx(a,b){a.translate=b.translate,a.scale=b.scale,a.originPoint=b.originPoint,a.origin=b.origin}function fy(a){return 0===a.translate&&1===a.scale}function fz(a){return fy(a.x)&&fy(a.y)}function fA(a,b){return a.min===b.min&&a.max===b.max}function fB(a,b){return Math.round(a.min)===Math.round(b.min)&&Math.round(a.max)===Math.round(b.max)}function fC(a,b){return fB(a.x,b.x)&&fB(a.y,b.y)}function fD(a){return eY(a.x)/eY(a.y)}function fE(a,b){return a.translate===b.translate&&a.scale===b.scale&&a.originPoint===b.originPoint}let fF=["TopLeft","TopRight","BottomLeft","BottomRight"],fG=fF.length,fH=a=>"string"==typeof a?parseFloat(a):a,fI=a=>"number"==typeof a||a1.test(a);function fJ(a,b){return void 0!==a[b]?a[b]:a.borderRadius}let fK=fM(0,.5,eb),fL=fM(.5,.95,bU);function fM(a,b,c){return d=>d<a?0:d>b?1:c(eg(a,b,d))}function fN(a){return"object"==typeof a&&null!==a}function fO(a){return fN(a)&&"ownerSVGElement"in a}let fP=(a,b)=>a.depth-b.depth;class fQ{constructor(){this.children=[],this.isDirty=!1}add(a){ca(this.children,a),this.isDirty=!0}remove(a){cb(this.children,a),this.isDirty=!0}forEach(a){this.isDirty&&this.children.sort(fP),this.isDirty=!1,this.children.forEach(a)}}class fR{constructor(){this.members=[]}add(a){ca(this.members,a),a.scheduleRender()}remove(a){if(cb(this.members,a),a===this.prevLead&&(this.prevLead=void 0),a===this.lead){let a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(a){let b,c=this.members.findIndex(b=>a===b);if(0===c)return!1;for(let a=c;a>=0;a--){let c=this.members[a];if(!1!==c.isPresent){b=c;break}}return!!b&&(this.promote(b),!0)}promote(a,b){let c=this.lead;if(a!==c&&(this.prevLead=c,this.lead=a,a.show(),c)){c.instance&&c.scheduleRender(),a.scheduleRender(),a.resumeFrom=c,b&&(a.resumeFrom.preserveOpacity=!0),c.snapshot&&(a.snapshot=c.snapshot,a.snapshot.latestValues=c.animationValues||c.latestValues),a.root&&a.root.isUpdating&&(a.isLayoutDirty=!0);let{crossfade:d}=a.options;!1===d&&c.hide()}}exitAnimationComplete(){this.members.forEach(a=>{let{options:b,resumingFrom:c}=a;b.onExitComplete&&b.onExitComplete(),c&&c.options.onExitComplete&&c.options.onExitComplete()})}scheduleRender(){this.members.forEach(a=>{a.instance&&a.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let fS=["","X","Y","Z"],fT=0;function fU(a,b,c,d){let{latestValues:e}=b;e[a]&&(c[a]=e[a],b.setStaticValue(a,0),d&&(d[a]=0))}function fV({attachResizeListener:a,defaultParent:b,measureScroll:c,checkIsScrollRoot:d,resetTransform:e}){return class{constructor(a={},c=b?.()){this.id=fT++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fY),this.nodes.forEach(f3),this.nodes.forEach(f4),this.nodes.forEach(fZ)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new fQ)}addEventListener(a,b){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new cc),this.eventHandlers.get(a).add(b)}notifyListeners(a,...b){let c=this.eventHandlers.get(a);c&&c.notify(...b)}hasListeners(a){return this.eventHandlers.has(a)}mount(b){if(this.instance)return;this.isSVG=fO(b)&&!(fO(b)&&"svg"===b.tagName),this.instance=b;let{layoutId:c,layout:d,visualElement:e}=this.options;if(e&&!e.current&&e.mount(b),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),a){let c,d=0,e=()=>this.root.updateBlockedByResize=!1;bY.read(()=>{d=window.innerWidth}),a(b,()=>{let a=window.innerWidth;if(a!==d){let b,f;d=a,this.root.updateBlockedByResize=!0,c&&c(),b=cf.now(),f=({timestamp:a})=>{let c=a-b;c>=250&&(bZ(f),e(c-250))},bY.setup(f,!0),c=()=>bZ(f),fl.hasAnimatedSinceResize&&(fl.hasAnimatedSinceResize=!1,this.nodes.forEach(f2))}})}c&&this.root.registerSharedNode(c,this),!1!==this.options.animate&&e&&(c||d)&&this.addEventListener("didUpdate",({delta:a,hasLayoutChanged:b,hasRelativeLayoutChanged:c,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let f=this.options.transition||e.getDefaultTransition()||ga,{onLayoutAnimationStart:g,onLayoutAnimationComplete:h}=e.getProps(),i=!this.targetLayout||!fC(this.targetLayout,d),j=!b&&c;if(this.options.layoutRoot||this.resumeFrom||j||b&&(i||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let b={...dt(f,"layout"),onPlay:g,onComplete:h};(e.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(a,j)}else b||f2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),bZ(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(f5),this.animationId++)}getTransformTemplate(){let{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function a(b){if(b.hasCheckedOptimisedAppear=!0,b.root===b)return;let{visualElement:c}=b.options;if(!c)return;let d=c.props[dm];if(window.MotionHasOptimisedAnimation(d,"transform")){let{layout:a,layoutId:c}=b.options;window.MotionCancelOptimisedAnimation(d,"transform",bY,!(a||c))}let{parent:e}=b;e&&!e.hasCheckedOptimisedAppear&&a(e)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){let b=this.path[a];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}let{layoutId:b,layout:c}=this.options;if(void 0===b&&!c)return;let d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(f_);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(f0);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(f1),this.nodes.forEach(fW),this.nodes.forEach(fX)):this.nodes.forEach(f0),this.clearAllSnapshots();let a=cf.now();b$.delta=aO(0,1e3/60,a-b$.timestamp),b$.timestamp=a,b$.isProcessing=!0,b_.update.process(b$),b_.preRender.process(b$),b_.render.process(b$),b$.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(f$),this.sharedNodes.forEach(f6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bY.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bY.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||eY(this.snapshot.measuredBox.x)||eY(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();let a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=br(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:b}=this.options;b&&b.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let b=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(b=!1),b&&this.instance){let b=d(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:b,offset:c(this.instance),wasRoot:this.scroll?this.scroll.isRoot:b}}}resetTransform(){if(!e)return;let a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,b=this.projectionDelta&&!fz(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;a&&this.instance&&(b||cU(this.latestValues)||f)&&(e(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){var b;let c=this.measurePageBox(),d=this.removeElementScroll(c);return a&&(d=this.removeTransform(d)),gd((b=d).x),gd(b.y),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:a}=this.options;if(!a)return br();let b=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(gf))){let{scroll:a}=this.root;a&&(cZ(b.x,a.offset.x),cZ(b.y,a.offset.y))}return b}removeElementScroll(a){let b=br();if(fw(b,a),this.scroll?.wasRoot)return b;for(let c=0;c<this.path.length;c++){let d=this.path[c],{scroll:e,options:f}=d;d!==this.root&&e&&f.layoutScroll&&(e.wasRoot&&fw(b,a),cZ(b.x,e.offset.x),cZ(b.y,e.offset.y))}return b}applyTransform(a,b=!1){let c=br();fw(c,a);for(let a=0;a<this.path.length;a++){let d=this.path[a];!b&&d.options.layoutScroll&&d.scroll&&d!==d.root&&c_(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),cU(d.latestValues)&&c_(c,d.latestValues)}return cU(this.latestValues)&&c_(c,this.latestValues),c}removeTransform(a){let b=br();fw(b,a);for(let a=0;a<this.path.length;a++){let c=this.path[a];if(!c.instance||!cU(c.latestValues))continue;cT(c.latestValues)&&c.updateSnapshot();let d=br();fw(d,c.measurePageBox()),fu(b,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return cU(this.latestValues)&&fu(b,this.latestValues),b}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:void 0===a.crossfade||a.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==b$.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){let b=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=b.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=b.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=b.isSharedProjectionDirty);let c=!!this.resumingFrom||this!==b;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:d,layoutId:e}=this.options;if(!this.layout||!(d||e))return;this.resolvedRelativeTargetAt=b$.timestamp;let f=this.getClosestProjectingParent();if(f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=br(),this.targetWithTransforms=br()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var g,h,i;this.forceRelativeParentToResolveTarget(),g=this.target,h=this.relativeTarget,i=this.relativeParent.target,e_(g.x,h.x,i.x),e_(g.y,h.y,i.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fw(this.target,this.layout.layoutBox),cY(this.target,this.targetDelta)):fw(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&1!==this.animationProgress?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0)}}getClosestProjectingParent(){if(!(!this.parent||cT(this.parent.latestValues)||cV(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,b,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=br(),this.relativeTargetOrigin=br(),e1(this.relativeTargetOrigin,b,c),fw(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let a=this.getLead(),b=!!this.resumingFrom||this!==a,c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===b$.timestamp&&(c=!1),c)return;let{layout:d,layoutId:e}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||e))return;fw(this.layoutCorrected,this.layout.layoutBox);let f=this.treeScale.x,g=this.treeScale.y;!function(a,b,c,d=!1){let e,f,g=c.length;if(g){b.x=b.y=1;for(let h=0;h<g;h++){f=(e=c[h]).projectionDelta;let{visualElement:g}=e.options;(!g||!g.props.style||"contents"!==g.props.style.display)&&(d&&e.options.layoutScroll&&e.scroll&&e!==e.root&&c_(a,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),f&&(b.x*=f.x.scale,b.y*=f.y.scale,cY(a,f)),d&&cU(e.latestValues)&&c_(a,e.latestValues))}b.x<1.0000000000001&&b.x>.999999999999&&(b.x=1),b.y<1.0000000000001&&b.y>.999999999999&&(b.y=1)}}(this.layoutCorrected,this.treeScale,this.path,b),a.layout&&!a.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=br());let{target:h}=a;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(fx(this.prevProjectionDelta.x,this.projectionDelta.x),fx(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),e$(this.projectionDelta,this.layoutCorrected,h,this.latestValues),this.treeScale.x===f&&this.treeScale.y===g&&fE(this.projectionDelta.x,this.prevProjectionDelta.x)&&fE(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){let a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bp(),this.projectionDelta=bp(),this.projectionDeltaWithTransform=bp()}setAnimationOrigin(a,b=!1){let c,d=this.snapshot,e=d?d.latestValues:{},f={...this.latestValues},g=bp();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!b;let h=br(),i=(d?d.source:void 0)!==(this.layout?this.layout.source:void 0),j=this.getStack(),k=!j||j.members.length<=1,l=!!(i&&!k&&!0===this.options.crossfade&&!this.path.some(f9));this.animationProgress=0,this.mixTargetDelta=b=>{let d=b/1e3;if(f7(g.x,a.x,d),f7(g.y,a.y,d),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var j,m,n,o,p,q;e1(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),n=this.relativeTarget,o=this.relativeTargetOrigin,p=h,q=d,f8(n.x,o.x,p.x,q),f8(n.y,o.y,p.y,q),c&&(j=this.relativeTarget,m=c,fA(j.x,m.x)&&fA(j.y,m.y))&&(this.isProjectionDirty=!1),c||(c=br()),fw(c,this.relativeTarget)}i&&(this.animationValues=f,function(a,b,c,d,e,f){e?(a.opacity=cL(0,c.opacity??1,fK(d)),a.opacityExit=cL(b.opacity??1,0,fL(d))):f&&(a.opacity=cL(b.opacity??1,c.opacity??1,d));for(let e=0;e<fG;e++){let f=`border${fF[e]}Radius`,g=fJ(b,f),h=fJ(c,f);(void 0!==g||void 0!==h)&&(g||(g=0),h||(h=0),0===g||0===h||fI(g)===fI(h)?(a[f]=Math.max(cL(fH(g),fH(h),d),0),(a0.test(h)||a0.test(g))&&(a[f]+="%")):a[f]=h)}(b.rotate||c.rotate)&&(a.rotate=cL(b.rotate||0,c.rotate||0,d))}(f,e,this.latestValues,d,l,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=d},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(bZ(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bY.update(()=>{var b,c,d;let e;fl.hasAnimatedSinceResize=!0,dz.layout++,this.motionValue||(this.motionValue=ch(0)),this.currentAnimation=(b=this.motionValue,c=[0,1e3],d={...a,velocity:0,isSync:!0,onUpdate:b=>{this.mixTargetDelta(b),a.onUpdate&&a.onUpdate(b)},onStop:()=>{dz.layout--},onComplete:()=>{dz.layout--,a.onComplete&&a.onComplete(),this.completeAnimation()}},(e=bs(b)?b:ch(b)).start(eI("",e,c,d)),e.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let a=this.getLead(),{targetWithTransforms:b,target:c,layout:d,latestValues:e}=a;if(b&&c&&d){if(this!==a&&this.layout&&d&&ge(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||br();let b=eY(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+b;let d=eY(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+d}fw(b,c),c_(b,e),e$(this.projectionDeltaWithTransform,this.layoutCorrected,b,e)}}registerSharedNode(a,b){this.sharedNodes.has(a)||this.sharedNodes.set(a,new fR),this.sharedNodes.get(a).add(b);let c=b.options.initialPromotionConfig;b.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(b):void 0})}isLead(){let a=this.getStack();return!a||a.lead===this}getLead(){let{layoutId:a}=this.options;return a&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:b,preserveFollowOpacity:c}={}){let d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),b&&this.setOptions({transition:b})}relegate(){let a=this.getStack();return!!a&&a.relegate(this)}resetSkewAndRotation(){let{visualElement:a}=this.options;if(!a)return;let b=!1,{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(b=!0),!b)return;let d={};c.z&&fU("z",a,d,this.animationValues);for(let b=0;b<fS.length;b++)fU(`rotate${fS[b]}`,a,d,this.animationValues),fU(`skew${fS[b]}`,a,d,this.animationValues);for(let b in a.render(),d)a.setStaticValue(b,d[b]),this.animationValues&&(this.animationValues[b]=d[b]);a.scheduleRender()}applyProjectionStyles(a,b){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}let c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=de(b?.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}let d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(a.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,a.pointerEvents=de(b?.pointerEvents)||""),this.hasProjected&&!cU(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";let e=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=function(a,b,c){let d="",e=a.x.translate/b.x,f=a.y.translate/b.y,g=c?.z||0;if((e||f||g)&&(d=`translate3d(${e}px, ${f}px, ${g}px) `),(1!==b.x||1!==b.y)&&(d+=`scale(${1/b.x}, ${1/b.y}) `),c){let{transformPerspective:a,rotate:b,rotateX:e,rotateY:f,skewX:g,skewY:h}=c;a&&(d=`perspective(${a}px) ${d}`),b&&(d+=`rotate(${b}deg) `),e&&(d+=`rotateX(${e}deg) `),f&&(d+=`rotateY(${f}deg) `),g&&(d+=`skewX(${g}deg) `),h&&(d+=`skewY(${h}deg) `)}let h=a.x.scale*b.x,i=a.y.scale*b.y;return(1!==h||1!==i)&&(d+=`scale(${h}, ${i})`),d||"none"}(this.projectionDeltaWithTransform,this.treeScale,e);c&&(f=c(e,f)),a.transform=f;let{x:g,y:h}=this.projectionDelta;for(let b in a.transformOrigin=`${100*g.origin}% ${100*h.origin}% 0`,d.animationValues?a.opacity=d===this?e.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:e.opacityExit:a.opacity=d===this?void 0!==e.opacity?e.opacity:"":void 0!==e.opacityExit?e.opacityExit:0,cM){if(void 0===e[b])continue;let{correct:c,applyTo:g,isCSSVariable:h}=cM[b],i="none"===f?e[b]:c(e[b],d);if(g){let b=g.length;for(let c=0;c<b;c++)a[g[c]]=i}else h?this.options.visualElement.renderState.vars[b]=i:a[b]=i}this.options.layoutId&&(a.pointerEvents=d===this?de(b?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(f_),this.root.sharedNodes.clear()}}}function fW(a){a.updateLayout()}function fX(a){let b=a.resumeFrom?.snapshot||a.snapshot;if(a.isLead()&&a.layout&&b&&a.hasListeners("didUpdate")){let{layoutBox:c,measuredBox:d}=a.layout,{animationType:e}=a.options,f=b.source!==a.layout.source;"size"===e?eT(a=>{let d=f?b.measuredBox[a]:b.layoutBox[a],e=eY(d);d.min=c[a].min,d.max=d.min+e}):ge(e,b.layoutBox,c)&&eT(d=>{let e=f?b.measuredBox[d]:b.layoutBox[d],g=eY(c[d]);e.max=e.min+g,a.relativeTarget&&!a.currentAnimation&&(a.isProjectionDirty=!0,a.relativeTarget[d].max=a.relativeTarget[d].min+g)});let g=bp();e$(g,c,b.layoutBox);let h=bp();f?e$(h,a.applyTransform(d,!0),b.measuredBox):e$(h,c,b.layoutBox);let i=!fz(g),j=!1;if(!a.resumeFrom){let d=a.getClosestProjectingParent();if(d&&!d.resumeFrom){let{snapshot:e,layout:f}=d;if(e&&f){let g=br();e1(g,b.layoutBox,e.layoutBox);let h=br();e1(h,c,f.layoutBox),fC(g,h)||(j=!0),d.options.layoutRoot&&(a.relativeTarget=h,a.relativeTargetOrigin=g,a.relativeParent=d)}}}a.notifyListeners("didUpdate",{layout:c,snapshot:b,delta:h,layoutDelta:g,hasLayoutChanged:i,hasRelativeLayoutChanged:j})}else if(a.isLead()){let{onExitComplete:b}=a.options;b&&b()}a.options.transition=void 0}function fY(a){a.parent&&(a.isProjecting()||(a.isProjectionDirty=a.parent.isProjectionDirty),a.isSharedProjectionDirty||(a.isSharedProjectionDirty=!!(a.isProjectionDirty||a.parent.isProjectionDirty||a.parent.isSharedProjectionDirty)),a.isTransformDirty||(a.isTransformDirty=a.parent.isTransformDirty))}function fZ(a){a.isProjectionDirty=a.isSharedProjectionDirty=a.isTransformDirty=!1}function f$(a){a.clearSnapshot()}function f_(a){a.clearMeasurements()}function f0(a){a.isLayoutDirty=!1}function f1(a){let{visualElement:b}=a.options;b&&b.getProps().onBeforeLayoutMeasure&&b.notify("BeforeLayoutMeasure"),a.resetTransform()}function f2(a){a.finishAnimation(),a.targetDelta=a.relativeTarget=a.target=void 0,a.isProjectionDirty=!0}function f3(a){a.resolveTargetDelta()}function f4(a){a.calcProjection()}function f5(a){a.resetSkewAndRotation()}function f6(a){a.removeLeadSnapshot()}function f7(a,b,c){a.translate=cL(b.translate,0,c),a.scale=cL(b.scale,1,c),a.origin=b.origin,a.originPoint=b.originPoint}function f8(a,b,c,d){a.min=cL(b.min,c.min,d),a.max=cL(b.max,c.max,d)}function f9(a){return a.animationValues&&void 0!==a.animationValues.opacityExit}let ga={duration:.45,ease:[.4,0,.1,1]},gb=a=>"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(a),gc=gb("applewebkit/")&&!gb("chrome/")?Math.round:bU;function gd(a){a.min=gc(a.min),a.max=gc(a.max)}function ge(a,b,c){return"position"===a||"preserve-aspect"===a&&!(.2>=Math.abs(fD(b)-fD(c)))}function gf(a){return a!==a.root&&a.scroll?.wasRoot}let gg=fV({attachResizeListener:(a,b)=>eW(a,"resize",b),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),gh={current:void 0},gi=fV({measureScroll:a=>({x:a.scrollLeft,y:a.scrollTop}),defaultParent:()=>{if(!gh.current){let a=new gg({});a.mount(window),a.setOptions({layoutScroll:!0}),gh.current=a}return gh.current},resetTransform:(a,b)=>{a.style.transform=void 0!==b?b:"none"},checkIsScrollRoot:a=>"fixed"===window.getComputedStyle(a).position});function gj(a,b){let c=function(a,b,c){if(null==a)return[];if(a instanceof EventTarget)return[a];if("string"==typeof a){let b=document,c=(void 0)??b.querySelectorAll(a);return c?Array.from(c):[]}return Array.from(a).filter(a=>null!=a)}(a),d=new AbortController;return[c,{passive:!0,...b,signal:d.signal},()=>d.abort()]}function gk(a){return!("touch"===a.pointerType||eX.x||eX.y)}function gl(a,b,c){let{props:d}=a;a.animationState&&d.whileHover&&a.animationState.setActive("whileHover","Start"===c);let e=d["onHover"+c];e&&bY.postRender(()=>e(b,e3(b)))}let gm=(a,b)=>!!b&&(a===b||gm(a,b.parentElement)),gn=new WeakSet;function go(a){return b=>{"Enter"===b.key&&a(b)}}function gp(a,b){a.dispatchEvent(new PointerEvent("pointer"+b,{isPrimary:!0,bubbles:!0}))}function gq(a){return e2(a)&&!(eX.x||eX.y)}function gr(a,b,c){let{props:d}=a;if(a.current instanceof HTMLButtonElement&&a.current.disabled)return;a.animationState&&d.whileTap&&a.animationState.setActive("whileTap","Start"===c);let e=d["onTap"+("End"===c?"":c)];e&&bY.postRender(()=>e(b,e3(b)))}let gs=new WeakMap,gt=new WeakMap,gu=a=>{let b=gs.get(a.target);b&&b(a)},gv=a=>{a.forEach(gu)},gw={some:0,all:1},gx=function(a,b){if("u"<typeof Proxy)return dq;let c=new Map,d=(c,d)=>dq(c,d,a,b);return new Proxy((a,b)=>d(a,b),{get:(e,f)=>"create"===f?d:(c.has(f)||c.set(f,dq(f,void 0,a,b)),c.get(f))})}({animation:{Feature:class extends dr{constructor(a){super(a),a.animationState||(a.animationState=function(a){let b=b=>Promise.all(b.map(({animation:b,options:c})=>(function(a,b,c={}){let d;if(a.notify("AnimationStart",b),Array.isArray(b))d=Promise.all(b.map(b=>eL(a,b,c)));else if("string"==typeof b)d=eL(a,b,c);else{let e="function"==typeof b?ds(a,b,c.custom):b;d=Promise.all(eJ(a,e,c))}return d.then(()=>{a.notify("AnimationComplete",b)})})(a,b,c))),c=eR(),d=!0,e=b=>(c,d)=>{let e=ds(a,d,"exit"===b?a.presenceContext?.custom:void 0);if(e){let{transition:a,transitionEnd:b,...d}=e;c={...c,...d,...b}}return c};function f(f){let{props:g}=a,h=function a(b){if(!b)return;if(!b.isControllingVariants){let c=b.parent&&a(b.parent)||{};return void 0!==b.props.initial&&(c.initial=b.props.initial),c}let c={};for(let a=0;a<eM;a++){let d=co[a],e=b.props[d];(cm(e)||!1===e)&&(c[d]=e)}return c}(a.parent)||{},i=[],j=new Set,k={},l=1/0;for(let b=0;b<eP;b++){var m,n;let o=eO[b],p=c[o],q=void 0!==g[o]?g[o]:h[o],r=cm(q),s=o===f?p.isActive:null;!1===s&&(l=b);let t=q===h[o]&&q!==g[o]&&r;if(t&&d&&a.manuallyAnimateOnMount&&(t=!1),p.protectedKeys={...k},!p.isActive&&null===s||!q&&!p.prevProp||cl(q)||"boolean"==typeof q)continue;let u=(m=p.prevProp,"string"==typeof(n=q)?n!==m:!!Array.isArray(n)&&!eN(n,m)),v=u||o===f&&p.isActive&&!t&&r||b>l&&r,w=!1,x=Array.isArray(q)?q:[q],y=x.reduce(e(o),{});!1===s&&(y={});let{prevResolvedValues:z={}}=p,A={...z,...y},B=b=>{v=!0,j.has(b)&&(w=!0,j.delete(b)),p.needsAnimating[b]=!0;let c=a.getValue(b);c&&(c.liveStyle=!1)};for(let a in A){let b=y[a],c=z[a];if(!k.hasOwnProperty(a))(du(b)&&du(c)?eN(b,c):b===c)?void 0!==b&&j.has(a)?B(a):p.protectedKeys[a]=!0:null!=b?B(a):j.add(a)}p.prevProp=q,p.prevResolvedValues=y,p.isActive&&(k={...k,...y}),d&&a.blockInitialAnimation&&(v=!1);let C=t&&u,D=!C||w;v&&D&&i.push(...x.map(b=>{let c={type:o};if("string"==typeof b&&d&&!C&&a.manuallyAnimateOnMount&&a.parent){let{parent:d}=a,e=ds(d,b);if(d.enteringChildren&&e){let{delayChildren:b}=e.transition||{};c.delay=eK(d.enteringChildren,a,b)}}return{animation:b,options:c}}))}if(j.size){let b={};if("boolean"!=typeof g.initial){let c=ds(a,Array.isArray(g.initial)?g.initial[0]:g.initial);c&&c.transition&&(b.transition=c.transition)}j.forEach(c=>{let d=a.getBaseTarget(c),e=a.getValue(c);e&&(e.liveStyle=!0),b[c]=d??null}),i.push({animation:b})}let o=!!i.length;return d&&(!1===g.initial||g.initial===g.animate)&&!a.manuallyAnimateOnMount&&(o=!1),d=!1,o?b(i):Promise.resolve()}return{animateChanges:f,setActive:function(b,d){if(c[b].isActive===d)return Promise.resolve();a.variantChildren?.forEach(a=>a.animationState?.setActive(b,d)),c[b].isActive=d;let e=f(b);for(let a in c)c[a].protectedKeys={};return e},setAnimateFunction:function(c){b=c(a)},getState:()=>c,reset:()=>{c=eR()}}}(a))}updateAnimationControlsSubscription(){let{animate:a}=this.node.getProps();cl(a)&&(this.unmountControls=a.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:a}=this.node.getProps(),{animate:b}=this.node.prevProps||{};a!==b&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends dr{constructor(){super(...arguments),this.id=eS++}update(){if(!this.node.presenceContext)return;let{isPresent:a,onExitComplete:b}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||a===c)return;let d=this.node.animationState.setActive("exit",!a);b&&!a&&d.then(()=>{b(this.id)})}mount(){let{register:a,onExitComplete:b}=this.node.presenceContext||{};b&&b(this.id),a&&(this.unmount=a(this.id))}unmount(){}}},inView:{Feature:class extends dr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var a;let b;this.unmount();let{viewport:c={}}=this.node.getProps(),{root:d,margin:e,amount:f="some",once:g}=c,h={root:d?d.current:void 0,rootMargin:e,threshold:"number"==typeof f?f:gw[f]},i=a=>{let{isIntersecting:b}=a;if(this.isInView===b||(this.isInView=b,g&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);let{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),e=b?c:d;e&&e(a)};return a=this.node.current,b=function({root:a,...b}){let c=a||document;gt.has(c)||gt.set(c,{});let d=gt.get(c),e=JSON.stringify(b);return d[e]||(d[e]=new IntersectionObserver(gv,{root:a,...b})),d[e]}(h),gs.set(a,i),b.observe(a),()=>{gs.delete(a),b.unobserve(a)}}mount(){this.startObserver()}update(){if("u"<typeof IntersectionObserver)return;let{props:a,prevProps:b}=this.node;["amount","margin","root"].some(function({viewport:a={}},{viewport:b={}}={}){return c=>a[c]!==b[c]}(a,b))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends dr{mount(){let{current:a}=this.node;a&&(this.unmount=function(a,b,c={}){let[d,e,f]=gj(a,c),g=a=>{let d=a.currentTarget;if(!gq(a))return;gn.add(d);let f=b(d,a),g=(a,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",i),gn.has(d)&&gn.delete(d),gq(a)&&"function"==typeof f&&f(a,{success:b})},h=a=>{g(a,d===window||d===document||c.useGlobalTarget||gm(d,a.target))},i=a=>{g(a,!1)};window.addEventListener("pointerup",h,e),window.addEventListener("pointercancel",i,e)};return d.forEach(a=>{(c.useGlobalTarget?window:a).addEventListener("pointerdown",g,e),fN(a)&&"offsetHeight"in a&&(a.addEventListener("focus",a=>((a,b)=>{let c=a.currentTarget;if(!c)return;let d=go(()=>{if(gn.has(c))return;gp(c,"down");let a=go(()=>{gp(c,"up")});c.addEventListener("keyup",a,b),c.addEventListener("blur",()=>gp(c,"cancel"),b)});c.addEventListener("keydown",d,b),c.addEventListener("blur",()=>c.removeEventListener("keydown",d),b)})(a,e)),eV(a)||a.hasAttribute("tabindex")||(a.tabIndex=0))}),f}(a,(a,b)=>(gr(this.node,b,"Start"),(a,{success:b})=>gr(this.node,a,b?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends dr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let a=!1;try{a=this.node.current.matches(":focus-visible")}catch(b){a=!0}a&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dy(eW(this.node.current,"focus",()=>this.onFocus()),eW(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends dr{mount(){let{current:a}=this.node;a&&(this.unmount=function(a,b,c={}){let[d,e,f]=gj(a,c),g=a=>{if(!gk(a))return;let{target:c}=a,d=b(c,a);if("function"!=typeof d||!c)return;let f=a=>{gk(a)&&(d(a),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,e)};return d.forEach(a=>{a.addEventListener("pointerenter",g,e)}),f}(a,(a,b)=>(gl(this.node,b,"Start"),a=>gl(this.node,a,"End"))))}unmount(){}}},pan:{Feature:class extends dr{constructor(){super(...arguments),this.removePointerDownListener=bU}onPointerDown(a){this.session=new e8(a,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:e5(this.node)})}createPanHandlers(){let{onPanSessionStart:a,onPanStart:b,onPan:c,onPanEnd:d}=this.node.getProps();return{onSessionStart:fk(a),onStart:fk(b),onMove:c,onEnd:(a,b)=>{delete this.session,d&&bY.postRender(()=>d(a,b))}}}mount(){this.removePointerDownListener=e4(this.node.current,"pointerdown",a=>this.onPointerDown(a))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends dr{constructor(a){super(a),this.removeGroupControls=bU,this.removeListeners=bU,this.controls=new fi(a)}mount(){let{dragControls:a}=this.node.getProps();a&&(this.removeGroupControls=a.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bU}update(){let{dragControls:a}=this.node.getProps(),{dragControls:b}=this.node.prevProps||{};a!==b&&(this.removeGroupControls(),a&&(this.removeGroupControls=a.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.endPanSession()}},ProjectionNode:gi,MeasureLayout:fp},layout:{ProjectionNode:gi,MeasureLayout:fp}},(a,b)=>b.isSVG??c3(a)?new cQ(b):new c1(b,{allowProjection:a!==J.Fragment})),gy=({currentStep:a=1,onContinue:b,onBack:c,totalSteps:d=3})=>(0,I.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6 w-full",children:[(0,I.jsxs)("div",{className:"flex items-center gap-4 relative",children:[Array.from({length:d}).map((b,c)=>{let e=c+1;return(0,I.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,I.jsx)("div",{className:aC("w-2 h-2 rounded-full relative z-10 transition-all",e<=a?"bg-[#007AFF]":"bg-[#E5E5EA]")}),e<d&&(0,I.jsx)("div",{className:aC("w-8 h-0.5 transition-all",e<a?"bg-[#007AFF]":"bg-[#E5E5EA]")})]},e)}),(0,I.jsx)(gx.div,{initial:{width:0},animate:{width:`${a/d*100}%`},className:"absolute left-0 top-1/2 -translate-y-1/2 h-1 bg-[#007AFF]/20 rounded-full",transition:{type:"spring",stiffness:300,damping:30,mass:.5}})]}),(0,I.jsxs)("p",{className:"text-sm text-[#6E6E73]",children:["Schritt ",a," von ",d]})]}),gz=N("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),gA=()=>(0,I.jsxs)("div",{className:"loader-container",children:[(0,I.jsx)("div",{className:"peeking-photo-icon",children:(0,I.jsx)(gz,{strokeWidth:1.5})}),(0,I.jsxs)("div",{className:"shield-container",children:[Array.from({length:150}).map((a,b)=>(0,I.jsx)("div",{className:"particle",style:{animationDelay:`${b%10*.1+.02*Math.floor(b/10)}s`}},b)),(0,I.jsxs)("div",{className:"shield-structure",children:[(0,I.jsx)("div",{className:"structure-line line-1"}),(0,I.jsx)("div",{className:"structure-line line-2"}),(0,I.jsx)("div",{className:"structure-line line-3"}),(0,I.jsx)("div",{className:"structure-line line-4"})]})]}),(0,I.jsx)("div",{className:"loading-text",children:"LDT..."})]});function gB(){let[a,b]=(0,J.useState)(null),[c,d]=(0,J.useState)(!1),[e,f]=(0,J.useState)(null),[g,h]=(0,J.useState)(!1);(0,J.useEffect)(()=>{let a=function(){let a=localStorage.getItem("photovault_secret_key");if(!a)return null;try{return(0,aG.decodeBase64)(a)}catch{return null}}();a&&(b(a),f(aH(a))),d(!0)},[]);let i=(0,J.useCallback)(()=>new Promise(a=>{h(!0),setTimeout(()=>{let c,d={publicKey:(c=aF.default.box.keyPair()).publicKey,secretKey:c.secretKey}.secretKey;b(d),aL(d);let e=aH(d);f(e),h(!1),a(e)},1500)}),[]);return{secretKey:a,isInitialized:c,hasKey:!!a,recoveryPhrase:e,isGeneratingKey:g,generateNewKey:i,restoreFromPhrase:(0,J.useCallback)(a=>{try{let c=aI(a);return b(c),aL(c),f(a),!0}catch{return!1}},[]),clearKey:(0,J.useCallback)(()=>{b(null),f(null),localStorage.removeItem("photovault_secret_key")},[])}}function gC({state:a,setState:b,step:c,setStep:d,onComplete:e}){let[f,g]=(0,J.useState)(!1),[h,i]=(0,J.useState)(!1),[j,k]=(0,J.useState)(!1),{isGeneratingKey:l}=gB(),{generateNewKey:m}=gB(),n=async()=>{let a=await m(),c=a?.split("-").slice(0,12)||[];b(b=>({...b,encryptionKey:a||"",backupPhrase:c})),g(!0)};return l?(0,I.jsx)(gA,{}):(0,I.jsxs)("div",{className:"min-h-screen flex flex-col px-6 pt-12 pb-8 safe-area-inset",children:[(0,I.jsx)(gy,{currentStep:f?1:c}),1===c&&!f&&(0,I.jsx)(gD,{onContinue:n,onImport:()=>{console.log("Show import dialog"),k(!0)}}),1===c&&f&&(0,I.jsx)(gE,{phrase:a.backupPhrase,confirmed:h,onConfirmChange:i,onContinue:()=>{console.log("TODO: Verify checkbox, proceed to step 2"),g(!1),i(!1),d(2)}}),2===c&&(0,I.jsx)(gF,{selectedSource:a.photoSource,onSelect:a=>{console.log("Selected photo source:",a),b(b=>({...b,photoSource:a})),d(3)}}),3===c&&(0,I.jsx)(gG,{selectedPlan:a.selectedPlan,onSelect:a=>{console.log("free"===a?"Set Free Plan":"Set Backup+ Plan"),b(b=>({...b,selectedPlan:a})),e()}}),j&&(0,I.jsx)(gH,{onClose:()=>k(!1),onSuccess:(a,c)=>{b(b=>({...b,encryptionKey:a,backupPhrase:c})),k(!1),e()}})]})}function gD({onContinue:a,onImport:b}){return(0,I.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,I.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[(0,I.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6",children:(0,I.jsx)(aE,{name:"key",size:40})}),(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-3",children:"Erstelle deinen Schlssel"}),(0,I.jsx)("p",{className:"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px] mb-6",children:"Dieser Schlssel verschlsselt alle Fotos. Speichere ihn gut:"}),(0,I.jsxs)("div",{className:"bg-[#F2F2F7] rounded-xl p-4 w-full max-w-[300px]",children:[(0,I.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,I.jsx)(aE,{name:"key",size:20}),(0,I.jsx)("span",{className:"text-[15px] text-[#1D1D1F] font-medium",children:"12-Wort Backup-Phrase"})]}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:"Wird im nchsten Schritt erstellt und angezeigt"})]})]}),(0,I.jsxs)("div",{className:"space-y-3",children:[(0,I.jsx)("button",{onClick:a,className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target",children:"Schlssel erstellen"}),(0,I.jsx)("button",{onClick:b,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Ich habe bereits einen Schlssel"})]})]})}function gE({phrase:a,confirmed:b,onConfirmChange:c,onContinue:d}){return(0,I.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsxs)("div",{className:"text-center mb-6",children:[(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2",children:"Notiere diese Wrter"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73]",children:"Speichere sie sicher ab. Du brauchst sie zur Wiederherstellung."})]}),(0,I.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-6",children:a.map((a,b)=>(0,I.jsxs)("div",{className:"bg-white rounded-lg p-3 text-center border border-[#E5E5EA]",children:[(0,I.jsx)("span",{className:"text-[11px] text-[#8E8E93] block mb-0.5",children:b+1}),(0,I.jsx)("span",{className:"text-[15px] text-[#1D1D1F] font-mono",children:a})]},b))}),(0,I.jsx)("div",{className:"bg-[#FF3B30]/10 rounded-xl p-4 mb-6",children:(0,I.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center",children:" Teile diese Wrter niemals mit anderen. Wer sie hat, kann auf deine Fotos zugreifen."})}),(0,I.jsxs)("button",{onClick:()=>c(!b),className:"w-full flex items-center gap-3 p-4 bg-white rounded-xl ios-tap-target",children:[(0,I.jsx)("div",{className:`w-6 h-6 rounded-md border-2 flex items-center justify-center ${b?"bg-[#007AFF] border-[#007AFF]":"border-[#C7C7CC]"}`,children:b&&(0,I.jsx)(O,{className:"w-4 h-4 text-white"})}),(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Ich habe die Wrter notiert"})]})]}),(0,I.jsx)("button",{onClick:d,disabled:!b,className:`w-full h-[50px] text-[17px] font-semibold rounded-xl ios-tap-target ${b?"bg-[#007AFF] text-white":"bg-[#E5E5EA] text-[#8E8E93]"}`,children:"Weiter"})]})}function gF({selectedSource:a,onSelect:b}){return(0,I.jsx)("div",{className:"flex-1 flex flex-col",children:(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsxs)("div",{className:"flex flex-col items-center text-center mb-8",children:[(0,I.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6",children:(0,I.jsx)(aE,{name:"folder",size:40})}),(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2",children:"Whle Backup-Quelle"}),(0,I.jsx)("p",{className:"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px]",children:"Wo sind deine Fotos gespeichert?"})]}),(0,I.jsx)("div",{className:"bg-[#F2F2F7] rounded-xl p-4 mb-6",children:(0,I.jsxs)("p",{className:"text-[15px] text-[#6E6E73] text-center",children:[" ",(0,I.jsx)("strong",{children:"Tipp:"}),' Die meisten Nutzer whlen "Fotos-App". Du kannst dies spter in den Einstellungen ndern.']})}),(0,I.jsx)("div",{className:"space-y-3",children:[{id:"photos-app",label:"Fotos-App",description:"Alle Fotos aus der iOS Foto-Bibliothek",details:"Empfohlen fr die meisten Nutzer"},{id:"files-app",label:"Dateien-App",description:"Fotos aus einem bestimmten Ordner",details:"Fr fortgeschrittene Nutzer"}].map(c=>(0,I.jsx)("button",{onClick:()=>b(c.id),className:`w-full p-4 rounded-xl bg-white text-left ios-tap-target transition-all ${a===c.id?"ring-2 ring-[#007AFF] shadow-lg":""}`,children:(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsx)("p",{className:"text-[17px] font-medium text-[#1D1D1F]",children:c.label}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] mt-0.5",children:c.description}),(0,I.jsx)("p",{className:"text-[13px] text-[#8E8E93] mt-1",children:c.details})]}),(0,I.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${a===c.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:a===c.id&&(0,I.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})},c.id))})]})})}function gG({selectedPlan:a,onSelect:b}){let[c,d]=(0,J.useState)(a);return(0,I.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsxs)("div",{className:"flex flex-col items-center text-center mb-6",children:[(0,I.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6",children:(0,I.jsx)(aE,{name:"cloud",size:40})}),(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2",children:"Whle Speicherplan"}),(0,I.jsx)("p",{className:"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px]",children:"Du kannst das spter jederzeit ndern"})]}),(0,I.jsx)("div",{className:"bg-[#F2F2F7] rounded-xl p-4 mb-4",children:(0,I.jsxs)("p",{className:"text-[13px] text-[#6E6E73] text-center",children:[" ",(0,I.jsx)("strong",{children:"Empfehlung:"})," Starte mit FREE und upgrade spter, wenn du mehr Speicher brauchst."]})}),(0,I.jsx)("div",{className:"space-y-3",children:[{id:"free",label:"FREE",subtitle:"Auf deinen Gerten",price:"0/Monat",features:["Unbegrenzte Fotos","Zero-Knowledge Verschlsselung","Multi-Device Sync"],description:"Perfekt fr den Start"},{id:"backup-plus",label:"BACKUP+",subtitle:"Dauerhaft im Netz",price:"2,99/Monat",features:["Alles von Free","200 GB Cloud-Backup","Schnellere Synchronisierung"],recommended:!0,description:"Maximale Sicherheit"}].map(a=>(0,I.jsxs)("button",{onClick:()=>d(a.id),className:`w-full p-4 rounded-xl bg-white text-left ios-tap-target relative transition-all ${c===a.id?"ring-2 ring-[#007AFF] shadow-lg":""}`,children:[a.recommended&&(0,I.jsx)("span",{className:"absolute -top-2 left-4 px-2 py-0.5 bg-[#30D158] text-white text-[11px] font-semibold rounded-full",children:"EMPFOHLEN"}),(0,I.jsxs)("div",{className:"flex items-start justify-between",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsx)("p",{className:"text-[15px] font-bold text-[#007AFF] tracking-wide",children:a.label}),(0,I.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] mt-0.5",children:a.subtitle}),(0,I.jsx)("p",{className:"text-[13px] text-[#8E8E93] mt-1",children:a.description}),(0,I.jsx)("ul",{className:"mt-3 space-y-1.5",children:a.features.map(a=>(0,I.jsxs)("li",{className:"text-[15px] text-[#6E6E73] flex items-center gap-2",children:[(0,I.jsx)("span",{className:"text-[#30D158]",children:""})," ",a]},a))}),(0,I.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] mt-4",children:a.price})]}),(0,I.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${c===a.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:c===a.id&&(0,I.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})]},a.id))})]}),(0,I.jsx)("button",{onClick:()=>b(c),className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target mt-4",children:"PhotoVault starten"})]})}function gH({onClose:a,onSuccess:b}){let[c,d]=(0,J.useState)(""),[e,f]=(0,J.useState)(null),[g,h]=(0,J.useState)(!1);return(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Schlssel importieren"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-6",children:"Gib deine Backup-Phrase ein (mit Bindestrichen oder Leerzeichen)"}),(0,I.jsx)("textarea",{value:c,onChange:a=>{d(a.target.value),f(null)},placeholder:"abc123XY-def456AB-ghi789CD-...",className:"w-full h-[100px] bg-[#F2F2F7] rounded-xl p-4 text-[15px] text-[#1D1D1F] font-mono resize-none mb-2"}),e&&(0,I.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center mb-4",children:e}),(0,I.jsxs)("div",{className:"space-y-3",children:[(0,I.jsx)("button",{onClick:()=>{f(null),h(!0);try{let a=c.trim().replace(/[\s\n]+/g,"-").replace(/-+/g,"-");if(!a){f("Bitte gib deinen Schlssel ein"),h(!1);return}let d=aI(a);if(!d||32!==d.length){f("Ungltiger Schlssel. Bitte berprfe die Eingabe."),h(!1);return}aL(d);let e=a.split("-").slice(0,12);console.log("Key imported successfully"),b(a,e)}catch(a){console.error("Key import error:",a),f("Ungltiger Schlssel. Bitte berprfe die Eingabe."),h(!1)}},disabled:g||!c.trim(),className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target disabled:opacity-50",children:g?"Importiere...":"Importieren"}),(0,I.jsx)("button",{onClick:a,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Abbrechen"})]})]})})}let gI=N("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),gJ=N("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),gK=N("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var gL=a.i(99745),gM=a.i(18544),gN=a.i(76644),gO=a.i(33791),gP=a.i(79715),gQ=a.i(42871),gR=a.i(8361),gS=class extends gO.Subscribable{constructor(a,b){super(),this.options=b,this.#a=a,this.#b=null,this.#c=(0,gP.pendingThenable)(),this.bindMethods(),this.setOptions(b)}#a;#d=void 0;#e=void 0;#f=void 0;#g;#h;#c;#b;#i;#j;#k;#l;#m;#n;#o=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#d.addObserver(this),gT(this.#d,this.options)?this.#p():this.updateResult(),this.#q())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return gU(this.#d,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return gU(this.#d,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#r(),this.#s(),this.#d.removeObserver(this)}setOptions(a){let b=this.options,c=this.#d;if(this.options=this.#a.defaultQueryOptions(a),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,gQ.resolveEnabled)(this.options.enabled,this.#d))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#t(),this.#d.setOptions(this.options),b._defaulted&&!(0,gQ.shallowEqualObjects)(this.options,b)&&this.#a.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#d,observer:this});let d=this.hasListeners();d&&gV(this.#d,c,this.options,b)&&this.#p(),this.updateResult(),d&&(this.#d!==c||(0,gQ.resolveEnabled)(this.options.enabled,this.#d)!==(0,gQ.resolveEnabled)(b.enabled,this.#d)||(0,gQ.resolveStaleTime)(this.options.staleTime,this.#d)!==(0,gQ.resolveStaleTime)(b.staleTime,this.#d))&&this.#u();let e=this.#v();d&&(this.#d!==c||(0,gQ.resolveEnabled)(this.options.enabled,this.#d)!==(0,gQ.resolveEnabled)(b.enabled,this.#d)||e!==this.#n)&&this.#w(e)}getOptimisticResult(a){var b,c;let d=this.#a.getQueryCache().build(this.#a,a),e=this.createResult(d,a);return b=this,c=e,(0,gQ.shallowEqualObjects)(b.getCurrentResult(),c)||(this.#f=e,this.#h=this.options,this.#g=this.#d.state),e}getCurrentResult(){return this.#f}trackResult(a,b){return new Proxy(a,{get:(a,c)=>(this.trackProp(c),b?.(c),"promise"===c&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#c.status||this.#c.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,c))})}trackProp(a){this.#o.add(a)}getCurrentQuery(){return this.#d}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){let b=this.#a.defaultQueryOptions(a),c=this.#a.getQueryCache().build(this.#a,b);return c.fetch().then(()=>this.createResult(c,b))}fetch(a){return this.#p({...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#f))}#p(a){this.#t();let b=this.#d.fetch(this.options,a);return a?.throwOnError||(b=b.catch(gQ.noop)),b}#u(){this.#r();let a=(0,gQ.resolveStaleTime)(this.options.staleTime,this.#d);if(gQ.isServer||this.#f.isStale||!(0,gQ.isValidTimeout)(a))return;let b=(0,gQ.timeUntilStale)(this.#f.dataUpdatedAt,a);this.#l=gR.timeoutManager.setTimeout(()=>{this.#f.isStale||this.updateResult()},b+1)}#v(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#d):this.options.refetchInterval)??!1}#w(a){this.#s(),this.#n=a,!gQ.isServer&&!1!==(0,gQ.resolveEnabled)(this.options.enabled,this.#d)&&(0,gQ.isValidTimeout)(this.#n)&&0!==this.#n&&(this.#m=gR.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||gL.focusManager.isFocused())&&this.#p()},this.#n))}#q(){this.#u(),this.#w(this.#v())}#r(){this.#l&&(gR.timeoutManager.clearTimeout(this.#l),this.#l=void 0)}#s(){this.#m&&(gR.timeoutManager.clearInterval(this.#m),this.#m=void 0)}createResult(a,b){let c,d=this.#d,e=this.options,f=this.#f,g=this.#g,h=this.#h,i=a!==d?a.state:this.#e,{state:j}=a,k={...j},l=!1;if(b._optimisticResults){let c=this.hasListeners(),f=!c&&gT(a,b),g=c&&gV(a,d,b,e);(f||g)&&(k={...k,...(0,gN.fetchState)(j.data,a.options)}),"isRestoring"===b._optimisticResults&&(k.fetchStatus="idle")}let{error:m,errorUpdatedAt:n,status:o}=k;c=k.data;let p=!1;if(void 0!==b.placeholderData&&void 0===c&&"pending"===o){let a;f?.isPlaceholderData&&b.placeholderData===h?.placeholderData?(a=f.data,p=!0):a="function"==typeof b.placeholderData?b.placeholderData(this.#k?.state.data,this.#k):b.placeholderData,void 0!==a&&(o="success",c=(0,gQ.replaceData)(f?.data,a,b),l=!0)}if(b.select&&void 0!==c&&!p)if(f&&c===g?.data&&b.select===this.#i)c=this.#j;else try{this.#i=b.select,c=b.select(c),c=(0,gQ.replaceData)(f?.data,c,b),this.#j=c,this.#b=null}catch(a){this.#b=a}this.#b&&(m=this.#b,c=this.#j,n=Date.now(),o="error");let q="fetching"===k.fetchStatus,r="pending"===o,s="error"===o,t=r&&q,u=void 0!==c,v={status:o,fetchStatus:k.fetchStatus,isPending:r,isSuccess:"success"===o,isError:s,isInitialLoading:t,isLoading:t,data:c,dataUpdatedAt:k.dataUpdatedAt,error:m,errorUpdatedAt:n,failureCount:k.fetchFailureCount,failureReason:k.fetchFailureReason,errorUpdateCount:k.errorUpdateCount,isFetched:k.dataUpdateCount>0||k.errorUpdateCount>0,isFetchedAfterMount:k.dataUpdateCount>i.dataUpdateCount||k.errorUpdateCount>i.errorUpdateCount,isFetching:q,isRefetching:q&&!r,isLoadingError:s&&!u,isPaused:"paused"===k.fetchStatus,isPlaceholderData:l,isRefetchError:s&&u,isStale:gW(a,b),refetch:this.refetch,promise:this.#c,isEnabled:!1!==(0,gQ.resolveEnabled)(b.enabled,a)};if(this.options.experimental_prefetchInRender){let b=void 0!==v.data,c="error"===v.status&&!b,e=a=>{c?a.reject(v.error):b&&a.resolve(v.data)},f=()=>{e(this.#c=v.promise=(0,gP.pendingThenable)())},g=this.#c;switch(g.status){case"pending":a.queryHash===d.queryHash&&e(g);break;case"fulfilled":(c||v.data!==g.value)&&f();break;case"rejected":c&&v.error===g.reason||f()}}return v}updateResult(){let a=this.#f,b=this.createResult(this.#d,this.options);if(this.#g=this.#d.state,this.#h=this.options,void 0!==this.#g.data&&(this.#k=this.#d),(0,gQ.shallowEqualObjects)(b,a))return;this.#f=b;let c=()=>{if(!a)return!0;let{notifyOnChangeProps:b}=this.options,c="function"==typeof b?b():b;if("all"===c||!c&&!this.#o.size)return!0;let d=new Set(c??this.#o);return this.options.throwOnError&&d.add("error"),Object.keys(this.#f).some(b=>this.#f[b]!==a[b]&&d.has(b))};this.#x({listeners:c()})}#t(){let a=this.#a.getQueryCache().build(this.#a,this.options);if(a===this.#d)return;let b=this.#d;this.#d=a,this.#e=a.state,this.hasListeners()&&(b?.removeObserver(this),a.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#q()}#x(a){gM.notifyManager.batch(()=>{a.listeners&&this.listeners.forEach(a=>{a(this.#f)}),this.#a.getQueryCache().notify({query:this.#d,type:"observerResultsUpdated"})})}};function gT(a,b){return!1!==(0,gQ.resolveEnabled)(b.enabled,a)&&void 0===a.state.data&&("error"!==a.state.status||!1!==b.retryOnMount)||void 0!==a.state.data&&gU(a,b,b.refetchOnMount)}function gU(a,b,c){if(!1!==(0,gQ.resolveEnabled)(b.enabled,a)&&"static"!==(0,gQ.resolveStaleTime)(b.staleTime,a)){let d="function"==typeof c?c(a):c;return"always"===d||!1!==d&&gW(a,b)}return!1}function gV(a,b,c,d){return(a!==b||!1===(0,gQ.resolveEnabled)(d.enabled,a))&&(!c.suspense||"error"!==a.state.status)&&gW(a,c)}function gW(a,b){return!1!==(0,gQ.resolveEnabled)(b.enabled,a)&&a.isStaleByTime((0,gQ.resolveStaleTime)(b.staleTime,a))}var gX=a.i(37927),gY=J.createContext((d=!1,{clearReset:()=>{d=!1},reset:()=>{d=!0},isReset:()=>d})),gZ=J.createContext(!1);gZ.Provider;var g$=(a,b,c)=>b.fetchOptimistic(a).catch(()=>{c.clearReset()});function g_(a,b){return function(a,b,c){let d,e=J.useContext(gZ),f=J.useContext(gY),g=(0,gX.useQueryClient)(c),h=g.defaultQueryOptions(a);g.getDefaultOptions().queries?._experimental_beforeQuery?.(h);let i=g.getQueryCache().get(h.queryHash);if(h._optimisticResults=e?"isRestoring":"optimistic",h.suspense){let a=a=>"static"===a?a:Math.max(a??1e3,1e3),b=h.staleTime;h.staleTime="function"==typeof b?(...c)=>a(b(...c)):a(b),"number"==typeof h.gcTime&&(h.gcTime=Math.max(h.gcTime,1e3))}d=i?.state.error&&"function"==typeof h.throwOnError?(0,gQ.shouldThrowError)(h.throwOnError,[i.state.error,i]):h.throwOnError,(h.suspense||h.experimental_prefetchInRender||d)&&!f.isReset()&&(h.retryOnMount=!1),J.useEffect(()=>{f.clearReset()},[f]);let j=!g.getQueryCache().get(h.queryHash),[k]=J.useState(()=>new b(g,h)),l=k.getOptimisticResult(h),m=!e&&!1!==a.subscribed;if(J.useSyncExternalStore(J.useCallback(a=>{let b=m?k.subscribe(gM.notifyManager.batchCalls(a)):gQ.noop;return k.updateResult(),b},[k,m]),()=>k.getCurrentResult(),()=>k.getCurrentResult()),J.useEffect(()=>{k.setOptions(h)},[h,k]),h?.suspense&&l.isPending)throw g$(h,k,f);if((({result:a,errorResetBoundary:b,throwOnError:c,query:d,suspense:e})=>a.isError&&!b.isReset()&&!a.isFetching&&d&&(e&&void 0===a.data||(0,gQ.shouldThrowError)(c,[a.error,d])))({result:l,errorResetBoundary:f,throwOnError:h.throwOnError,query:i,suspense:h.suspense}))throw l.error;if(g.getDefaultOptions().queries?._experimental_afterQuery?.(h,l),h.experimental_prefetchInRender&&!gQ.isServer&&l.isLoading&&l.isFetching&&!e){let a=j?g$(h,k,f):i?.promise;a?.catch(gQ.noop).finally(()=>{k.updateResult()})}return h.notifyOnChangeProps?l:k.trackResult(l)}(a,gS,b)}var g0=a.i(12794),g1=gO,g2=class extends g1.Subscribable{#a;#f=void 0;#y;#z;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#A()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,gQ.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#y,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,gQ.hashKey)(b.mutationKey)!==(0,gQ.hashKey)(this.options.mutationKey)?this.reset():this.#y?.state.status==="pending"&&this.#y.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#y?.removeObserver(this)}onMutationUpdate(a){this.#A(),this.#x(a)}getCurrentResult(){return this.#f}reset(){this.#y?.removeObserver(this),this.#y=void 0,this.#A(),this.#x()}mutate(a,b){return this.#z=b,this.#y?.removeObserver(this),this.#y=this.#a.getMutationCache().build(this.#a,this.options),this.#y.addObserver(this),this.#y.execute(a)}#A(){let a=this.#y?.state??(0,g0.getDefaultState)();this.#f={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#x(a){gM.notifyManager.batch(()=>{if(this.#z&&this.hasListeners()){let b=this.#f.variables,c=this.#f.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};if(a?.type==="success"){try{this.#z.onSuccess?.(a.data,b,c,d)}catch(a){Promise.reject(a)}try{this.#z.onSettled?.(a.data,null,b,c,d)}catch(a){Promise.reject(a)}}else if(a?.type==="error"){try{this.#z.onError?.(a.error,b,c,d)}catch(a){Promise.reject(a)}try{this.#z.onSettled?.(void 0,a.error,b,c,d)}catch(a){Promise.reject(a)}}}this.listeners.forEach(a=>{a(this.#f)})})}};function g3(a,b){let c=(0,gX.useQueryClient)(b),[d]=J.useState(()=>new g2(c,a));J.useEffect(()=>{d.setOptions(a)},[d,a]);let e=J.useSyncExternalStore(J.useCallback(a=>d.subscribe(gM.notifyManager.batchCalls(a)),[d]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),f=J.useCallback((a,b)=>{d.mutate(a,b).catch(gQ.noop)},[d]);if(e.error&&(0,gQ.shouldThrowError)(d.options.throwOnError,[e.error]))throw e.error;return{...e,mutate:f,mutateAsync:e.mutate}}var g4=a.i(21730);let g5=Symbol.for("Dexie"),g6=globalThis[g5]||(globalThis[g5]=g4.default);if(g4.default.semVer!==g6.semVer)throw Error(`Two different versions of Dexie loaded in the same app: ${g4.default.semVer} and ${g6.semVer}`);let{liveQuery:g7,mergeRanges:g8,rangesOverlap:g9,RangeSet:ha,cmp:hb,Entity:hc,PropModification:hd,replacePrefix:he,add:hf,remove:hg,DexieYProvider:hh}=g6,hi=g6,hj=new class extends hi{photos;constructor(){super("PhotoVaultDB"),this.version(1).stores({photos:"++id, cid, uploadedAt"})}};async function hk(a){return await hj.photos.add(a)}async function hl(){return await hj.photos.orderBy("uploadedAt").reverse().toArray()}async function hm(a){return await hj.photos.where("cid").equals(a).first()}async function hn(a){await hj.photos.delete(a)}async function ho(){return await hj.photos.count()}class hp extends Error{constructor(a,b="FunctionsError",c){super(a),this.name=b,this.context=c}}class hq extends hp{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class hr extends hp{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class hs extends hp{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}(i=w||(w={})).Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2";class ht{constructor(b,{headers:c={},customFetch:d,region:e=w.Any}={}){this.url=b,this.headers=c,this.region=e,this.fetch=(b=>{let c;return c=b||("u"<typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)})(d)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a,b={}){var c,d,e,f,g;return d=this,e=void 0,f=void 0,g=function*(){try{let d,{headers:e,method:f,body:g}=b,h={},{region:i}=b;i||(i=this.region),i&&"any"!==i&&(h["x-region"]=i),g&&(e&&!Object.prototype.hasOwnProperty.call(e,"Content-Type")||!e)&&("u">typeof Blob&&g instanceof Blob||g instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",d=g):"string"==typeof g?(h["Content-Type"]="text/plain",d=g):"u">typeof FormData&&g instanceof FormData?d=g:(h["Content-Type"]="application/json",d=JSON.stringify(g)));let j=yield this.fetch(`${this.url}/${a}`,{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),e),body:d}).catch(a=>{throw new hq(a)}),k=j.headers.get("x-relay-error");if(k&&"true"===k)throw new hr(j);if(!j.ok)throw new hs(j);let l=(null!=(c=j.headers.get("Content-Type"))?c:"text/plain").split(";")[0].trim();return{data:"application/json"===l?yield j.json():"application/octet-stream"===l?yield j.blob():"text/event-stream"===l?j:"multipart/form-data"===l?yield j.formData():yield j.text(),error:null}}catch(a){return{data:null,error:a}}},new(f||(f=Promise))(function(a,b){function c(a){try{i(g.next(a))}catch(a){b(a)}}function h(a){try{i(g.throw(a))}catch(a){b(a)}}function i(b){var d;b.done?a(b.value):((d=b.value)instanceof f?d:new f(function(a){a(d)})).then(c,h)}i((g=g.apply(d,e||[])).next())})}}let{PostgrestClient:hu,PostgrestQueryBuilder:hv,PostgrestFilterBuilder:hw,PostgrestTransformBuilder:hx,PostgrestBuilder:hy,PostgrestError:hz}=a.i(79614).default,hA={"X-Client-Info":"realtime-js/2.11.2"};(j=x||(x={}))[j.connecting=0]="connecting",j[j.open=1]="open",j[j.closing=2]="closing",j[j.closed=3]="closed",(k=y||(y={})).closed="closed",k.errored="errored",k.joined="joined",k.joining="joining",k.leaving="leaving",(l=z||(z={})).close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token",(A||(A={})).websocket="websocket",(m=B||(B={})).Connecting="connecting",m.Open="open",m.Closing="closing",m.Closed="closed";class hB{constructor(){this.HEADER_LENGTH=1}decode(a,b){return a.constructor===ArrayBuffer?b(this._binaryDecode(a)):"string"==typeof a?b(JSON.parse(a)):b({})}_binaryDecode(a){let b=new DataView(a),c=new TextDecoder;return this._decodeBroadcast(a,b,c)}_decodeBroadcast(a,b,c){let d=b.getUint8(1),e=b.getUint8(2),f=this.HEADER_LENGTH+2,g=c.decode(a.slice(f,f+d));f+=d;let h=c.decode(a.slice(f,f+e));return f+=e,{ref:null,topic:g,event:h,payload:JSON.parse(c.decode(a.slice(f,a.byteLength)))}}}class hC{constructor(a,b){this.callback=a,this.timerCalc=b,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=b}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(n=C||(C={})).abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange";let hD=(a,b,c={})=>{var d;let e=null!=(d=c.skipTypes)?d:[];return Object.keys(b).reduce((c,d)=>(c[d]=hE(d,a,b,e),c),{})},hE=(a,b,c,d)=>{let e=b.find(b=>b.name===a),f=null==e?void 0:e.type,g=c[a];return f&&!d.includes(f)?hF(f,g):hG(g)},hF=(a,b)=>{if("_"===a.charAt(0))return hK(b,a.slice(1,a.length));switch(a){case C.bool:return hH(b);case C.float4:case C.float8:case C.int2:case C.int4:case C.int8:case C.numeric:case C.oid:return hI(b);case C.json:case C.jsonb:return hJ(b);case C.timestamp:return hL(b);case C.abstime:case C.date:case C.daterange:case C.int4range:case C.int8range:case C.money:case C.reltime:case C.text:case C.time:case C.timestamptz:case C.timetz:case C.tsrange:case C.tstzrange:default:return hG(b)}},hG=a=>a,hH=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},hI=a=>{if("string"==typeof a){let b=parseFloat(a);if(!Number.isNaN(b))return b}return a},hJ=a=>{if("string"==typeof a)try{return JSON.parse(a)}catch(a){console.log(`JSON parse error: ${a}`)}return a},hK=(a,b)=>{if("string"!=typeof a)return a;let c=a.length-1,d=a[c];if("{"===a[0]&&"}"===d){let d,e=a.slice(1,c);try{d=JSON.parse("["+e+"]")}catch(a){d=e?e.split(","):[]}return d.map(a=>hF(b,a))}return a},hL=a=>"string"==typeof a?a.replace(" ","T"):a,hM=a=>{let b=a;return(b=(b=b.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")};class hN{constructor(a,b,c={},d=1e4){this.channel=a,this.event=b,this.payload=c,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,b){var c;return this._hasReceived(a)&&b(null==(c=this.receivedResp)?void 0:c.response),this.recHooks.push({status:a,callback:b}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let a=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,b){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:b})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:b}){this.recHooks.filter(b=>b.status===a).forEach(a=>a.callback(b))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}(o=D||(D={})).SYNC="sync",o.JOIN="join",o.LEAVE="leave";class hO{constructor(a,b){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=(null==b?void 0:b.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hO.syncState(this.state,a,b,c),this.pendingDiffs.forEach(a=>{this.state=hO.syncDiff(this.state,a,b,c)}),this.pendingDiffs=[],d()}),this.channel._on(c.diff,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=hO.syncDiff(this.state,a,b,c),d())}),this.onJoin((a,b,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:b,newPresences:c})}),this.onLeave((a,b,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:b,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,b,c,d){let e=this.cloneDeep(a),f=this.transformState(b),g={},h={};return this.map(e,(a,b)=>{f[a]||(h[a]=b)}),this.map(f,(a,b)=>{let c=e[a];if(c){let d=b.map(a=>a.presence_ref),e=c.map(a=>a.presence_ref),f=b.filter(a=>0>e.indexOf(a.presence_ref)),i=c.filter(a=>0>d.indexOf(a.presence_ref));f.length>0&&(g[a]=f),i.length>0&&(h[a]=i)}else g[a]=b}),this.syncDiff(e,{joins:g,leaves:h},c,d)}static syncDiff(a,b,c,d){let{joins:e,leaves:f}={joins:this.transformState(b.joins),leaves:this.transformState(b.leaves)};return c||(c=()=>{}),d||(d=()=>{}),this.map(e,(b,d)=>{var e;let f=null!=(e=a[b])?e:[];if(a[b]=this.cloneDeep(d),f.length>0){let c=a[b].map(a=>a.presence_ref),d=f.filter(a=>0>c.indexOf(a.presence_ref));a[b].unshift(...d)}c(b,f,d)}),this.map(f,(b,c)=>{let e=a[b];if(!e)return;let f=c.map(a=>a.presence_ref);e=e.filter(a=>0>f.indexOf(a.presence_ref)),a[b]=e,d(b,e,c),0===e.length&&delete a[b]}),a}static map(a,b){return Object.getOwnPropertyNames(a).map(c=>b(c,a[c]))}static transformState(a){return Object.getOwnPropertyNames(a=this.cloneDeep(a)).reduce((b,c)=>{let d=a[c];return"metas"in d?b[c]=d.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):b[c]=d,b},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(p=E||(E={})).ALL="*",p.INSERT="INSERT",p.UPDATE="UPDATE",p.DELETE="DELETE",(q=F||(F={})).BROADCAST="broadcast",q.PRESENCE="presence",q.POSTGRES_CHANGES="postgres_changes",q.SYSTEM="system",(r=G||(G={})).SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR";class hP{constructor(a,b={config:{}},c){this.topic=a,this.params=b,this.socket=c,this.bindings={},this.state=y.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},b.config),this.timeout=this.socket.timeout,this.joinPush=new hN(this,z.join,this.params,this.timeout),this.rejoinTimer=new hC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=y.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=y.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=y.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=y.errored,this.rejoinTimer.scheduleTimeout())}),this._on(z.reply,{},(a,b)=>{this._trigger(this._replyEventName(b),a)}),this.presence=new hO(this),this.broadcastEndpointURL=hM(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(a,b=this.timeout){var c,d;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:e,presence:f,private:g}}=this.params;this._onError(b=>null==a?void 0:a(G.CHANNEL_ERROR,b)),this._onClose(()=>null==a?void 0:a(G.CLOSED));let h={},i={broadcast:e,presence:f,postgres_changes:null!=(d=null==(c=this.bindings.postgres_changes)?void 0:c.map(a=>a.filter))?d:[],private:g};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:i},h)),this.joinedOnce=!0,this._rejoin(b),this.joinPush.receive("ok",async({postgres_changes:b})=>{var c;if(this.socket.setAuth(),void 0===b){null==a||a(G.SUBSCRIBED);return}{let d=this.bindings.postgres_changes,e=null!=(c=null==d?void 0:d.length)?c:0,f=[];for(let c=0;c<e;c++){let e=d[c],{filter:{event:g,schema:h,table:i,filter:j}}=e,k=b&&b[c];if(k&&k.event===g&&k.schema===h&&k.table===i&&k.filter===j)f.push(Object.assign(Object.assign({},e),{id:k.id}));else{this.unsubscribe(),null==a||a(G.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,a&&a(G.SUBSCRIBED);return}}).receive("error",b=>{null==a||a(G.CHANNEL_ERROR,Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{null==a||a(G.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,b={}){return await this.send({type:"presence",event:"track",payload:a},b.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,b,c){return this._on(a,b,c)}async send(a,b={}){var c,d;if(this._canPush()||"broadcast"!==a.type)return new Promise(c=>{var d,e,f;let g=this._push(a.type,a,b.timeout||this.timeout);"broadcast"!==a.type||(null==(f=null==(e=null==(d=this.params)?void 0:d.config)?void 0:e.broadcast)?void 0:f.ack)||c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))});{let{event:e,payload:f}=a,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:f,private:this.private}]})};try{let a=await this._fetchWithTimeout(this.broadcastEndpointURL,g,null!=(c=b.timeout)?c:this.timeout);return await (null==(d=a.body)?void 0:d.cancel()),a.ok?"ok":"error"}catch(a){if("AbortError"===a.name)return"timed out";return"error"}}}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=y.leaving;let b=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(z.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(c=>{let d=new hN(this,z.leave,{},a);d.receive("ok",()=>{b(),c("ok")}).receive("timeout",()=>{b(),c("timed out")}).receive("error",()=>{c("error")}),d.send(),this._canPush()||d.trigger("ok",{})})}async _fetchWithTimeout(a,b,c){let d=new AbortController,e=setTimeout(()=>d.abort(),c),f=await this.socket.fetch(a,Object.assign(Object.assign({},b),{signal:d.signal}));return clearTimeout(e),f}_push(a,b,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new hN(this,a,b,c);return this._canPush()?d.send():(d.startTimeout(),this.pushBuffer.push(d)),d}_onMessage(a,b,c){return b}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,b,c){var d,e;let f=a.toLocaleLowerCase(),{close:g,error:h,leave:i,join:j}=z;if(c&&[g,h,i,j].indexOf(f)>=0&&c!==this._joinRef())return;let k=this._onMessage(f,b,c);if(b&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?null==(d=this.bindings.postgres_changes)||d.filter(a=>{var b,c,d;return(null==(b=a.filter)?void 0:b.event)==="*"||(null==(d=null==(c=a.filter)?void 0:c.event)?void 0:d.toLocaleLowerCase())===f}).map(a=>a.callback(k,c)):null==(e=this.bindings[f])||e.filter(a=>{var c,d,e,g,h,i;if(!["broadcast","presence","postgres_changes"].includes(f))return a.type.toLocaleLowerCase()===f;if("id"in a){let f=a.id,g=null==(c=a.filter)?void 0:c.event;return f&&(null==(d=b.ids)?void 0:d.includes(f))&&("*"===g||(null==g?void 0:g.toLocaleLowerCase())===(null==(e=b.data)?void 0:e.type.toLocaleLowerCase()))}{let c=null==(h=null==(g=null==a?void 0:a.filter)?void 0:g.event)?void 0:h.toLocaleLowerCase();return"*"===c||c===(null==(i=null==b?void 0:b.event)?void 0:i.toLocaleLowerCase())}}).map(a=>{if("object"==typeof k&&"ids"in k){let a=k.data,{schema:b,table:c,commit_timestamp:d,type:e,errors:f}=a;k=Object.assign(Object.assign({},{schema:b,table:c,commit_timestamp:d,eventType:e,new:{},old:{},errors:f}),this._getPayloadRecords(a))}a.callback(k,c)})}_isClosed(){return this.state===y.closed}_isJoined(){return this.state===y.joined}_isJoining(){return this.state===y.joining}_isLeaving(){return this.state===y.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,b,c){let d=a.toLocaleLowerCase(),e={type:d,filter:b,callback:c};return this.bindings[d]?this.bindings[d].push(e):this.bindings[d]=[e],this}_off(a,b){let c=a.toLocaleLowerCase();return this.bindings[c]=this.bindings[c].filter(a=>{var d;return!((null==(d=a.type)?void 0:d.toLocaleLowerCase())===c&&hP.isEqual(a.filter,b))}),this}static isEqual(a,b){if(Object.keys(a).length!==Object.keys(b).length)return!1;for(let c in a)if(a[c]!==b[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(z.close,{},a)}_onError(a){this._on(z.error,{},b=>a(b))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=y.joining,this.joinPush.resend(a))}_getPayloadRecords(a){let b={new:{},old:{}};return("INSERT"===a.type||"UPDATE"===a.type)&&(b.new=hD(a.columns,a.record)),("UPDATE"===a.type||"DELETE"===a.type)&&(b.old=hD(a.columns,a.old_record)),b}}let hQ=()=>{},hR="u">typeof WebSocket,hS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hT{constructor(b,c){var d;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=hA,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=hQ,this.conn=null,this.sendBuffer=[],this.serializer=new hB,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=b=>{let c;return c=b||("u"<typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)},this.endPoint=`${b}/${A.websocket}`,this.httpEndpoint=hM(b),(null==c?void 0:c.transport)?this.transport=c.transport:this.transport=null,(null==c?void 0:c.params)&&(this.params=c.params),(null==c?void 0:c.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),c.headers)),(null==c?void 0:c.timeout)&&(this.timeout=c.timeout),(null==c?void 0:c.logger)&&(this.logger=c.logger),(null==c?void 0:c.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=c.heartbeatIntervalMs);const e=null==(d=null==c?void 0:c.params)?void 0:d.apikey;e&&(this.accessTokenValue=e,this.apiKey=e),this.reconnectAfterMs=(null==c?void 0:c.reconnectAfterMs)?c.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=(null==c?void 0:c.encode)?c.encode:(a,b)=>b(JSON.stringify(a)),this.decode=(null==c?void 0:c.decode)?c.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new hC(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==c?void 0:c.fetch),(null==c?void 0:c.worker)&&(this.worker=(null==c?void 0:c.worker)||!1,this.workerUrl=null==c?void 0:c.workerUrl),this.accessToken=(null==c?void 0:c.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(hR){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new hU(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),a.A(12079).then(({default:a})=>{this.conn=new a(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(a,b){this.conn&&(this.conn.onclose=function(){},a?this.conn.close(a,null!=b?b:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(a){let b=await a.unsubscribe();return 0===this.channels.length&&this.disconnect(),b}async removeAllChannels(){let a=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.disconnect(),a}log(a,b,c){this.logger(a,b,c)}connectionState(){switch(this.conn&&this.conn.readyState){case x.connecting:return B.Connecting;case x.open:return B.Open;case x.closing:return B.Closing;default:return B.Closed}}isConnected(){return this.connectionState()===B.Open}channel(a,b={config:{}}){let c=new hP(`realtime:${a}`,b,this);return this.channels.push(c),c}push(a){let{topic:b,event:c,payload:d,ref:e}=a,f=()=>{this.encode(a,a=>{var b;null==(b=this.conn)||b.send(a)})};this.log("push",`${b} ${c} (${e})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){let b=a||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(b){let a=null;try{a=JSON.parse(atob(b.split(".")[1]))}catch(a){}if(a&&a.exp&&!(Math.floor(Date.now()/1e3)-a.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`);this.accessTokenValue=b,this.channels.forEach(a=>{b&&a.updateJoinPayload({access_token:b}),a.joinedOnce&&a._isJoined()&&a._push(z.access_token,{access_token:b})})}}async sendHeartbeat(){var a;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),null==(a=this.conn)||a.close(1e3,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let b=this.channels.find(b=>b.topic===a&&(b._isJoined()||b._isJoining()));b&&(this.log("transport",`leaving duplicate topic "${a}"`),b.unsubscribe())}_remove(a){this.channels=this.channels.filter(b=>b._joinRef()!==a._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_onConnMessage(a){this.decode(a.data,a=>{let{topic:b,event:c,payload:d,ref:e}=a;e&&e===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${d.status||""} ${b} ${c} ${e&&"("+e+")"||""}`,d),this.channels.filter(a=>a._isMember(b)).forEach(a=>a._trigger(c,d,e)),this.stateChangeCallbacks.message.forEach(b=>b(a))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{"keepAlive"===a.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach(a=>a())}_onConnClose(a){this.log("transport","close",a),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(b=>b(a))}_onConnError(a){this.log("transport",a.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(b=>b(a))}_triggerChanError(){this.channels.forEach(a=>a._trigger(z.error))}_appendParams(a,b){if(0===Object.keys(b).length)return a;let c=a.match(/\?/)?"&":"?",d=new URLSearchParams(b);return`${a}${c}${d}`}_workerObjectUrl(a){let b;if(a)b=a;else{let a=new Blob([hS],{type:"application/javascript"});b=URL.createObjectURL(a)}return b}}class hU{constructor(a,b,c){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=x.connecting,this.send=()=>{},this.url=null,this.url=a,this.close=c.close}}class hV extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function hW(a){return"object"==typeof a&&null!==a&&"__isStorageError"in a}class hX extends hV{constructor(a,b){super(a),this.name="StorageApiError",this.status=b}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class hY extends hV{constructor(a,b){super(a),this.name="StorageUnknownError",this.originalError=b}}let hZ=b=>{let c;return c=b||("u"<typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)},h$=a=>{if(Array.isArray(a))return a.map(a=>h$(a));if("function"==typeof a||a!==Object(a))return a;let b={};return Object.entries(a).forEach(([a,c])=>{b[a.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""))]=h$(c)}),b};var h_=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};let h0=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a);function h1(b,c,d,e,f,g){return h_(this,void 0,void 0,function*(){return new Promise((h,i)=>{let j;b(d,(j={method:c,headers:(null==e?void 0:e.headers)||{}},"GET"===c?j:(j.headers=Object.assign({"Content-Type":"application/json"},null==e?void 0:e.headers),g&&(j.body=JSON.stringify(g)),Object.assign(Object.assign({},j),f)))).then(a=>{if(!a.ok)throw a;return(null==e?void 0:e.noResolveJson)?a:a.json()}).then(a=>h(a)).catch(b=>h_(void 0,void 0,void 0,function*(){var c,d,f,g;let h=yield(c=void 0,d=void 0,f=void 0,g=function*(){return"u"<typeof Response?(yield a.A(59789)).Response:Response},new(f||(f=Promise))(function(a,b){function e(a){try{i(g.next(a))}catch(a){b(a)}}function h(a){try{i(g.throw(a))}catch(a){b(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof f?c:new f(function(a){a(c)})).then(e,h)}i((g=g.apply(c,d||[])).next())}));b instanceof h&&!(null==e?void 0:e.noResolveJson)?b.json().then(a=>{i(new hX(h0(a),b.status||500))}).catch(a=>{i(new hY(h0(a),a))}):i(new hY(h0(b),b))}))})})}function h2(a,b,c,d){return h_(this,void 0,void 0,function*(){return h1(a,"GET",b,c,d)})}function h3(a,b,c,d,e){return h_(this,void 0,void 0,function*(){return h1(a,"POST",b,d,e,c)})}function h4(a,b,c,d,e){return h_(this,void 0,void 0,function*(){return h1(a,"DELETE",b,d,e,c)})}var h5=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};let h6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},h7={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class h8{constructor(a,b={},c,d){this.url=a,this.headers=b,this.bucketId=c,this.fetch=hZ(d)}uploadOrUpdate(a,b,c,d){return h5(this,void 0,void 0,function*(){try{let e,f=Object.assign(Object.assign({},h7),d),g=Object.assign(Object.assign({},this.headers),"POST"===a&&{"x-upsert":String(f.upsert)}),h=f.metadata;"u">typeof Blob&&c instanceof Blob?((e=new FormData).append("cacheControl",f.cacheControl),h&&e.append("metadata",this.encodeMetadata(h)),e.append("",c)):"u">typeof FormData&&c instanceof FormData?((e=c).append("cacheControl",f.cacheControl),h&&e.append("metadata",this.encodeMetadata(h))):(e=c,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,h&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),(null==d?void 0:d.headers)&&(g=Object.assign(Object.assign({},g),d.headers));let i=this._removeEmptyFolders(b),j=this._getFinalPath(i),k=yield this.fetch(`${this.url}/object/${j}`,Object.assign({method:a,body:e,headers:g},(null==f?void 0:f.duplex)?{duplex:f.duplex}:{})),l=yield k.json();if(k.ok)return{data:{path:i,id:l.Id,fullPath:l.Key},error:null};return{data:null,error:l}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}upload(a,b,c){return h5(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,b,c)})}uploadToSignedUrl(a,b,c,d){return h5(this,void 0,void 0,function*(){let e=this._removeEmptyFolders(a),f=this._getFinalPath(e),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",b);try{let a,b=Object.assign({upsert:h7.upsert},d),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(b.upsert)});"u">typeof Blob&&c instanceof Blob?((a=new FormData).append("cacheControl",b.cacheControl),a.append("",c)):"u">typeof FormData&&c instanceof FormData?(a=c).append("cacheControl",b.cacheControl):(a=c,f["cache-control"]=`max-age=${b.cacheControl}`,f["content-type"]=b.contentType);let h=yield this.fetch(g.toString(),{method:"PUT",body:a,headers:f}),i=yield h.json();if(h.ok)return{data:{path:e,fullPath:i.Key},error:null};return{data:null,error:i}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(a,b){return h5(this,void 0,void 0,function*(){try{let c=this._getFinalPath(a),d=Object.assign({},this.headers);(null==b?void 0:b.upsert)&&(d["x-upsert"]="true");let e=yield h3(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:d}),f=new URL(this.url+e.url),g=f.searchParams.get("token");if(!g)throw new hV("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:g},error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}update(a,b,c){return h5(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,b,c)})}move(a,b,c){return h5(this,void 0,void 0,function*(){try{return{data:yield h3(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}copy(a,b,c){return h5(this,void 0,void 0,function*(){try{return{data:{path:(yield h3(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}createSignedUrl(a,b,c){return h5(this,void 0,void 0,function*(){try{let d=this._getFinalPath(a),e=yield h3(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:b},(null==c?void 0:c.transform)?{transform:c.transform}:{}),{headers:this.headers}),f=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:e={signedUrl:encodeURI(`${this.url}${e.signedURL}${f}`)},error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}createSignedUrls(a,b,c){return h5(this,void 0,void 0,function*(){try{let d=yield h3(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:b,paths:a},{headers:this.headers}),e=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:d.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${e}`):null})),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}download(a,b){return h5(this,void 0,void 0,function*(){let c=void 0!==(null==b?void 0:b.transform),d=this.transformOptsToQueryString((null==b?void 0:b.transform)||{}),e=d?`?${d}`:"";try{let b=this._getFinalPath(a),d=yield h2(this.fetch,`${this.url}/${c?"render/image/authenticated":"object"}/${b}${e}`,{headers:this.headers,noResolveJson:!0});return{data:yield d.blob(),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}info(a){return h5(this,void 0,void 0,function*(){let b=this._getFinalPath(a);try{let a=yield h2(this.fetch,`${this.url}/object/info/${b}`,{headers:this.headers});return{data:h$(a),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}exists(a){return h5(this,void 0,void 0,function*(){let b=this._getFinalPath(a);try{return yield function(a,b,c,d){return h_(this,void 0,void 0,function*(){return h1(a,"HEAD",b,Object.assign(Object.assign({},c),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${b}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(hW(a)&&a instanceof hY){let b=a.originalError;if([400,404].includes(null==b?void 0:b.status))return{data:!1,error:a}}throw a}})}getPublicUrl(a,b){let c=this._getFinalPath(a),d=[],e=(null==b?void 0:b.download)?`download=${!0===b.download?"":b.download}`:"";""!==e&&d.push(e);let f=void 0!==(null==b?void 0:b.transform),g=this.transformOptsToQueryString((null==b?void 0:b.transform)||{});""!==g&&d.push(g);let h=d.join("&");return""!==h&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${f?"render/image":"object"}/public/${c}${h}`)}}}remove(a){return h5(this,void 0,void 0,function*(){try{return{data:yield h4(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}list(a,b,c){return h5(this,void 0,void 0,function*(){try{let d=Object.assign(Object.assign(Object.assign({},h6),b),{prefix:a||""});return{data:yield h3(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},c),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return"u">typeof Buffer?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){let b=[];return a.width&&b.push(`width=${a.width}`),a.height&&b.push(`height=${a.height}`),a.resize&&b.push(`resize=${a.resize}`),a.format&&b.push(`format=${a.format}`),a.quality&&b.push(`quality=${a.quality}`),b.join("&")}}let h9={"X-Client-Info":"storage-js/2.7.1"};var ia=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};class ib{constructor(a,b={},c){this.url=a,this.headers=Object.assign(Object.assign({},h9),b),this.fetch=hZ(c)}listBuckets(){return ia(this,void 0,void 0,function*(){try{return{data:yield h2(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}getBucket(a){return ia(this,void 0,void 0,function*(){try{return{data:yield h2(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}createBucket(a,b={public:!1}){return ia(this,void 0,void 0,function*(){try{return{data:yield h3(this.fetch,`${this.url}/bucket`,{id:a,name:a,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}updateBucket(a,b){return ia(this,void 0,void 0,function*(){try{return{data:yield function(a,b,c,d,e){return h_(this,void 0,void 0,function*(){return h1(a,"PUT",b,d,void 0,c)})}(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}emptyBucket(a){return ia(this,void 0,void 0,function*(){try{return{data:yield h3(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}deleteBucket(a){return ia(this,void 0,void 0,function*(){try{return{data:yield h4(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(a){if(hW(a))return{data:null,error:a};throw a}})}}class ic extends ib{constructor(a,b={},c){super(a,b,c)}from(a){return new h8(this.url,this.headers,a,this.fetch)}}let id="";id="u">typeof Deno?"deno":"u">typeof document?"web":"u">typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let ie={headers:{"X-Client-Info":`supabase-js-${id}/2.48.1`}},ig={schema:"public"},ih={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ii={};var ij=a.i(23952);let ik="2.67.3",il={"X-Client-Info":`gotrue-js/${ik}`},im="X-Supabase-Api-Version",io={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ip=b=>{let c;return c=b||("u"<typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)},iq=async(a,b,c)=>{await a.setItem(b,JSON.stringify(c))},ir=async(a,b)=>{let c=await a.getItem(b);if(!c)return null;try{return JSON.parse(c)}catch(a){return c}},is=async(a,b)=>{await a.removeItem(b)};class it{constructor(){this.promise=new it.promiseConstructor((a,b)=>{this.resolve=a,this.reject=b})}}function iu(a){let b=a.split(".");if(3!==b.length)throw Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(b[1]))throw Error("JWT is not valid: payload is not in base64url format");return JSON.parse(function(a){let b,c,d,e,f,g,h,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j="",k=0;for(a=a.replace("-","+").replace("_","/");k<a.length;)e=i.indexOf(a.charAt(k++)),f=i.indexOf(a.charAt(k++)),g=i.indexOf(a.charAt(k++)),h=i.indexOf(a.charAt(k++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,j+=String.fromCharCode(b),64!=g&&0!=c&&(j+=String.fromCharCode(c)),64!=h&&0!=d&&(j+=String.fromCharCode(d));return j}(b[1]))}async function iv(a){return await new Promise(b=>{setTimeout(()=>b(null),a)})}function iw(a){return("0"+a.toString(16)).substr(-2)}async function ix(a){let b=new TextEncoder().encode(a);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>String.fromCharCode(a)).join("")}async function iy(a){return"u">typeof crypto&&void 0!==crypto.subtle&&"u">typeof TextEncoder?btoa(await ix(a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a)}async function iz(a,b,c=!1){let d=function(){let a=new Uint32Array(56);if("u"<typeof crypto){let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",b=a.length,c="";for(let d=0;d<56;d++)c+=a.charAt(Math.floor(Math.random()*b));return c}return crypto.getRandomValues(a),Array.from(a,iw).join("")}(),e=d;c&&(e+="/PASSWORD_RECOVERY"),await iq(a,`${b}-code-verifier`,e);let f=await iy(d),g=d===f?"plain":"s256";return[f,g]}it.promiseConstructor=Promise;let iA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class iB extends Error{constructor(a,b,c){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=b,this.code=c}}function iC(a){return"object"==typeof a&&null!==a&&"__isAuthError"in a}class iD extends iB{constructor(a,b,c){super(a,b,c),this.name="AuthApiError",this.status=b,this.code=c}}class iE extends iB{constructor(a,b){super(a),this.name="AuthUnknownError",this.originalError=b}}class iF extends iB{constructor(a,b,c,d){super(a,c,d),this.name=b,this.status=c}}class iG extends iF{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class iH extends iF{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class iI extends iF{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class iJ extends iF{constructor(a,b=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=b}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class iK extends iF{constructor(a,b){super(a,"AuthRetryableFetchError",b,void 0)}}function iL(a){return iC(a)&&"AuthRetryableFetchError"===a.name}class iM extends iF{constructor(a,b,c){super(a,"AuthWeakPasswordError",b,"weak_password"),this.reasons=c}}var iN=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};let iO=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),iP=[502,503,504];async function iQ(a){var b;let c,d;if(!("object"==typeof a&&null!==a&&"status"in a&&"ok"in a&&"json"in a&&"function"==typeof a.json))throw new iK(iO(a),0);if(iP.includes(a.status))throw new iK(iO(a),a.status);try{c=await a.json()}catch(a){throw new iE(iO(a),a)}let e=function(a){let b=a.headers.get(im);if(!b||!b.match(iA))return null;try{return new Date(`${b}T00:00:00.0Z`)}catch(a){return null}}(a);if(e&&e.getTime()>=io["2024-01-01"].timestamp&&"object"==typeof c&&c&&"string"==typeof c.code?d=c.code:"object"==typeof c&&c&&"string"==typeof c.error_code&&(d=c.error_code),d){if("weak_password"===d)throw new iM(iO(c),a.status,(null==(b=c.weak_password)?void 0:b.reasons)||[]);else if("session_not_found"===d)throw new iG}else if("object"==typeof c&&c&&"object"==typeof c.weak_password&&c.weak_password&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0))throw new iM(iO(c),a.status,c.weak_password.reasons);throw new iD(iO(c),a.status||500,d)}async function iR(a,b,c,d){var e;let f=Object.assign({},null==d?void 0:d.headers);f[im]||(f[im]=io["2024-01-01"].name),(null==d?void 0:d.jwt)&&(f.Authorization=`Bearer ${d.jwt}`);let g=null!=(e=null==d?void 0:d.query)?e:{};(null==d?void 0:d.redirectTo)&&(g.redirect_to=d.redirectTo);let h=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",i=await iS(a,b,c+h,{headers:f,noResolveJson:null==d?void 0:d.noResolveJson},{},null==d?void 0:d.body);return(null==d?void 0:d.xform)?null==d?void 0:d.xform(i):{data:Object.assign({},i),error:null}}async function iS(a,b,c,d,e,f){let g,h,i=(h={method:b,headers:(null==d?void 0:d.headers)||{}},"GET"===b?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==d?void 0:d.headers),h.body=JSON.stringify(f),Object.assign(Object.assign({},h),e)));try{g=await a(c,Object.assign({},i))}catch(a){throw console.error(a),new iK(iO(a),0)}if(g.ok||await iQ(g),null==d?void 0:d.noResolveJson)return g;try{return await g.json()}catch(a){await iQ(a)}}function iT(a){var b,c,d;let e=null;(d=a).access_token&&d.refresh_token&&d.expires_in&&(e=Object.assign({},a),a.expires_at||(e.expires_at=(c=a.expires_in,Math.round(Date.now()/1e3)+c)));return{data:{session:e,user:null!=(b=a.user)?b:a},error:null}}function iU(a){let b=iT(a);return!b.error&&a.weak_password&&"object"==typeof a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&"string"==typeof a.weak_password.message&&a.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0)&&(b.data.weak_password=a.weak_password),b}function iV(a){var b;return{data:{user:null!=(b=a.user)?b:a},error:null}}function iW(a){return{data:a,error:null}}function iX(a){let{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f}=a;return{data:{properties:{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f},user:Object.assign({},iN(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function iY(a){return a}var iZ=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};class i${constructor({url:a="",headers:b={},fetch:c}){this.url=a,this.headers=b,this.fetch=ip(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(a,b="global"){try{return await iR(this.fetch,"POST",`${this.url}/logout?scope=${b}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(a){if(iC(a))return{data:null,error:a};throw a}}async inviteUserByEmail(a,b={}){try{return await iR(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:b.data},headers:this.headers,redirectTo:b.redirectTo,xform:iV})}catch(a){if(iC(a))return{data:{user:null},error:a};throw a}}async generateLink(a){try{let{options:b}=a,c=iZ(a,["options"]),d=Object.assign(Object.assign({},c),b);return"newEmail"in c&&(d.new_email=null==c?void 0:c.newEmail,delete d.newEmail),await iR(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:iX,redirectTo:null==b?void 0:b.redirectTo})}catch(a){if(iC(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(a){try{return await iR(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:iV})}catch(a){if(iC(a))return{data:{user:null},error:a};throw a}}async listUsers(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await iR(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:iY});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(iC(a))return{data:{users:[]},error:a};throw a}}async getUserById(a){try{return await iR(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:iV})}catch(a){if(iC(a))return{data:{user:null},error:a};throw a}}async updateUserById(a,b){try{return await iR(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:b,headers:this.headers,xform:iV})}catch(a){if(iC(a))return{data:{user:null},error:a};throw a}}async deleteUser(a,b=!1){try{return await iR(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:b},xform:iV})}catch(a){if(iC(a))return{data:{user:null},error:a};throw a}}async _listFactors(a){try{let{data:b,error:c}=await iR(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:b,error:c}}catch(a){if(iC(a))return{data:null,error:a};throw a}}async _deleteFactor(a){try{return{data:await iR(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(a){if(iC(a))return{data:null,error:a};throw a}}}let i_={getItem:a=>null,setItem:(a,b)=>{},removeItem:a=>{}};function i0(a={}){return{getItem:b=>a[b]||null,setItem:(b,c)=>{a[b]=c},removeItem:b=>{delete a[b]}}}globalThis;class i1 extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(a){"u">typeof self&&(self.globalThis=self)}let i2={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:il,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function i3(a,b,c){return await c()}class i4{constructor(a){this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=i4.nextInstanceID,i4.nextInstanceID+=1,this.instanceID;const b=Object.assign(Object.assign({},i2),a);this.logDebugMessages=!!b.debug,"function"==typeof b.debug&&(this.logger=b.debug),this.persistSession=b.persistSession,this.storageKey=b.storageKey,this.autoRefreshToken=b.autoRefreshToken,this.admin=new i$({url:b.url,headers:b.headers,fetch:b.fetch}),this.url=b.url,this.headers=b.headers,this.fetch=ip(b.fetch),this.lock=b.lock||i3,this.detectSessionInUrl=b.detectSessionInUrl,this.flowType=b.flowType,this.hasCustomAuthorizationHeader=b.hasCustomAuthorizationHeader,b.lock?this.lock=b.lock:this.lock=i3,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?b.storage?this.storage=b.storage:(this.memoryStorage={},this.storage=i0(this.memoryStorage)):(this.memoryStorage={},this.storage=i0(this.memoryStorage)),this.initialize()}_debug(...a){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ik}) ${new Date().toISOString()}`,...a),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){try{let a=function(a){let b={},c=new URL(a);if(c.hash&&"#"===c.hash[0])try{new URLSearchParams(c.hash.substring(1)).forEach((a,c)=>{b[c]=a})}catch(a){}return c.searchParams.forEach((a,c)=>{b[c]=a}),b}(window.location.href);return this._isImplicitGrantCallback(a)||await this._isPKCECallback(a),await this._recoverAndRefresh(),{error:null}}catch(a){if(iC(a))return{error:a};return{error:new iE("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var b,c,d;try{let{data:e,error:f}=await iR(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(c=null==(b=null==a?void 0:a.options)?void 0:b.data)?c:{},gotrue_meta_security:{captcha_token:null==(d=null==a?void 0:a.options)?void 0:d.captchaToken}},xform:iT});if(f||!e)return{data:{user:null,session:null},error:f};let g=e.session,h=e.user;return e.session&&(await this._saveSession(e.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:h,session:g},error:null}}catch(a){if(iC(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(a){var b,c,d;try{let e;if("email"in a){let{email:c,password:d,options:f}=a,g=null,h=null;"pkce"===this.flowType&&([g,h]=await iz(this.storage,this.storageKey)),e=await iR(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==f?void 0:f.emailRedirectTo,body:{email:c,password:d,data:null!=(b=null==f?void 0:f.data)?b:{},gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken},code_challenge:g,code_challenge_method:h},xform:iT})}else if("phone"in a){let{phone:b,password:f,options:g}=a;e=await iR(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:f,data:null!=(c=null==g?void 0:g.data)?c:{},channel:null!=(d=null==g?void 0:g.channel)?d:"sms",gotrue_meta_security:{captcha_token:null==g?void 0:g.captchaToken}},xform:iT})}else throw new iI("You must provide either an email or phone number and a password");let{data:f,error:g}=e;if(g||!f)return{data:{user:null,session:null},error:g};let h=f.session,i=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:i,session:h},error:null}}catch(a){if(iC(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(a){try{let b;if("email"in a){let{email:c,password:d,options:e}=a;b=await iR(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:iU})}else if("phone"in a){let{phone:c,password:d,options:e}=a;b=await iR(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:iU})}else throw new iI("You must provide either an email or phone number and a password");let{data:c,error:d}=b;if(d)return{data:{user:null,session:null},error:d};if(!c||!c.session||!c.user)return{data:{user:null,session:null},error:new iH};return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:d}}catch(a){if(iC(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(a){var b,c,d,e;return await this._handleProviderSignIn(a.provider,{redirectTo:null==(b=a.options)?void 0:b.redirectTo,scopes:null==(c=a.options)?void 0:c.scopes,queryParams:null==(d=a.options)?void 0:d.queryParams,skipBrowserRedirect:null==(e=a.options)?void 0:e.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async _exchangeCodeForSession(a){let b=await ir(this.storage,`${this.storageKey}-code-verifier`),[c,d]=(null!=b?b:"").split("/");try{let{data:b,error:e}=await iR(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:c},xform:iT});if(await is(this.storage,`${this.storageKey}-code-verifier`),e)throw e;if(!b||!b.session||!b.user)return{data:{user:null,session:null,redirectType:null},error:new iH};return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign(Object.assign({},b),{redirectType:null!=d?d:null}),error:e}}catch(a){if(iC(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(a){try{let{options:b,provider:c,token:d,access_token:e,nonce:f}=a,{data:g,error:h}=await iR(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:d,access_token:e,nonce:f,gotrue_meta_security:{captcha_token:null==b?void 0:b.captchaToken}},xform:iT});if(h)return{data:{user:null,session:null},error:h};if(!g||!g.session||!g.user)return{data:{user:null,session:null},error:new iH};return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:h}}catch(a){if(iC(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(a){var b,c,d,e,f;try{if("email"in a){let{email:d,options:e}=a,f=null,g=null;"pkce"===this.flowType&&([f,g]=await iz(this.storage,this.storageKey));let{error:h}=await iR(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:null!=(b=null==e?void 0:e.data)?b:{},create_user:null==(c=null==e?void 0:e.shouldCreateUser)||c,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:null==e?void 0:e.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in a){let{phone:b,options:c}=a,{data:g,error:h}=await iR(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:null!=(d=null==c?void 0:c.data)?d:{},create_user:null==(e=null==c?void 0:c.shouldCreateUser)||e,gotrue_meta_security:{captcha_token:null==c?void 0:c.captchaToken},channel:null!=(f=null==c?void 0:c.channel)?f:"sms"}});return{data:{user:null,session:null,messageId:null==g?void 0:g.message_id},error:h}}throw new iI("You must provide either an email or phone number.")}catch(a){if(iC(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(a){var b,c;try{let d,e;"options"in a&&(d=null==(b=a.options)?void 0:b.redirectTo,e=null==(c=a.options)?void 0:c.captchaToken);let{data:f,error:g}=await iR(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:e}}),redirectTo:d,xform:iT});if(g)throw g;if(!f)throw Error("An error occurred on token verification.");let h=f.session,i=f.user;return(null==h?void 0:h.access_token)&&(await this._saveSession(h),await this._notifyAllSubscribers("recovery"==a.type?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:i,session:h},error:null}}catch(a){if(iC(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(a){var b,c,d;try{let e=null,f=null;return"pkce"===this.flowType&&([e,f]=await iz(this.storage,this.storageKey)),await iR(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:null!=(c=null==(b=a.options)?void 0:b.redirectTo)?c:void 0}),(null==(d=null==a?void 0:a.options)?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:e,code_challenge_method:f}),headers:this.headers,xform:iW})}catch(a){if(iC(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{let{data:{session:b},error:c}=a;if(c)throw c;if(!b)throw new iG;let{error:d}=await iR(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:b.access_token});return{data:{user:null,session:null},error:d}})}catch(a){if(iC(a))return{data:{user:null,session:null},error:a};throw a}}async resend(a){try{let b=`${this.url}/resend`;if("email"in a){let{email:c,type:d,options:e}=a,{error:f}=await iR(this.fetch,"POST",b,{headers:this.headers,body:{email:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},redirectTo:null==e?void 0:e.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in a){let{phone:c,type:d,options:e}=a,{data:f,error:g}=await iR(this.fetch,"POST",b,{headers:this.headers,body:{phone:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}}});return{data:{user:null,session:null,messageId:null==f?void 0:f.message_id},error:g}}throw new iI("You must provide either an email or phone number and a type")}catch(a){if(iC(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(a,b){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){let a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await a,await b()))();return this.pendingInLock.push((async()=>{try{await c}catch(a){}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let a=b();for(this.pendingInLock.push((async()=>{try{await a}catch(a){}})()),await a;this.pendingInLock.length;){let a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{let b=await this.__loadSession();return await a(b)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let a=null,b=await ir(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",b),null!==b&&(this._isValidSession(b)?a=b:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};let c=!!a.expires_at&&a.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",a.expires_at),!c){if(this.storage.isServer){let b=this.suppressGetSessionWarning;a=new Proxy(a,{get:(a,c,d)=>(b||"user"!==c||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),b=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,c,d))})}return{data:{session:a},error:null}}let{session:d,error:e}=await this._callRefreshToken(a.refresh_token);if(e)return{data:{session:null},error:e};return{data:{session:d},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{if(a)return await iR(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:iV});return await this._useSession(async a=>{var b,c,d;let{data:e,error:f}=a;if(f)throw f;return(null==(b=e.session)?void 0:b.access_token)||this.hasCustomAuthorizationHeader?await iR(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0,xform:iV}):{data:{user:null},error:new iG}})}catch(a){if(iC(a))return iC(a)&&"AuthSessionMissingError"===a.name&&(await this._removeSession(),await is(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(a,b={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,b))}async _updateUser(a,b={}){try{return await this._useSession(async c=>{let{data:d,error:e}=c;if(e)throw e;if(!d.session)throw new iG;let f=d.session,g=null,h=null;"pkce"===this.flowType&&null!=a.email&&([g,h]=await iz(this.storage,this.storageKey));let{data:i,error:j}=await iR(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==b?void 0:b.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:h}),jwt:f.access_token,xform:iV});if(j)throw j;return f.user=i.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(a){if(iC(a))return{data:{user:null},error:a};throw a}}_decodeJWT(a){return iu(a)}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new iG;let b=Date.now()/1e3,c=b,d=!0,e=null,f=iu(a.access_token);if(f.exp&&(d=(c=f.exp)<=b),d){let{session:b,error:c}=await this._callRefreshToken(a.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!b)return{data:{user:null,session:null},error:null};e=b}else{let{data:d,error:f}=await this._getUser(a.access_token);if(f)throw f;e={access_token:a.access_token,refresh_token:a.refresh_token,user:d.user,token_type:"bearer",expires_in:c-b,expires_at:c},await this._saveSession(e),await this._notifyAllSubscribers("SIGNED_IN",e)}return{data:{user:e.user,session:e},error:null}}catch(a){if(iC(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async b=>{var c;if(!a){let{data:d,error:e}=b;if(e)throw e;a=null!=(c=d.session)?c:void 0}if(!(null==a?void 0:a.refresh_token))throw new iG;let{session:d,error:e}=await this._callRefreshToken(a.refresh_token);return e?{data:{user:null,session:null},error:e}:d?{data:{user:d.user,session:d},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(iC(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(a,b){try{throw new iJ("No browser detected.")}catch(a){if(iC(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){let b=await ir(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&b)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return{error:e};let f=null==(c=d.session)?void 0:c.access_token;if(f){let{error:b}=await this.admin.signOut(f,a);if(b&&!(iC(b)&&"AuthApiError"===b.name&&(404===b.status||401===b.status||403===b.status)))return{error:b}}return"others"!==a&&(await this._removeSession(),await is(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(a){let b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){let b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)}),c={id:b,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",b),this.stateChangeEmitters.delete(b)}};return this._debug("#onAuthStateChange()","registered callback with id",b),this.stateChangeEmitters.set(b,c),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(b)})})(),{data:{subscription:c}}}async _emitInitialSession(a){return await this._useSession(async b=>{var c,d;try{let{data:{session:d},error:e}=b;if(e)throw e;await (null==(c=this.stateChangeEmitters.get(a))?void 0:c.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",a,"session",d)}catch(b){await (null==(d=this.stateChangeEmitters.get(a))?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",b),console.error(b)}})}async resetPasswordForEmail(a,b={}){let c=null,d=null;"pkce"===this.flowType&&([c,d]=await iz(this.storage,this.storageKey,!0));try{return await iR(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:c,code_challenge_method:d,gotrue_meta_security:{captcha_token:b.captchaToken}},headers:this.headers,redirectTo:b.redirectTo})}catch(a){if(iC(a))return{data:null,error:a};throw a}}async getUserIdentities(){var a;try{let{data:b,error:c}=await this.getUser();if(c)throw c;return{data:{identities:null!=(a=b.user.identities)?a:[]},error:null}}catch(a){if(iC(a))return{data:null,error:a};throw a}}async linkIdentity(a){try{let{data:b,error:c}=await this._useSession(async b=>{var c,d,e,f,g;let{data:h,error:i}=b;if(i)throw i;let j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:null==(c=a.options)?void 0:c.redirectTo,scopes:null==(d=a.options)?void 0:d.scopes,queryParams:null==(e=a.options)?void 0:e.queryParams,skipBrowserRedirect:!0});return await iR(this.fetch,"GET",j,{headers:this.headers,jwt:null!=(g=null==(f=h.session)?void 0:f.access_token)?g:void 0})});if(c)throw c;return{data:{provider:a.provider,url:null==b?void 0:b.url},error:null}}catch(b){if(iC(b))return{data:{provider:a.provider,url:null},error:b};throw b}}async unlinkIdentity(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)throw f;return await iR(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0})})}catch(a){if(iC(a))return{data:null,error:a};throw a}}async _refreshAccessToken(a){let b=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(b,"begin");try{var c,d;let e=Date.now();return await (c=async c=>(c>0&&await iv(200*Math.pow(2,c-1)),this._debug(b,"refreshing attempt",c),await iR(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:iT})),d=(a,b)=>{let c=200*Math.pow(2,a);return b&&iL(b)&&Date.now()+c-e<3e4},new Promise((a,b)=>{(async()=>{for(let e=0;e<1/0;e++)try{let b=await c(e);if(!d(e,null,b))return void a(b)}catch(a){if(!d(e,a))return void b(a)}})()}))}catch(a){if(this._debug(b,"error",a),iC(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(b,"end")}}_isValidSession(a){return"object"==typeof a&&null!==a&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,b){let c=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:b.redirectTo,scopes:b.scopes,queryParams:b.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",b,"url",c),{data:{provider:a,url:c},error:null}}async _recoverAndRefresh(){var a;let b="#_recoverAndRefresh()";this._debug(b,"begin");try{let c=await ir(this.storage,this.storageKey);if(this._debug(b,"session from storage",c),!this._isValidSession(c)){this._debug(b,"session is not valid"),null!==c&&await this._removeSession();return}let d=Math.round(Date.now()/1e3),e=(null!=(a=c.expires_at)?a:1/0)<d+10;if(this._debug(b,`session has${e?"":" not"} expired with margin of 10s`),e){if(this.autoRefreshToken&&c.refresh_token){let{error:a}=await this._callRefreshToken(c.refresh_token);a&&(console.error(a),iL(a)||(this._debug(b,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(a){this._debug(b,"error",a),console.error(a);return}finally{this._debug(b,"end")}}async _callRefreshToken(a){var b,c;if(!a)throw new iG;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let d=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new it;let{data:b,error:c}=await this._refreshAccessToken(a);if(c)throw c;if(!b.session)throw new iG;await this._saveSession(b.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",b.session);let d={session:b.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(d,"error",a),iC(a)){let c={session:null,error:a};return iL(a)||await this._removeSession(),null==(b=this.refreshingDeferred)||b.resolve(c),c}throw null==(c=this.refreshingDeferred)||c.reject(a),a}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(a,b,c=!0){let d=`#_notifyAllSubscribers(${a})`;this._debug(d,"begin",b,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:a,session:b});let d=[],e=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(a,b)}catch(a){d.push(a)}});if(await Promise.all(e),d.length>0){for(let a=0;a<d.length;a+=1)console.error(d[a]);throw d[0]}}finally{this._debug(d,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await iq(this.storage,this.storageKey,a)}async _removeSession(){this._debug("#_removeSession()"),await is(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()"),this.visibilityChangedCallback,this.visibilityChangedCallback=null}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let a=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=a,a&&"object"==typeof a&&"function"==typeof a.unref?a.unref():"u">typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let a=Date.now();try{return await this._useSession(async b=>{let{data:{session:c}}=b;if(!c||!c.refresh_token||!c.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let d=Math.floor((1e3*c.expires_at-a)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),d<=3&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof i1)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){return this._debug("#_handleVisibilityChange()"),this.autoRefreshToken&&this.startAutoRefresh(),!1}async _onVisibilityChanged(a){let b=`#_onVisibilityChanged(${a})`;this._debug(b,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(b,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,b,c){let d=[`provider=${encodeURIComponent(b)}`];if((null==c?void 0:c.redirectTo)&&d.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),(null==c?void 0:c.scopes)&&d.push(`scopes=${encodeURIComponent(c.scopes)}`),"pkce"===this.flowType){let[a,b]=await iz(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(b)}`});d.push(c.toString())}if(null==c?void 0:c.queryParams){let a=new URLSearchParams(c.queryParams);d.push(a.toString())}return(null==c?void 0:c.skipBrowserRedirect)&&d.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${a}?${d.join("&")}`}async _unenroll(a){try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;return e?{data:null,error:e}:await iR(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token})})}catch(a){if(iC(a))return{data:null,error:a};throw a}}async _enroll(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)return{data:null,error:f};let g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},"phone"===a.factorType?{phone:a.phone}:{issuer:a.issuer}),{data:h,error:i}=await iR(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:null==(c=null==e?void 0:e.session)?void 0:c.access_token});return i?{data:null,error:i}:("totp"===a.factorType&&(null==(d=null==h?void 0:h.totp)?void 0:d.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(a){if(iC(a))return{data:null,error:a};throw a}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return{data:null,error:e};let{data:f,error:g}=await iR(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:{code:a.code,challenge_id:a.challengeId},headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:g})})}catch(a){if(iC(a))return{data:null,error:a};throw a}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;return e?{data:null,error:e}:await iR(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:{channel:a.channel},headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token})})}catch(a){if(iC(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(a){let{data:b,error:c}=await this._challenge({factorId:a.factorId});return c?{data:null,error:c}:await this._verify({factorId:a.factorId,challengeId:b.id,code:a.code})}async _listFactors(){let{data:{user:a},error:b}=await this.getUser();if(b)return{data:null,error:b};let c=(null==a?void 0:a.factors)||[],d=c.filter(a=>"totp"===a.factor_type&&"verified"===a.status),e=c.filter(a=>"phone"===a.factor_type&&"verified"===a.status);return{data:{all:c,totp:d,phone:e},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async a=>{var b,c;let{data:{session:d},error:e}=a;if(e)return{data:null,error:e};if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let f=this._decodeJWT(d.access_token),g=null;f.aal&&(g=f.aal);let h=g;return(null!=(c=null==(b=d.user.factors)?void 0:b.filter(a=>"verified"===a.status))?c:[]).length>0&&(h="aal2"),{data:{currentLevel:g,nextLevel:h,currentAuthenticationMethods:f.amr||[]},error:null}}))}}i4.nextInstanceID=0;let i5=i4;class i6 extends i5{constructor(a){super(a)}}let i7=new class a{constructor(a,b,c){var d,e,f;if(this.supabaseUrl=a,this.supabaseKey=b,!a)throw Error("supabaseUrl is required.");if(!b)throw Error("supabaseKey is required.");const g=a.replace(/\/$/,"");this.realtimeUrl=`${g}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${g}/auth/v1`,this.storageUrl=`${g}/storage/v1`,this.functionsUrl=`${g}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,i=function(a,b){let{db:c,auth:d,realtime:e,global:f}=a,{db:g,auth:h,realtime:i,global:j}=b,k={db:Object.assign(Object.assign({},g),c),auth:Object.assign(Object.assign({},h),d),realtime:Object.assign(Object.assign({},i),e),global:Object.assign(Object.assign({},j),f),accessToken:()=>{var a,b,c,d;return a=this,b=void 0,d=function*(){return""},new(c=void 0,c=Promise)(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}};return a.accessToken?k.accessToken=a.accessToken:delete k.accessToken,k}(null!=c?c:{},{db:ig,realtime:ii,auth:Object.assign(Object.assign({},ih),{storageKey:h}),global:ie});this.storageKey=null!=(d=i.auth.storageKey)?d:"",this.headers=null!=(e=i.global.headers)?e:{},i.accessToken?(this.accessToken=i.accessToken,this.auth=new Proxy({},{get:(a,b)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(f=i.auth)?f:{},this.headers,i.global.fetch),this.fetch=((a,b,c)=>{let d,e=(d=c||("u"<typeof fetch?ij.default:fetch),(...a)=>d(...a)),f="u"<typeof Headers?ij.Headers:Headers;return(c,d)=>{var g,h,i,j;return g=void 0,h=void 0,i=void 0,j=function*(){var g;let h=null!=(g=yield b())?g:a,i=new f(null==d?void 0:d.headers);return i.has("apikey")||i.set("apikey",a),i.has("Authorization")||i.set("Authorization",`Bearer ${h}`),e(c,Object.assign(Object.assign({},d),{headers:i}))},new(i||(i=Promise))(function(a,b){function c(a){try{e(j.next(a))}catch(a){b(a)}}function d(a){try{e(j.throw(a))}catch(a){b(a)}}function e(b){var e;b.done?a(b.value):((e=b.value)instanceof i?e:new i(function(a){a(e)})).then(c,d)}e((j=j.apply(g,h||[])).next())})}})(b,this._getAccessToken.bind(this),i.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},i.realtime)),this.rest=new hu(`${g}/rest/v1`,{headers:this.headers,schema:i.db.schema,fetch:this.fetch}),i.accessToken||this._listenForAuthEvents()}get functions(){return new ht(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ic(this.storageUrl,this.headers,this.fetch)}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,b={},c={}){return this.rest.rpc(a,b,c)}channel(a,b={config:{}}){return this.realtime.channel(a,b)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var a,b,c,d,e,f;return c=this,d=void 0,e=void 0,f=function*(){if(this.accessToken)return yield this.accessToken();let{data:c}=yield this.auth.getSession();return null!=(b=null==(a=c.session)?void 0:a.access_token)?b:null},new(e||(e=Promise))(function(a,b){function g(a){try{i(f.next(a))}catch(a){b(a)}}function h(a){try{i(f.throw(a))}catch(a){b(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof e?c:new e(function(a){a(c)})).then(g,h)}i((f=f.apply(c,d||[])).next())})}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,storageKey:e,flowType:f,lock:g,debug:h},i,j){let k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i6({url:this.authUrl,headers:Object.assign(Object.assign({},k),i),storageKey:e,autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,flowType:f,lock:g,debug:h,fetch:j,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(a){return new hT(this.realtimeUrl,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},null==a?void 0:a.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,b)=>{this._handleTokenChanged(a,"CLIENT",null==b?void 0:b.access_token)})}_handleTokenChanged(a,b,c){("TOKEN_REFRESHED"===a||"SIGNED_IN"===a)&&this.changedAccessToken!==c?this.changedAccessToken=c:"SIGNED_OUT"===a&&(this.realtime.setAuth(),"STORAGE"==b&&this.auth.signOut(),this.changedAccessToken=void 0)}}("https://jextayidnmtsoofugnig.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpleHRheWlkbm10c29vZnVnbmlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODM1MDAsImV4cCI6MjA4NDY1OTUwMH0.vxRq32MPWyO_znst5nFCiQ7AWJtlJeOFWMY-RlZmjrs",void 0);async function i8(a,b,c,d,e){let{data:f,error:g}=await i7.from("photos_metadata").insert([{cid:a,file_size_bytes:b,device_id:c,pinned_locally:!0,nonce:d,mime_type:e}]).select();if(g)throw console.error("Supabase Upload Error:",g),g;return f}async function i9(a){let{data:b,error:c}=await i7.from("photos_metadata").select("cid, device_id, uploaded_at, file_size_bytes, storage_path, nonce, mime_type").order("uploaded_at",{ascending:!1});if(c)throw console.error("Supabase Load Error:",c),c;return b||[]}async function ja(a){let{data:b,error:c}=await i7.from("photos_metadata").select("id").eq("cid",a).single();return c&&"PGRST116"!==c.code&&console.error("Supabase Check Error:",c),!!b}let jb="vault";async function jc(a,b){let{data:c,error:d}=await i7.storage.from(jb).upload(a,b,{contentType:"application/octet-stream",upsert:!1});if(d)throw console.error("Supabase Storage Upload Error:",d),d;return c.path}async function jd(a){let{data:b,error:c}=await i7.storage.from(jb).download(a);if(c)throw console.error("Supabase Storage Download Error:",c),c;return b}async function je(a,b){let{error:c}=await i7.from("photos_metadata").update({storage_path:b}).eq("cid",a);if(c)throw console.error("Supabase Update Storage Path Error:",c),c}function jf(a){let b=(0,gX.useQueryClient)(),{data:c=[],isLoading:d,error:e}=g_({queryKey:["photos"],queryFn:hl,enabled:!!a}),{data:f=0}=g_({queryKey:["photoCount"],queryFn:ho}),g=g3({mutationFn:async b=>{if(!a)throw Error("No encryption key");let{encrypted:c,nonce:d}=await aJ(b,a),e=`cid_${Date.now()}_${Math.random().toString(36).slice(2)}`,f={cid:e,nonce:d,fileName:b.name,mimeType:b.type,fileSize:b.size,uploadedAt:new Date,encryptedBlob:c};await hk(f);let g="server";try{await i8(e,b.size,g,d,b.type),console.log("Photo metadata synced to cloud:",e)}catch(a){console.error("Cloud metadata sync failed (photo saved locally):",a)}try{let a=`${g}/${e}`;await jc(a,c),await je(e,a),console.log("Photo blob uploaded to storage:",a)}catch(a){console.error("Storage upload failed (photo saved locally):",a)}return f},onSuccess:()=>{b.invalidateQueries({queryKey:["photos"]}),b.invalidateQueries({queryKey:["photoCount"]})}}),h=g3({mutationFn:async a=>{await hn(a)},onSuccess:()=>{b.invalidateQueries({queryKey:["photos"]}),b.invalidateQueries({queryKey:["photoCount"]})}}),i=(0,J.useCallback)(async b=>{if(!a||!b.encryptedBlob)return null;let c=await aK(b.encryptedBlob,b.nonce,a,b.mimeType);return c?URL.createObjectURL(c):null},[a]);return{photos:c,photoCount:f,isLoading:d,error:e,uploadPhoto:g.mutate,deletePhoto:h.mutate,decryptPhoto:i,isUploading:g.isPending}}var jg=Object.defineProperty,jh=Object.getOwnPropertySymbols,ji=Object.prototype.hasOwnProperty,jj=Object.prototype.propertyIsEnumerable,jk=(a,b,c)=>b in a?jg(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,jl=(a,b)=>{for(var c in b||(b={}))ji.call(b,c)&&jk(a,c,b[c]);if(jh)for(var c of jh(b))jj.call(b,c)&&jk(a,c,b[c]);return a},jm=(a,b)=>{var c={};for(var d in a)ji.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&jh)for(var d of jh(a))0>b.indexOf(d)&&jj.call(a,d)&&(c[d]=a[d]);return c};(a=>{let b=class b{constructor(a,c,d,f){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<b.MIN_VERSION||a>b.MAX_VERSION)throw RangeError("Version value out of range");if(f<-1||f>7)throw RangeError("Mask value out of range");this.size=4*a+17;let g=[];for(let a=0;a<this.size;a++)g.push(!1);for(let a=0;a<this.size;a++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const h=this.addEccAndInterleave(d);if(this.drawCodewords(h),-1==f){let a=1e9;for(let b=0;b<8;b++){this.applyMask(b),this.drawFormatBits(b);const c=this.getPenaltyScore();c<a&&(f=b,a=c),this.applyMask(b)}}e(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,d){let e=a.QrSegment.makeSegments(c);return b.encodeSegments(e,d)}static encodeBinary(c,d){let e=a.QrSegment.makeBytes(c);return b.encodeSegments([e],d)}static encodeSegments(a,d,f=1,h=40,i=-1,j=!0){let k,l;if(!(b.MIN_VERSION<=f&&f<=h&&h<=b.MAX_VERSION)||i<-1||i>7)throw RangeError("Invalid value");for(k=f;;k++){let c=8*b.getNumDataCodewords(k,d),e=g.getTotalBits(a,k);if(e<=c){l=e;break}if(k>=h)throw RangeError("Data too long")}for(let a of[b.Ecc.MEDIUM,b.Ecc.QUARTILE,b.Ecc.HIGH])j&&l<=8*b.getNumDataCodewords(k,a)&&(d=a);let m=[];for(let b of a)for(let a of(c(b.mode.modeBits,4,m),c(b.numChars,b.mode.numCharCountBits(k),m),b.getData()))m.push(a);e(m.length==l);let n=8*b.getNumDataCodewords(k,d);e(m.length<=n),c(0,Math.min(4,n-m.length),m),c(0,(8-m.length%8)%8,m),e(m.length%8==0);for(let a=236;m.length<n;a^=253)c(a,8,m);let o=[];for(;8*o.length<m.length;)o.push(0);return m.forEach((a,b)=>o[b>>>3]|=a<<7-(7&b)),new b(k,d,o,i)}getModule(a,b){return 0<=a&&a<this.size&&0<=b&&b<this.size&&this.modules[b][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let a=this.getAlignmentPatternPositions(),b=a.length;for(let c=0;c<b;c++)for(let d=0;d<b;d++)(0!=c||0!=d)&&(0!=c||d!=b-1)&&(c!=b-1||0!=d)&&this.drawAlignmentPattern(a[c],a[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){let b=this.errorCorrectionLevel.formatBits<<3|a,c=b;for(let a=0;a<10;a++)c=c<<1^(c>>>9)*1335;let f=(b<<10|c)^21522;e(f>>>15==0);for(let a=0;a<=5;a++)this.setFunctionModule(8,a,d(f,a));this.setFunctionModule(8,7,d(f,6)),this.setFunctionModule(8,8,d(f,7)),this.setFunctionModule(7,8,d(f,8));for(let a=9;a<15;a++)this.setFunctionModule(14-a,8,d(f,a));for(let a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,d(f,a));for(let a=8;a<15;a++)this.setFunctionModule(8,this.size-15+a,d(f,a));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let b=0;b<12;b++)a=a<<1^(a>>>11)*7973;let b=this.version<<12|a;e(b>>>18==0);for(let a=0;a<18;a++){let c=d(b,a),e=this.size-11+a%3,f=Math.floor(a/3);this.setFunctionModule(e,f,c),this.setFunctionModule(f,e,c)}}drawFinderPattern(a,b){for(let c=-4;c<=4;c++)for(let d=-4;d<=4;d++){let e=Math.max(Math.abs(d),Math.abs(c)),f=a+d,g=b+c;0<=f&&f<this.size&&0<=g&&g<this.size&&this.setFunctionModule(f,g,2!=e&&4!=e)}}drawAlignmentPattern(a,b){for(let c=-2;c<=2;c++)for(let d=-2;d<=2;d++)this.setFunctionModule(a+d,b+c,1!=Math.max(Math.abs(d),Math.abs(c)))}setFunctionModule(a,b,c){this.modules[b][a]=c,this.isFunction[b][a]=!0}addEccAndInterleave(a){let c=this.version,d=this.errorCorrectionLevel;if(a.length!=b.getNumDataCodewords(c,d))throw RangeError("Invalid argument");let f=b.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],g=b.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],h=Math.floor(b.getNumRawDataModules(c)/8),i=f-h%f,j=Math.floor(h/f),k=[],l=b.reedSolomonComputeDivisor(g);for(let c=0,d=0;c<f;c++){let e=a.slice(d,d+j-g+(c<i?0:1));d+=e.length;let f=b.reedSolomonComputeRemainder(e,l);c<i&&e.push(0),k.push(e.concat(f))}let m=[];for(let a=0;a<k[0].length;a++)k.forEach((b,c)=>{(a!=j-g||c>=i)&&m.push(b[a])});return e(m.length==h),m}drawCodewords(a){if(a.length!=Math.floor(b.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let c=0;for(let b=this.size-1;b>=1;b-=2){6==b&&(b=5);for(let e=0;e<this.size;e++)for(let f=0;f<2;f++){let g=b-f,h=(b+1&2)==0?this.size-1-e:e;!this.isFunction[h][g]&&c<8*a.length&&(this.modules[h][g]=d(a[c>>>3],7-(7&c)),c++)}}e(c==8*a.length)}applyMask(a){if(a<0||a>7)throw RangeError("Mask value out of range");for(let b=0;b<this.size;b++)for(let c=0;c<this.size;c++){let d;switch(a){case 0:d=(c+b)%2==0;break;case 1:d=b%2==0;break;case 2:d=c%3==0;break;case 3:d=(c+b)%3==0;break;case 4:d=(Math.floor(c/3)+Math.floor(b/2))%2==0;break;case 5:d=c*b%2+c*b%3==0;break;case 6:d=(c*b%2+c*b%3)%2==0;break;case 7:d=((c+b)%2+c*b%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[b][c]&&d&&(this.modules[b][c]=!this.modules[b][c])}}getPenaltyScore(){let a=0;for(let c=0;c<this.size;c++){let d=!1,e=0,f=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[c][g]==d?5==++e?a+=b.PENALTY_N1:e>5&&a++:(this.finderPenaltyAddHistory(e,f),d||(a+=this.finderPenaltyCountPatterns(f)*b.PENALTY_N3),d=this.modules[c][g],e=1);a+=this.finderPenaltyTerminateAndCount(d,e,f)*b.PENALTY_N3}for(let c=0;c<this.size;c++){let d=!1,e=0,f=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[g][c]==d?5==++e?a+=b.PENALTY_N1:e>5&&a++:(this.finderPenaltyAddHistory(e,f),d||(a+=this.finderPenaltyCountPatterns(f)*b.PENALTY_N3),d=this.modules[g][c],e=1);a+=this.finderPenaltyTerminateAndCount(d,e,f)*b.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let d=0;d<this.size-1;d++){let e=this.modules[c][d];e==this.modules[c][d+1]&&e==this.modules[c+1][d]&&e==this.modules[c+1][d+1]&&(a+=b.PENALTY_N2)}let c=0;for(let a of this.modules)c=a.reduce((a,b)=>a+ +!!b,c);let d=this.size*this.size,f=Math.ceil(Math.abs(20*c-10*d)/d)-1;return e(0<=f&&f<=9),e(0<=(a+=f*b.PENALTY_N4)&&a<=2568888),a}getAlignmentPatternPositions(){if(1==this.version)return[];{let a=Math.floor(this.version/7)+2,b=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*a-2)),c=[6];for(let d=this.size-7;c.length<a;d-=b)c.splice(1,0,d);return c}}static getNumRawDataModules(a){if(a<b.MIN_VERSION||a>b.MAX_VERSION)throw RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){let b=Math.floor(a/7)+2;c-=(25*b-10)*b-55,a>=7&&(c-=36)}return e(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(b.getNumRawDataModules(a)/8)-b.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*b.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw RangeError("Degree out of range");let c=[];for(let b=0;b<a-1;b++)c.push(0);c.push(1);let d=1;for(let e=0;e<a;e++){for(let a=0;a<c.length;a++)c[a]=b.reedSolomonMultiply(c[a],d),a+1<c.length&&(c[a]^=c[a+1]);d=b.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(a=>0);for(let e of a){let a=e^d.shift();d.push(0),c.forEach((c,e)=>d[e]^=b.reedSolomonMultiply(c,a))}return d}static reedSolomonMultiply(a,b){if(a>>>8!=0||b>>>8!=0)throw RangeError("Byte out of range");let c=0;for(let d=7;d>=0;d--)c=c<<1^(c>>>7)*285^(b>>>d&1)*a;return e(c>>>8==0),c}finderPenaltyCountPatterns(a){let b=a[1];e(b<=3*this.size);let c=b>0&&a[2]==b&&a[3]==3*b&&a[4]==b&&a[5]==b;return(c&&a[0]>=4*b&&a[6]>=b?1:0)+(c&&a[6]>=4*b&&a[0]>=b?1:0)}finderPenaltyTerminateAndCount(a,b,c){return a&&(this.finderPenaltyAddHistory(b,c),b=0),b+=this.size,this.finderPenaltyAddHistory(b,c),this.finderPenaltyCountPatterns(c)}finderPenaltyAddHistory(a,b){0==b[0]&&(a+=this.size),b.pop(),b.unshift(a)}};function c(a,b,c){if(b<0||b>31||a>>>b!=0)throw RangeError("Value out of range");for(let d=b-1;d>=0;d--)c.push(a>>>d&1)}function d(a,b){return(a>>>b&1)!=0}function e(a){if(!a)throw Error("Assertion error")}b.MIN_VERSION=1,b.MAX_VERSION=40,b.PENALTY_N1=3,b.PENALTY_N2=3,b.PENALTY_N3=40,b.PENALTY_N4=10,b.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],b.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=b;let f=class a{constructor(a,b,c){if(this.mode=a,this.numChars=b,this.bitData=c,b<0)throw RangeError("Invalid argument");this.bitData=c.slice()}static makeBytes(b){let d=[];for(let a of b)c(a,8,d);return new a(a.Mode.BYTE,b.length,d)}static makeNumeric(b){if(!a.isNumeric(b))throw RangeError("String contains non-numeric characters");let d=[];for(let a=0;a<b.length;){let e=Math.min(b.length-a,3);c(parseInt(b.substring(a,a+e),10),3*e+1,d),a+=e}return new a(a.Mode.NUMERIC,b.length,d)}static makeAlphanumeric(b){let d;if(!a.isAlphanumeric(b))throw RangeError("String contains unencodable characters in alphanumeric mode");let e=[];for(d=0;d+2<=b.length;d+=2){let f=45*a.ALPHANUMERIC_CHARSET.indexOf(b.charAt(d));c(f+=a.ALPHANUMERIC_CHARSET.indexOf(b.charAt(d+1)),11,e)}return d<b.length&&c(a.ALPHANUMERIC_CHARSET.indexOf(b.charAt(d)),6,e),new a(a.Mode.ALPHANUMERIC,b.length,e)}static makeSegments(b){return""==b?[]:a.isNumeric(b)?[a.makeNumeric(b)]:a.isAlphanumeric(b)?[a.makeAlphanumeric(b)]:[a.makeBytes(a.toUtf8ByteArray(b))]}static makeEci(b){let d=[];if(b<0)throw RangeError("ECI assignment value out of range");if(b<128)c(b,8,d);else if(b<16384)c(2,2,d),c(b,14,d);else if(b<1e6)c(6,3,d),c(b,21,d);else throw RangeError("ECI assignment value out of range");return new a(a.Mode.ECI,0,d)}static isNumeric(b){return a.NUMERIC_REGEX.test(b)}static isAlphanumeric(b){return a.ALPHANUMERIC_REGEX.test(b)}getData(){return this.bitData.slice()}static getTotalBits(a,b){let c=0;for(let d of a){let a=d.mode.numCharCountBits(b);if(d.numChars>=1<<a)return 1/0;c+=4+a+d.bitData.length}return c}static toUtf8ByteArray(a){a=encodeURI(a);let b=[];for(let c=0;c<a.length;c++)"%"!=a.charAt(c)?b.push(a.charCodeAt(c)):(b.push(parseInt(a.substring(c+1,c+3),16)),c+=2);return b}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let g=f;a.QrSegment=f})(H||(H={})),t=(s=H||(H={})).QrCode||(s.QrCode={}),(e=class{constructor(a,b){this.ordinal=a,this.formatBits=b}}).LOW=new e(0,1),e.MEDIUM=new e(1,0),e.QUARTILE=new e(2,3),e.HIGH=new e(3,2),t.Ecc=e,v=(u=H||(H={})).QrSegment||(u.QrSegment={}),(f=class{constructor(a,b){this.modeBits=a,this.numBitsCharCount=b}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}}).NUMERIC=new f(1,[10,12,14]),f.ALPHANUMERIC=new f(2,[9,11,13]),f.BYTE=new f(4,[8,16,16]),f.KANJI=new f(8,[8,10,12]),f.ECI=new f(7,[0,0,0]),v.Mode=f;var jn=H,jo={L:jn.QrCode.Ecc.LOW,M:jn.QrCode.Ecc.MEDIUM,Q:jn.QrCode.Ecc.QUARTILE,H:jn.QrCode.Ecc.HIGH},jp="#FFFFFF",jq="#000000";function jr(a,b=0){let c=[];return a.forEach(function(a,d){let e=null;a.forEach(function(f,g){if(!f&&null!==e){c.push(`M${e+b} ${d+b}h${g-e}v1H${e+b}z`),e=null;return}if(g===a.length-1){if(!f)return;null===e?c.push(`M${g+b},${d+b} h1v1H${g+b}z`):c.push(`M${e+b},${d+b} h${g+1-e}v1H${e+b}z`);return}f&&null===e&&(e=g)})}),c.join("")}function js(a,b){return a.slice().map((a,c)=>c<b.y||c>=b.y+b.h?a:a.map((a,c)=>(c<b.x||c>=b.x+b.w)&&a))}function jt({value:a,level:b,minVersion:c,includeMargin:d,marginSize:e,imageSettings:f,size:g,boostLevel:h}){let i=J.default.useMemo(()=>{let d=(Array.isArray(a)?a:[a]).reduce((a,b)=>(a.push(...jn.QrSegment.makeSegments(b)),a),[]);return jn.QrCode.encodeSegments(d,jo[b],c,void 0,void 0,h)},[a,b,c,h]),{cells:j,margin:k,numCells:l,calculatedImageSettings:m}=J.default.useMemo(()=>{let a=i.getModules(),b=null!=e?Math.max(Math.floor(e),0):4*!!d,c=a.length+2*b,h=function(a,b,c,d){if(null==d)return null;let e=a.length+2*c,f=Math.floor(.1*b),g=e/b,h=(d.width||f)*g,i=(d.height||f)*g,j=null==d.x?a.length/2-h/2:d.x*g,k=null==d.y?a.length/2-i/2:d.y*g,l=null==d.opacity?1:d.opacity,m=null;if(d.excavate){let a=Math.floor(j),b=Math.floor(k),c=Math.ceil(h+j-a),d=Math.ceil(i+k-b);m={x:a,y:b,w:c,h:d}}return{x:j,y:k,h:i,w:h,excavation:m,opacity:l,crossOrigin:d.crossOrigin}}(a,g,b,f);return{cells:a,margin:b,numCells:c,calculatedImageSettings:h}},[i,g,f,d,e]);return{qrcode:i,margin:k,cells:j,numCells:l,calculatedImageSettings:m}}var ju=function(){try{new Path2D().addPath(new Path2D)}catch(a){return!1}return!0}();J.default.forwardRef(function(a,b){let{value:c,size:d=128,level:e="L",bgColor:f=jp,fgColor:g=jq,includeMargin:h=!1,minVersion:i=1,boostLevel:j,marginSize:k,imageSettings:l}=a,m=jm(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:n}=m,o=jm(m,["style"]),p=null==l?void 0:l.src,q=J.default.useRef(null),r=J.default.useRef(null),s=J.default.useCallback(a=>{q.current=a,"function"==typeof b?b(a):b&&(b.current=a)},[b]),[t,u]=J.default.useState(!1),{margin:v,cells:w,numCells:x,calculatedImageSettings:y}=jt({value:c,level:e,minVersion:i,boostLevel:j,includeMargin:h,marginSize:k,imageSettings:l,size:d});J.default.useEffect(()=>{if(null!=q.current){let a=q.current,b=a.getContext("2d");if(!b)return;let c=w,e=r.current,h=null!=y&&null!==e&&e.complete&&0!==e.naturalHeight&&0!==e.naturalWidth;h&&null!=y.excavation&&(c=js(w,y.excavation));let i=window.devicePixelRatio||1;a.height=a.width=d*i;let j=d/x*i;b.scale(j,j),b.fillStyle=f,b.fillRect(0,0,x,x),b.fillStyle=g,ju?b.fill(new Path2D(jr(c,v))):w.forEach(function(a,c){a.forEach(function(a,d){a&&b.fillRect(d+v,c+v,1,1)})}),y&&(b.globalAlpha=y.opacity),h&&b.drawImage(e,y.x+v,y.y+v,y.w,y.h)}}),J.default.useEffect(()=>{u(!1)},[p]);let z=jl({height:d,width:d},n),A=null;return null!=p&&(A=J.default.createElement("img",{src:p,key:p,style:{display:"none"},onLoad:()=>{u(!0)},ref:r,crossOrigin:null==y?void 0:y.crossOrigin})),J.default.createElement(J.default.Fragment,null,J.default.createElement("canvas",jl({style:z,height:d,width:d,ref:s,role:"img"},o)),A)}).displayName="QRCodeCanvas";var jv=J.default.forwardRef(function(a,b){let{value:c,size:d=128,level:e="L",bgColor:f=jp,fgColor:g=jq,includeMargin:h=!1,minVersion:i=1,boostLevel:j,title:k,marginSize:l,imageSettings:m}=a,n=jm(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:o,cells:p,numCells:q,calculatedImageSettings:r}=jt({value:c,level:e,minVersion:i,boostLevel:j,includeMargin:h,marginSize:l,imageSettings:m,size:d}),s=p,t=null;null!=m&&null!=r&&(null!=r.excavation&&(s=js(p,r.excavation)),t=J.default.createElement("image",{href:m.src,height:r.h,width:r.w,x:r.x+o,y:r.y+o,preserveAspectRatio:"none",opacity:r.opacity,crossOrigin:r.crossOrigin}));let u=jr(s,o);return J.default.createElement("svg",jl({height:d,width:d,viewBox:`0 0 ${q} ${q}`,ref:b,role:"img"},n),!!k&&J.default.createElement("title",null,k),J.default.createElement("path",{fill:f,d:`M0,0 h${q}v${q}H0z`,shapeRendering:"crispEdges"}),J.default.createElement("path",{fill:g,d:u,shapeRendering:"crispEdges"}),t)});jv.displayName="QRCodeSVG";let jw=N("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),jx=N("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),jy=N("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),jz=N("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);function jA({isOpen:a,onClose:b}){let[c,d]=(0,J.useState)("show"),[e,f]=(0,J.useState)(""),[g,h]=(0,J.useState)(!1),[i,j]=(0,J.useState)(null),[k,l]=(0,J.useState)(!1),{recoveryPhrase:m,restoreFromPhrase:n}=gB(),o=async()=>{if(m)try{await navigator.clipboard.writeText(m),h(!0),setTimeout(()=>h(!1),2e3)}catch{console.error("Failed to copy to clipboard")}};return a?(0,I.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[380px] rounded-2xl overflow-hidden",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-[#E5E5EA]",children:[(0,I.jsx)("h2",{className:"sf-pro-display text-[17px] font-semibold text-[#1D1D1F]",children:"Gert verbinden"}),(0,I.jsx)("button",{onClick:b,className:"w-8 h-8 flex items-center justify-center rounded-full bg-[#F2F2F7]",children:(0,I.jsx)(jw,{className:"w-4 h-4 text-[#6E6E73]"})})]}),(0,I.jsxs)("div",{className:"flex border-b border-[#E5E5EA]",children:[(0,I.jsxs)("button",{onClick:()=>d("show"),className:`flex-1 py-3 text-[15px] font-medium flex items-center justify-center gap-2 ${"show"===c?"text-[#007AFF] border-b-2 border-[#007AFF]":"text-[#6E6E73]"}`,children:[(0,I.jsx)(jz,{className:"w-4 h-4"}),"Schlssel zeigen"]}),(0,I.jsxs)("button",{onClick:()=>d("input"),className:`flex-1 py-3 text-[15px] font-medium flex items-center justify-center gap-2 ${"input"===c?"text-[#007AFF] border-b-2 border-[#007AFF]":"text-[#6E6E73]"}`,children:[(0,I.jsx)(jy,{className:"w-4 h-4"}),"Schlssel eingeben"]})]}),(0,I.jsx)("div",{className:"p-5",children:"show"===c?(0,I.jsxs)("div",{className:"flex flex-col items-center",children:[(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mb-4",children:"Scanne diesen QR-Code mit deinem anderen Gert oder kopiere den Schlssel."}),m&&(0,I.jsx)("div",{className:"bg-white p-4 rounded-xl border border-[#E5E5EA] mb-4",children:(0,I.jsx)(jv,{value:m,size:180,level:"M",includeMargin:!1})}),(0,I.jsxs)("div",{className:"w-full bg-[#F2F2F7] rounded-xl p-3 mb-4",children:[(0,I.jsx)("p",{className:"text-[11px] text-[#6E6E73] mb-1",children:"Dein Schlssel:"}),(0,I.jsx)("p",{className:"text-[13px] font-mono text-[#1D1D1F] break-all leading-relaxed",children:m||"Kein Schlssel verfgbar"})]}),(0,I.jsx)("button",{onClick:o,disabled:!m,className:"w-full h-[44px] bg-[#007AFF] text-white text-[15px] font-semibold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:g?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(O,{className:"w-4 h-4"}),"Kopiert!"]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(jx,{className:"w-4 h-4"}),"Schlssel kopieren"]})})]}):(0,I.jsxs)("div",{className:"flex flex-col",children:[(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mb-4",children:"Gib den Schlssel von deinem anderen Gert ein, um deine Fotos zu synchronisieren."}),(0,I.jsx)("textarea",{value:e,onChange:a=>{f(a.target.value),j(null)},placeholder:"Schlssel hier eingeben...",className:"w-full h-[100px] bg-[#F2F2F7] rounded-xl p-3 text-[14px] font-mono text-[#1D1D1F] resize-none mb-3 placeholder:text-[#C7C7CC]"}),i&&(0,I.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center mb-3",children:i}),k&&(0,I.jsx)("p",{className:"text-[13px] text-[#30D158] text-center mb-3",children:"Schlssel erfolgreich importiert!"}),(0,I.jsxs)("button",{onClick:()=>{(j(null),e.trim())?n(e.trim())?(l(!0),f(""),setTimeout(()=>{l(!1),b()},1500)):j("Ungltiger Schlssel. Bitte berprfe die Eingabe."):j("Bitte gib einen Schlssel ein")},disabled:!e.trim()||k,className:"w-full h-[44px] bg-[#30D158] text-white text-[15px] font-semibold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,I.jsx)(jy,{className:"w-4 h-4"}),"Gert verbinden"]}),(0,I.jsx)("p",{className:"text-[11px] text-[#FF9500] text-center mt-4",children:"Achtung: Dies berschreibt deinen aktuellen Schlssel. Stelle sicher, dass du ihn gesichert hast."})]})})]})}):null}function jB({state:a,setState:b}){let[c,d]=(0,J.useState)(null),[e,f]=(0,J.useState)(!1),[g,h]=(0,J.useState)(!1),[i,j]=(0,J.useState)(!1),[k,l]=(0,J.useState)({current:0,total:0}),{secretKey:m}=gB(),{photoCount:n}=jf(m),o=n>0?n:a.photosCount,p=async()=>{if(!i){j(!0),console.log("Starting backup to Supabase Storage...");try{let a=(await hl()).filter(a=>a.encryptedBlob);l({current:0,total:a.length});let c=0;for(let b of a)if(b.encryptedBlob){if(!await ja(b.cid)){console.log(`Skipping ${b.cid} - not in metadata table`);continue}try{let d=`server/${b.cid}`;await jc(d,b.encryptedBlob),await je(b.cid,d),c++,l({current:c,total:a.length}),console.log(`Uploaded ${c}/${a.length}: ${b.cid}`)}catch(a){console.error(`Failed to upload ${b.cid}:`,a)}}b(a=>({...a,lastBackup:"Gerade eben"})),console.log(`Backup complete: ${c} photos uploaded`)}catch(a){console.error("Backup failed:",a)}finally{j(!1),l({current:0,total:0})}}};return(0,I.jsxs)("div",{className:"h-full flex flex-col px-5 pt-6 pb-4 overflow-y-auto",children:[(0,I.jsxs)("header",{className:"mb-6",children:[(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] text-[#1D1D1F]",children:"Backup"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] mt-1",children:"Verschlsseltes Photo-Backup"})]}),(0,I.jsx)("button",{onClick:()=>{console.log("TODO: Toggle backup with confirmation dialog"),f(!0)},className:"w-full bg-white rounded-xl p-5 mb-3 ios-tap-target",children:(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{className:"flex items-center gap-4",children:[(0,I.jsx)("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${a.backupActive?"bg-[#30D158]/10":"bg-[#E5E5EA]"}`,children:(0,I.jsx)(aE,{name:"shield",size:28})}),(0,I.jsxs)("div",{className:"text-left",children:[(0,I.jsxs)("p",{className:"text-[17px] font-semibold text-[#1D1D1F]",children:["Backup ",a.backupActive?"Aktiv":"Aus"]}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73]",children:a.backupActive?"Deine Fotos werden geschtzt":"Tippe zum Aktivieren"})]})]}),(0,I.jsx)("div",{className:`w-[51px] h-[31px] rounded-full p-[2px] ${a.backupActive?"bg-[#30D158]":"bg-[#E5E5EA]"}`,children:(0,I.jsx)("div",{className:`w-[27px] h-[27px] rounded-full bg-white shadow-sm ${a.backupActive?"ml-auto":""}`})})]})}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-2 mb-6",children:"Automatisch neue Fotos sichern"}),(0,I.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[(0,I.jsx)(jC,{icon:(0,I.jsx)(aE,{name:"image",size:20}),value:o.toLocaleString(),label:"Fotos gesichert",tooltip:"Lokal auf deinen Gerten gespeichert",showTooltip:"photos"===c,onTap:()=>d("photos"===c?null:"photos")}),(0,I.jsx)(jC,{icon:(0,I.jsx)(aE,{name:"clock",size:20}),value:a.lastBackup,label:"Letztes Backup",tooltip:"Automatisches Backup alle 6 Stunden",showTooltip:"lastBackup"===c,onTap:()=>d("lastBackup"===c?null:"lastBackup")}),(0,I.jsx)(jC,{icon:(0,I.jsx)(aE,{name:"shield",size:20}),value:`${a.permanence}%`,label:"Dauerhaft",tooltip:"Fotos sind auf mehreren Gerten gesichert",showTooltip:"permanence"===c,onTap:()=>d("permanence"===c?null:"permanence")})]}),(0,I.jsx)("button",{onClick:p,disabled:i,className:`w-full h-[50px] text-[17px] font-semibold rounded-xl mb-3 ios-tap-target ${a.backupActive?"bg-[#007AFF] text-white":"bg-[#30D158] text-white"} disabled:opacity-70`,children:i?(0,I.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,I.jsx)(gK,{className:"w-5 h-5 animate-spin"}),k.total>0?`${k.current}/${k.total} hochladen...`:"Vorbereiten..."]}):a.backupActive?"Jetzt sichern":"Backup aktivieren"}),(0,I.jsxs)("button",{onClick:()=>h(!0),className:"w-full h-[50px] text-[17px] font-semibold rounded-xl mb-4 ios-tap-target bg-[#F2F2F7] text-[#007AFF] flex items-center justify-center gap-2",children:[(0,I.jsx)(gJ,{className:"w-5 h-5"}),"Gert verbinden"]}),(0,I.jsx)("div",{className:"mt-auto pt-4",children:(0,I.jsxs)("p",{className:"text-[15px] text-[#8E8E93] text-center leading-relaxed",children:["Deine Fotos sind verschlsselt.",(0,I.jsx)("br",{}),"Niemand kann sie sehen."]})}),e&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-8",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[270px] rounded-2xl overflow-hidden",children:[(0,I.jsxs)("div",{className:"p-4 text-center",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[17px] text-[#1D1D1F] mb-1",children:a.backupActive?"Backup deaktivieren?":"Backup aktivieren?"}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] leading-relaxed",children:a.backupActive?"Neue Fotos werden nicht mehr automatisch gesichert.":"Neue Fotos werden automatisch verschlsselt und gesichert."})]}),(0,I.jsxs)("div",{className:"border-t border-[#E5E5EA]",children:[(0,I.jsx)("button",{onClick:()=>f(!1),className:"w-full py-3 text-[17px] text-[#007AFF] border-b border-[#E5E5EA] ios-tap-target",children:"Abbrechen"}),(0,I.jsx)("button",{onClick:()=>{let c=!a.backupActive;console.log(c?"Activate Backup":"Deactivate Backup"),b(a=>({...a,backupActive:c})),f(!1)},className:`w-full py-3 text-[17px] font-semibold ios-tap-target ${a.backupActive?"text-[#FF3B30]":"text-[#30D158]"}`,children:a.backupActive?"Deaktivieren":"Aktivieren"})]})]})}),(0,I.jsx)(jA,{isOpen:g,onClose:()=>h(!1)})]})}function jC({icon:a,value:b,label:c,tooltip:d,showTooltip:e,onTap:f}){return(0,I.jsxs)("div",{className:"relative",children:[(0,I.jsxs)("button",{onClick:f,className:"w-full bg-white rounded-xl p-4 text-center ios-tap-target",children:[(0,I.jsxs)("div",{className:"flex justify-center mb-2 relative",children:[a,(0,I.jsx)(gI,{className:"w-3 h-3 text-[#C7C7CC] absolute -right-1 -top-1"})]}),(0,I.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] truncate",children:b}),(0,I.jsx)("p",{className:"text-[11px] text-[#6E6E73]",children:c})]}),e&&(0,I.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-[180px] bg-[#1D1D1F] text-white text-[13px] p-3 rounded-lg z-10 text-center",children:[d,(0,I.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-[#1D1D1F]"})]})]})}let jD=N("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function jE({state:a,setState:b,onRestartOnboarding:c}){let[d,e]=(0,J.useState)(!1),[f,g]=(0,J.useState)(!1),[h,i]=(0,J.useState)(!1),[j,k]=(0,J.useState)(!1),[l,m]=(0,J.useState)(!1),[n,o]=(0,J.useState)(!1),[p,q]=(0,J.useState)([]),[r,s]=(0,J.useState)(!1),{recoveryPhrase:t,generateNewKey:u,clearKey:v}=gB();(0,J.useEffect)(()=>{(async()=>{try{let{data:a,error:b}=await i7.from("devices").select("*").order("created_at",{ascending:!1});if(b)return void console.error("Error fetching devices:",b);q(a||[])}catch(a){console.error("Failed to fetch devices:",a)}})()},[]);let w=t?.split("-").slice(0,12)||[],x=async()=>{console.log("Generate New Encryption Key"),console.log("Clear Existing Backup Data"),v();let a=await u();if(a){let c=a.split("-").slice(0,12);b(b=>({...b,encryptionKey:a,backupPhrase:c,photosCount:0}))}i(!1)};if(d){let a=p.map(a=>({id:a.id,name:a.device_name||"Unbekanntes Gert",lastActive:""===a.id?"Aktiv":function(a){if(!a)return"Unbekannt";let b=new Date(a),c=new Date().getTime()-b.getTime(),d=Math.floor(c/6e4),e=Math.floor(c/36e5),f=Math.floor(c/864e5);return d<1?"Gerade eben":d<60?`vor ${d} Min.`:e<24?`vor ${e} Std.`:f<7?`vor ${f} Tagen`:b.toLocaleDateString("de-DE")}(a.created_at),syncing:!1}));return 0===a.length&&a.push({id:"",name:"Dieses Gert",lastActive:"Aktiv",syncing:!1}),(0,I.jsx)(jG,{devices:a,onBack:()=>e(!1),onAddDevice:()=>{console.log("Show QR code or key import")}})}return(0,I.jsxs)("div",{className:"h-full flex flex-col pb-4 overflow-y-auto",children:[(0,I.jsx)("header",{className:"px-5 pt-6 pb-4 bg-[#F2F2F7]",children:(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] text-[#1D1D1F]",children:"Einstellungen"})}),(0,I.jsxs)("div",{className:"flex-1 px-5",children:[(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Backup"}),(0,I.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,I.jsx)(jF,{label:"Automatisches Backup",description:"Neue Fotos automatisch sichern",enabled:a.autoBackupEnabled,onToggle:()=>{let c=!a.autoBackupEnabled;console.log("Update Auto-Backup Preference:",c),b(a=>({...a,autoBackupEnabled:c}))}}),(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsx)(jF,{label:"Hintergrund-Backup",description:"Weiter sichern wenn App geschlossen",enabled:a.backgroundBackupEnabled,onToggle:()=>{let c=!a.backgroundBackupEnabled;console.log("Update Background Preference:",c),b(a=>({...a,backgroundBackupEnabled:c}))}}),(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsxs)("button",{onClick:()=>m(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsxs)("div",{className:"flex items-center gap-3",children:[(0,I.jsx)(aE,{name:"folder",size:24}),(0,I.jsxs)("div",{className:"text-left",children:[(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F] block",children:"Backup-Quelle"}),(0,I.jsx)("span",{className:"text-[13px] text-[#6E6E73]",children:"photos-app"===a.photoSource?"Fotos-App":"Dateien-App"})]})]}),(0,I.jsx)(aE,{name:"chevronRight",size:16})]})]})]}),(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Speicher"}),(0,I.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,I.jsxs)("div",{className:"p-4",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Aktueller Plan"}),(0,I.jsx)("span",{className:"text-[15px] font-semibold text-[#007AFF]",children:"free"===a.selectedPlan?"Free":"Backup+"})]}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:"free"===a.selectedPlan?"Fotos auf deinen Gerten":"200 GB Cloud-Backup"})]}),(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsx)("div",{className:"p-4",children:(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsx)("span",{className:"text-[15px] text-[#6E6E73]",children:"Verwendet"}),(0,I.jsxs)("span",{className:"text-[15px] text-[#1D1D1F]",children:[a.photosCount.toLocaleString()," Fotos (nur lokal)"]})]})}),(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsxs)("button",{onClick:()=>o(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsx)("span",{className:"text-[17px] text-[#007AFF]",children:"free"===a.selectedPlan?"Upgrade zu Backup+":"Plan verwalten"}),(0,I.jsx)(aE,{name:"chevronRight",size:16})]})]})]}),(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Gerte"}),(0,I.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:(0,I.jsxs)("button",{onClick:()=>{console.log("Fetch Device List"),e(!0)},className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsxs)("div",{className:"flex items-center gap-3",children:[(0,I.jsx)(aE,{name:"smartphone",size:24}),(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Verbundene Gerte"})]}),(0,I.jsxs)("div",{className:"flex items-center gap-2",children:[(0,I.jsx)("span",{className:"text-[15px] text-[#6E6E73]",children:p.length||1}),(0,I.jsx)(aE,{name:"chevronRight",size:16})]})]})})]}),(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Sicherheit"}),(0,I.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",children:[(0,I.jsxs)("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Backup-Phrase anzeigen"}),(0,I.jsx)(aE,{name:"chevronRight",size:16})]}),(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsxs)("button",{onClick:()=>i(!0),className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsx)("span",{className:"text-[17px] text-[#FF3B30]",children:"Neuen Schlssel erstellen"}),(0,I.jsx)(aE,{name:"chevronRight",size:16})]})]}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-4 mt-2",children:"Teile diese Wrter niemals mit anderen."})]}),(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h2",{className:"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2",children:"Setup"}),(0,I.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:(0,I.jsxs)("button",{onClick:()=>{console.log("TODO: Navigate to onboarding screen 1"),c()},className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsxs)("div",{className:"flex items-center gap-3",children:[(0,I.jsx)(aE,{name:"refresh",size:24}),(0,I.jsx)("span",{className:"text-[17px] text-[#1D1D1F]",children:"Onboarding wiederholen"})]}),(0,I.jsx)(aE,{name:"chevronRight",size:16})]})}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] px-4 mt-2",children:"Schlssel, Quelle und Plan neu einrichten"})]})]}),f&&(0,I.jsx)(jJ,{title:"Sicherheitshinweis",message:"Deine Backup-Phrase gibt vollen Zugriff auf deine verschlsselten Fotos. Nur an einem privaten Ort anzeigen.",confirmLabel:"Phrase anzeigen",confirmDestructive:!1,onConfirm:()=>{console.log("Display Backup Phrase"),g(!1),k(!0)},onCancel:()=>g(!1)}),j&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Deine Backup-Phrase"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-4",children:"Notiere diese Wrter und bewahre sie sicher auf."}),w.length>0?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:w.map((a,b)=>(0,I.jsxs)("div",{className:"bg-[#F2F2F7] rounded-lg p-2 text-center",children:[(0,I.jsx)("span",{className:"text-[11px] text-[#8E8E93] block",children:b+1}),(0,I.jsx)("span",{className:"text-[14px] text-[#1D1D1F] font-mono",children:a})]},b))}),(0,I.jsxs)("div",{className:"bg-[#F2F2F7] rounded-xl p-3 mb-4",children:[(0,I.jsx)("p",{className:"text-[11px] text-[#6E6E73] mb-1",children:"Vollstndiger Schlssel:"}),(0,I.jsx)("p",{className:"text-[12px] font-mono text-[#1D1D1F] break-all",children:t})]})]}):(0,I.jsx)("div",{className:"bg-[#FF9500]/10 rounded-xl p-4 mb-4",children:(0,I.jsx)("p",{className:"text-[13px] text-[#FF9500] text-center",children:"Kein Schlssel gefunden. Bitte erstelle einen neuen Schlssel."})}),(0,I.jsx)("div",{className:"bg-[#FF3B30]/10 rounded-xl p-3 mb-4",children:(0,I.jsx)("p",{className:"text-[13px] text-[#FF3B30] text-center",children:" Teile diese Wrter niemals mit anderen"})}),(0,I.jsx)("button",{onClick:()=>k(!1),className:"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target",children:"Fertig"})]})}),h&&(0,I.jsx)(jJ,{title:"Datenverlust-Warnung",message:"Das Erstellen eines neuen Schlssels lscht alle vorhandenen Backup-Daten permanent. Diese Aktion kann nicht rckgngig gemacht werden.",confirmLabel:"Neuen Schlssel erstellen",confirmDestructive:!0,onConfirm:x,onCancel:()=>i(!1)}),l&&(0,I.jsx)(jH,{currentSource:a.photoSource,onSelect:a=>{console.log("TODO: Update backup source preference:",a),b(b=>({...b,photoSource:a})),m(!1)},onClose:()=>m(!1)}),n&&(0,I.jsx)(jI,{currentPlan:a.selectedPlan,onSelect:a=>{console.log("TODO: Show plan selection modal",a),b(b=>({...b,selectedPlan:a})),o(!1)},onClose:()=>o(!1)})]})}function jF({label:a,description:b,enabled:c,onToggle:d}){return(0,I.jsxs)("button",{onClick:d,className:"w-full flex items-center justify-between p-4 ios-tap-target",children:[(0,I.jsxs)("div",{className:"text-left",children:[(0,I.jsx)("p",{className:"text-[17px] text-[#1D1D1F]",children:a}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] mt-0.5",children:b})]}),(0,I.jsx)("div",{className:`w-[51px] h-[31px] rounded-full p-[2px] shrink-0 ${c?"bg-[#30D158]":"bg-[#E5E5EA]"}`,children:(0,I.jsx)("div",{className:`w-[27px] h-[27px] rounded-full bg-white shadow-sm ${c?"ml-auto":""}`})})]})}function jG({devices:a,onBack:b,onAddDevice:c}){return(0,I.jsxs)("div",{className:"h-full flex flex-col pb-4 overflow-y-auto",children:[(0,I.jsxs)("header",{className:"px-5 pt-6 pb-4 bg-[#F2F2F7]",children:[(0,I.jsx)("button",{onClick:b,className:"text-[#007AFF] text-[17px] ios-tap-target mb-2",children:" Zurck"}),(0,I.jsx)("h1",{className:"sf-pro-display text-[28px] text-[#1D1D1F]",children:"Gerte"})]}),(0,I.jsxs)("div",{className:"flex-1 px-5",children:[(0,I.jsx)("div",{className:"bg-white rounded-xl overflow-hidden",children:a.map((a,b)=>(0,I.jsxs)("div",{children:[b>0&&(0,I.jsx)("div",{className:"h-[0.5px] bg-[#E5E5EA] ml-4"}),(0,I.jsxs)("div",{className:"flex items-center gap-3 p-4",children:[(0,I.jsx)(aE,{name:"smartphone",size:32}),(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsx)("p",{className:"text-[17px] text-[#1D1D1F]",children:a.name}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73]",children:a.lastActive})]}),a.syncing?(0,I.jsx)(gK,{className:"w-5 h-5 text-[#007AFF] animate-spin"}):"Aktiv"===a.lastActive?(0,I.jsxs)("div",{className:"flex items-center gap-1",children:[(0,I.jsx)(O,{className:"w-4 h-4 text-[#30D158]"}),(0,I.jsx)("span",{className:"text-[13px] text-[#30D158] font-medium",children:"Dieses Gert"})]}):null]})]},a.id))}),(0,I.jsxs)("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 mt-6 p-4 bg-white rounded-xl ios-tap-target",children:[(0,I.jsx)(jD,{className:"w-5 h-5 text-[#007AFF]"}),(0,I.jsx)("span",{className:"text-[17px] text-[#007AFF]",children:"Neues Gert verbinden"})]}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] text-center mt-3",children:"Scanne den QR-Code oder gib deine Backup-Phrase ein"})]})]})}function jH({currentSource:a,onSelect:b,onClose:c}){return(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Backup-Quelle"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-6",children:"Wo sind deine Fotos gespeichert?"}),(0,I.jsx)("div",{className:"space-y-3 mb-6",children:[{id:"photos-app",label:"Fotos-App",description:"Alle Fotos aus der iOS Foto-Bibliothek"},{id:"files-app",label:"Dateien-App",description:"Fotos aus einem bestimmten Ordner"}].map(c=>(0,I.jsx)("button",{onClick:()=>b(c.id),className:`w-full p-4 rounded-xl bg-[#F2F2F7] text-left ios-tap-target ${a===c.id?"ring-2 ring-[#007AFF]":""}`,children:(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"text-[17px] font-medium text-[#1D1D1F]",children:c.label}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] mt-0.5",children:c.description})]}),(0,I.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${a===c.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:a===c.id&&(0,I.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})},c.id))}),(0,I.jsx)("button",{onClick:c,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Abbrechen"})]})})}function jI({currentPlan:a,onSelect:b,onClose:c}){return(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-50",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10 max-h-[80vh] overflow-y-auto",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2",children:"Speicherplan"}),(0,I.jsx)("p",{className:"text-[15px] text-[#6E6E73] text-center mb-6",children:"Du kannst jederzeit wechseln"}),(0,I.jsx)("div",{className:"space-y-3 mb-6",children:[{id:"free",label:"FREE",subtitle:"Auf deinen Gerten",price:"0/Monat",features:["Unbegrenzte Fotos","Zero-Knowledge Verschlsselung","Multi-Device Sync"]},{id:"backup-plus",label:"BACKUP+",subtitle:"Dauerhaft im Netz",price:"2,99/Monat",features:["Alles von Free","200 GB Cloud-Backup","Schnellere Synchronisierung"]}].map(c=>(0,I.jsx)("button",{onClick:()=>b(c.id),className:`w-full p-4 rounded-xl bg-[#F2F2F7] text-left ios-tap-target ${a===c.id?"ring-2 ring-[#007AFF]":""}`,children:(0,I.jsxs)("div",{className:"flex items-start justify-between",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsx)("p",{className:"text-[13px] font-bold text-[#007AFF] tracking-wide",children:c.label}),(0,I.jsx)("p",{className:"text-[17px] font-semibold text-[#1D1D1F] mt-0.5",children:c.subtitle}),(0,I.jsx)("ul",{className:"mt-2 space-y-1",children:c.features.map(a=>(0,I.jsxs)("li",{className:"text-[13px] text-[#6E6E73] flex items-center gap-2",children:[(0,I.jsx)("span",{className:"text-[#30D158]",children:""})," ",a]},a))}),(0,I.jsx)("p",{className:"text-[15px] font-semibold text-[#1D1D1F] mt-3",children:c.price})]}),(0,I.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${a===c.id?"border-[#007AFF] bg-[#007AFF]":"border-[#C7C7CC]"}`,children:a===c.id&&(0,I.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})})]})},c.id))}),(0,I.jsx)("button",{onClick:c,className:"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target",children:"Abbrechen"})]})})}function jJ({title:a,message:b,confirmLabel:c,confirmDestructive:d,onConfirm:e,onCancel:f}){return(0,I.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-8",children:(0,I.jsxs)("div",{className:"bg-white w-full max-w-[270px] rounded-2xl overflow-hidden",children:[(0,I.jsxs)("div",{className:"p-4 text-center",children:[(0,I.jsx)("h3",{className:"sf-pro-display text-[17px] text-[#1D1D1F] mb-1",children:a}),(0,I.jsx)("p",{className:"text-[13px] text-[#6E6E73] leading-relaxed",children:b})]}),(0,I.jsxs)("div",{className:"border-t border-[#E5E5EA]",children:[(0,I.jsx)("button",{onClick:f,className:"w-full py-3 text-[17px] text-[#007AFF] border-b border-[#E5E5EA] ios-tap-target",children:"Abbrechen"}),(0,I.jsx)("button",{onClick:e,className:`w-full py-3 text-[17px] font-semibold ios-tap-target ${d?"text-[#FF3B30]":"text-[#007AFF]"}`,children:c})]})]})})}let jK=N("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),jL=N("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]),jM=a=>{let b={};return a.forEach(a=>{b[a.date]||(b[a.date]=[]),b[a.date].push(a)}),Object.entries(b).map(([a,b])=>({date:a,photos:b,label:jN(a)}))},jN=a=>{let b=new Date(a),c=new Date,d=new Date(c);return(d.setDate(d.getDate()-1),a===c.toISOString().split("T")[0])?"Heute":a===d.toISOString().split("T")[0]?"Gestern":b.toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long"})};function jO({photosCount:a}){var b;let c,d,e,[f,g]=(0,J.useState)(""),[h,i]=(0,J.useState)(!1),[j,k]=(0,J.useState)(!1),[l,m]=(0,J.useState)(null),[n,o]=(0,J.useState)(!1),[p,q]=(0,J.useState)(new Set),[r,s]=(0,J.useState)(null),[t,u]=(0,J.useState)(null),v=(0,J.useRef)(null),{secretKey:w,hasKey:x}=gB(),{photos:y,uploadPhoto:z,deletePhoto:A,decryptPhoto:B,isUploading:C}=jf(w),{remoteCIDs:D,remoteCIDsFromOtherDevices:E,isConnected:F,deviceId:G,refresh:H}=function(a={}){let{onNewPhoto:b,onPhotoDeleted:c,onPhotoDownloaded:d,enabled:e=!0,secretKey:f}=a,[g,h]=(0,J.useState)([]),[i,j]=(0,J.useState)(!1),[k,l]=(0,J.useState)(null),[m,n]=(0,J.useState)(!1),o="server",p=(0,J.useCallback)(async a=>{if(!f||!a.storage_path)return!1;try{let b=await hm(a.cid);if(b?.encryptedBlob)return console.log("Photo already exists locally:",a.cid),!1;console.log("Fetching missing photo from storage:",a.cid),n(!0);let c=await jd(a.storage_path);return await hk({cid:a.cid,nonce:a.nonce||"",fileName:`synced_${a.cid}`,mimeType:a.mime_type||"image/jpeg",fileSize:a.file_size_bytes||0,uploadedAt:new Date(a.uploaded_at),encryptedBlob:c}),console.log("Photo downloaded and saved locally:",a.cid),d?.(a.cid),!0}catch(a){return console.error("Failed to fetch missing content:",a),!1}finally{n(!1)}},[f,d]),q=(0,J.useCallback)(async()=>{try{let a=(await i9(o)).map(a=>({cid:a.cid,device_id:a.device_id,uploaded_at:a.uploaded_at,file_size_bytes:a.file_size_bytes,storage_path:a.storage_path||null,nonce:a.nonce||null,mime_type:a.mime_type||null,isFromOtherDevice:a.device_id!==o}));return h(a),l(null),a}catch(a){return console.error("Failed to load remote CIDs:",a),l(a),[]}},[o]);(0,J.useEffect)(()=>{},[e,o,b,c,q,p]);let r=(0,J.useCallback)(async()=>q(),[q]),s=g.filter(a=>a.isFromOtherDevice);return{remoteCIDs:g,remoteCIDsFromOtherDevices:s,isConnected:i,isSyncing:m,lastSyncError:k,refresh:r,fetchMissingContent:p,deviceId:o}}({onNewPhoto:(0,J.useCallback)(a=>{console.log("New photo from device:",a.device_id),u(`Neues Foto von anderem Ger\xe4t empfangen`),setTimeout(()=>u(null),3e3)},[]),enabled:!0}),K=y.length>0?y.map(a=>({id:a.id?.toString()||a.cid,cid:a.cid,placeholderUrl:"",category:"photo",date:a.uploadedAt.toISOString().split("T")[0],metadata:a})):(b=Math.min(a,50),c=["nature","architecture","travel","food","animals","city","landscape","portrait","ocean","forest"],d=new Date,Array.from({length:b},(a,b)=>{let e=new Date(d);return e.setDate(e.getDate()-Math.floor(b/3)),{id:`photo-${b}`,cid:`Qm${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}`,placeholderUrl:`https://picsum.photos/seed/${b+100}/400/400`,category:c[b%c.length],date:e.toISOString().split("T")[0],metadata:void 0}}));jM(K);let L=jM(K.filter(a=>(!l||a.category===l)&&(!f||!!a.category.includes(f.toLowerCase())))),M=()=>{v.current&&(clearTimeout(v.current),v.current=null)};return(0,I.jsxs)("div",{className:"flex flex-col h-full bg-[#F2F2F7]",children:[(0,I.jsx)("header",{className:"h-[60px] bg-white border-b border-[#E5E5EA] px-4 flex items-center justify-between shrink-0",children:h?(0,I.jsxs)("div",{className:"flex-1 flex items-center gap-3",children:[(0,I.jsxs)("div",{className:"flex-1 bg-[#E5E5EA] rounded-lg px-3 py-2 flex items-center gap-2",children:[(0,I.jsx)(aE,{name:"search",size:16}),(0,I.jsx)("input",{type:"text",placeholder:"Suchen...",value:f,onChange:a=>g(a.target.value),className:"flex-1 bg-transparent text-[15px] text-[#1D1D1F] outline-none",autoFocus:!0})]}),(0,I.jsx)("button",{onClick:()=>{i(!1),g("")},className:"text-[17px] text-[#007AFF] ios-tap-target",children:"Abbrechen"})]}):n?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("button",{onClick:()=>{o(!1),q(new Set)},className:"text-[17px] text-[#007AFF] ios-tap-target",children:"Abbrechen"}),(0,I.jsxs)("span",{className:"sf-pro-display text-[17px] text-[#1D1D1F]",children:[p.size," ausgewhlt"]}),(0,I.jsx)("button",{onClick:()=>{console.log("TODO: Delete selected photos",Array.from(p))},className:"text-[17px] text-[#FF3B30] ios-tap-target",children:"Lschen"})]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"flex items-center gap-2",children:[(0,I.jsx)(aE,{name:"lock",size:20}),(0,I.jsx)("h1",{className:"sf-pro-display text-[20px] text-[#1D1D1F]",children:"Galerie"}),F?(0,I.jsx)(aE,{name:"cloud",size:16}):(0,I.jsx)(jL,{className:"w-4 h-4 text-[#8E8E93]"})]}),(0,I.jsxs)("div",{className:"flex items-center gap-4",children:[(0,I.jsxs)("label",{className:"ios-tap-target cursor-pointer",children:[(0,I.jsx)("div",{className:C?"animate-pulse opacity-50":"",children:(0,I.jsx)(aE,{name:"upload",size:24})}),(0,I.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:a=>{Array.from(a.target.files||[]).forEach(a=>z(a))},className:"hidden",disabled:C})]}),(0,I.jsx)("button",{onClick:()=>i(!0),className:"ios-tap-target",children:(0,I.jsx)(aE,{name:"search",size:24})}),(0,I.jsx)("button",{onClick:()=>k(!j),className:"ios-tap-target",children:(0,I.jsx)(jK,{className:`w-6 h-6 ${l?"text-[#30D158]":"text-[#007AFF]"}`})})]})]})}),j&&(0,I.jsx)("div",{className:"bg-white border-b border-[#E5E5EA] px-4 py-3 shrink-0",children:(0,I.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-1 -mx-1 px-1",children:[(0,I.jsx)("button",{onClick:()=>m(null),className:`px-4 py-1.5 rounded-full text-[15px] whitespace-nowrap shrink-0 ${null===l?"bg-[#007AFF] text-white":"bg-[#E5E5EA] text-[#1D1D1F]"}`,children:"Alle"}),[{id:"nature",label:"Natur"},{id:"architecture",label:"Architektur"},{id:"travel",label:"Reisen"},{id:"food",label:"Essen"},{id:"animals",label:"Tiere"},{id:"city",label:"Stadt"},{id:"landscape",label:"Landschaft"}].map(a=>(0,I.jsx)("button",{onClick:()=>m(a.id),className:`px-4 py-1.5 rounded-full text-[15px] whitespace-nowrap shrink-0 ${l===a.id?"bg-[#007AFF] text-white":"bg-[#E5E5EA] text-[#1D1D1F]"}`,children:a.label},a.id))]})}),(0,I.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[L.map(a=>(0,I.jsxs)("div",{className:"mb-2",children:[(0,I.jsx)("div",{className:"sticky top-0 bg-[#F2F2F7]/95 backdrop-blur-sm px-3 py-2 z-10",children:(0,I.jsx)("p",{className:"text-[13px] font-semibold text-[#6E6E73]",children:a.label})}),(0,I.jsx)("div",{className:"grid grid-cols-3 gap-[2px] px-[2px]",children:a.photos.map(a=>{let b=void 0!==a.metadata;return(0,I.jsxs)("button",{onClick:()=>{var b,c;return b=a.id,c=a.cid,void(n?q(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c}):(console.log("TODO: Show full photo from IPFS CID:",c),s(b)))},onTouchStart:()=>{var b;return b=a.id,void(v.current=setTimeout(()=>{o(!0),q(new Set([b]))},500))},onTouchEnd:M,onTouchCancel:M,onContextMenu:b=>{b.preventDefault(),o(!0),q(new Set([a.id]))},className:"relative aspect-square overflow-hidden bg-[#E5E5EA]",children:[b?(0,I.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-[#E5E5EA] to-[#C7C7CC]",children:(0,I.jsx)(aE,{name:"lock",size:32})}):a.placeholderUrl?(0,I.jsx)("img",{src:a.placeholderUrl,alt:"",className:"w-full h-full object-cover",loading:"lazy"}):null,n&&(0,I.jsx)("div",{className:"absolute inset-0 bg-black/20",children:(0,I.jsx)("div",{className:`absolute top-2 right-2 w-6 h-6 rounded-full border-2 flex items-center justify-center ${p.has(a.id)?"bg-[#007AFF] border-[#007AFF]":"border-white bg-black/30"}`,children:p.has(a.id)&&(0,I.jsx)(O,{className:"w-4 h-4 text-white"})})})]},a.id)})})]},a.date)),(0,I.jsxs)("div",{className:"text-center py-6 px-4",children:[(0,I.jsx)("p",{className:"text-[13px] text-[#8E8E93]",children:"Lange drcken zum Auswhlen  Tippen zum ffnen"}),(0,I.jsxs)("p",{className:"text-[11px] text-[#C7C7CC] mt-1",children:[K.length," Fotos lokal  ",D.length," in der Cloud"]}),E.length>0&&(0,I.jsxs)("p",{className:"text-[11px] text-[#007AFF] mt-1 flex items-center justify-center gap-1",children:[(0,I.jsx)(aE,{name:"smartphone",size:12}),E.length," von anderen Gerten"]})]})]}),t&&(0,I.jsxs)("div",{className:"fixed top-[70px] left-1/2 -translate-x-1/2 bg-[#1D1D1F] text-white px-4 py-2 rounded-full text-[13px] flex items-center gap-2 z-50 animate-pulse",children:[(0,I.jsx)(aE,{name:"cloud",size:16}),t]}),r&&(0,I.jsxs)("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[(0,I.jsxs)("header",{className:"h-[60px] flex items-center justify-between px-4 bg-black/80",children:[(0,I.jsx)("button",{onClick:()=>s(null),className:"ios-tap-target",children:(0,I.jsx)(jw,{className:"w-6 h-6 text-white"})}),(0,I.jsxs)("span",{className:"text-[17px] text-white",children:["Foto ",K.findIndex(a=>a.id===r)+1," von"," ",K.length]}),(0,I.jsx)("div",{className:"w-10"})]}),(0,I.jsx)("div",{className:"flex-1 flex items-center justify-center p-4",children:(e=K.find(a=>a.id===r))?e.metadata?(0,I.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,I.jsx)(aE,{name:"lock",size:64}),(0,I.jsx)("p",{className:"text-white/80 text-center",children:"Entschlsselung wird implementiert..."})]}):e.placeholderUrl?(0,I.jsx)("img",{src:e.placeholderUrl,alt:"",className:"max-w-full max-h-full object-contain rounded-lg"}):null:null}),(0,I.jsx)("footer",{className:"h-[80px] flex items-center justify-center bg-black/80",children:(0,I.jsxs)("div",{className:"flex items-center gap-2 text-[13px] text-white/60",children:[(0,I.jsx)(aE,{name:"lock",size:16}),(0,I.jsx)("span",{children:"Ende-zu-Ende verschlsselt"})]})})]})]})}let jP=N("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),jQ={isOnboarded:!1,backupActive:!1,selectedPlan:"free",autoBackupEnabled:!0,backgroundBackupEnabled:!1,photosCount:0,lastBackup:"Noch nie",permanence:0,encryptionKey:"",backupPhrase:[],devices:[],photoSource:"photos-app"};function jR(){let[a,b]=(0,J.useState)(jQ),[c,d]=(0,J.useState)("onboarding"),[e,f]=(0,J.useState)(1),[g,h]=(0,J.useState)(!0);return((0,J.useEffect)(()=>{let a=setTimeout(()=>{"true"===localStorage.getItem("photovault_onboarded")&&(b(a=>({...a,isOnboarded:!0})),d("gallery")),h(!1)},2e3);return()=>clearTimeout(a)},[]),g)?(0,I.jsx)(gA,{}):"onboarding"===c?(0,I.jsx)("div",{className:"min-h-screen ios-bg-gray",children:(0,I.jsx)("div",{className:"max-w-[428px] mx-auto min-h-screen bg-[#F2F2F7]",children:(0,I.jsx)(gC,{state:a,setState:b,step:e,setStep:f,onComplete:()=>{localStorage.setItem("photovault_onboarded","true"),b(a=>({...a,isOnboarded:!0})),d("gallery"),console.log("Onboarding completed with state:",a)}})})}):(0,I.jsx)("div",{className:"min-h-screen ios-bg-gray",children:(0,I.jsxs)("div",{className:"max-w-[428px] mx-auto min-h-screen bg-[#F2F2F7] flex flex-col",children:[(0,I.jsxs)("div",{className:"flex-1 overflow-hidden pb-[80px]",children:["gallery"===c&&(0,I.jsx)(jO,{photosCount:a.photosCount}),"dashboard"===c&&(0,I.jsx)(jB,{state:a,setState:b}),"settings"===c&&(0,I.jsx)(jE,{state:a,setState:b,onRestartOnboarding:()=>{console.log("TODO: Navigate to onboarding screen 1"),localStorage.removeItem("photovault_onboarded"),b(a=>({...a,isOnboarded:!1})),f(1),d("onboarding")}})]}),(0,I.jsx)(jS,{currentScreen:c,onNavigate:a=>{d(a)}})]})})}function jS({currentScreen:a,onNavigate:b}){return(0,I.jsxs)("nav",{className:"fixed bottom-0 left-0 right-0 h-[80px] bg-white border-t border-[#E5E5EA] flex items-start justify-around pt-2 pb-6 max-w-[428px] mx-auto",children:[(0,I.jsxs)("button",{onClick:()=>b("gallery"),className:"flex flex-col items-center gap-1 ios-tap-target px-4",children:[(0,I.jsx)(aE,{name:"image",size:24}),(0,I.jsx)("span",{className:`text-[10px] ${"gallery"===a?"text-[#007AFF]":"text-[#6E6E73]"}`,children:"Galerie"})]}),(0,I.jsxs)("button",{onClick:()=>b("dashboard"),className:"flex flex-col items-center gap-1 ios-tap-target px-4",children:[(0,I.jsx)(aE,{name:"shield",size:24}),(0,I.jsx)("span",{className:`text-[10px] ${"dashboard"===a?"text-[#007AFF]":"text-[#6E6E73]"}`,children:"Backup"})]}),(0,I.jsxs)("button",{onClick:()=>b("settings"),className:"flex flex-col items-center gap-1 ios-tap-target px-4",children:[(0,I.jsx)(jP,{className:`w-6 h-6 ${"settings"===a?"text-[#007AFF]":"text-[#6E6E73]"}`}),(0,I.jsx)("span",{className:`text-[10px] ${"settings"===a?"text-[#007AFF]":"text-[#6E6E73]"}`,children:"Einstellungen"})]})]})}a.s(["PhotoVaultApp",()=>jR],23605)}];

//# sourceMappingURL=_eb73b1f8._.js.map