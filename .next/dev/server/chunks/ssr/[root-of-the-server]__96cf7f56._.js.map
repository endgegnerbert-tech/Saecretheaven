{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/components/ui/progress-indicator.tsx"],"sourcesContent":["import React from \"react\";\nimport { motion } from \"framer-motion\";\nimport { Check, ChevronLeft } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ProgressIndicatorProps {\n  currentStep: number;\n  onContinue?: () => void;\n  onBack?: () => void;\n  totalSteps?: number;\n}\n\nconst ProgressIndicator = ({\n  currentStep = 1,\n  onContinue,\n  onBack,\n  totalSteps = 3,\n}: ProgressIndicatorProps) => {\n  return (\n    <div className=\"flex flex-col items-center justify-center gap-6 w-full\">\n      {/* Progress Dots */}\n      <div className=\"flex items-center gap-4 relative\">\n        {Array.from({ length: totalSteps }).map((_, index) => {\n          const stepNumber = index + 1;\n          return (\n            <div key={stepNumber} className=\"flex flex-col items-center gap-1\">\n              <div\n                className={cn(\n                  \"w-2 h-2 rounded-full relative z-10 transition-all\",\n                  stepNumber <= currentStep ? \"bg-[#007AFF]\" : \"bg-[#E5E5EA]\",\n                )}\n              />\n              {stepNumber < totalSteps && (\n                <div\n                  className={cn(\n                    \"w-8 h-0.5 transition-all\",\n                    stepNumber < currentStep ? \"bg-[#007AFF]\" : \"bg-[#E5E5EA]\",\n                  )}\n                />\n              )}\n            </div>\n          );\n        })}\n\n        {/* Animated Progress Bar */}\n        <motion.div\n          initial={{ width: 0 }}\n          animate={{\n            width: `${(currentStep / totalSteps) * 100}%`,\n          }}\n          className=\"absolute left-0 top-1/2 -translate-y-1/2 h-1 bg-[#007AFF]/20 rounded-full\"\n          transition={{\n            type: \"spring\",\n            stiffness: 300,\n            damping: 30,\n            mass: 0.5,\n          }}\n        />\n      </div>\n\n      {/* Step Label */}\n      <p className=\"text-sm text-[#6E6E73]\">\n        Schritt {currentStep} von {totalSteps}\n      </p>\n    </div>\n  );\n};\n\nexport default ProgressIndicator;\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AASA,MAAM,oBAAoB,CAAC,EACzB,cAAc,CAAC,EACf,UAAU,EACV,MAAM,EACN,aAAa,CAAC,EACS;IACvB,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;oBACZ,MAAM,IAAI,CAAC;wBAAE,QAAQ;oBAAW,GAAG,GAAG,CAAC,CAAC,GAAG;wBAC1C,MAAM,aAAa,QAAQ;wBAC3B,qBACE,8OAAC;4BAAqB,WAAU;;8CAC9B,8OAAC;oCACC,WAAW,IAAA,yHAAE,EACX,qDACA,cAAc,cAAc,iBAAiB;;;;;;gCAGhD,aAAa,4BACZ,8OAAC;oCACC,WAAW,IAAA,yHAAE,EACX,4BACA,aAAa,cAAc,iBAAiB;;;;;;;2BAX1C;;;;;oBAiBd;kCAGA,8OAAC,oMAAM,CAAC,GAAG;wBACT,SAAS;4BAAE,OAAO;wBAAE;wBACpB,SAAS;4BACP,OAAO,GAAG,AAAC,cAAc,aAAc,IAAI,CAAC,CAAC;wBAC/C;wBACA,WAAU;wBACV,YAAY;4BACV,MAAM;4BACN,WAAW;4BACX,SAAS;4BACT,MAAM;wBACR;;;;;;;;;;;;0BAKJ,8OAAC;gBAAE,WAAU;;oBAAyB;oBAC3B;oBAAY;oBAAM;;;;;;;;;;;;;AAInC;uCAEe"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/components/ui/shield-loader.tsx"],"sourcesContent":["import type React from \"react\";\nimport \"./shield-loader.css\";\nimport { Image } from \"lucide-react\";\n\n/**\n * Ein Ladebildschirm, der ein Schild aus vielen einzelnen Partikeln aufbaut.\n * Jedes Partikel erscheint mit einer leichten Verz√∂gerung und einem \"Rauch\"-Effekt,\n * um einen dynamischen und modernen Ladeeffekt zu erzeugen.\n */\nconst ShieldLoader: React.FC = () => {\n  // Anzahl der Partikel, aus denen das Schild aufgebaut wird.\n  const particleCount = 150;\n\n  return (\n    // Der Hauptcontainer, der den gesamten Bildschirm einnimmt\n    <div className=\"loader-container\">\n      {/* Das Photo-Icon, das hinter dem Schild hervorlugt */}\n      <div className=\"peeking-photo-icon\">\n        <Image strokeWidth={1.5} />\n      </div>\n\n      {/* Der Container, der die Form des Schildes hat und die Partikel enth√§lt */}\n      <div className=\"shield-container\">\n        {/* Generiert die Partikel-Elemente */}\n        {Array.from({ length: particleCount }).map((_, i) => (\n          <div\n            key={i}\n            className=\"particle\"\n            // Deterministische Verz√∂gerung (SPEED UP: Faktor 0.25 -> 0.1, 0.05 -> 0.02)\n            style={{\n              animationDelay: `${(i % 10) * 0.1 + Math.floor(i / 10) * 0.02}s`,\n            }}\n          />\n        ))}\n        {/* Strukturlinien f√ºr das Schild */}\n        <div className=\"shield-structure\">\n          <div className=\"structure-line line-1\" />\n          <div className=\"structure-line line-2\" />\n          <div className=\"structure-line line-3\" />\n          <div className=\"structure-line line-4\" />\n        </div>\n      </div>\n      {/* Der Text, der nach einer kurzen Verz√∂gerung in der Mitte erscheint */}\n      <div className=\"loading-text\">L√ÑDT...</div>\n    </div>\n  );\n};\n\nexport default ShieldLoader;\n"],"names":[],"mappings":";;;;;AAEA;;;;AAEA;;;;CAIC,GACD,MAAM,eAAyB;IAC7B,4DAA4D;IAC5D,MAAM,gBAAgB;IAEtB,OACE,2DAA2D;kBAC3D,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,6MAAK;oBAAC,aAAa;;;;;;;;;;;0BAItB,8OAAC;gBAAI,WAAU;;oBAEZ,MAAM,IAAI,CAAC;wBAAE,QAAQ;oBAAc,GAAG,GAAG,CAAC,CAAC,GAAG,kBAC7C,8OAAC;4BAEC,WAAU;4BACV,4EAA4E;4BAC5E,OAAO;gCACL,gBAAgB,GAAG,AAAC,IAAI,KAAM,MAAM,KAAK,KAAK,CAAC,IAAI,MAAM,KAAK,CAAC,CAAC;4BAClE;2BALK;;;;;kCAST,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;;;;;;;;;;;;;0BAInB,8OAAC;gBAAI,WAAU;0BAAe;;;;;;;;;;;;AAGpC;uCAEe"}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/lib/crypto.ts"],"sourcesContent":["/**\n * Crypto Layer - Client-Side Encryption mit tweetnacl\n * Alle Daten werden VOR dem Upload verschl√ºsselt\n */\n\nimport nacl from 'tweetnacl';\nimport { encodeBase64, decodeBase64 } from 'tweetnacl-util';\n\nexport interface EncryptionKey {\n    publicKey: Uint8Array;\n    secretKey: Uint8Array;\n}\n\nexport interface EncryptedData {\n    ciphertext: string; // Base64\n    nonce: string; // Base64\n}\n\n/**\n * Generiert ein neues Encryption Key Pair\n */\nexport function generateKeyPair(): EncryptionKey {\n    const keyPair = nacl.box.keyPair();\n    return {\n        publicKey: keyPair.publicKey,\n        secretKey: keyPair.secretKey,\n    };\n}\n\n/**\n * Generiert eine 12-Wort Recovery Phrase aus dem Secret Key\n * Vereinfachte Version - in Production w√ºrde man BIP39 verwenden\n */\nexport function keyToRecoveryPhrase(secretKey: Uint8Array): string {\n    const base64 = encodeBase64(secretKey);\n    // F√ºr MVP: Base64 in Chunks aufteilen\n    // TODO: BIP39 Wordlist f√ºr bessere UX\n    return base64.match(/.{1,8}/g)?.join('-') || base64;\n}\n\n/**\n * Recovered Secret Key aus Recovery Phrase\n */\nexport function recoveryPhraseToKey(phrase: string): Uint8Array {\n    const base64 = phrase.replace(/-/g, '');\n    return decodeBase64(base64);\n}\n\n/**\n * Verschl√ºsselt Daten (Uint8Array) mit dem Secret Key\n */\nexport function encrypt(\n    data: Uint8Array,\n    secretKey: Uint8Array\n): EncryptedData {\n    const nonce = nacl.randomBytes(nacl.secretbox.nonceLength);\n    const ciphertext = nacl.secretbox(data, nonce, secretKey);\n\n    return {\n        ciphertext: encodeBase64(ciphertext),\n        nonce: encodeBase64(nonce),\n    };\n}\n\n/**\n * Entschl√ºsselt Daten\n */\nexport function decrypt(\n    encrypted: EncryptedData,\n    secretKey: Uint8Array\n): Uint8Array | null {\n    const ciphertext = decodeBase64(encrypted.ciphertext);\n    const nonce = decodeBase64(encrypted.nonce);\n\n    const decrypted = nacl.secretbox.open(ciphertext, nonce, secretKey);\n    return decrypted;\n}\n\n/**\n * Verschl√ºsselt ein File (Blob/File) und gibt encrypted Blob zur√ºck\n */\nexport async function encryptFile(\n    file: File,\n    secretKey: Uint8Array\n): Promise<{ encrypted: Blob; nonce: string }> {\n    const arrayBuffer = await file.arrayBuffer();\n    const data = new Uint8Array(arrayBuffer);\n\n    const encrypted = encrypt(data, secretKey);\n\n    // Konvertiere Base64 zur√ºck zu Blob f√ºr Storage\n    const ciphertextBytes = decodeBase64(encrypted.ciphertext);\n    const blob = new Blob([ciphertextBytes], { type: 'application/octet-stream' });\n\n    return {\n        encrypted: blob,\n        nonce: encrypted.nonce,\n    };\n}\n\n/**\n * Entschl√ºsselt ein Blob zur√ºck zum Original\n */\nexport async function decryptFile(\n    encryptedBlob: Blob,\n    nonce: string,\n    secretKey: Uint8Array,\n    originalMimeType: string\n): Promise<Blob | null> {\n    const arrayBuffer = await encryptedBlob.arrayBuffer();\n    const ciphertext = new Uint8Array(arrayBuffer);\n\n    const encrypted: EncryptedData = {\n        ciphertext: encodeBase64(ciphertext),\n        nonce,\n    };\n\n    const decrypted = decrypt(encrypted, secretKey);\n    if (!decrypted) return null;\n\n    return new Blob([decrypted], { type: originalMimeType });\n}\n\n/**\n * Speichert Secret Key verschl√ºsselt im LocalStorage\n * Verwendet ein Master Password (optional f√ºr MVP)\n */\nexport function saveKeyToStorage(secretKey: Uint8Array, password?: string): void {\n    if (password) {\n        // TODO: Key Derivation mit PBKDF2\n        // F√ºr MVP: Direkt speichern\n    }\n\n    const encoded = encodeBase64(secretKey);\n    localStorage.setItem('photovault_secret_key', encoded);\n}\n\n/**\n * L√§dt Secret Key aus LocalStorage\n */\nexport function loadKeyFromStorage(): Uint8Array | null {\n    const encoded = localStorage.getItem('photovault_secret_key');\n    if (!encoded) return null;\n\n    try {\n        return decodeBase64(encoded);\n    } catch {\n        return null;\n    }\n}\n\n/**\n * L√∂scht Key aus Storage (Logout)\n */\nexport function clearKeyFromStorage(): void {\n    localStorage.removeItem('photovault_secret_key');\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;CAGC,GAED;AACA;;;AAeO,SAAS;IACZ,MAAM,UAAU,oJAAI,CAAC,GAAG,CAAC,OAAO;IAChC,OAAO;QACH,WAAW,QAAQ,SAAS;QAC5B,WAAW,QAAQ,SAAS;IAChC;AACJ;AAMO,SAAS,oBAAoB,SAAqB;IACrD,MAAM,SAAS,IAAA,iKAAY,EAAC;IAC5B,sCAAsC;IACtC,sCAAsC;IACtC,OAAO,OAAO,KAAK,CAAC,YAAY,KAAK,QAAQ;AACjD;AAKO,SAAS,oBAAoB,MAAc;IAC9C,MAAM,SAAS,OAAO,OAAO,CAAC,MAAM;IACpC,OAAO,IAAA,iKAAY,EAAC;AACxB;AAKO,SAAS,QACZ,IAAgB,EAChB,SAAqB;IAErB,MAAM,QAAQ,oJAAI,CAAC,WAAW,CAAC,oJAAI,CAAC,SAAS,CAAC,WAAW;IACzD,MAAM,aAAa,oJAAI,CAAC,SAAS,CAAC,MAAM,OAAO;IAE/C,OAAO;QACH,YAAY,IAAA,iKAAY,EAAC;QACzB,OAAO,IAAA,iKAAY,EAAC;IACxB;AACJ;AAKO,SAAS,QACZ,SAAwB,EACxB,SAAqB;IAErB,MAAM,aAAa,IAAA,iKAAY,EAAC,UAAU,UAAU;IACpD,MAAM,QAAQ,IAAA,iKAAY,EAAC,UAAU,KAAK;IAE1C,MAAM,YAAY,oJAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,OAAO;IACzD,OAAO;AACX;AAKO,eAAe,YAClB,IAAU,EACV,SAAqB;IAErB,MAAM,cAAc,MAAM,KAAK,WAAW;IAC1C,MAAM,OAAO,IAAI,WAAW;IAE5B,MAAM,YAAY,QAAQ,MAAM;IAEhC,gDAAgD;IAChD,MAAM,kBAAkB,IAAA,iKAAY,EAAC,UAAU,UAAU;IACzD,MAAM,OAAO,IAAI,KAAK;QAAC;KAAgB,EAAE;QAAE,MAAM;IAA2B;IAE5E,OAAO;QACH,WAAW;QACX,OAAO,UAAU,KAAK;IAC1B;AACJ;AAKO,eAAe,YAClB,aAAmB,EACnB,KAAa,EACb,SAAqB,EACrB,gBAAwB;IAExB,MAAM,cAAc,MAAM,cAAc,WAAW;IACnD,MAAM,aAAa,IAAI,WAAW;IAElC,MAAM,YAA2B;QAC7B,YAAY,IAAA,iKAAY,EAAC;QACzB;IACJ;IAEA,MAAM,YAAY,QAAQ,WAAW;IACrC,IAAI,CAAC,WAAW,OAAO;IAEvB,OAAO,IAAI,KAAK;QAAC;KAAU,EAAE;QAAE,MAAM;IAAiB;AAC1D;AAMO,SAAS,iBAAiB,SAAqB,EAAE,QAAiB;IACrE,IAAI,UAAU;IACV,kCAAkC;IAClC,4BAA4B;IAChC;IAEA,MAAM,UAAU,IAAA,iKAAY,EAAC;IAC7B,aAAa,OAAO,CAAC,yBAAyB;AAClD;AAKO,SAAS;IACZ,MAAM,UAAU,aAAa,OAAO,CAAC;IACrC,IAAI,CAAC,SAAS,OAAO;IAErB,IAAI;QACA,OAAO,IAAA,iKAAY,EAAC;IACxB,EAAE,OAAM;QACJ,OAAO;IACX;AACJ;AAKO,SAAS;IACZ,aAAa,UAAU,CAAC;AAC5B"}},
    {"offset": {"line": 348, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/hooks/use-encryption.ts"],"sourcesContent":["/**\n * useEncryption Hook - Key Management\n */\n\n\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport {\n  generateKeyPair,\n  saveKeyToStorage,\n  loadKeyFromStorage,\n  clearKeyFromStorage,\n  keyToRecoveryPhrase,\n  recoveryPhraseToKey,\n} from \"@/lib/crypto\";\n\nexport function useEncryption() {\n  const [secretKey, setSecretKey] = useState<Uint8Array | null>(null);\n  const [isInitialized, setIsInitialized] = useState(false);\n  const [recoveryPhrase, setRecoveryPhrase] = useState<string | null>(null);\n  const [isGeneratingKey, setIsGeneratingKey] = useState(false);\n\n  // Load key on mount\n  useEffect(() => {\n    const key = loadKeyFromStorage();\n    if (key) {\n      setSecretKey(key);\n      setRecoveryPhrase(keyToRecoveryPhrase(key));\n    }\n    setIsInitialized(true);\n  }, []);\n\n  // Generate new key\n  const generateNewKey = useCallback((): Promise<string> => {\n    return new Promise((resolve) => {\n      setIsGeneratingKey(true);\n\n      // Simulate key generation time\n      setTimeout(() => {\n        const keyPair = generateKeyPair();\n        const key = keyPair.secretKey;\n\n        setSecretKey(key);\n        saveKeyToStorage(key);\n\n        const phrase = keyToRecoveryPhrase(key);\n        setRecoveryPhrase(phrase);\n        setIsGeneratingKey(false);\n\n        resolve(phrase);\n      }, 1500);\n    });\n  }, []);\n\n  // Restore from recovery phrase\n  const restoreFromPhrase = useCallback((phrase: string) => {\n    try {\n      const key = recoveryPhraseToKey(phrase);\n      setSecretKey(key);\n      saveKeyToStorage(key);\n      setRecoveryPhrase(phrase);\n      return true;\n    } catch {\n      return false;\n    }\n  }, []);\n\n  // Logout / Clear key\n  const clearKey = useCallback(() => {\n    setSecretKey(null);\n    setRecoveryPhrase(null);\n    clearKeyFromStorage();\n  }, []);\n\n  return {\n    secretKey,\n    isInitialized,\n    hasKey: !!secretKey,\n    recoveryPhrase,\n    isGeneratingKey,\n    generateNewKey,\n    restoreFromPhrase,\n    clearKey,\n  };\n}\n"],"names":[],"mappings":";;;;AAMA;AACA;AAPA;;CAEC,GAED;;;AAYO,SAAS;IACd,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAoB;IAC9D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAgB;IACpE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IAEvD,oBAAoB;IACpB,IAAA,kNAAS,EAAC;QACR,MAAM,MAAM,IAAA,0IAAkB;QAC9B,IAAI,KAAK;YACP,aAAa;YACb,kBAAkB,IAAA,2IAAmB,EAAC;QACxC;QACA,iBAAiB;IACnB,GAAG,EAAE;IAEL,mBAAmB;IACnB,MAAM,iBAAiB,IAAA,oNAAW,EAAC;QACjC,OAAO,IAAI,QAAQ,CAAC;YAClB,mBAAmB;YAEnB,+BAA+B;YAC/B,WAAW;gBACT,MAAM,UAAU,IAAA,uIAAe;gBAC/B,MAAM,MAAM,QAAQ,SAAS;gBAE7B,aAAa;gBACb,IAAA,wIAAgB,EAAC;gBAEjB,MAAM,SAAS,IAAA,2IAAmB,EAAC;gBACnC,kBAAkB;gBAClB,mBAAmB;gBAEnB,QAAQ;YACV,GAAG;QACL;IACF,GAAG,EAAE;IAEL,+BAA+B;IAC/B,MAAM,oBAAoB,IAAA,oNAAW,EAAC,CAAC;QACrC,IAAI;YACF,MAAM,MAAM,IAAA,2IAAmB,EAAC;YAChC,aAAa;YACb,IAAA,wIAAgB,EAAC;YACjB,kBAAkB;YAClB,OAAO;QACT,EAAE,OAAM;YACN,OAAO;QACT;IACF,GAAG,EAAE;IAEL,qBAAqB;IACrB,MAAM,WAAW,IAAA,oNAAW,EAAC;QAC3B,aAAa;QACb,kBAAkB;QAClB,IAAA,2IAAmB;IACrB,GAAG,EAAE;IAEL,OAAO;QACL;QACA;QACA,QAAQ,CAAC,CAAC;QACV;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 423, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/components/photovault/OnboardingFlow.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Check, Key, FolderOpen, Cloud } from \"lucide-react\";\nimport type { AppState } from \"./PhotoVaultApp\";\nimport { dummyBackupPhrase } from \"./PhotoVaultApp\";\nimport {\n  generateKeyPair,\n  keyToRecoveryPhrase,\n  saveKeyToStorage,\n} from \"@/lib/crypto\";\nimport ProgressIndicator from \"@/components/ui/progress-indicator\";\nimport ShieldLoader from \"@/components/ui/shield-loader\";\nimport { useEncryption } from \"@/hooks/use-encryption\";\n\ninterface OnboardingFlowProps {\n  state: AppState;\n  setState: React.Dispatch<React.SetStateAction<AppState>>;\n  step: number;\n  setStep: React.Dispatch<React.SetStateAction<number>>;\n  onComplete: () => void;\n}\n\nexport function OnboardingFlow({\n  state,\n  setState,\n  step,\n  setStep,\n  onComplete,\n}: OnboardingFlowProps) {\n  const [showPhraseStep, setShowPhraseStep] = useState(false);\n  const [phraseConfirmed, setPhraseConfirmed] = useState(false);\n  const [showImportDialog, setShowImportDialog] = useState(false);\n  const { isGeneratingKey } = useEncryption();\n\n  const { generateNewKey } = useEncryption();\n\n  const generateEncryptionKey = async () => {\n    const phrase = await generateNewKey();\n    const phraseWords = phrase?.split(\"-\").slice(0, 12) || dummyBackupPhrase; // Take first 12 chunks\n\n    setState((prev) => ({\n      ...prev,\n      encryptionKey: phrase || \"\",\n      backupPhrase: phraseWords,\n    }));\n    setShowPhraseStep(true);\n  };\n\n  const importExistingKey = () => {\n    console.log(\"Show import dialog\");\n    setShowImportDialog(true);\n  };\n\n  const confirmPhraseAndContinue = () => {\n    console.log(\"TODO: Verify checkbox, proceed to step 2\");\n    setShowPhraseStep(false);\n    setPhraseConfirmed(false);\n    setStep(2);\n  };\n\n  const selectSource = (source: \"photos-app\" | \"files-app\") => {\n    console.log(\"Selected photo source:\", source);\n    setState((prev) => ({ ...prev, photoSource: source }));\n    setStep(3);\n  };\n\n  const selectPlan = (plan: \"free\" | \"backup-plus\") => {\n    console.log(plan === \"free\" ? \"Set Free Plan\" : \"Set Backup+ Plan\");\n    setState((prev) => ({ ...prev, selectedPlan: plan }));\n    onComplete();\n  };\n\n  // Calculate visual step for progress indicator (1, 1b, 2, 3 ‚Üí shows as 1, 1, 2, 3)\n  const visualStep = showPhraseStep ? 1 : step;\n\n  // Show loader during key generation\n  if (isGeneratingKey) {\n    return <ShieldLoader />;\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col px-6 pt-12 pb-8 safe-area-inset\">\n      {/* Progress Indicator */}\n      <ProgressIndicator currentStep={visualStep} />\n\n      {step === 1 && !showPhraseStep && (\n        <KeyCreationStep\n          onContinue={generateEncryptionKey}\n          onImport={importExistingKey}\n        />\n      )}\n\n      {step === 1 && showPhraseStep && (\n        <BackupPhraseStep\n          phrase={state.backupPhrase}\n          confirmed={phraseConfirmed}\n          onConfirmChange={setPhraseConfirmed}\n          onContinue={confirmPhraseAndContinue}\n        />\n      )}\n\n      {step === 2 && (\n        <SourceSelectionStep\n          selectedSource={state.photoSource}\n          onSelect={selectSource}\n        />\n      )}\n\n      {step === 3 && (\n        <PlanSelectionStep\n          selectedPlan={state.selectedPlan}\n          onSelect={selectPlan}\n        />\n      )}\n\n      {/* Import Dialog */}\n      {showImportDialog && (\n        <ImportKeyDialog onClose={() => setShowImportDialog(false)} />\n      )}\n    </div>\n  );\n}\n\nfunction KeyCreationStep({\n  onContinue,\n  onImport,\n}: {\n  onContinue: () => void;\n  onImport: () => void;\n}) {\n  return (\n    <div className=\"flex-1 flex flex-col\">\n      <div className=\"flex-1 flex flex-col items-center justify-center text-center\">\n        <div className=\"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6\">\n          <Key className=\"w-10 h-10 text-[#007AFF]\" />\n        </div>\n        <h1 className=\"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-3\">\n          Erstelle deinen Schl√ºssel\n        </h1>\n        <p className=\"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px] mb-6\">\n          Dieser Schl√ºssel verschl√ºsselt alle Fotos. Speichere ihn gut:\n        </p>\n\n        <div className=\"bg-[#F2F2F7] rounded-xl p-4 w-full max-w-[300px]\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <Key className=\"w-5 h-5 text-[#007AFF]\" />\n            <span className=\"text-[15px] text-[#1D1D1F] font-medium\">\n              12-Wort Backup-Phrase\n            </span>\n          </div>\n          <p className=\"text-[13px] text-[#6E6E73]\">\n            Wird im n√§chsten Schritt erstellt und angezeigt\n          </p>\n        </div>\n      </div>\n\n      <div className=\"space-y-3\">\n        <button\n          onClick={onContinue}\n          className=\"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target\"\n        >\n          Schl√ºssel erstellen\n        </button>\n        <button\n          onClick={onImport}\n          className=\"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target\"\n        >\n          Ich habe bereits einen Schl√ºssel\n        </button>\n      </div>\n    </div>\n  );\n}\n\nfunction BackupPhraseStep({\n  phrase,\n  confirmed,\n  onConfirmChange,\n  onContinue,\n}: {\n  phrase: string[];\n  confirmed: boolean;\n  onConfirmChange: (value: boolean) => void;\n  onContinue: () => void;\n}) {\n  return (\n    <div className=\"flex-1 flex flex-col\">\n      <div className=\"flex-1\">\n        <div className=\"text-center mb-6\">\n          <h1 className=\"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2\">\n            Notiere diese W√∂rter\n          </h1>\n          <p className=\"text-[15px] text-[#6E6E73]\">\n            Speichere sie sicher ab. Du brauchst sie zur Wiederherstellung.\n          </p>\n        </div>\n\n        {/* 12 words in 3x4 grid */}\n        <div className=\"grid grid-cols-3 gap-2 mb-6\">\n          {phrase.map((word, index) => (\n            <div\n              key={index}\n              className=\"bg-white rounded-lg p-3 text-center border border-[#E5E5EA]\"\n            >\n              <span className=\"text-[11px] text-[#8E8E93] block mb-0.5\">\n                {index + 1}\n              </span>\n              <span className=\"text-[15px] text-[#1D1D1F] font-mono\">\n                {word}\n              </span>\n            </div>\n          ))}\n        </div>\n\n        {/* Warning */}\n        <div className=\"bg-[#FF3B30]/10 rounded-xl p-4 mb-6\">\n          <p className=\"text-[13px] text-[#FF3B30] text-center\">\n            ‚ö†Ô∏è Teile diese W√∂rter niemals mit anderen. Wer sie hat, kann auf\n            deine Fotos zugreifen.\n          </p>\n        </div>\n\n        {/* Checkbox */}\n        <button\n          onClick={() => onConfirmChange(!confirmed)}\n          className=\"w-full flex items-center gap-3 p-4 bg-white rounded-xl ios-tap-target\"\n        >\n          <div\n            className={`w-6 h-6 rounded-md border-2 flex items-center justify-center ${\n              confirmed ? \"bg-[#007AFF] border-[#007AFF]\" : \"border-[#C7C7CC]\"\n            }`}\n          >\n            {confirmed && <Check className=\"w-4 h-4 text-white\" />}\n          </div>\n          <span className=\"text-[17px] text-[#1D1D1F]\">\n            Ich habe die W√∂rter notiert\n          </span>\n        </button>\n      </div>\n\n      <button\n        onClick={onContinue}\n        disabled={!confirmed}\n        className={`w-full h-[50px] text-[17px] font-semibold rounded-xl ios-tap-target ${\n          confirmed ? \"bg-[#007AFF] text-white\" : \"bg-[#E5E5EA] text-[#8E8E93]\"\n        }`}\n      >\n        Weiter\n      </button>\n    </div>\n  );\n}\n\nfunction SourceSelectionStep({\n  selectedSource,\n  onSelect,\n}: {\n  selectedSource: string;\n  onSelect: (source: \"photos-app\" | \"files-app\") => void;\n}) {\n  const sources = [\n    {\n      id: \"photos-app\" as const,\n      label: \"Fotos-App\",\n      description: \"Alle Fotos aus der iOS Foto-Bibliothek\",\n      details: \"Empfohlen f√ºr die meisten Nutzer\",\n    },\n    {\n      id: \"files-app\" as const,\n      label: \"Dateien-App\",\n      description: \"Fotos aus einem bestimmten Ordner\",\n      details: \"F√ºr fortgeschrittene Nutzer\",\n    },\n  ];\n\n  return (\n    <div className=\"flex-1 flex flex-col\">\n      <div className=\"flex-1\">\n        <div className=\"flex flex-col items-center text-center mb-8\">\n          <div className=\"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6\">\n            <FolderOpen className=\"w-10 h-10 text-[#007AFF]\" />\n          </div>\n          <h1 className=\"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2\">\n            W√§hle Backup-Quelle\n          </h1>\n          <p className=\"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px]\">\n            Wo sind deine Fotos gespeichert?\n          </p>\n        </div>\n\n        {/* Help Text */}\n        <div className=\"bg-[#F2F2F7] rounded-xl p-4 mb-6\">\n          <p className=\"text-[15px] text-[#6E6E73] text-center\">\n            üí° <strong>Tipp:</strong> Die meisten Nutzer w√§hlen \"Fotos-App\". Du\n            kannst dies sp√§ter in den Einstellungen √§ndern.\n          </p>\n        </div>\n\n        <div className=\"space-y-3\">\n          {sources.map((source) => (\n            <button\n              key={source.id}\n              onClick={() => onSelect(source.id)}\n              className={`w-full p-4 rounded-xl bg-white text-left ios-tap-target transition-all ${\n                selectedSource === source.id\n                  ? \"ring-2 ring-[#007AFF] shadow-lg\"\n                  : \"\"\n              }`}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex-1\">\n                  <p className=\"text-[17px] font-medium text-[#1D1D1F]\">\n                    {source.label}\n                  </p>\n                  <p className=\"text-[15px] text-[#6E6E73] mt-0.5\">\n                    {source.description}\n                  </p>\n                  <p className=\"text-[13px] text-[#8E8E93] mt-1\">\n                    {source.details}\n                  </p>\n                </div>\n                <div\n                  className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${\n                    selectedSource === source.id\n                      ? \"border-[#007AFF] bg-[#007AFF]\"\n                      : \"border-[#C7C7CC]\"\n                  }`}\n                >\n                  {selectedSource === source.id && (\n                    <div className=\"w-2.5 h-2.5 rounded-full bg-white\" />\n                  )}\n                </div>\n              </div>\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction PlanSelectionStep({\n  selectedPlan,\n  onSelect,\n}: {\n  selectedPlan: string;\n  onSelect: (plan: \"free\" | \"backup-plus\") => void;\n}) {\n  const [tempSelected, setTempSelected] = useState<\"free\" | \"backup-plus\">(\n    selectedPlan as \"free\" | \"backup-plus\",\n  );\n\n  const plans = [\n    {\n      id: \"free\" as const,\n      label: \"FREE\",\n      subtitle: \"Auf deinen Ger√§ten\",\n      price: \"0‚Ç¨/Monat\",\n      features: [\n        \"Unbegrenzte Fotos\",\n        \"Zero-Knowledge Verschl√ºsselung\",\n        \"Multi-Device Sync\",\n      ],\n      description: \"Perfekt f√ºr den Start\",\n    },\n    {\n      id: \"backup-plus\" as const,\n      label: \"BACKUP+\",\n      subtitle: \"Dauerhaft im Netz\",\n      price: \"2,99‚Ç¨/Monat\",\n      features: [\n        \"Alles von Free\",\n        \"200 GB Cloud-Backup\",\n        \"Schnellere Synchronisierung\",\n      ],\n      recommended: true,\n      description: \"Maximale Sicherheit\",\n    },\n  ];\n\n  return (\n    <div className=\"flex-1 flex flex-col\">\n      <div className=\"flex-1\">\n        <div className=\"flex flex-col items-center text-center mb-6\">\n          <div className=\"w-20 h-20 rounded-full bg-[#007AFF]/10 flex items-center justify-center mb-6\">\n            <Cloud className=\"w-10 h-10 text-[#007AFF]\" />\n          </div>\n          <h1 className=\"sf-pro-display text-[28px] leading-tight text-[#1D1D1F] mb-2\">\n            W√§hle Speicherplan\n          </h1>\n          <p className=\"text-[17px] leading-relaxed text-[#6E6E73] max-w-[300px]\">\n            Du kannst das sp√§ter jederzeit √§ndern\n          </p>\n        </div>\n\n        {/* Help Text */}\n        <div className=\"bg-[#F2F2F7] rounded-xl p-4 mb-4\">\n          <p className=\"text-[13px] text-[#6E6E73] text-center\">\n            üéØ <strong>Empfehlung:</strong> Starte mit FREE und upgrade sp√§ter,\n            wenn du mehr Speicher brauchst.\n          </p>\n        </div>\n\n        <div className=\"space-y-3\">\n          {plans.map((plan) => (\n            <button\n              key={plan.id}\n              onClick={() => setTempSelected(plan.id)}\n              className={`w-full p-4 rounded-xl bg-white text-left ios-tap-target relative transition-all ${\n                tempSelected === plan.id\n                  ? \"ring-2 ring-[#007AFF] shadow-lg\"\n                  : \"\"\n              }`}\n            >\n              {plan.recommended && (\n                <span className=\"absolute -top-2 left-4 px-2 py-0.5 bg-[#30D158] text-white text-[11px] font-semibold rounded-full\">\n                  EMPFOHLEN\n                </span>\n              )}\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <p className=\"text-[15px] font-bold text-[#007AFF] tracking-wide\">\n                    {plan.label}\n                  </p>\n                  <p className=\"text-[17px] font-semibold text-[#1D1D1F] mt-0.5\">\n                    {plan.subtitle}\n                  </p>\n                  <p className=\"text-[13px] text-[#8E8E93] mt-1\">\n                    {plan.description}\n                  </p>\n                  <ul className=\"mt-3 space-y-1.5\">\n                    {plan.features.map((feature) => (\n                      <li\n                        key={feature}\n                        className=\"text-[15px] text-[#6E6E73] flex items-center gap-2\"\n                      >\n                        <span className=\"text-[#30D158]\">‚úì</span> {feature}\n                      </li>\n                    ))}\n                  </ul>\n                  <p className=\"text-[17px] font-semibold text-[#1D1D1F] mt-4\">\n                    {plan.price}\n                  </p>\n                </div>\n                <div\n                  className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${\n                    tempSelected === plan.id\n                      ? \"border-[#007AFF] bg-[#007AFF]\"\n                      : \"border-[#C7C7CC]\"\n                  }`}\n                >\n                  {tempSelected === plan.id && (\n                    <div className=\"w-2.5 h-2.5 rounded-full bg-white\" />\n                  )}\n                </div>\n              </div>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      <button\n        onClick={() => onSelect(tempSelected)}\n        className=\"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target mt-4\"\n      >\n        PhotoVault starten\n      </button>\n    </div>\n  );\n}\n\nfunction ImportKeyDialog({ onClose }: { onClose: () => void }) {\n  const [importedPhrase, setImportedPhrase] = useState(\"\");\n\n  return (\n    <div className=\"fixed inset-0 bg-black/40 flex items-end justify-center z-50\">\n      <div className=\"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10\">\n        <h3 className=\"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2\">\n          Schl√ºssel importieren\n        </h3>\n        <p className=\"text-[15px] text-[#6E6E73] text-center mb-6\">\n          Gib deine 12-Wort Backup-Phrase ein\n        </p>\n        <textarea\n          value={importedPhrase}\n          onChange={(e) => setImportedPhrase(e.target.value)}\n          placeholder=\"beach ocean sunset cloud tree river...\"\n          className=\"w-full h-[100px] bg-[#F2F2F7] rounded-xl p-4 text-[15px] text-[#1D1D1F] resize-none mb-4\"\n        />\n        <div className=\"space-y-3\">\n          <button\n            onClick={() => {\n              console.log(\"TODO: Import key:\", importedPhrase);\n              onClose();\n            }}\n            className=\"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target\"\n          >\n            Importieren\n          </button>\n          <button\n            onClick={onClose}\n            className=\"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target\"\n          >\n            Abbrechen\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1289, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/lib/storage/local-db.ts"],"sourcesContent":["/**\n * Local Database - Dexie.js Wrapper f√ºr Photo Metadata\n * Speichert CIDs und Metadaten lokal (offline-first)\n */\n\nimport Dexie, { Table } from 'dexie';\n\nexport interface PhotoMetadata {\n    id?: number; // Auto-increment\n    cid: string; // IPFS Content ID\n    nonce: string; // Encryption Nonce (Base64)\n    fileName: string;\n    mimeType: string;\n    fileSize: number;\n    width?: number;\n    height?: number;\n    uploadedAt: Date;\n    encryptedBlob?: Blob; // Optional: Lokaler Cache\n}\n\nexport class PhotoVaultDB extends Dexie {\n    photos!: Table<PhotoMetadata, number>;\n\n    constructor() {\n        super('PhotoVaultDB');\n\n        this.version(1).stores({\n            photos: '++id, cid, uploadedAt',\n        });\n    }\n}\n\n// Singleton Instance\nexport const db = new PhotoVaultDB();\n\n/**\n * Speichert Photo Metadata\n */\nexport async function savePhoto(photo: Omit<PhotoMetadata, 'id'>): Promise<number> {\n    return await db.photos.add(photo);\n}\n\n/**\n * L√§dt alle Photos (sortiert nach Datum)\n */\nexport async function getAllPhotos(): Promise<PhotoMetadata[]> {\n    return await db.photos.orderBy('uploadedAt').reverse().toArray();\n}\n\n/**\n * L√§dt ein Photo by CID\n */\nexport async function getPhotoByCID(cid: string): Promise<PhotoMetadata | undefined> {\n    return await db.photos.where('cid').equals(cid).first();\n}\n\n/**\n * L√∂scht ein Photo\n */\nexport async function deletePhoto(id: number): Promise<void> {\n    await db.photos.delete(id);\n}\n\n/**\n * L√∂scht alle Photos (Reset)\n */\nexport async function clearAllPhotos(): Promise<void> {\n    await db.photos.clear();\n}\n\n/**\n * Z√§hlt Anzahl der Photos\n */\nexport async function getPhotoCount(): Promise<number> {\n    return await db.photos.count();\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;CAGC,GAED;;AAeO,MAAM,qBAAqB,sJAAK;IACnC,OAAsC;IAEtC,aAAc;QACV,KAAK,CAAC;QAEN,IAAI,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC;YACnB,QAAQ;QACZ;IACJ;AACJ;AAGO,MAAM,KAAK,IAAI;AAKf,eAAe,UAAU,KAAgC;IAC5D,OAAO,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC;AAC/B;AAKO,eAAe;IAClB,OAAO,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,cAAc,OAAO,GAAG,OAAO;AAClE;AAKO,eAAe,cAAc,GAAW;IAC3C,OAAO,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,OAAO,MAAM,CAAC,KAAK,KAAK;AACzD;AAKO,eAAe,YAAY,EAAU;IACxC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;AAC3B;AAKO,eAAe;IAClB,MAAM,GAAG,MAAM,CAAC,KAAK;AACzB;AAKO,eAAe;IAClB,OAAO,MAAM,GAAG,MAAM,CAAC,KAAK;AAChC"}},
    {"offset": {"line": 1344, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/hooks/use-gallery-data.ts"],"sourcesContent":["/**\n * useGalleryData Hook - Local Photo Gallery Management with Cloud Sync\n */\n\n'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport {\n    getAllPhotos,\n    savePhoto,\n    deletePhoto,\n    getPhotoCount,\n    type PhotoMetadata,\n} from '@/lib/storage/local-db';\nimport { encryptFile, decryptFile } from '@/lib/crypto';\nimport { uploadCIDMetadata, cidExistsInSupabase } from '@/lib/supabase';\nimport { getDeviceId } from '@/lib/deviceId';\n\nexport function useGalleryData(secretKey: Uint8Array | null) {\n    const queryClient = useQueryClient();\n\n    // Query: Load all photos\n    const {\n        data: photos = [],\n        isLoading,\n        error,\n    } = useQuery({\n        queryKey: ['photos'],\n        queryFn: getAllPhotos,\n        enabled: !!secretKey,\n    });\n\n    // Query: Photo count\n    const { data: photoCount = 0 } = useQuery({\n        queryKey: ['photoCount'],\n        queryFn: getPhotoCount,\n    });\n\n    // Mutation: Upload photo\n    const uploadMutation = useMutation({\n        mutationFn: async (file: File) => {\n            if (!secretKey) throw new Error('No encryption key');\n\n            // Encrypt file\n            const { encrypted, nonce } = await encryptFile(file, secretKey);\n\n            // Generate CID (simplified - in production use IPFS)\n            const cid = `cid_${Date.now()}_${Math.random().toString(36).slice(2)}`;\n\n            // Save metadata\n            const metadata: Omit<PhotoMetadata, 'id'> = {\n                cid,\n                nonce,\n                fileName: file.name,\n                mimeType: file.type,\n                fileSize: file.size,\n                uploadedAt: new Date(),\n                encryptedBlob: encrypted,\n            };\n\n            await savePhoto(metadata);\n            return metadata;\n        },\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['photos'] });\n            queryClient.invalidateQueries({ queryKey: ['photoCount'] });\n        },\n    });\n\n    // Mutation: Delete photo\n    const deleteMutation = useMutation({\n        mutationFn: async (id: number) => {\n            await deletePhoto(id);\n        },\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['photos'] });\n            queryClient.invalidateQueries({ queryKey: ['photoCount'] });\n        },\n    });\n\n    // Decrypt photo for display\n    const decryptPhoto = useCallback(\n        async (photo: PhotoMetadata): Promise<string | null> => {\n            if (!secretKey || !photo.encryptedBlob) return null;\n\n            const decrypted = await decryptFile(\n                photo.encryptedBlob,\n                photo.nonce,\n                secretKey,\n                photo.mimeType\n            );\n\n            if (!decrypted) return null;\n\n            return URL.createObjectURL(decrypted);\n        },\n        [secretKey]\n    );\n\n    return {\n        photos,\n        photoCount,\n        isLoading,\n        error,\n        uploadPhoto: uploadMutation.mutate,\n        deletePhoto: deleteMutation.mutate,\n        decryptPhoto,\n        isUploading: uploadMutation.isPending,\n    };\n}\n"],"names":[],"mappings":";;;;AAMA;AACA;AAAA;AAAA;AACA;AAOA;AAfA;;CAEC,GAED;;;;;AAeO,SAAS,eAAe,SAA4B;IACvD,MAAM,cAAc,IAAA,wMAAc;IAElC,yBAAyB;IACzB,MAAM,EACF,MAAM,SAAS,EAAE,EACjB,SAAS,EACT,KAAK,EACR,GAAG,IAAA,uLAAQ,EAAC;QACT,UAAU;YAAC;SAAS;QACpB,SAAS,oJAAY;QACrB,SAAS,CAAC,CAAC;IACf;IAEA,qBAAqB;IACrB,MAAM,EAAE,MAAM,aAAa,CAAC,EAAE,GAAG,IAAA,uLAAQ,EAAC;QACtC,UAAU;YAAC;SAAa;QACxB,SAAS,qJAAa;IAC1B;IAEA,yBAAyB;IACzB,MAAM,iBAAiB,IAAA,6LAAW,EAAC;QAC/B,YAAY,OAAO;YACf,IAAI,CAAC,WAAW,MAAM,IAAI,MAAM;YAEhC,eAAe;YACf,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,mIAAW,EAAC,MAAM;YAErD,qDAAqD;YACrD,MAAM,MAAM,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,IAAI;YAEtE,gBAAgB;YAChB,MAAM,WAAsC;gBACxC;gBACA;gBACA,UAAU,KAAK,IAAI;gBACnB,UAAU,KAAK,IAAI;gBACnB,UAAU,KAAK,IAAI;gBACnB,YAAY,IAAI;gBAChB,eAAe;YACnB;YAEA,MAAM,IAAA,iJAAS,EAAC;YAChB,OAAO;QACX;QACA,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAS;YAAC;YACrD,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAa;YAAC;QAC7D;IACJ;IAEA,yBAAyB;IACzB,MAAM,iBAAiB,IAAA,6LAAW,EAAC;QAC/B,YAAY,OAAO;YACf,MAAM,IAAA,mJAAW,EAAC;QACtB;QACA,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAS;YAAC;YACrD,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAa;YAAC;QAC7D;IACJ;IAEA,4BAA4B;IAC5B,MAAM,eAAe,IAAA,oNAAW,EAC5B,OAAO;QACH,IAAI,CAAC,aAAa,CAAC,MAAM,aAAa,EAAE,OAAO;QAE/C,MAAM,YAAY,MAAM,IAAA,mIAAW,EAC/B,MAAM,aAAa,EACnB,MAAM,KAAK,EACX,WACA,MAAM,QAAQ;QAGlB,IAAI,CAAC,WAAW,OAAO;QAEvB,OAAO,IAAI,eAAe,CAAC;IAC/B,GACA;QAAC;KAAU;IAGf,OAAO;QACH;QACA;QACA;QACA;QACA,aAAa,eAAe,MAAM;QAClC,aAAa,eAAe,MAAM;QAClC;QACA,aAAa,eAAe,SAAS;IACzC;AACJ"}},
    {"offset": {"line": 1454, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/components/photovault/Dashboard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Image, Clock, HelpCircle, X, Shield } from \"lucide-react\";\nimport type { AppState } from \"./PhotoVaultApp\";\nimport { useEncryption } from \"@/hooks/use-encryption\";\nimport { useGalleryData } from \"@/hooks/use-gallery-data\";\n\ninterface DashboardProps {\n  state: AppState;\n  setState: React.Dispatch<React.SetStateAction<AppState>>;\n}\n\nexport function Dashboard({ state, setState }: DashboardProps) {\n  const [showTooltip, setShowTooltip] = useState<string | null>(null);\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n\n  // Get real photo count from encryption layer\n  const { secretKey } = useEncryption();\n  const { photoCount } = useGalleryData(secretKey);\n\n  // Use real photo count if available\n  const displayPhotoCount = photoCount > 0 ? photoCount : state.photosCount;\n\n  const toggleBackup = () => {\n    console.log(\"TODO: Toggle backup with confirmation dialog\");\n    setShowConfirmDialog(true);\n  };\n\n  const confirmToggle = () => {\n    const newState = !state.backupActive;\n    console.log(newState ? \"Activate Backup\" : \"Deactivate Backup\");\n    setState((prev) => ({ ...prev, backupActive: newState }));\n    setShowConfirmDialog(false);\n  };\n\n  const triggerManualBackup = () => {\n    console.log(\"TODO: Start backup with progress bar\");\n    console.log(\"Trigger Backup Process\");\n    console.log(\"Update Backup Metadata\");\n    setState((prev) => ({\n      ...prev,\n      lastBackup: \"Gerade eben\",\n      photosCount: prev.photosCount + Math.floor(Math.random() * 10),\n    }));\n  };\n\n  const tooltips = {\n    photos: \"Lokal auf deinen Ger√§ten gespeichert\",\n    lastBackup: \"Automatisches Backup alle 6 Stunden\",\n    permanence: \"Fotos sind auf mehreren Ger√§ten gesichert\",\n  };\n\n  return (\n    <div className=\"h-full flex flex-col px-5 pt-6 pb-4 overflow-y-auto\">\n      {/* Header */}\n      <header className=\"mb-6\">\n        <h1 className=\"sf-pro-display text-[28px] text-[#1D1D1F]\">Backup</h1>\n        <p className=\"text-[15px] text-[#6E6E73] mt-1\">\n          Verschl√ºsseltes Photo-Backup\n        </p>\n      </header>\n\n      {/* Status Toggle */}\n      <button\n        onClick={toggleBackup}\n        className=\"w-full bg-white rounded-xl p-5 mb-3 ios-tap-target\"\n      >\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div\n              className={`w-14 h-14 rounded-full flex items-center justify-center ${\n                state.backupActive ? \"bg-[#30D158]/10\" : \"bg-[#E5E5EA]\"\n              }`}\n            >\n              <Shield\n                className={`w-7 h-7 ${\n                  state.backupActive ? \"text-[#30D158]\" : \"text-[#8E8E93]\"\n                }`}\n              />\n            </div>\n            <div className=\"text-left\">\n              <p className=\"text-[17px] font-semibold text-[#1D1D1F]\">\n                Backup {state.backupActive ? \"Aktiv\" : \"Aus\"}\n              </p>\n              <p className=\"text-[15px] text-[#6E6E73]\">\n                {state.backupActive\n                  ? \"Deine Fotos werden gesch√ºtzt\"\n                  : \"Tippe zum Aktivieren\"}\n              </p>\n            </div>\n          </div>\n          <div\n            className={`w-[51px] h-[31px] rounded-full p-[2px] ${\n              state.backupActive ? \"bg-[#30D158]\" : \"bg-[#E5E5EA]\"\n            }`}\n          >\n            <div\n              className={`w-[27px] h-[27px] rounded-full bg-white shadow-sm ${\n                state.backupActive ? \"ml-auto\" : \"\"\n              }`}\n            />\n          </div>\n        </div>\n      </button>\n\n      {/* Help text below toggle */}\n      <p className=\"text-[13px] text-[#6E6E73] px-2 mb-6\">\n        Automatisch neue Fotos sichern\n      </p>\n\n      {/* Metrics Grid */}\n      <div className=\"grid grid-cols-3 gap-3 mb-6\">\n        <MetricCard\n          icon={<Image className=\"w-5 h-5 text-[#007AFF]\" />}\n          value={displayPhotoCount.toLocaleString()}\n          label=\"Fotos gesichert\"\n          tooltip={tooltips.photos}\n          showTooltip={showTooltip === \"photos\"}\n          onTap={() =>\n            setShowTooltip(showTooltip === \"photos\" ? null : \"photos\")\n          }\n        />\n        <MetricCard\n          icon={<Clock className=\"w-5 h-5 text-[#007AFF]\" />}\n          value={state.lastBackup}\n          label=\"Letztes Backup\"\n          tooltip={tooltips.lastBackup}\n          showTooltip={showTooltip === \"lastBackup\"}\n          onTap={() =>\n            setShowTooltip(showTooltip === \"lastBackup\" ? null : \"lastBackup\")\n          }\n        />\n        <MetricCard\n          icon={<Shield className=\"w-5 h-5 text-[#007AFF]\" />}\n          value={`${state.permanence}%`}\n          label=\"Dauerhaft\"\n          tooltip={tooltips.permanence}\n          showTooltip={showTooltip === \"permanence\"}\n          onTap={() =>\n            setShowTooltip(showTooltip === \"permanence\" ? null : \"permanence\")\n          }\n        />\n      </div>\n\n      {/* Primary Action Button */}\n      <button\n        onClick={triggerManualBackup}\n        className={`w-full h-[50px] text-[17px] font-semibold rounded-xl mb-4 ios-tap-target ${\n          state.backupActive\n            ? \"bg-[#007AFF] text-white\"\n            : \"bg-[#30D158] text-white\"\n        }`}\n      >\n        {state.backupActive ? \"Jetzt sichern\" : \"Backup aktivieren\"}\n      </button>\n\n      {/* Trust Footer */}\n      <div className=\"mt-auto pt-4\">\n        <p className=\"text-[15px] text-[#8E8E93] text-center leading-relaxed\">\n          Deine Fotos sind verschl√ºsselt.\n          <br />\n          Niemand kann sie sehen.\n        </p>\n      </div>\n\n      {/* Confirmation Dialog */}\n      {showConfirmDialog && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-8\">\n          <div className=\"bg-white w-full max-w-[270px] rounded-2xl overflow-hidden\">\n            <div className=\"p-4 text-center\">\n              <h3 className=\"sf-pro-display text-[17px] text-[#1D1D1F] mb-1\">\n                {state.backupActive\n                  ? \"Backup deaktivieren?\"\n                  : \"Backup aktivieren?\"}\n              </h3>\n              <p className=\"text-[13px] text-[#6E6E73] leading-relaxed\">\n                {state.backupActive\n                  ? \"Neue Fotos werden nicht mehr automatisch gesichert.\"\n                  : \"Neue Fotos werden automatisch verschl√ºsselt und gesichert.\"}\n              </p>\n            </div>\n            <div className=\"border-t border-[#E5E5EA]\">\n              <button\n                onClick={() => setShowConfirmDialog(false)}\n                className=\"w-full py-3 text-[17px] text-[#007AFF] border-b border-[#E5E5EA] ios-tap-target\"\n              >\n                Abbrechen\n              </button>\n              <button\n                onClick={confirmToggle}\n                className={`w-full py-3 text-[17px] font-semibold ios-tap-target ${\n                  state.backupActive ? \"text-[#FF3B30]\" : \"text-[#30D158]\"\n                }`}\n              >\n                {state.backupActive ? \"Deaktivieren\" : \"Aktivieren\"}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction MetricCard({\n  icon,\n  value,\n  label,\n  tooltip,\n  showTooltip,\n  onTap,\n}: {\n  icon: React.ReactNode;\n  value: string;\n  label: string;\n  tooltip: string;\n  showTooltip: boolean;\n  onTap: () => void;\n}) {\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={onTap}\n        className=\"w-full bg-white rounded-xl p-4 text-center ios-tap-target\"\n      >\n        <div className=\"flex justify-center mb-2 relative\">\n          {icon}\n          <HelpCircle className=\"w-3 h-3 text-[#C7C7CC] absolute -right-1 -top-1\" />\n        </div>\n        <p className=\"text-[17px] font-semibold text-[#1D1D1F] truncate\">\n          {value}\n        </p>\n        <p className=\"text-[11px] text-[#6E6E73]\">{label}</p>\n      </button>\n\n      {/* Tooltip */}\n      {showTooltip && (\n        <div className=\"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-[180px] bg-[#1D1D1F] text-white text-[13px] p-3 rounded-lg z-10 text-center\">\n          {tooltip}\n          <div className=\"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-[#1D1D1F]\" />\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1871, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/components/photovault/SettingsPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { ChevronRight, Plus, Loader2, Check, Smartphone, RefreshCw, FolderOpen, Cloud } from \"lucide-react\";\nimport type { AppState } from \"./PhotoVaultApp\";\nimport { dummyBackupPhrase } from \"./PhotoVaultApp\";\n\ninterface SettingsPanelProps {\n  state: AppState;\n  setState: React.Dispatch<React.SetStateAction<AppState>>;\n  onRestartOnboarding: () => void;\n}\n\nexport function SettingsPanel({\n  state,\n  setState,\n  onRestartOnboarding,\n}: SettingsPanelProps) {\n  const [showDevices, setShowDevices] = useState(false);\n  const [showPhraseWarning, setShowPhraseWarning] = useState(false);\n  const [showNewKeyWarning, setShowNewKeyWarning] = useState(false);\n  const [showBackupPhrase, setShowBackupPhrase] = useState(false);\n  const [showSourceSelector, setShowSourceSelector] = useState(false);\n  const [showPlanSelector, setShowPlanSelector] = useState(false);\n\n  const toggleAutoBackup = () => {\n    const newValue = !state.autoBackupEnabled;\n    console.log(\"Update Auto-Backup Preference:\", newValue);\n    setState((prev) => ({ ...prev, autoBackupEnabled: newValue }));\n  };\n\n  const toggleBackgroundBackup = () => {\n    const newValue = !state.backgroundBackupEnabled;\n    console.log(\"Update Background Preference:\", newValue);\n    setState((prev) => ({ ...prev, backgroundBackupEnabled: newValue }));\n  };\n\n  const viewBackupPhrase = () => {\n    console.log(\"Display Backup Phrase\");\n    setShowPhraseWarning(false);\n    setShowBackupPhrase(true);\n  };\n\n  const generateNewKey = () => {\n    console.log(\"Generate New Encryption Key\");\n    console.log(\"Clear Existing Backup Data\");\n    const words = [\n      \"mango\",\n      \"noble\",\n      \"ocean\",\n      \"prime\",\n      \"quest\",\n      \"royal\",\n      \"solar\",\n      \"titan\",\n      \"ultra\",\n      \"vivid\",\n      \"world\",\n      \"xenon\",\n    ];\n    const key = words.join(\" \");\n    setState((prev) => ({\n      ...prev,\n      encryptionKey: key,\n      backupPhrase: words,\n      photosCount: 0,\n    }));\n    setShowNewKeyWarning(false);\n  };\n\n  const addDevice = () => {\n    console.log(\"Show QR code or key import\");\n  };\n\n  const changeSource = (source: \"photos-app\" | \"files-app\") => {\n    console.log(\"TODO: Update backup source preference:\", source);\n    setState((prev) => ({ ...prev, photoSource: source }));\n    setShowSourceSelector(false);\n  };\n\n  const changePlan = (plan: \"free\" | \"backup-plus\") => {\n    console.log(\"TODO: Show plan selection modal\", plan);\n    setState((prev) => ({ ...prev, selectedPlan: plan }));\n    setShowPlanSelector(false);\n  };\n\n  if (showDevices) {\n    return (\n      <DevicesView\n        devices={state.devices}\n        onBack={() => setShowDevices(false)}\n        onAddDevice={addDevice}\n      />\n    );\n  }\n\n  return (\n    <div className=\"h-full flex flex-col pb-4 overflow-y-auto\">\n      {/* Header */}\n      <header className=\"px-5 pt-6 pb-4 bg-[#F2F2F7]\">\n        <h1 className=\"sf-pro-display text-[28px] text-[#1D1D1F]\">\n          Einstellungen\n        </h1>\n      </header>\n\n      <div className=\"flex-1 px-5\">\n        {/* Backup Settings Section */}\n        <div className=\"mb-6\">\n          <h2 className=\"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2\">\n            Backup\n          </h2>\n          <div className=\"bg-white rounded-xl overflow-hidden\">\n            <SettingsToggleRow\n              label=\"Automatisches Backup\"\n              description=\"Neue Fotos automatisch sichern\"\n              enabled={state.autoBackupEnabled}\n              onToggle={toggleAutoBackup}\n            />\n            <div className=\"h-[0.5px] bg-[#E5E5EA] ml-4\" />\n            <SettingsToggleRow\n              label=\"Hintergrund-Backup\"\n              description=\"Weiter sichern wenn App geschlossen\"\n              enabled={state.backgroundBackupEnabled}\n              onToggle={toggleBackgroundBackup}\n            />\n            <div className=\"h-[0.5px] bg-[#E5E5EA] ml-4\" />\n            <button\n              onClick={() => setShowSourceSelector(true)}\n              className=\"w-full flex items-center justify-between p-4 ios-tap-target\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <FolderOpen className=\"w-5 h-5 text-[#007AFF]\" />\n                <div className=\"text-left\">\n                  <span className=\"text-[17px] text-[#1D1D1F] block\">\n                    Backup-Quelle\n                  </span>\n                  <span className=\"text-[13px] text-[#6E6E73]\">\n                    {state.photoSource === \"photos-app\"\n                      ? \"Fotos-App\"\n                      : \"Dateien-App\"}\n                  </span>\n                </div>\n              </div>\n              <ChevronRight className=\"w-5 h-5 text-[#C7C7CC]\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Storage Section */}\n        <div className=\"mb-6\">\n          <h2 className=\"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2\">\n            Speicher\n          </h2>\n          <div className=\"bg-white rounded-xl overflow-hidden\">\n            <div className=\"p-4\">\n              <div className=\"flex items-center justify-between mb-1\">\n                <span className=\"text-[17px] text-[#1D1D1F]\">\n                  Aktueller Plan\n                </span>\n                <span className=\"text-[15px] font-semibold text-[#007AFF]\">\n                  {state.selectedPlan === \"free\" ? \"Free\" : \"Backup+\"}\n                </span>\n              </div>\n              <p className=\"text-[13px] text-[#6E6E73]\">\n                {state.selectedPlan === \"free\"\n                  ? \"Fotos auf deinen Ger√§ten\"\n                  : \"200 GB Cloud-Backup\"}\n              </p>\n            </div>\n            <div className=\"h-[0.5px] bg-[#E5E5EA] ml-4\" />\n            <div className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-[15px] text-[#6E6E73]\">Verwendet</span>\n                <span className=\"text-[15px] text-[#1D1D1F]\">\n                  {state.photosCount.toLocaleString()} Fotos (nur lokal)\n                </span>\n              </div>\n            </div>\n            <div className=\"h-[0.5px] bg-[#E5E5EA] ml-4\" />\n            <button\n              onClick={() => setShowPlanSelector(true)}\n              className=\"w-full flex items-center justify-between p-4 ios-tap-target\"\n            >\n              <span className=\"text-[17px] text-[#007AFF]\">\n                {state.selectedPlan === \"free\"\n                  ? \"Upgrade zu Backup+\"\n                  : \"Plan verwalten\"}\n              </span>\n              <ChevronRight className=\"w-5 h-5 text-[#C7C7CC]\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Devices Section */}\n        <div className=\"mb-6\">\n          <h2 className=\"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2\">\n            Ger√§te\n          </h2>\n          <div className=\"bg-white rounded-xl overflow-hidden\">\n            <button\n              onClick={() => {\n                console.log(\"Fetch Device List\");\n                setShowDevices(true);\n              }}\n              className=\"w-full flex items-center justify-between p-4 ios-tap-target\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <Smartphone className=\"w-5 h-5 text-[#007AFF]\" />\n                <span className=\"text-[17px] text-[#1D1D1F]\">\n                  Verbundene Ger√§te\n                </span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-[15px] text-[#6E6E73]\">\n                  {state.devices.length}\n                </span>\n                <ChevronRight className=\"w-5 h-5 text-[#C7C7CC]\" />\n              </div>\n            </button>\n          </div>\n        </div>\n\n        {/* Security Section */}\n        <div className=\"mb-6\">\n          <h2 className=\"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2\">\n            Sicherheit\n          </h2>\n          <div className=\"bg-white rounded-xl overflow-hidden\">\n            <button\n              onClick={() => setShowPhraseWarning(true)}\n              className=\"w-full flex items-center justify-between p-4 ios-tap-target\"\n            >\n              <span className=\"text-[17px] text-[#1D1D1F]\">\n                Backup-Phrase anzeigen\n              </span>\n              <ChevronRight className=\"w-5 h-5 text-[#C7C7CC]\" />\n            </button>\n            <div className=\"h-[0.5px] bg-[#E5E5EA] ml-4\" />\n            <button\n              onClick={() => setShowNewKeyWarning(true)}\n              className=\"w-full flex items-center justify-between p-4 ios-tap-target\"\n            >\n              <span className=\"text-[17px] text-[#FF3B30]\">\n                Neuen Schl√ºssel erstellen\n              </span>\n              <ChevronRight className=\"w-5 h-5 text-[#C7C7CC]\" />\n            </button>\n          </div>\n          <p className=\"text-[13px] text-[#6E6E73] px-4 mt-2\">\n            Teile diese W√∂rter niemals mit anderen.\n          </p>\n        </div>\n\n        {/* Onboarding Section */}\n        <div className=\"mb-6\">\n          <h2 className=\"text-[13px] font-semibold text-[#6E6E73] uppercase tracking-wide px-4 mb-2\">\n            Setup\n          </h2>\n          <div className=\"bg-white rounded-xl overflow-hidden\">\n            <button\n              onClick={() => {\n                console.log(\"TODO: Navigate to onboarding screen 1\");\n                onRestartOnboarding();\n              }}\n              className=\"w-full flex items-center justify-between p-4 ios-tap-target\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <RefreshCw className=\"w-5 h-5 text-[#007AFF]\" />\n                <span className=\"text-[17px] text-[#1D1D1F]\">\n                  Onboarding wiederholen\n                </span>\n              </div>\n              <ChevronRight className=\"w-5 h-5 text-[#C7C7CC]\" />\n            </button>\n          </div>\n          <p className=\"text-[13px] text-[#6E6E73] px-4 mt-2\">\n            Schl√ºssel, Quelle und Plan neu einrichten\n          </p>\n        </div>\n      </div>\n\n      {/* View Backup Phrase Warning Modal */}\n      {showPhraseWarning && (\n        <Modal\n          title=\"Sicherheitshinweis\"\n          message=\"Deine Backup-Phrase gibt vollen Zugriff auf deine verschl√ºsselten Fotos. Nur an einem privaten Ort anzeigen.\"\n          confirmLabel=\"Phrase anzeigen\"\n          confirmDestructive={false}\n          onConfirm={viewBackupPhrase}\n          onCancel={() => setShowPhraseWarning(false)}\n        />\n      )}\n\n      {/* Show Backup Phrase Modal */}\n      {showBackupPhrase && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-end justify-center z-50\">\n          <div className=\"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10\">\n            <h3 className=\"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2\">\n              Deine Backup-Phrase\n            </h3>\n            <p className=\"text-[15px] text-[#6E6E73] text-center mb-4\">\n              Notiere diese W√∂rter und bewahre sie sicher auf.\n            </p>\n\n            {/* 12 words in grid */}\n            <div className=\"grid grid-cols-3 gap-2 mb-4\">\n              {(state.backupPhrase.length > 0\n                ? state.backupPhrase\n                : dummyBackupPhrase\n              ).map((word, index) => (\n                <div\n                  key={index}\n                  className=\"bg-[#F2F2F7] rounded-lg p-2 text-center\"\n                >\n                  <span className=\"text-[11px] text-[#8E8E93] block\">\n                    {index + 1}\n                  </span>\n                  <span className=\"text-[14px] text-[#1D1D1F] font-mono\">\n                    {word}\n                  </span>\n                </div>\n              ))}\n            </div>\n\n            {/* Warning */}\n            <div className=\"bg-[#FF3B30]/10 rounded-xl p-3 mb-4\">\n              <p className=\"text-[13px] text-[#FF3B30] text-center\">\n                ‚ö†Ô∏è Teile diese W√∂rter niemals mit anderen\n              </p>\n            </div>\n\n            <button\n              onClick={() => setShowBackupPhrase(false)}\n              className=\"w-full h-[50px] bg-[#007AFF] text-white text-[17px] font-semibold rounded-xl ios-tap-target\"\n            >\n              Fertig\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Generate New Key Warning Modal */}\n      {showNewKeyWarning && (\n        <Modal\n          title=\"Datenverlust-Warnung\"\n          message=\"Das Erstellen eines neuen Schl√ºssels l√∂scht alle vorhandenen Backup-Daten permanent. Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.\"\n          confirmLabel=\"Neuen Schl√ºssel erstellen\"\n          confirmDestructive={true}\n          onConfirm={generateNewKey}\n          onCancel={() => setShowNewKeyWarning(false)}\n        />\n      )}\n\n      {/* Source Selector Modal */}\n      {showSourceSelector && (\n        <SourceSelectorModal\n          currentSource={state.photoSource}\n          onSelect={changeSource}\n          onClose={() => setShowSourceSelector(false)}\n        />\n      )}\n\n      {/* Plan Selector Modal */}\n      {showPlanSelector && (\n        <PlanSelectorModal\n          currentPlan={state.selectedPlan}\n          onSelect={changePlan}\n          onClose={() => setShowPlanSelector(false)}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction SettingsToggleRow({\n  label,\n  description,\n  enabled,\n  onToggle,\n}: {\n  label: string;\n  description: string;\n  enabled: boolean;\n  onToggle: () => void;\n}) {\n  return (\n    <button\n      onClick={onToggle}\n      className=\"w-full flex items-center justify-between p-4 ios-tap-target\"\n    >\n      <div className=\"text-left\">\n        <p className=\"text-[17px] text-[#1D1D1F]\">{label}</p>\n        <p className=\"text-[13px] text-[#6E6E73] mt-0.5\">{description}</p>\n      </div>\n      <div\n        className={`w-[51px] h-[31px] rounded-full p-[2px] shrink-0 ${\n          enabled ? \"bg-[#30D158]\" : \"bg-[#E5E5EA]\"\n        }`}\n      >\n        <div\n          className={`w-[27px] h-[27px] rounded-full bg-white shadow-sm ${\n            enabled ? \"ml-auto\" : \"\"\n          }`}\n        />\n      </div>\n    </button>\n  );\n}\n\nfunction DevicesView({\n  devices,\n  onBack,\n  onAddDevice,\n}: {\n  devices: {\n    id: string;\n    name: string;\n    lastActive: string;\n    syncing?: boolean;\n  }[];\n  onBack: () => void;\n  onAddDevice: () => void;\n}) {\n  return (\n    <div className=\"h-full flex flex-col pb-4 overflow-y-auto\">\n      {/* Header */}\n      <header className=\"px-5 pt-6 pb-4 bg-[#F2F2F7]\">\n        <button\n          onClick={onBack}\n          className=\"text-[#007AFF] text-[17px] ios-tap-target mb-2\"\n        >\n          ‚Üê Zur√ºck\n        </button>\n        <h1 className=\"sf-pro-display text-[28px] text-[#1D1D1F]\">Ger√§te</h1>\n      </header>\n\n      <div className=\"flex-1 px-5\">\n        <div className=\"bg-white rounded-xl overflow-hidden\">\n          {devices.map((device, index) => (\n            <div key={device.id}>\n              {index > 0 && <div className=\"h-[0.5px] bg-[#E5E5EA] ml-4\" />}\n              <div className=\"flex items-center gap-3 p-4\">\n                <Smartphone className=\"w-8 h-8 text-[#007AFF]\" />\n                <div className=\"flex-1\">\n                  <p className=\"text-[17px] text-[#1D1D1F]\">{device.name}</p>\n                  <p className=\"text-[13px] text-[#6E6E73]\">\n                    {device.lastActive}\n                  </p>\n                </div>\n                {device.syncing ? (\n                  <Loader2 className=\"w-5 h-5 text-[#007AFF] animate-spin\" />\n                ) : device.lastActive === \"Aktiv\" ? (\n                  <div className=\"flex items-center gap-1\">\n                    <Check className=\"w-4 h-4 text-[#30D158]\" />\n                    <span className=\"text-[13px] text-[#30D158] font-medium\">\n                      Dieses Ger√§t\n                    </span>\n                  </div>\n                ) : null}\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <button\n          onClick={onAddDevice}\n          className=\"w-full flex items-center justify-center gap-2 mt-6 p-4 bg-white rounded-xl ios-tap-target\"\n        >\n          <Plus className=\"w-5 h-5 text-[#007AFF]\" />\n          <span className=\"text-[17px] text-[#007AFF]\">\n            Neues Ger√§t verbinden\n          </span>\n        </button>\n\n        <p className=\"text-[13px] text-[#6E6E73] text-center mt-3\">\n          Scanne den QR-Code oder gib deine Backup-Phrase ein\n        </p>\n      </div>\n    </div>\n  );\n}\n\nfunction SourceSelectorModal({\n  currentSource,\n  onSelect,\n  onClose,\n}: {\n  currentSource: \"photos-app\" | \"files-app\";\n  onSelect: (source: \"photos-app\" | \"files-app\") => void;\n  onClose: () => void;\n}) {\n  const sources = [\n    {\n      id: \"photos-app\" as const,\n      label: \"Fotos-App\",\n      description: \"Alle Fotos aus der iOS Foto-Bibliothek\",\n    },\n    {\n      id: \"files-app\" as const,\n      label: \"Dateien-App\",\n      description: \"Fotos aus einem bestimmten Ordner\",\n    },\n  ];\n\n  return (\n    <div className=\"fixed inset-0 bg-black/40 flex items-end justify-center z-50\">\n      <div className=\"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10\">\n        <h3 className=\"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2\">\n          Backup-Quelle\n        </h3>\n        <p className=\"text-[15px] text-[#6E6E73] text-center mb-6\">\n          Wo sind deine Fotos gespeichert?\n        </p>\n\n        <div className=\"space-y-3 mb-6\">\n          {sources.map((source) => (\n            <button\n              key={source.id}\n              onClick={() => onSelect(source.id)}\n              className={`w-full p-4 rounded-xl bg-[#F2F2F7] text-left ios-tap-target ${\n                currentSource === source.id ? \"ring-2 ring-[#007AFF]\" : \"\"\n              }`}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-[17px] font-medium text-[#1D1D1F]\">\n                    {source.label}\n                  </p>\n                  <p className=\"text-[13px] text-[#6E6E73] mt-0.5\">\n                    {source.description}\n                  </p>\n                </div>\n                <div\n                  className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${\n                    currentSource === source.id\n                      ? \"border-[#007AFF] bg-[#007AFF]\"\n                      : \"border-[#C7C7CC]\"\n                  }`}\n                >\n                  {currentSource === source.id && (\n                    <div className=\"w-2.5 h-2.5 rounded-full bg-white\" />\n                  )}\n                </div>\n              </div>\n            </button>\n          ))}\n        </div>\n\n        <button\n          onClick={onClose}\n          className=\"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target\"\n        >\n          Abbrechen\n        </button>\n      </div>\n    </div>\n  );\n}\n\nfunction PlanSelectorModal({\n  currentPlan,\n  onSelect,\n  onClose,\n}: {\n  currentPlan: \"free\" | \"backup-plus\";\n  onSelect: (plan: \"free\" | \"backup-plus\") => void;\n  onClose: () => void;\n}) {\n  const plans = [\n    {\n      id: \"free\" as const,\n      label: \"FREE\",\n      subtitle: \"Auf deinen Ger√§ten\",\n      price: \"0‚Ç¨/Monat\",\n      features: [\n        \"Unbegrenzte Fotos\",\n        \"Zero-Knowledge Verschl√ºsselung\",\n        \"Multi-Device Sync\",\n      ],\n    },\n    {\n      id: \"backup-plus\" as const,\n      label: \"BACKUP+\",\n      subtitle: \"Dauerhaft im Netz\",\n      price: \"2,99‚Ç¨/Monat\",\n      features: [\n        \"Alles von Free\",\n        \"200 GB Cloud-Backup\",\n        \"Schnellere Synchronisierung\",\n      ],\n    },\n  ];\n\n  return (\n    <div className=\"fixed inset-0 bg-black/40 flex items-end justify-center z-50\">\n      <div className=\"bg-white w-full max-w-[428px] rounded-t-2xl p-6 pb-10 max-h-[80vh] overflow-y-auto\">\n        <h3 className=\"sf-pro-display text-[20px] text-[#1D1D1F] text-center mb-2\">\n          Speicherplan\n        </h3>\n        <p className=\"text-[15px] text-[#6E6E73] text-center mb-6\">\n          Du kannst jederzeit wechseln\n        </p>\n\n        <div className=\"space-y-3 mb-6\">\n          {plans.map((plan) => (\n            <button\n              key={plan.id}\n              onClick={() => onSelect(plan.id)}\n              className={`w-full p-4 rounded-xl bg-[#F2F2F7] text-left ios-tap-target ${\n                currentPlan === plan.id ? \"ring-2 ring-[#007AFF]\" : \"\"\n              }`}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <p className=\"text-[13px] font-bold text-[#007AFF] tracking-wide\">\n                    {plan.label}\n                  </p>\n                  <p className=\"text-[17px] font-semibold text-[#1D1D1F] mt-0.5\">\n                    {plan.subtitle}\n                  </p>\n                  <ul className=\"mt-2 space-y-1\">\n                    {plan.features.map((feature) => (\n                      <li\n                        key={feature}\n                        className=\"text-[13px] text-[#6E6E73] flex items-center gap-2\"\n                      >\n                        <span className=\"text-[#30D158]\">‚úì</span> {feature}\n                      </li>\n                    ))}\n                  </ul>\n                  <p className=\"text-[15px] font-semibold text-[#1D1D1F] mt-3\">\n                    {plan.price}\n                  </p>\n                </div>\n                <div\n                  className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${\n                    currentPlan === plan.id\n                      ? \"border-[#007AFF] bg-[#007AFF]\"\n                      : \"border-[#C7C7CC]\"\n                  }`}\n                >\n                  {currentPlan === plan.id && (\n                    <div className=\"w-2.5 h-2.5 rounded-full bg-white\" />\n                  )}\n                </div>\n              </div>\n            </button>\n          ))}\n        </div>\n\n        <button\n          onClick={onClose}\n          className=\"w-full h-[44px] text-[#007AFF] text-[17px] ios-tap-target\"\n        >\n          Abbrechen\n        </button>\n      </div>\n    </div>\n  );\n}\n\nfunction Modal({\n  title,\n  message,\n  confirmLabel,\n  confirmDestructive,\n  onConfirm,\n  onCancel,\n}: {\n  title: string;\n  message: string;\n  confirmLabel: string;\n  confirmDestructive: boolean;\n  onConfirm: () => void;\n  onCancel: () => void;\n}) {\n  return (\n    <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-8\">\n      <div className=\"bg-white w-full max-w-[270px] rounded-2xl overflow-hidden\">\n        <div className=\"p-4 text-center\">\n          <h3 className=\"sf-pro-display text-[17px] text-[#1D1D1F] mb-1\">\n            {title}\n          </h3>\n          <p className=\"text-[13px] text-[#6E6E73] leading-relaxed\">\n            {message}\n          </p>\n        </div>\n        <div className=\"border-t border-[#E5E5EA]\">\n          <button\n            onClick={onCancel}\n            className=\"w-full py-3 text-[17px] text-[#007AFF] border-b border-[#E5E5EA] ios-tap-target\"\n          >\n            Abbrechen\n          </button>\n          <button\n            onClick={onConfirm}\n            className={`w-full py-3 text-[17px] font-semibold ios-tap-target ${\n              confirmDestructive ? \"text-[#FF3B30]\" : \"text-[#007AFF]\"\n            }`}\n          >\n            {confirmLabel}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3228, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/components/photovault/PhotoGallery.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef } from \"react\";\nimport { Search, SlidersHorizontal, X, Check, Upload, Lock } from \"lucide-react\";\nimport { useEncryption } from \"@/hooks/use-encryption\";\nimport { useGalleryData } from \"@/hooks/use-gallery-data\";\n\ninterface PhotoGalleryProps {\n  photosCount: number;\n}\n\n// Generate placeholder photo URLs with dates\nconst generatePhotos = (count: number) => {\n  const categories = [\n    \"nature\",\n    \"architecture\",\n    \"travel\",\n    \"food\",\n    \"animals\",\n    \"city\",\n    \"landscape\",\n    \"portrait\",\n    \"ocean\",\n    \"forest\",\n  ];\n\n  // Create photos with dates going backwards from today\n  const today = new Date();\n  return Array.from({ length: count }, (_, i) => {\n    const date = new Date(today);\n    date.setDate(date.getDate() - Math.floor(i / 3)); // 3 photos per day\n\n    return {\n      id: `photo-${i}`,\n      cid: `Qm${Math.random().toString(36).substring(2, 15)}${Math.random().toString(36).substring(2, 15)}`,\n      placeholderUrl: `https://picsum.photos/seed/${i + 100}/400/400`,\n      category: categories[i % categories.length],\n      date: date.toISOString().split(\"T\")[0],\n      metadata: undefined as any, // Placeholder photos don't have metadata\n    };\n  });\n};\n\n// Group photos by date\nconst groupPhotosByDate = (photos: ReturnType<typeof generatePhotos>) => {\n  const groups: { [key: string]: typeof photos } = {};\n  photos.forEach((photo) => {\n    if (!groups[photo.date]) {\n      groups[photo.date] = [];\n    }\n    groups[photo.date].push(photo);\n  });\n  return Object.entries(groups).map(([date, photos]) => ({\n    date,\n    photos,\n    label: formatDateLabel(date),\n  }));\n};\n\nconst formatDateLabel = (dateStr: string) => {\n  const date = new Date(dateStr);\n  const today = new Date();\n  const yesterday = new Date(today);\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  if (dateStr === today.toISOString().split(\"T\")[0]) {\n    return \"Heute\";\n  } else if (dateStr === yesterday.toISOString().split(\"T\")[0]) {\n    return \"Gestern\";\n  } else {\n    return date.toLocaleDateString(\"de-DE\", {\n      weekday: \"long\",\n      day: \"numeric\",\n      month: \"long\",\n    });\n  }\n};\n\nexport function PhotoGallery({ photosCount }: PhotoGalleryProps) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showSearch, setShowSearch] = useState(false);\n  const [showFilter, setShowFilter] = useState(false);\n  const [selectedFilter, setSelectedFilter] = useState<string | null>(null);\n  const [selectMode, setSelectMode] = useState(false);\n  const [selectedPhotos, setSelectedPhotos] = useState<Set<string>>(new Set());\n  const [fullscreenPhoto, setFullscreenPhoto] = useState<string | null>(null);\n\n  const longPressTimer = useRef<NodeJS.Timeout | null>(null);\n\n  // Encryption & Real Photo Storage\n  const { secretKey, hasKey } = useEncryption();\n  const {\n    photos: realPhotos,\n    uploadPhoto,\n    deletePhoto: deleteRealPhoto,\n    decryptPhoto,\n    isUploading,\n  } = useGalleryData(secretKey);\n\n  // Use real photos if available, otherwise use placeholders\n  const photos =\n    realPhotos.length > 0\n      ? realPhotos.map((p) => ({\n          id: p.id?.toString() || p.cid,\n          cid: p.cid,\n          placeholderUrl: \"\", // Will be decrypted on-demand\n          category: \"photo\",\n          date: p.uploadedAt.toISOString().split(\"T\")[0],\n          metadata: p, // Add metadata to identify real photos\n        }))\n      : generatePhotos(Math.min(photosCount, 50));\n\n  const photoGroups = groupPhotosByDate(photos);\n\n  const filteredPhotos = photos.filter((photo) => {\n    if (selectedFilter && photo.category !== selectedFilter) return false;\n    if (searchQuery && !photo.category.includes(searchQuery.toLowerCase()))\n      return false;\n    return true;\n  });\n\n  const filteredGroups = groupPhotosByDate(filteredPhotos);\n\n  const handlePhotoTap = (photoId: string, cid: string) => {\n    if (selectMode) {\n      setSelectedPhotos((prev) => {\n        const newSet = new Set(prev);\n        if (newSet.has(photoId)) {\n          newSet.delete(photoId);\n        } else {\n          newSet.add(photoId);\n        }\n        return newSet;\n      });\n    } else {\n      console.log(\"TODO: Show full photo from IPFS CID:\", cid);\n      setFullscreenPhoto(photoId);\n    }\n  };\n\n  const handleTouchStart = (photoId: string) => {\n    longPressTimer.current = setTimeout(() => {\n      setSelectMode(true);\n      setSelectedPhotos(new Set([photoId]));\n    }, 500);\n  };\n\n  const handleTouchEnd = () => {\n    if (longPressTimer.current) {\n      clearTimeout(longPressTimer.current);\n      longPressTimer.current = null;\n    }\n  };\n\n  const categories = [\n    { id: \"nature\", label: \"Natur\" },\n    { id: \"architecture\", label: \"Architektur\" },\n    { id: \"travel\", label: \"Reisen\" },\n    { id: \"food\", label: \"Essen\" },\n    { id: \"animals\", label: \"Tiere\" },\n    { id: \"city\", label: \"Stadt\" },\n    { id: \"landscape\", label: \"Landschaft\" },\n  ];\n\n  // Handle file upload\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    files.forEach((file) => uploadPhoto(file));\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-[#F2F2F7]\">\n      {/* Header */}\n      <header className=\"h-[60px] bg-white border-b border-[#E5E5EA] px-4 flex items-center justify-between shrink-0\">\n        {showSearch ? (\n          <div className=\"flex-1 flex items-center gap-3\">\n            <div className=\"flex-1 bg-[#E5E5EA] rounded-lg px-3 py-2 flex items-center gap-2\">\n              <Search className=\"w-4 h-4 text-[#8E8E93]\" />\n              <input\n                type=\"text\"\n                placeholder=\"Suchen...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"flex-1 bg-transparent text-[15px] text-[#1D1D1F] outline-none\"\n                autoFocus\n              />\n            </div>\n            <button\n              onClick={() => {\n                setShowSearch(false);\n                setSearchQuery(\"\");\n              }}\n              className=\"text-[17px] text-[#007AFF] ios-tap-target\"\n            >\n              Abbrechen\n            </button>\n          </div>\n        ) : selectMode ? (\n          <>\n            <button\n              onClick={() => {\n                setSelectMode(false);\n                setSelectedPhotos(new Set());\n              }}\n              className=\"text-[17px] text-[#007AFF] ios-tap-target\"\n            >\n              Abbrechen\n            </button>\n            <span className=\"sf-pro-display text-[17px] text-[#1D1D1F]\">\n              {selectedPhotos.size} ausgew√§hlt\n            </span>\n            <button\n              onClick={() => {\n                console.log(\n                  \"TODO: Delete selected photos\",\n                  Array.from(selectedPhotos),\n                );\n              }}\n              className=\"text-[17px] text-[#FF3B30] ios-tap-target\"\n            >\n              L√∂schen\n            </button>\n          </>\n        ) : (\n          <>\n            <div className=\"flex items-center gap-2\">\n              <Lock className=\"w-5 h-5 text-[#30D158]\" />\n              <h1 className=\"sf-pro-display text-[20px] text-[#1D1D1F]\">\n                Galerie\n              </h1>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              {/* Upload Button */}\n              <label className=\"ios-tap-target cursor-pointer\">\n                <Upload\n                  className={`w-6 h-6 ${isUploading ? \"text-[#8E8E93] animate-pulse\" : \"text-[#007AFF]\"}`}\n                />\n                <input\n                  type=\"file\"\n                  multiple\n                  accept=\"image/*\"\n                  onChange={handleFileUpload}\n                  className=\"hidden\"\n                  disabled={isUploading}\n                />\n              </label>\n              <button\n                onClick={() => setShowSearch(true)}\n                className=\"ios-tap-target\"\n              >\n                <Search className=\"w-6 h-6 text-[#007AFF]\" />\n              </button>\n              <button\n                onClick={() => setShowFilter(!showFilter)}\n                className=\"ios-tap-target\"\n              >\n                <SlidersHorizontal\n                  className={`w-6 h-6 ${selectedFilter ? \"text-[#30D158]\" : \"text-[#007AFF]\"}`}\n                />\n              </button>\n            </div>\n          </>\n        )}\n      </header>\n\n      {/* Filter Bar */}\n      {showFilter && (\n        <div className=\"bg-white border-b border-[#E5E5EA] px-4 py-3 shrink-0\">\n          <div className=\"flex gap-2 overflow-x-auto pb-1 -mx-1 px-1\">\n            <button\n              onClick={() => setSelectedFilter(null)}\n              className={`px-4 py-1.5 rounded-full text-[15px] whitespace-nowrap shrink-0 ${\n                selectedFilter === null\n                  ? \"bg-[#007AFF] text-white\"\n                  : \"bg-[#E5E5EA] text-[#1D1D1F]\"\n              }`}\n            >\n              Alle\n            </button>\n            {categories.map((cat) => (\n              <button\n                key={cat.id}\n                onClick={() => setSelectedFilter(cat.id)}\n                className={`px-4 py-1.5 rounded-full text-[15px] whitespace-nowrap shrink-0 ${\n                  selectedFilter === cat.id\n                    ? \"bg-[#007AFF] text-white\"\n                    : \"bg-[#E5E5EA] text-[#1D1D1F]\"\n                }`}\n              >\n                {cat.label}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Photo Grid with Date Groups */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {filteredGroups.map((group) => (\n          <div key={group.date} className=\"mb-2\">\n            {/* Date Header */}\n            <div className=\"sticky top-0 bg-[#F2F2F7]/95 backdrop-blur-sm px-3 py-2 z-10\">\n              <p className=\"text-[13px] font-semibold text-[#6E6E73]\">\n                {group.label}\n              </p>\n            </div>\n\n            {/* Photos Grid */}\n            <div className=\"grid grid-cols-3 gap-[2px] px-[2px]\">\n              {group.photos.map((photo) => {\n                // For real encrypted photos, we need to decrypt them\n                const isRealPhoto = photo.metadata !== undefined;\n\n                return (\n                  <button\n                    key={photo.id}\n                    onClick={() => handlePhotoTap(photo.id, photo.cid)}\n                    onTouchStart={() => handleTouchStart(photo.id)}\n                    onTouchEnd={handleTouchEnd}\n                    onTouchCancel={handleTouchEnd}\n                    onContextMenu={(e) => {\n                      e.preventDefault();\n                      setSelectMode(true);\n                      setSelectedPhotos(new Set([photo.id]));\n                    }}\n                    className=\"relative aspect-square overflow-hidden bg-[#E5E5EA]\"\n                  >\n                    {isRealPhoto ? (\n                      // Real encrypted photo - show placeholder until decryption\n                      <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-[#E5E5EA] to-[#C7C7CC]\">\n                        <Lock className=\"w-8 h-8 text-[#8E8E93]\" />\n                      </div>\n                    ) : photo.placeholderUrl ? (\n                      // Placeholder photo (demo data)\n                      <img\n                        src={photo.placeholderUrl}\n                        alt=\"\"\n                        className=\"w-full h-full object-cover\"\n                        loading=\"lazy\"\n                      />\n                    ) : null}\n\n                    {selectMode && (\n                      <div className=\"absolute inset-0 bg-black/20\">\n                        <div\n                          className={`absolute top-2 right-2 w-6 h-6 rounded-full border-2 flex items-center justify-center ${\n                            selectedPhotos.has(photo.id)\n                              ? \"bg-[#007AFF] border-[#007AFF]\"\n                              : \"border-white bg-black/30\"\n                          }`}\n                        >\n                          {selectedPhotos.has(photo.id) && (\n                            <Check className=\"w-4 h-4 text-white\" />\n                          )}\n                        </div>\n                      </div>\n                    )}\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n        ))}\n\n        {/* Help text */}\n        <div className=\"text-center py-6 px-4\">\n          <p className=\"text-[13px] text-[#8E8E93]\">\n            Lange dr√ºcken zum Ausw√§hlen ‚Ä¢ Tippen zum √ñffnen\n          </p>\n          <p className=\"text-[11px] text-[#C7C7CC] mt-1\">\n            {photos.length} Fotos verschl√ºsselt gespeichert\n          </p>\n        </div>\n      </div>\n\n      {/* Fullscreen Photo View */}\n      {fullscreenPhoto && (\n        <div className=\"fixed inset-0 bg-black z-50 flex flex-col\">\n          <header className=\"h-[60px] flex items-center justify-between px-4 bg-black/80\">\n            <button\n              onClick={() => setFullscreenPhoto(null)}\n              className=\"ios-tap-target\"\n            >\n              <X className=\"w-6 h-6 text-white\" />\n            </button>\n            <span className=\"text-[17px] text-white\">\n              Foto {photos.findIndex((p) => p.id === fullscreenPhoto) + 1} von{\" \"}\n              {photos.length}\n            </span>\n            <div className=\"w-10\" />\n          </header>\n          <div className=\"flex-1 flex items-center justify-center p-4\">\n            {(() => {\n              const photo = photos.find((p) => p.id === fullscreenPhoto);\n              if (!photo) return null;\n\n              // Real encrypted photo\n              if (photo.metadata) {\n                return (\n                  <div className=\"flex flex-col items-center gap-4\">\n                    <Lock className=\"w-16 h-16 text-white/60\" />\n                    <p className=\"text-white/80 text-center\">\n                      Entschl√ºsselung wird implementiert...\n                    </p>\n                  </div>\n                );\n              }\n\n              // Placeholder photo\n              if (photo.placeholderUrl) {\n                return (\n                  <img\n                    src={photo.placeholderUrl}\n                    alt=\"\"\n                    className=\"max-w-full max-h-full object-contain rounded-lg\"\n                  />\n                );\n              }\n\n              return null;\n            })()}\n          </div>\n          <footer className=\"h-[80px] flex items-center justify-center bg-black/80\">\n            <div className=\"flex items-center gap-2 text-[13px] text-white/60\">\n              <Lock className=\"w-4 h-4\" />\n              <span>Ende-zu-Ende verschl√ºsselt</span>\n            </div>\n          </footer>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3912, "column": 0}, "map": {"version":3,"sources":["file:///Users/einarjaeger/Documents/GitHub/Photovault/src/components/photovault/PhotoVaultApp.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { OnboardingFlow } from \"./OnboardingFlow\";\nimport { Dashboard } from \"./Dashboard\";\nimport { SettingsPanel } from \"./SettingsPanel\";\nimport { PhotoGallery } from \"./PhotoGallery\";\nimport { Images, Shield, Settings } from \"lucide-react\";\nimport ShieldLoader from \"@/components/ui/shield-loader\";\n\nexport interface AppState {\n  isOnboarded: boolean;\n  backupActive: boolean;\n  selectedPlan: \"free\" | \"backup-plus\";\n  autoBackupEnabled: boolean;\n  backgroundBackupEnabled: boolean;\n  photosCount: number;\n  lastBackup: string;\n  permanence: number;\n  encryptionKey: string;\n  backupPhrase: string[];\n  devices: {\n    id: string;\n    name: string;\n    lastActive: string;\n    syncing?: boolean;\n  }[];\n  photoSource: \"photos-app\" | \"files-app\";\n}\n\nexport const dummyBackupPhrase = [\n  \"beach\",\n  \"ocean\",\n  \"sunset\",\n  \"cloud\",\n  \"tree\",\n  \"river\",\n  \"mountain\",\n  \"forest\",\n  \"valley\",\n  \"lake\",\n  \"meadow\",\n  \"canyon\",\n];\n\nconst defaultState: AppState = {\n  isOnboarded: false,\n  backupActive: false,\n  selectedPlan: \"free\",\n  autoBackupEnabled: true,\n  backgroundBackupEnabled: false,\n  photosCount: 2847,\n  lastBackup: \"vor 2 Stunden\",\n  permanence: 99.9,\n  encryptionKey: \"\",\n  backupPhrase: dummyBackupPhrase,\n  devices: [\n    { id: \"1\", name: \"iPhone 14 Pro\", lastActive: \"Aktiv\" },\n    {\n      id: \"2\",\n      name: \"MacBook Pro\",\n      lastActive: \"Synchronisiert...\",\n      syncing: true,\n    },\n  ],\n  photoSource: \"photos-app\",\n};\n\nexport type Screen = \"onboarding\" | \"gallery\" | \"dashboard\" | \"settings\";\n\nexport function PhotoVaultApp() {\n  const [state, setState] = useState<AppState>(defaultState);\n  const [currentScreen, setCurrentScreen] = useState<Screen>(\"onboarding\");\n  const [onboardingStep, setOnboardingStep] = useState(1);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Check if user has been onboarded\n  useEffect(() => {\n    // Simulate loading time for demo purposes\n    const loadingTimer = setTimeout(() => {\n      const onboarded = localStorage.getItem(\"photovault_onboarded\");\n      if (onboarded === \"true\") {\n        setState((prev) => ({ ...prev, isOnboarded: true }));\n        setCurrentScreen(\"gallery\");\n      }\n      setIsLoading(false);\n    }, 2000); // Show loader for 2 seconds\n\n    return () => clearTimeout(loadingTimer);\n  }, []);\n\n  const completeOnboarding = () => {\n    localStorage.setItem(\"photovault_onboarded\", \"true\");\n    setState((prev) => ({ ...prev, isOnboarded: true }));\n    setCurrentScreen(\"gallery\");\n    console.log(\"Onboarding completed with state:\", state);\n  };\n\n  const restartOnboarding = () => {\n    console.log(\"TODO: Navigate to onboarding screen 1\");\n    localStorage.removeItem(\"photovault_onboarded\");\n    setState((prev) => ({ ...prev, isOnboarded: false }));\n    setOnboardingStep(1);\n    setCurrentScreen(\"onboarding\");\n  };\n\n  const navigateTo = (screen: Screen) => {\n    setCurrentScreen(screen);\n  };\n\n  // Show loading screen\n  if (isLoading) {\n    return <ShieldLoader />;\n  }\n\n  // Show onboarding without bottom nav\n  if (currentScreen === \"onboarding\") {\n    return (\n      <div className=\"min-h-screen ios-bg-gray\">\n        <div className=\"max-w-[428px] mx-auto min-h-screen bg-[#F2F2F7]\">\n          <OnboardingFlow\n            state={state}\n            setState={setState}\n            step={onboardingStep}\n            setStep={setOnboardingStep}\n            onComplete={completeOnboarding}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen ios-bg-gray\">\n      <div className=\"max-w-[428px] mx-auto min-h-screen bg-[#F2F2F7] flex flex-col\">\n        {/* Main Content Area */}\n        <div className=\"flex-1 overflow-hidden pb-[80px]\">\n          {currentScreen === \"gallery\" && (\n            <PhotoGallery photosCount={state.photosCount} />\n          )}\n          {currentScreen === \"dashboard\" && (\n            <Dashboard state={state} setState={setState} />\n          )}\n          {currentScreen === \"settings\" && (\n            <SettingsPanel\n              state={state}\n              setState={setState}\n              onRestartOnboarding={restartOnboarding}\n            />\n          )}\n        </div>\n\n        {/* Bottom Navigation */}\n        <BottomNavigation\n          currentScreen={currentScreen}\n          onNavigate={navigateTo}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction BottomNavigation({\n  currentScreen,\n  onNavigate,\n}: {\n  currentScreen: Screen;\n  onNavigate: (screen: Screen) => void;\n}) {\n  const tabs = [\n    { id: \"gallery\" as Screen, label: \"Galerie\", icon: Images },\n    { id: \"dashboard\" as Screen, label: \"Backup\", icon: Shield },\n    { id: \"settings\" as Screen, label: \"Einstellungen\", icon: Settings },\n  ];\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 h-[80px] bg-white border-t border-[#E5E5EA] flex items-start justify-around pt-2 pb-6 max-w-[428px] mx-auto\">\n      {tabs.map((tab) => {\n        const Icon = tab.icon;\n        const isActive = currentScreen === tab.id;\n        return (\n          <button\n            key={tab.id}\n            onClick={() => onNavigate(tab.id)}\n            className=\"flex flex-col items-center gap-1 ios-tap-target px-4\"\n          >\n            <Icon\n              className={`w-6 h-6 ${isActive ? \"text-[#007AFF]\" : \"text-[#6E6E73]\"}`}\n            />\n            <span\n              className={`text-[10px] ${isActive ? \"text-[#007AFF]\" : \"text-[#6E6E73]\"}`}\n            >\n              {tab.label}\n            </span>\n          </button>\n        );\n      })}\n    </nav>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}